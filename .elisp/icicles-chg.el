<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>EmacsWiki: icicles-chg.el</title><link rel="alternate" type="application/wiki" title="Edit this page" href="http://www.emacswiki.org/emacs?action=edit;id=icicles-chg.el" /><link type="text/css" rel="stylesheet" href="/emacs/wiki.css" /><meta name="robots" content="INDEX,FOLLOW" /><link rel="alternate" type="application/rss+xml" title="EmacsWiki" href="http://www.emacswiki.org/emacs?action=rss" /><link rel="alternate" type="application/rss+xml" title="EmacsWiki: icicles-chg.el" href="http://www.emacswiki.org/emacs?action=rss;rcidonly=icicles-chg.el" />
<link rel="alternate" type="application/rss+xml"
      title="Emacs Wiki with page content"
      href="http://www.emacswiki.org/emacs/full.rss" />
<link rel="alternate" type="application/rss+xml"
      title="Emacs Wiki with page content and diff"
      href="http://www.emacswiki.org/emacs/full-diff.rss" />
<link rel="alternate" type="application/rss+xml"
      title="Emacs Wiki including minor differences"
      href="http://www.emacswiki.org/emacs/minor-edits.rss" />
<link rel="alternate" type="application/rss+xml"
      title="Changes for icicles-chg.el only"
      href="http://www.emacswiki.org/emacs?action=rss;rcidonly=icicles-chg.el" /><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /></head><body class="http://www.emacswiki.org/emacs"><div class="header"><a class="logo" href="http://www.emacswiki.org/emacs/SiteMap"><img class="logo" src="/emacs_logo.png" alt="[Home]" /></a><span class="gotobar bar"><a class="local" href="http://www.emacswiki.org/emacs/SiteMap">SiteMap</a> <a class="local" href="http://www.emacswiki.org/emacs/Search">Search</a> <a class="local" href="http://www.emacswiki.org/emacs/ElispArea">ElispArea</a> <a class="local" href="http://www.emacswiki.org/emacs/HowTo">HowTo</a> <a class="local" href="http://www.emacswiki.org/emacs/Glossary">Glossary</a> <a class="local" href="http://www.emacswiki.org/emacs/RecentChanges">RecentChanges</a> <a class="local" href="http://www.emacswiki.org/emacs/News">News</a> <a class="local" href="http://www.emacswiki.org/emacs/Problems">Problems</a> <a class="local" href="http://www.emacswiki.org/emacs/Suggestions">Suggestions</a> </span>
<!-- Google CSE Search Box Begins  -->
<form class="tiny" action="http://www.google.com/cse" id="searchbox_004774160799092323420:6-ff2s0o6yi"><p>
<input type="hidden" name="cx" value="004774160799092323420:6-ff2s0o6yi" />
<input type="text" name="q" size="25" />
<input type="submit" name="sa" value="Search" />
</p></form>
<script type="text/javascript" src="http://www.google.com/coop/cse/brand?form=searchbox_004774160799092323420%3A6-ff2s0o6yi"></script>
<!-- Google CSE Search Box Ends -->
<h1><a title="Click to search for references to this page" rel="nofollow" href="http://www.google.com/cse?cx=004774160799092323420:6-ff2s0o6yi&amp;q=%22icicles-chg.el%22">icicles-chg.el</a></h1></div><div class="wrapper"><div class="wrapper"><div class="content browse"><p class="download"><a href="http://www.emacswiki.org/emacs-en/download/icicles-chg.el">Download</a></p><pre class="code"><span class="linecomment">;;; icicles-chg.el --- Change logs for Icicles libraries.</span>
<span class="linecomment">;;</span>
<span class="linecomment">;; Filename: icicles-chg.el</span>
<span class="linecomment">;; Description: Change logs for Icicles libraries.</span>
<span class="linecomment">;; Author: Drew Adams</span>
<span class="linecomment">;; Maintainer: Drew Adams</span>
<span class="linecomment">;; Copyright (C) 2007-2013, Drew Adams, all rights reserved.</span>
<span class="linecomment">;; Created: Tue Nov 27 07:47:53 2007</span>
<span class="linecomment">;; Version: 22.0</span>
<span class="linecomment">;; Last-Updated: Fri Jan 18 09:24:29 2013 (-0800)</span>
<span class="linecomment">;;           By: dradams</span>
<span class="linecomment">;;     Update #: 9580</span>
<span class="linecomment">;; URL: http://www.emacswiki.org/icicles-chg.el</span>
<span class="linecomment">;; Doc URL: http://www.emacswiki.org/Icicles</span>
<span class="linecomment">;; Keywords: extensions, help, abbrev, local, minibuffer,</span>
<span class="linecomment">;;           keys, apropos, completion, matching, regexp, command</span>
<span class="linecomment">;; Compatibility: GNU Emacs: 20.x, 21.x, 22.x, 23.x, 24.x</span>
<span class="linecomment">;;</span>
<span class="linecomment">;; Features that might be required by this library:</span>
<span class="linecomment">;;</span>
<span class="linecomment">;;   None</span>
<span class="linecomment">;;</span>
<span class="linecomment">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
<span class="linecomment">;;</span>
<span class="linecomment">;;; Commentary:</span>
<span class="linecomment">;;</span>
<span class="linecomment">;;  Change logs for Icicles libraries.</span>
<span class="linecomment">;;</span>
<span class="linecomment">;;  This file consolidates the change logs for all Icicles libraries.</span>
<span class="linecomment">;;  It contains no code.</span>
<span class="linecomment">;;</span>
<span class="linecomment">;;  Libraries `icicles-doc1.el' and `icicles-doc2.el' contain only</span>
<span class="linecomment">;;  documentation, and they do not have change logs.  Initially,</span>
<span class="linecomment">;;  everything was in one library, `icicles.el', so its change log is</span>
<span class="linecomment">;;  the oldest.</span>
<span class="linecomment">;;</span>
<span class="linecomment">;;  This is a long file.  To fontify it, you will likely need to</span>
<span class="linecomment">;;  increase `font-lock-maximum-size'.  (I use the value 1024000.)</span>
<span class="linecomment">;;</span>
<span class="linecomment">;; ****************************************************************************************************</span>
<span class="linecomment">;; NOTE: If you byte-compile Icicles (recommended), then WHENEVER `icicles-mac.el' is updated, you</span>
<span class="linecomment">;;       MUST LOAD `icicles-mac.el' (not just `icicles-mac.elc'), then compile it, then RECOMPILE *ALL*</span>
<span class="linecomment">;;       of the other Icicles source files as well.  This is normal for Lisp.  Code that depends on</span>
<span class="linecomment">;;       macros needs to be byte-compiled anew after loading the updated macros.</span>
<span class="linecomment">;; ****************************************************************************************************</span>
<span class="linecomment">;;</span>
<span class="linecomment">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
<span class="linecomment">;;</span>
<span class="linecomment">;; This program is free software; you can redistribute it and/or</span>
<span class="linecomment">;; modify it under the terms of the GNU General Public License as</span>
<span class="linecomment">;; published by the Free Software Foundation; either version 2, or</span>
<span class="linecomment">;; (at your option) any later version.</span>
<span class="linecomment">;;</span>
<span class="linecomment">;; This program is distributed in the hope that it will be useful,</span>
<span class="linecomment">;; but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="linecomment">;; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</span>
<span class="linecomment">;; General Public License for more details.</span>
<span class="linecomment">;;</span>
<span class="linecomment">;; You should have received a copy of the GNU General Public License</span>
<span class="linecomment">;; along with this program; see the file COPYING.  If not, write to</span>
<span class="linecomment">;; the Free Software Foundation, Inc., 51 Franklin Street, Fifth</span>
<span class="linecomment">;; Floor, Boston, MA 02110-1301, USA.</span>
<span class="linecomment">;;</span>
<span class="linecomment">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
 
<span class="linecomment">;;(@&gt; "Index")</span>
<span class="linecomment">;;</span>
<span class="linecomment">;;  If you have library `linkd.el' and Emacs 22 or later, load</span>
<span class="linecomment">;;  `linkd.el' and turn on `linkd-mode' now.  It lets you easily</span>
<span class="linecomment">;;  navigate around the sections of this doc.  Linkd mode will</span>
<span class="linecomment">;;  highlight this Index, as well as the cross-references and section</span>
<span class="linecomment">;;  headings throughout this file.  You can get `linkd.el' here:</span>
<span class="linecomment">;;  http://dto.freeshell.org/notebook/Linkd.html.</span>
<span class="linecomment">;;</span>
<span class="linecomment">;;  (@&gt; "CHANGE LOG FOR `icicles-cmd1.el'")</span>
<span class="linecomment">;;  (@&gt; "CHANGE LOG FOR `icicles-cmd2.el'")</span>
<span class="linecomment">;;  (@&gt; "CHANGE LOG FOR `icicles-face.el'")</span>
<span class="linecomment">;;  (@&gt; "CHANGE LOG FOR `icicles-fn.el'")</span>
<span class="linecomment">;;  (@&gt; "CHANGE LOG FOR `icicles-mac.el'")</span>
<span class="linecomment">;;  (@&gt; "CHANGE LOG FOR `icicles-mcmd.el'")</span>
<span class="linecomment">;;  (@&gt; "CHANGE LOG FOR `icicles-mode.el'")</span>
<span class="linecomment">;;  (@&gt; "CHANGE LOG FOR `icicles-opt.el'")</span>
<span class="linecomment">;;  (@&gt; "CHANGE LOG FOR `icicles-var.el'")</span>
<span class="linecomment">;;  (@&gt; "CHANGE LOG FOR `icicles.el'")</span>
<span class="linecomment">;;  (@&gt; "CHANGE LOG FOR `icicles-cmd.el'" - Deprecated file)</span>
 
<span class="linecomment">;;;(@* "CHANGE LOG FOR `icicles-cmd1.el'")</span>
<span class="linecomment">;;</span>
<span class="linecomment">;; 2013/01/06 dadams</span>
<span class="linecomment">;;     icicle-execute-extended-command-1:</span>
<span class="linecomment">;;       Extra safeguards: Ensure CMD is fboundp before calling symbol-function.</span>
<span class="linecomment">;;                         Ensure it is commandp before calling it interactively.  Error if not.</span>
<span class="linecomment">;; 2013/01/05 dadams</span>
<span class="linecomment">;;     icicle-bookmark-*-narrow: No-op unless (featurep 'bookmark+).</span>
<span class="linecomment">;;     icicle-(delete-file|dired|find-file(-absolute|-of-content|-in-tags-table)|recent-file|</span>
<span class="linecomment">;;             locate(-file)|(file|directory)-list):</span>
<span class="linecomment">;;         Updated doc string for new C-x C-t bindings.</span>
<span class="linecomment">;; 2013/01/04 dadams</span>
<span class="linecomment">;;     icicle-bookmark-(autofile|autonamed)-narrow:</span>
<span class="linecomment">;;       Use icicle-transform-multi-completion, not icicle-mctized-display-candidate, like others.</span>
<span class="linecomment">;; 2013/01/02 dadams</span>
<span class="linecomment">;;     icicle-other-window-or-frame: Use 1on1-other-frame.</span>
<span class="linecomment">;; 2012/12/21 dadams</span>
<span class="linecomment">;;     icicle-buffer-multi-complete, icicle-file-of-content-apropos-complete-match:</span>
<span class="linecomment">;;       Added filtering by icicle-(buffer|find-file-of-content)-skip-hook.  Thx to C. Schmidt.</span>
<span class="linecomment">;; 2012/12/20 dadams</span>
<span class="linecomment">;;     Removed:  icicle-find-file-of-content-multi-complete.  Use only *-apropos-complete-match.</span>
<span class="linecomment">;;     icicle-file-of-content-apropos-complete-match:</span>
<span class="linecomment">;;       Do not use find-file-noselect, except for a dir.</span>
<span class="linecomment">;;       Use find-buffer-visiting or create-file-buffer, and with-current-buffer, insert-file-contents.</span>
<span class="linecomment">;;       Add buffer to new-bufs--to-kill.</span>
<span class="linecomment">;;     icicle-find-file-of-content(-other-window):</span>
<span class="linecomment">;;       Do not bind icicle-read-file-name-internal-fn to icicle-find-file-of-content-multi-complete.</span>
<span class="linecomment">;;       revert-buffer, so use correct mode.</span>
<span class="linecomment">;; 2012/12/15 dadams</span>
<span class="linecomment">;;     icicle-find-file-of-content*:</span>
<span class="linecomment">;;       Bind icicle-apropos-complete-match-fn to icicle-file-of-content-apropos-complete-match, to fix</span>
<span class="linecomment">;;         apropos completion</span>
<span class="linecomment">;;       Bind icicle-compute-narrowing-regexp-p to t, for narrowing optimization.</span>
<span class="linecomment">;;       Set buffer-modified-p to nil before calling kill-buffer.</span>
<span class="linecomment">;;     icicle-file-of-content-apropos-complete-match:</span>
<span class="linecomment">;;       Require that each file name is matched by icicle-narrow-regexp (optimization for narrowing).</span>
<span class="linecomment">;; 2012/12/14 dadams</span>
<span class="linecomment">;;     icicle-describe-option-of-type:</span>
<span class="linecomment">;;       Bind icicle-last-apropos-complete-match-fn to icicle-multi-comp-apropos-complete-match,</span>
<span class="linecomment">;;       for progressive completion.  Bind icicle-dot-string to icicle-anychar-regexp.</span>
<span class="linecomment">;;       Updated doc to reflect improved behavior.</span>
<span class="linecomment">;; 2012/12/12 dadams</span>
<span class="linecomment">;;     Added: icicle-buffer-apropos-complete-match, icicle-file-of-content-apropos-complete-match.</span>
<span class="linecomment">;;     icicle-buffer(-other-window):</span>
<span class="linecomment">;;       Bind icicle-last-apropos-complete-match-fn  to icicle-buffer-apropos-complete-match.</span>
<span class="linecomment">;;       Move binding of icicle-apropos-complete-match-fn to post-bindings.</span>
<span class="linecomment">;;     icicle-find-file-of-content(-other-window):</span>
<span class="linecomment">;;       Bind icicle-last-apropos-complete-match-fn to icicle-file-of-content-apropos-complete-match.</span>
<span class="linecomment">;;       Reverted the 12/07 change.  Binding *-apropos-complete-match-fn to nil broke apropos compl.</span>
<span class="linecomment">;;     icicle-find-file-of-content-multi-complete:</span>
<span class="linecomment">;;       Rewrote.  Do not use all-completions.  Use completion-table-in-turn for everything, passing</span>
<span class="linecomment">;;       content-matching predicate.  </span>
<span class="linecomment">;;     icicle-execute-extended-command-1, icicle-command-abbrev-action:</span>
<span class="linecomment">;;       Bind completion-annotate-function to nil, to cancel top-level binding.</span>
<span class="linecomment">;; 2012/12/07 dadams</span>
<span class="linecomment">;;     icicle-find-file-of-content(-other-window):</span>
<span class="linecomment">;;       Restored binding of icicle-apropos-complete-match-fn to nil.</span>
<span class="linecomment">;; 2012/12/02 dadams</span>
<span class="linecomment">;;     Removed: icicle-find-file-of-content-read-file-name (use icicle-read-file-name-default instead).</span>
<span class="linecomment">;;     icicle-find-file-of-content(-other-window):</span>
<span class="linecomment">;;       Bind icicle-read-file-name-internal-fn, not read-file-name-function.</span>
<span class="linecomment">;;       No longer bind icicle-apropos-complete-match-fn to nil.</span>
<span class="linecomment">;; 2012/12/01 dadams</span>
<span class="linecomment">;;     icicle-find-file-of-content-multi-complete:</span>
<span class="linecomment">;;       Use icicle-completion--embedded-envvar-table & completion-file-name-table, not internal Emacs.</span>
<span class="linecomment">;; 2012/11/29 dadams</span>
<span class="linecomment">;;     icicle-find-file-of-content: Typo: removed -other-window.</span>
<span class="linecomment">;; 2012/11/28 dadams</span>
<span class="linecomment">;;     icicle-apropos-value: Minor corrections.  And treat C-u case like C-0 for C-$.</span>
<span class="linecomment">;;     icicle-completing-yank:</span>
<span class="linecomment">;;       Do not icicle-delete-dups when constructing cands.  Let icicle-transform-function do it.</span>
<span class="linecomment">;; 2012/11/26 dadams</span>
<span class="linecomment">;;     Added: icicle-apropos-value.  Thx to Michael Heerdegen.</span>
<span class="linecomment">;;     icicle-execute-extended-command(-1): Save and restore icicle-toggle-transforming-message.</span>
<span class="linecomment">;; 2012/11/19 dadams</span>
<span class="linecomment">;;     icicle-execute-extended-command-1: Show key-reminder after invoking CMD.  Thx to M. Heerdegen.</span>
<span class="linecomment">;;     icicle-customize-apropos: lexical-let -&gt; let.  Put PATTERN in progress msg.  Add comma for TYPE.</span>
<span class="linecomment">;;     icicle-find-tag-define-candidates-1: Put regexp in progress msg.</span>
<span class="linecomment">;; 2012/11/17 dadams</span>
<span class="linecomment">;;     icicle-execute-extended-command-1: Show key-reminder msg before sit-for.  Thx to M. Heerdegen.</span>
<span class="linecomment">;; 2012/11/10 dadams</span>
<span class="linecomment">;;     custom-variable-p, icicle-binary-option-p: icicle-get-safe -&gt; get.</span>
<span class="linecomment">;;     icicle-increment-(option|variable): intern -&gt; intern-soft.  Thx to Michael Heerdegen.</span>
<span class="linecomment">;; 2012/11/08 dadams</span>
<span class="linecomment">;;     custom-variable-p, icicle-execute-extended-command-1, icicle-binary-option-p:</span>
<span class="linecomment">;;       Use icicle-get-safe.</span>
<span class="linecomment">;;     Doc strings: Use \\[...] more.</span>
<span class="linecomment">;; 2012/11/07 dadams</span>
<span class="linecomment">;;     icicle-zap-to-char: char-to-string -&gt; string.</span>
<span class="linecomment">;; 2012/11/03 dadams</span>
<span class="linecomment">;;     Typo in eval-when-compile around icicle-bbdb-complete-name.</span>
<span class="linecomment">;; 2012/11/02 dadams</span>
<span class="linecomment">;;     icicle-buffer-multi-complete: Use prog1 around content search in *-remove-if-not.</span>
<span class="linecomment">;;     Wrap icicle-bbdb-complete-name in eval-when-compile to avoid byte-compile error for BBDB 3.02.</span>
<span class="linecomment">;;     icicle-(buffer|file-of-content)-multi-complete: Put back prepending ^ for prefix mode.</span>
<span class="linecomment">;; 2012/11/01 dadams</span>
<span class="linecomment">;;     icicle-(buffer|file-of-content)-multi-complete: Handle metadata COMPLETION-MODE arg.</span>
<span class="linecomment">;;                                                     Comment out prepending ^ for prefix mode.</span>
<span class="linecomment">;; 2012/10/28 dadams</span>
<span class="linecomment">;;     icicle-execute-extended-command, icicle-command-abbrev: With icicle-pre-minibuffer-buffer.</span>
<span class="linecomment">;; 2012/10/27 dadams</span>
<span class="linecomment">;;     Added: icicle-bbdb-complete-mail (version for BBDB 3.02).</span>
<span class="linecomment">;;     icicle-execute-extended-command, icicle-command-abbrev:</span>
<span class="linecomment">;;       Bind icicle-last-transform-function: show only bound cmds.  Thx to Michael Heerdegen.</span>
<span class="linecomment">;;       Bind completion-annotate-function: annotate with key bindings.</span>
<span class="linecomment">;; 2012/10/21 dadams</span>
<span class="linecomment">;;     Added: icicle-cached-files-without-buffers, icicle-recent-files-without-buffers.</span>
<span class="linecomment">;;     icicle-buffer-multi-complete, icicle-buffer(-other-window):</span>
<span class="linecomment">;;       Add file names from recentf-list and file-cache-alist as candidates.</span>
<span class="linecomment">;; 2012/10/20 dadams</span>
<span class="linecomment">;;     icicle-cd-for-(abs|loc)-files:</span>
<span class="linecomment">;;       Same change as 2012/08/27 fix to *-make-directory: Use dir in minibuffer as default.</span>
<span class="linecomment">;; 2012/10/18 dadams</span>
<span class="linecomment">;;     icicle-directory-list: New feature: proxy candidates = vars with dir-list (i.e., path) values.</span>
<span class="linecomment">;;     icicle-locate-file-1:</span>
<span class="linecomment">;;       New feature: Treat plain C-u and C-u C-u, prompting for dir list.</span>
<span class="linecomment">;;       Ensure correct prefix arg treatment for icicle-locate (vs *-locate-file*).</span>
<span class="linecomment">;;     icicle-string-list: Last code: reset icicle-proxy-candidates to ().</span>
<span class="linecomment">;; 2012/10/09 dadams</span>
<span class="linecomment">;;     icicle-customize-face*, icicle(-customize)-apropos-options-of-type,</span>
<span class="linecomment">;;       icicle-describe-option-of-type, icicle-dired-saved-file-candidates*, icicle-bookmark*,</span>
<span class="linecomment">;;       icicle-buffer*, icicle-visit-marked-file-of-content*, icicle-send-signal-to-process,</span>
<span class="linecomment">;;       icicle-find-file-absolute*, icicle-find-file-of-content*, icicle-recent-file*,</span>
<span class="linecomment">;;       icicle-locate-file-1, icicle-find-file-in-tags-table*, icicle-face-list, icicle-bookmark-list:</span>
<span class="linecomment">;;         Bind icicle-multi-completing-p.</span>
<span class="linecomment">;;       icicle-cd-for-(abs|loc)-files: Test icicle-multi-completing-p, not icicle-list-use-nth-parts.</span>
<span class="linecomment">;; 2012/10/05 dadams</span>
<span class="linecomment">;;     Added: icicle-find-file-of-content(-other-window|-multi-complete|-read-file-name).</span>
<span class="linecomment">;;     icicle-buffer-multi-complete: Add new bufs to NEW-BUFS--TO-KILL, so can kill them when done.</span>
<span class="linecomment">;;     icicle-visit-marked-file-of-content(-other-window):</span>
<span class="linecomment">;;       Action arg: Transform multi-completion before passing to switch-to-buffer*.</span>
<span class="linecomment">;;                   Save visited buffer to NEW-BUFS--TO-KEEP.</span>
<span class="linecomment">;;       When done, kill any unused buffers that were created, per new option</span>
<span class="linecomment">;;         icicle-kill-visited-buffers-flag.  But prefix arg flips that.</span>
<span class="linecomment">;; 2012/10/04 dadams</span>
<span class="linecomment">;;     icicle-find-file(-other-window): If precede C-! with prefix arg, then open all read-only.</span>
<span class="linecomment">;; 2012/10/02 dadams</span>
<span class="linecomment">;;     icicle-describe-opt-of-type-complete, icicle-buffer-multi-complete:</span>
<span class="linecomment">;;       In try-completion: change PRED to a predicate that works on a singleton list, not a string.</span>
<span class="linecomment">;; 2012/09/24 dadams</span>
<span class="linecomment">;;     icicle-recent-file(-other-window): Bind icicle-transform-before-sort-p to t,</span>
<span class="linecomment">;;                                             icicle-sort-comparer to icicle-last-accessed-first-p.</span>
<span class="linecomment">;; 2012/09/22 dadams</span>
<span class="linecomment">;;     icicle-bookmark-jump-1:</span>
<span class="linecomment">;;       Use full bookmark, not name, after jump and before crosshairs, in case renamed autonamed bmk.</span>
<span class="linecomment">;; 2012/09/15 dadams</span>
<span class="linecomment">;;     icicle-visit-marked-file-of-content*: *-remove-if -&gt; use filter as dired-get-marked-files arg.</span>
<span class="linecomment">;; 2012/09/11 dadams</span>
<span class="linecomment">;;     Renamed:</span>
<span class="linecomment">;;       *-buffer(-other-window) to *-buffer-no-search(-other-window)</span>
<span class="linecomment">;;       *-buffer-of-content(-other-window|complete) to *-buffer(-other-window|multi-complete)</span>
<span class="linecomment">;;     icicle-buffer(-other-window): Simplified prompt (no multi-completion hint).</span>
<span class="linecomment">;;     Updated doc strings for this icicle-buffer switch.</span>
<span class="linecomment">;;     icicle-default-buffer-names: Respect icicle-buffer-ignore-space-prefix-flag.  Optimize a bit.</span>
<span class="linecomment">;; 2012/09/09 dadams</span>
<span class="linecomment">;;     Added: icicle-visit-marked-file-of-content(-other-window).</span>
<span class="linecomment">;;     icicle-default-buffer-names: If BNAME is not in icicle-bufflist then do not use it.</span>
<span class="linecomment">;; 2012/09/08 dadams</span>
<span class="linecomment">;;     Added: icicle-buffer-of-content(-other-window), icicle-buffer-of-content-complete.</span>
<span class="linecomment">;;     icicle-buffer-list: Remove binding of icicle-ignore-space-prefix-flag.</span>
<span class="linecomment">;; 2012/09/07 dadams</span>
<span class="linecomment">;;     icicle-buffer(-other-window): Exclude icicle-orig-buff from candidates.</span>
<span class="linecomment">;; 2012/08/13 dadams</span>
<span class="linecomment">;;     icicle-customize-face: Doc string improvement.</span>
<span class="linecomment">;; 2012/08/10 dadams</span>
<span class="linecomment">;;     icicle-bookmark-set: If bookmark-make-record provides a name, use that as default.</span>
<span class="linecomment">;; 2012/08/06 dadams</span>
<span class="linecomment">;;     Renamed old-* to icicle-ORIG-*:</span>
<span class="linecomment">;;       icicle-ORIG-file, icicle-ORIG-customize-face, icicle-ORIG-customize-face-other-window,</span>
<span class="linecomment">;;       icicle-ORIG-dabbrev-completion, icicle-ORIG-lisp-complete-symbol,</span>
<span class="linecomment">;;       icicle-ORIG-lisp-completion-at-point, icicle-ORIG-repeat-complex-command.</span>
<span class="linecomment">;; 2012/07/31 dadams</span>
<span class="linecomment">;;     Added widgets icicle-file, old-file.  Added command icicle-widget-file-complete.</span>
<span class="linecomment">;;     icicle-comint-dynamic-complete(-as)-filename, icicle-comint-replace-by-expanded-filename:</span>
<span class="linecomment">;;       Added optional (prefix) arg REPLACE-TO-EOL-P.</span>
<span class="linecomment">;; 2012/07/22 dadams</span>
<span class="linecomment">;;     icicle-pp-display-expression: Do not try to select old-window if it is no longer live.</span>
<span class="linecomment">;; 2012/07/21 dadams</span>
<span class="linecomment">;;     Replace defun of *-comint-completion-at-point by defalias to *-comint-dynamic-complete.</span>
<span class="linecomment">;;     icicle-comint-replace-orig-completion-fns: Redefined for new format of</span>
<span class="linecomment">;;       icicle-comint-dynamic-complete-replacements.  Thx to Christopher Schmidt.</span>
<span class="linecomment">;;     icicle-execute-extended-command-1: Pass non-nil NOINDIRECT arg to where-is-internal.</span>
<span class="linecomment">;; 2012/07/19 dadams</span>
<span class="linecomment">;;     icicle-default-buffer-names: Added optional ARG.  Use in all calls to it.</span>
<span class="linecomment">;;     icicle-buffer-list: Allow also Dired buffers for positive prefix arg.</span>
<span class="linecomment">;;     icicle-(kill|insert)-buffer, icicle-add-buffer-candidate:</span>
<span class="linecomment">;;       Removed doc string content - just refer to icicle-buffer doc.</span>
<span class="linecomment">;; 2012/07/10 dadams</span>
<span class="linecomment">;;     icicle-comint-dynamic-complete-as-filename:</span>
<span class="linecomment">;;       (file-name-nondir* (directory-file-name...)) -&gt; (directory-file-name (file-relative-name...))</span>
<span class="linecomment">;;       Thx to Christopher Schmidt.</span>
<span class="linecomment">;; 2012/07/08 dadams</span>
<span class="linecomment">;;     Added icicle-comint-completion-at-point.  Thx to Christopher Schmidt and Michael Heerdegen.</span>
<span class="linecomment">;; 2012/06/29 dadams</span>
<span class="linecomment">;;     icicle-command-abbrev:</span>
<span class="linecomment">;;       Bind icicle-sort-comparer to icicle-proxy-candidate-first-p, not</span>
<span class="linecomment">;;         icicle-command-abbrev-used-more-p.  icicle-command-abbrev-used-more-p is second sort order.</span>
<span class="linecomment">;;       Bind icicle-allowed-sort-predicate (new), to allow icicle-command-abbrev-used-more-p.</span>
<span class="linecomment">;;       Improved doc string, mentioning icicle-command-abbrev-alist.</span>
<span class="linecomment">;;     icicle-command-abbrev-action:</span>
<span class="linecomment">;;       Add abbrev-or-cmd to icicle-commands-for-abbrev if it is in icicle-command-abbrev-alist.</span>
<span class="linecomment">;;       Do not bind icicle-sort-comparer here - not needed (?).</span>
<span class="linecomment">;;       During completion, bind icicle-current-input to abbrev-or-cmd.</span>
<span class="linecomment">;;     Removed #' from lambdas.</span>
<span class="linecomment">;; 2012/06/24 dadams</span>
<span class="linecomment">;;     icicle-shell-dynamic-complete-as-command:</span>
<span class="linecomment">;;       Use shell-command-to-string in *Help* explicitly, not just shell-command.</span>
<span class="linecomment">;;       Thx to Christopher Schmidt & Michael Heerdegen.</span>
<span class="linecomment">;; 2012/06/09 dadams</span>
<span class="linecomment">;;     icicle-pp-display-expression: Use backquote+comma, not lexical-let (bug fix).</span>
<span class="linecomment">;; 2012/06/04 dadams</span>
<span class="linecomment">;;     Comment or otherwise handle free vars in lambdas: some lexical-let, some backquoting.</span>
<span class="linecomment">;; 2012/06/03 dadams</span>
<span class="linecomment">;;     icicle-execute-extended-command-1:</span>
<span class="linecomment">;;       Do not show "You can invoke..." message for multi-command use.  Do it only for top-level M-x.</span>
<span class="linecomment">;;       Use backquote+comma to eliminate free var CMD.</span>
<span class="linecomment">;; 2012/05/30 dadams</span>
<span class="linecomment">;;     icicle-dired-insert-as-subdir: Include default-directory as candidate for ANCESTOR-DIR.</span>
<span class="linecomment">;; 2012/05/25 dadams</span>
<span class="linecomment">;;     Added: icicle-dired-insert-as-subdir.</span>
<span class="linecomment">;; 2012/05/22 dadams</span>
<span class="linecomment">;;     icicle-comint-dynamic-complete-as-filename, icicle-dired-(project|saved-file-candidates(*)),</span>
<span class="linecomment">;;       icicle-grep-saved-file-candidates:</span>
<span class="linecomment">;;         Test with icicle-file-remote-p before file-exists-p, to avoid Tramp.</span>
<span class="linecomment">;; 2012/05/13 dadams</span>
<span class="linecomment">;;     Added: icicle-dired-save-marked(-more|to-cache-file|to-fileset|to-variable)-recursive,</span>
<span class="linecomment">;; 2012/04/22 dadams</span>
<span class="linecomment">;;     Added: icicle-buffer-name-prompt.</span>
<span class="linecomment">;;     Removed: icicle-filter-buffer-cands-for-mode (replaced by *-(remove|keep-only)* in *-mcmd.el).</span>
<span class="linecomment">;;     icicle-(kill|insert)-buffer, icicle-buffer(-other-window), icicle-add-buffer-candidate:</span>
<span class="linecomment">;;       Use icicle-buffer-name-prompt, icicle-(un)bind-buffer-candidate-keys.  Updated doc string.</span>
<span class="linecomment">;;     icicle-add-buffer-candidate:</span>
<span class="linecomment">;;       Bind icicle-delete-candidate-object to icicle-remove-buffer-candidate-action (as previously).</span>
<span class="linecomment">;; 2012/04/09 dadams</span>
<span class="linecomment">;;     Fixed typos: double single-quotes in autoload cookies.</span>
<span class="linecomment">;; 2012/04/08 dadams</span>
<span class="linecomment">;;     Make autoload cookies for commands load icicles[.el] explicitly.</span>
<span class="linecomment">;; 2012/04/07 dadams</span>
<span class="linecomment">;;     icicle-bookmark-set:</span>
<span class="linecomment">;;       Updated for Bookmark+ changes, including new defaulting, removing region handling, and making</span>
<span class="linecomment">;;         bmk temporary.</span>
<span class="linecomment">;;       Updated doc string with info from icicle-bookmark-cmd.  Refer to bookmark-set doc.</span>
<span class="linecomment">;;     icicle-bookmark-cmd:</span>
<span class="linecomment">;;       Updated doc string.  Refer to icicle-bookmark-set doc.</span>
<span class="linecomment">;; 2012/04/04 dadams</span>
<span class="linecomment">;;     Moved hint about (S-)TAB from icicle-read-args-w-val-satisfying to callers that need it.</span>
<span class="linecomment">;; 2012/04/03 dadams</span>
<span class="linecomment">;;     Added: icicle-apropos-vars-w-val-satisfying, icicle-describe-var-w-val-satisfying,</span>
<span class="linecomment">;;            icicle-customize-opts-w-val-satisfying, icicle-read-args-w-val-satisfying.</span>
<span class="linecomment">;;     icicle-send-signal-to-process:</span>
<span class="linecomment">;;       Moved it and icicle-describe-process here from *-cmd2.el.  Added autoload cookie.</span>
<span class="linecomment">;;       Changed definition guard condition to locate-library.    Updated def, including to</span>
<span class="linecomment">;;       require proced.el.</span>
<span class="linecomment">;;     icicle-kmacro:</span>
<span class="linecomment">;;       Changed autoload cookie to be conditional on locate-library.</span>
<span class="linecomment">;;       Changed definition guard condition to locate-library.  Updated def to require kmacro.el.</span>
<span class="linecomment">;;     Moved here from *cmd2.el:</span>
<span class="linecomment">;;      icicle-apropos, icicle-apropos-command, icicle-apropos-function, icicle-apropos-option,</span>
<span class="linecomment">;;      icicle-apropos-options-of-type, icicle-apropos-variable, icicle-apropos-zippy,</span>
<span class="linecomment">;;      icicle-apropos-opt-action, icicle-describe-option-of-type, icicle-describe-opt-action,</span>
<span class="linecomment">;;      icicle-describe-opt-of-type-complete.</span>
<span class="linecomment">;;      Plus compile-time requires of libraries yow, cookie1, apropos-fn+var.</span>
<span class="linecomment">;; 2012/04/01 dadams</span>
<span class="linecomment">;;     Removed: old-customize-apropos* (no longer redefine automatically for Icicle mode).</span>
<span class="linecomment">;; 2012/03/31 dadams</span>
<span class="linecomment">;;     icicle-customize-apropos:  Do not call split-string if string is empty.</span>
<span class="linecomment">;;                                Allow word list for Emacs 22+, not 24+.</span>
<span class="linecomment">;;     icicle-customize-apropos*: Added optional MSGP arg - display progress msg if non-nil.</span>
<span class="linecomment">;; 2012/03/30 dadams</span>
<span class="linecomment">;;     Added: icicle-customize-apropos-opt-action.</span>
<span class="linecomment">;;     icicle-customize-apropos-options-of-type: Rewrote as a multi-command using multi-completions.</span>
<span class="linecomment">;;     icicle-customize-apropos*:</span>
<span class="linecomment">;;       Updated wrt Emacs 24 (handle PATTERN).  Fixed vanilla Emacs bugs #11124, #11126, #11132.</span>
<span class="linecomment">;; 2012/03/29 dadams</span>
<span class="linecomment">;;     icicle-customize-apropos-options-of-type:</span>
<span class="linecomment">;;       Pass inherit-or-value to icicle-var-is-of-type-p as the MODE.</span>
<span class="linecomment">;;       Handle the case where the user just enters a regexp, without using completion: mapatoms.</span>
<span class="linecomment">;;     icicle-customize-apropos: Use backquote and comma on regexp in lambda.</span>
<span class="linecomment">;; 2012/03/28 dadams</span>
<span class="linecomment">;;     Changed FILE arg in autoloads by removing .el, so .elc will be loaded if available.</span>
<span class="linecomment">;; 2012/03/10 dadams</span>
<span class="linecomment">;;     Added: icicle-make-bookmark-candidate (factored out).</span>
<span class="linecomment">;;     icicle-bookmark(-set|-list|-other-window):</span>
<span class="linecomment">;;       Use icicle-make-bookmark-candidate to define icicle-candidates-alist.</span>
<span class="linecomment">;; 2012/03/09 dadams</span>
<span class="linecomment">;;     icicle-bookmarked-file-list: Call bookmark-maybe-load-default-file.</span>
<span class="linecomment">;;     icicle-customize-apropos(-faces|-groups|-options(-of-type)), icicle-(re)set-option-to-(t|nil),</span>
<span class="linecomment">;;       icicle-toggle-option, icicle-increment-(option|variable), icicle-doremi-increment-variable+,</span>
<span class="linecomment">;;       icicle-command-abbrev, icicle-execute-named-keyboard-macro, icicle-buffer-list:</span>
<span class="linecomment">;;         When Icomplete mode, use normal PRED, not *-must-pass-after-match-predicate.</span>
<span class="linecomment">;;     icicle-execute-extended-command: Likewise - redid it.</span>
<span class="linecomment">;;     icicle-customize-apropos-options: If prefix arg, still use user-variable-p also (or).</span>
<span class="linecomment">;; 2012/03/03 dadams</span>
<span class="linecomment">;;     icicle-execute-extended-command:</span>
<span class="linecomment">;;       If in Icomplete mode, use the normal PRED arg, instead of *-must-pass-after-match-predicate.</span>
<span class="linecomment">;; 2012/02/26 dadams</span>
<span class="linecomment">;;     Update to reflect Bookmark+ changes (bindings etc.).</span>
<span class="linecomment">;;       Added: icicle-bookmark-autofile-(all|some)-tags(-regexp)(-other-window).</span>
<span class="linecomment">;;       icicle-bookmark: Update doc string for binding changes.</span>
<span class="linecomment">;;       icicle-bookmark-bind-narrow-commands: Update bindings to reflect Bookmark+ changes.</span>
<span class="linecomment">;;       icicle-bookmark-help-string: Initialize no-position-p from bookmark, so it works if no pos.</span>
<span class="linecomment">;;     Typo: icicle-bookmark-this-dir-file-all-tags -&gt; icicle-bookmark-file-this-dir-all-tags.</span>
<span class="linecomment">;; 2012/02/11 dadams</span>
<span class="linecomment">;;     Applied renaming.</span>
<span class="linecomment">;; 2012/01/31 dadams</span>
<span class="linecomment">;;     icicle-yank-pop-commands, icicle-completing-yank: Minor changes to doc strings.</span>
<span class="linecomment">;; 2012/01/20 dadams</span>
<span class="linecomment">;;     icicle-bookmark-*-tags(-other-window): Pass prefix arg to bmkp-read-tags-completing, to refresh.</span>
<span class="linecomment">;; 2012/01/15 dadams</span>
<span class="linecomment">;;     icicle-bookmark-set: Added missing quote mark for (icicle-)bookmark-history.</span>
<span class="linecomment">;; 2012/01/14 dadams</span>
<span class="linecomment">;;     Added: icicle-zap-to-char.</span>
<span class="linecomment">;; 2012/01/08 dadams</span>
<span class="linecomment">;;     Added: icicle-yank-pop-commands, icicle-bookmark-bind-narrow-commands,</span>
<span class="linecomment">;;            icicle-bookmark-(autofile|autonamed(-this-buffer)|file-this-dir|temporary)-narrow.</span>
<span class="linecomment">;;     Soft-require second-sel.el.</span>
<span class="linecomment">;;     icicle-bookmark-set: Mention narrowing in doc string.</span>
<span class="linecomment">;;     icicle-bookmark: Suggest in doc string to refresh cache if error.</span>
<span class="linecomment">;;                      Added C-x j bindings to doc string: a, C-f, x, # ., # #.</span>
<span class="linecomment">;;     icicle-bookmark(-set|-other-window): Use icicle-bookmark-bind-narrow-commands.</span>
<span class="linecomment">;;     icicle-bookmark-*-narrow:</span>
<span class="linecomment">;;       Use icicle-transform-multi-completion, not funcall icicle-get-alist-candidate-function.</span>
<span class="linecomment">;;     icicle-completing-yank: Add prefix arg behavior: use secondary-selection-ring.  Update doc.</span>
<span class="linecomment">;;                             Add alt action of copying to other selection ring.</span>
<span class="linecomment">;;     icicle-yank-maybe-completing: Bind current-prefix-arg to nil around icicle-completing-yank.</span>
<span class="linecomment">;; 2011/12/19 dadams</span>
<span class="linecomment">;;     icicle-find-file-absolute(-other-window): Do not insert default directory as initial input.</span>
<span class="linecomment">;;     icicle-ess-R-complete-object-name: Use line-end-position, not point-at-eol (not in Emacs 20).</span>
<span class="linecomment">;;     icicle-bookmark-(cmd|set), icicle-bbdb-complete-name: Use line-(beginning|end)-position.</span>
<span class="linecomment">;; 2011/12/14 dadams</span>
<span class="linecomment">;;     Added: icicle-bookmark-bookmark-file-narrow, icicle-bookmark-image-narrow,</span>
<span class="linecomment">;;            icicle-bookmark-image(-other-window).</span>
<span class="linecomment">;;     icicle-bookmark-set, icicle-bookmark(-other-window):</span>
<span class="linecomment">;;       Changed bindings to be the same as top-level jump bindings.</span>
<span class="linecomment">;;       Added bindings: icicle-bookmark-bookmark-file-narrow, icicle-bookmark-image-narrow.</span>
<span class="linecomment">;;     icicle-bookmark-list:</span>
<span class="linecomment">;;       Return bookmarks, not their names, unless prefix arg or icicle-bookmark-list-names-only-p.</span>
<span class="linecomment">;;       Bind icicle-unpropertize-completion-result-flag.  Use icicle-unpropertize-completion, not</span>
<span class="linecomment">;;         icicle-substring-no-properties, so remove only Icicles internal properties.</span>
<span class="linecomment">;;       Call bookmark-maybe-load-default-file whether Bookmark+ or not.</span>
<span class="linecomment">;;       Use icicle-bookmark-types only for Bookmark+.  Use all bookmarks otherwise.</span>
<span class="linecomment">;; 2011/11/23 dadams</span>
<span class="linecomment">;;     icicle-locate-file-1: when -&gt; unless icicle-locate-file-use-locate-p.</span>
<span class="linecomment">;; 2011/11/21 dadams</span>
<span class="linecomment">;;     icicle-locate-file-1:</span>
<span class="linecomment">;;       Do not bind current-prefix-arg, so pick up prefix arg for vanilla Emacs locate cmd.</span>
<span class="linecomment">;;       Require locate.el in ignored binding, not first code.</span>
<span class="linecomment">;;       No progress message (gathering...) if use external locate cmd.</span>
<span class="linecomment">;;       Put prop icicle-fancy-candidates only if not using external locate cmd.</span>
<span class="linecomment">;;     icicle-locate: Improved doc string.</span>
<span class="linecomment">;;     icicle-find-file-absolute*, icicle-locate-file-1:</span>
<span class="linecomment">;;       Bind C-c C-d to icicle-cd-for-(abs|loc)-files (it was mistakenly removed).</span>
<span class="linecomment">;;     icicle-(delete|recent)-file, icicle-dired, icicle-find-file(-read-only|-in-tags-table),</span>
<span class="linecomment">;;       icicle-(file|directory)-list:</span>
<span class="linecomment">;;         Removed mention of C-c C-d in doc string - inappropriate here.</span>
<span class="linecomment">;; 2011/11/13 dadams</span>
<span class="linecomment">;;     icicle-locate-file-1: Corrected placement of kill-buffer in unwind-protect.</span>
<span class="linecomment">;; 2011/11/07 dadams</span>
<span class="linecomment">;;     icicle-locate-file-1:</span>
<span class="linecomment">;;       Use with-current-buffer with locate-buffer-name, to hide switch-to-buffer in locate.</span>
<span class="linecomment">;; 2011/11/06 dadams</span>
<span class="linecomment">;;     icicle-locate-file-1: Wrap use of external locate program in save-window-excursion.</span>
<span class="linecomment">;; 2011/11/01 dadams</span>
<span class="linecomment">;;     Added: icicle-bookmark-autofile(-other-window),</span>
<span class="linecomment">;;            icicle-bookmark-autonamed(-this-buffer)(-other-window), icicle-bookmark-bookmark-file,</span>
<span class="linecomment">;;            icicle-bookmark-temporary(-other-window).</span>
<span class="linecomment">;; 2011/10/29 dadams</span>
<span class="linecomment">;;     icicle-delete-file: Add icicle-remove-candidate-display-others to action fn.  Remove S-delete.</span>
<span class="linecomment">;; 2011/10/21 dadams</span>
<span class="linecomment">;;     icicle-remove-entry-from-saved-completion-set: Bind icicle-remove-icicles-props-p to nil.</span>
<span class="linecomment">;;     icicle-execute-extended-command-1: Don't bind WAIT-TIME to 0 if CURR-MSG.</span>
<span class="linecomment">;;     icicle-(add|remove)-entry-(to|from)-saved-completion-set, icicle-remove-saved-set-action,</span>
<span class="linecomment">;;       icicle-execute-extended-command-1, icicle-kmacro-action, icicle-toggle-option,</span>
<span class="linecomment">;;       icicle-increment-(option|variable), icicle-find-tag-help, icicle-add-buffer-candidate,</span>
<span class="linecomment">;;       icicle-remove-buffer-(candidate|config)-action, icicle-remove-from-recentf-candidate-action,</span>
<span class="linecomment">;;       icicle-locate-file-1, icicle-(string|sexp|keyword|face|buffer|bookmark|file|directory)-list:</span>
<span class="linecomment">;;         Use icicle-propertize.</span>
<span class="linecomment">;;     Applied renaming: icicle-unpropertize -&gt; icicle-unpropertize-completion.</span>
<span class="linecomment">;; 2011/10/10 dadams</span>
<span class="linecomment">;;     icicle-define-bookmark-command*: Moved to icicles-mac.el.</span>
<span class="linecomment">;; 2011/10/08 dadams</span>
<span class="linecomment">;;     icicle-dired-project*, icicle-bookmark*, icicle*-buffer*: Use icicle-kbd.</span>
<span class="linecomment">;; 2011/10/03 dadams</span>
<span class="linecomment">;;     icicle-customize-face: Updated for Emacs 24: Added optional arg OTHER-WINDOW.</span>
<span class="linecomment">;; 2011/09/21 dadams</span>
<span class="linecomment">;;     Added: icicle-locate-other-window, icicle-locate-file-use-locate-p.  Improved doc string.</span>
<span class="linecomment">;;     icicle-locate: Use icicle-locate-file-1 (not icicle-define-command).</span>
<span class="linecomment">;;     icicle-locate-file-1: Use locate external program, if non-nil icicle-locate-file-use-locate-p.</span>
<span class="linecomment">;;     icicle-(find-file-(absolute|in-tags-table)|recent-file)(-other-window), icicle-locate-file-1,</span>
<span class="linecomment">;;       icicle-cd-for-abs-files:</span>
<span class="linecomment">;;         Use file-name-as-directory instead of concat with /.</span>
<span class="linecomment">;; 2011/09/18 dadams</span>
<span class="linecomment">;;     Added: icicle-sexp-list, icicle-string-list.</span>
<span class="linecomment">;;     Moved here from icicles-cmd2.el: icicle-keyword-list.</span>
<span class="linecomment">;;     Added: icicle-locate.  Thx to Michael Heerdegen.</span>
<span class="linecomment">;;     icicle-bookmarked-(buffer|file)-list, icicle-define-add-to-alist-command,</span>
<span class="linecomment">;;       icicle-(bookmark|buffer|face|file|directory|regexp|keyword)-list, icicle-add-buffer-config:</span>
<span class="linecomment">;;         Bind icicle-prompt.</span>
<span class="linecomment">;;     icicle-(bookmark|buffer|face|file|directory|regexp|keyword)-list:</span>
<span class="linecomment">;;       Added msg saying Added... when interactive.</span>
<span class="linecomment">;; 2011/09/02 dadams</span>
<span class="linecomment">;;     icicle-completing-yank: Put kills in order, respecting kill-ring-yank-pointer.</span>
<span class="linecomment">;;                             (put 'icicle-completing-yank 'delete-selection 'yank).</span>
<span class="linecomment">;;     icicle-insert-for-yank: Set this-command to yank.</span>
<span class="linecomment">;; 2011/08/30 dadams</span>
<span class="linecomment">;;     icicle-yank-maybe-completing: Put delete-selection prop, so region is deleted.</span>
<span class="linecomment">;; 2011/08/26 dadams</span>
<span class="linecomment">;;     icicle-comint-dynamic-complete-as-filename, icicle-comint-dynamic-simple-complete,</span>
<span class="linecomment">;;       icicle-bbdb-complete-name, icicle-explore, icicle-bookmark(-list|-other-window),</span>
<span class="linecomment">;;       icicle-define-bookmark-command-1, icicle-find-tag-action,</span>
<span class="linecomment">;;       icicle-kill-a-buffer-and-update-completions, icicle-color-theme,</span>
<span class="linecomment">;;       icicle-delete-file-or-directory:</span>
<span class="linecomment">;;         Use icicle-condition-case-no-debug instead of condition-case.  Thx to Michael Heerdegen.</span>
<span class="linecomment">;;     Make sure to pass format string as first arg to calls to functions error and message.</span>
<span class="linecomment">;; 2011/08/12 dadams</span>
<span class="linecomment">;;     icicle-delete-file, icicle-(file|directory)-list, icicle-(dired|file)*,</span>
<span class="linecomment">;;       icicle-find-file(-absolute|-read-only|in-tags-table)*, icicle-(recent|locate)-file*:</span>
<span class="linecomment">;;         Use icicle-(un)bind-file-candidate-keys.  Don't do/undo such bindings individually here.</span>
<span class="linecomment">;;     icicle-find-file-(absolute|in-tags-table)*, icicle-(recent|locate)-file*:</span>
<span class="linecomment">;;       Bind icicle-full-cand-fn.</span>
<span class="linecomment">;;     icicle-dired-(project|buffer)*: Removed fboundp test of icicle-bookmark-* (just test Bookmark+).</span>
<span class="linecomment">;; 2011/08/11 dadams</span>
<span class="linecomment">;;     icicle-find-file-absolute(-other-window):</span>
<span class="linecomment">;;       Bind C-x a [+-] to adding/removing tags.</span>
<span class="linecomment">;; 2011/08/09 dadams</span>
<span class="linecomment">;;     icicle-define(-file)-command calls: Removed undo code if same as last code, so do not repeat it.</span>
<span class="linecomment">;; 2011/08/07 dadams</span>
<span class="linecomment">;;     icicle-(find-file-absolute|recent-file)(-other-window), icicle-locate-file-1,</span>
<span class="linecomment">;;       icicle-cd-for-(abs|loc)-files:</span>
<span class="linecomment">;;         Bind icicle-abs-file-candidates to the COLLECTION alist (no longer just list of strings).</span>
<span class="linecomment">;; 2011/07/30 dadams</span>
<span class="linecomment">;;     Moved to icicles-cmd2.el and wrapped in eval-after-load bookmark+.el:</span>
<span class="linecomment">;;       icicle-find-file-(all|some)-tags(-regexp)(-other-window), icicle-(un)tag-a-file.</span>
<span class="linecomment">;; 2011/07/26 dadams</span>
<span class="linecomment">;;     Removed: icicle-list-end-string (no longer needed).  Thx to Michael Heerdegen.</span>
<span class="linecomment">;; 2011/05/22 dadams</span>
<span class="linecomment">;;     Added defvars for free vars to quiet byte compiler.</span>
<span class="linecomment">;; 2011/05/21 dadams</span>
<span class="linecomment">;;     icicle-customize-apropos(-options): let -&gt; let* for interactive form.</span>
<span class="linecomment">;; 2011/04/29 dadams</span>
<span class="linecomment">;;     icicle-execute-extended-command(-1), icicle-command-abbrev(-action|-command),</span>
<span class="linecomment">;;       icicle-execute-named-keyboard-macro, icicle-increment-(option|variable),</span>
<span class="linecomment">;;       icicle-doremi-increment-variable+:</span>
<span class="linecomment">;;         Renamed: orig-must-pass-after-match-predicate to icicle-orig-must-pass-after-match-pred,</span>
<span class="linecomment">;;                  new-last-cmd to icicle-new-last-cmd.</span>
<span class="linecomment">;; 2011/04/25 dadams</span>
<span class="linecomment">;;     Commands defined with icicle-define-file-command and using icicle-file-bindings:</span>
<span class="linecomment">;;       Remove binding for icicle-candidate-help-fn - done in icicles-mac.el now.</span>
<span class="linecomment">;; 2011/04/13 dadams</span>
<span class="linecomment">;;     Fixed autoload cookies for icicle-define-file-command commands added yesterday.</span>
<span class="linecomment">;; 2011/04/12 dadams</span>
<span class="linecomment">;;     Added: icicle-bookmark-save-marked-files(-as-project|-more|-persistently|-to-variable),</span>
<span class="linecomment">;;            icicle-find-file-(all|some)-tags(-regexp)(-other-window), icicle-(un)tag-a-file.</span>
<span class="linecomment">;;     icicle-bookmark(-list|-set|-other-window|-delete-action), icicle-define-bookmark-command-1:</span>
<span class="linecomment">;;       Applied Bookmark+ renaming: bmkp-sort-and-remove-dups -&gt; bmkp-sort-omit.</span>
<span class="linecomment">;;     icicle-bookmark-set: Fixed typo: bmkp-light-bookmarks-this-buffer -&gt; bmkp-light-this-buffer.</span>
<span class="linecomment">;;     icicle-define-bookmark-command-1: Doc strings now mention corresponding Bookmark+ command.</span>
<span class="linecomment">;;     icicle-execute-extended-command-1:</span>
<span class="linecomment">;;       Apply icicle-transform-multi-completion to arg.  Thx to Michael Heerdegen.</span>
<span class="linecomment">;; 2011/04/04 dadams</span>
<span class="linecomment">;;     icicle-bookmark-jump-1, icicle-pop-tag-mark: Use icicle-recenter.</span>
<span class="linecomment">;; 2011/04/02 dadams</span>
<span class="linecomment">;;     Added: icicle-bookmark-file-this-dir((-all|some)-tags(-regexp))(-other-window),</span>
<span class="linecomment">;;            icicle-locate-file-(action-fn|no-symlinks-p).</span>
<span class="linecomment">;;     icicle-kmacro(-action), icicle-clear(-current)-history(-1):</span>
<span class="linecomment">;;       Use (new) icicle-pref-arg, not pref-arg.</span>
<span class="linecomment">;;     icicle(-kill|-insert)-buffer(-other-window), icicle-default-buffer-names,</span>
<span class="linecomment">;;       icicle-filter-buffer-cands-for-mode, icicle-add-buffer-candidate:</span>
<span class="linecomment">;;         Use (new) icicle-bufflist, not bufflist.</span>
<span class="linecomment">;;     icicle-locate-file(-1|-no-symlinks)(-other-window):</span>
<span class="linecomment">;;       Use (new) icicle-locate-file-no-symlinks-p, not no-symlinks-p.</span>
<span class="linecomment">;; 2011/03/31 dadams</span>
<span class="linecomment">;;     icicle-search-action-1: Applied renaming: i*-target-window-recenter-amount to icicle-recenter.</span>
<span class="linecomment">;;     icicle-customize-apropos-options-of-type: Wrap icicle-var-is-of-type-p with condition-case.</span>
<span class="linecomment">;; 2011/03/29 dadams</span>
<span class="linecomment">;;     Use new icicle-* vars for various free vars (orig-buff etc.).</span>
<span class="linecomment">;; 2011/03/26 dadams</span>
<span class="linecomment">;;     Added: icicle-bookmark-file-(all|some)-tags(-regexp)(-other-window).</span>
<span class="linecomment">;; 2011/02/22 dadams</span>
<span class="linecomment">;;     Added: icicle-lisp-completion-at-point.</span>
<span class="linecomment">;; 2011/01/06 dadams</span>
<span class="linecomment">;;     Added: icicle-filter-buffer-cands-for-mode.</span>
<span class="linecomment">;;     icicle-(kill|insert)-buffer, icicle-buffer(-other-window), icicle-add-buffer-candidate:</span>
<span class="linecomment">;;       Bind C-x M to icicle-filter-buffer-cands-for-mode.</span>
<span class="linecomment">;; 2010/12/26 dadams</span>
<span class="linecomment">;;     Removed autoload cookies except simple ones & ones with sexp on same line.  Thx to Richard Kim.</span>
<span class="linecomment">;; 2010/12/18 dadams</span>
<span class="linecomment">;;     Added more autoload cookies for cmds & macros; removed from non-cmd fns.  Thx to Richard Kim.</span>
<span class="linecomment">;;       Specify cmd and file for cmds defined by Icicles macros.</span>
<span class="linecomment">;;     Require icicles-opt.el before icicles-var.el (but it makes no difference).</span>
<span class="linecomment">;; 2010/11/21 dadams</span>
<span class="linecomment">;;     defalias both old-lisp-complete-symbol and (for Emacs 23+) old-lisp-completion-at-point.</span>
<span class="linecomment">;; 2010/11/10 dadams</span>
<span class="linecomment">;;     icicle-lisp-complete-symbol: Remove return value.  Let it do everything (chg is in ici*mode.el).</span>
<span class="linecomment">;; 2010/11/04 dadams</span>
<span class="linecomment">;;     icicle-lisp-complete-symbol: Fixed return value for Emacs 23.2+.  Thx to Michael Heerdegen.</span>
<span class="linecomment">;; 2010/11/03 dadams</span>
<span class="linecomment">;;     defalias old-lisp-completion-at-point, not old-lisp-complete-symbol, for Emacs 23.2+.</span>
<span class="linecomment">;;     icicle-lisp-complete-symbol:</span>
<span class="linecomment">;;       Explicitly return nil, for use in completion-at-point-functions (Emacs 23.2+).</span>
<span class="linecomment">;; 2010/10/25 dadams</span>
<span class="linecomment">;;     icicle-buffer-list: Use icicle-must-pass-after-match-predicate, not icicle-must-pass-predicate.</span>
<span class="linecomment">;;     icicle-directory-list:</span>
<span class="linecomment">;;       Bind icicle-file-predicate instead of using PREDICATE arg.  No emacs-version limit now.</span>
<span class="linecomment">;; 2010/10/24 dadams</span>
<span class="linecomment">;;     icicle-customize-apropos(-faces|-groups|-options(-of-type)), icicle-execute-extended-command,</span>
<span class="linecomment">;;       icicle-command-abbrev, icicle-execute-named-keyboard-macro, icicle-(re)set-option-to-(t|nil),</span>
<span class="linecomment">;;       icicle-toggle-option, icicle-increment-(option|variable), icicle-doremi-increment-variable+:</span>
<span class="linecomment">;;         Use icicle-must-pass-after-match-predicate, not PREDICATE arg.</span>
<span class="linecomment">;;     icicle-execute-extended-command-1, icicle-command-abbrev-action,</span>
<span class="linecomment">;;       icicle-increment-(option|variable), icicle-doremi-increment-variable+:</span>
<span class="linecomment">;;         Restore orginal icicle-must-pass-after-match-predicate.</span>
<span class="linecomment">;; 2010/10/09 dadams</span>
<span class="linecomment">;;     icicle-customize-face, icicle-repeat-complex-command, icicle-delete-window:</span>
<span class="linecomment">;;       Updated doc string for new prefix and modal cycling keys.</span>
<span class="linecomment">;; 2010/08/27 dadams</span>
<span class="linecomment">;;     icicle-pp-display-expression: Set the hooks locally instead of let-binding them, to avoid msg</span>
<span class="linecomment">;;                                   "Making change-major-mode-hook buffer-local while locally</span>
<span class="linecomment">;;                                   let-bound!" - suggestion from Stefan M.</span>
<span class="linecomment">;; 2010/07/20 dadams</span>
<span class="linecomment">;;     icicle-find-file-in-tags-table(-other-window):</span>
<span class="linecomment">;;       Pick up default-directory of TAGS table.  Thx to Chris Hecker.</span>
<span class="linecomment">;;     icicle-bookmark-jump-1: Applied renaming of bmkp-use-region-flag to bmkp-use-region.</span>
<span class="linecomment">;; 2010/07/17 dadams</span>
<span class="linecomment">;;     Added: icicle-bookmark-url-narrow, icicle-bookmark-url(-other-window).</span>
<span class="linecomment">;;     icicle-bookmark(-list|-set|-other-window|-propertize-candidate|-help-string),</span>
<span class="linecomment">;;       icicle-define-bookmark-command-1: w3m -&gt; url.</span>
<span class="linecomment">;;     Bound URL commands to C-M-u, C-x j u.</span>
<span class="linecomment">;; 2010/07/02 dadams</span>
<span class="linecomment">;;     icicle-bookmark-set: Added INTERACTIVEP arg.  Prompt for tags when bmkp-prompt-for-tags-flag.</span>
<span class="linecomment">;;                          Highlight bookmark if bmkp-auto-light-when-set.</span>
<span class="linecomment">;;     icicle-bookmark-cmd: Call icicle-bookmark-set with new INTERACTIVEP arg.</span>
<span class="linecomment">;; 2010/06/25 dadams</span>
<span class="linecomment">;;     icicle-find-file(-other-window):</span>
<span class="linecomment">;;       Use default-directory, not nil, as third arg to read-file-name.  Thx to Thomas Lim.</span>
<span class="linecomment">;;       Note: This more or less reverts a change I made (why?) on 2008/12/27 (see that, below).</span>
<span class="linecomment">;; 2010/06/18 dadams</span>
<span class="linecomment">;;     Renamed: bookmarkp-* to bmkp-*.</span>
<span class="linecomment">;; 2010/06/11 dadams</span>
<span class="linecomment">;;     icicle-find-file-absolute*, icicle-recent-file*, icicle-locate-file-1:</span>
<span class="linecomment">;;       Bind C-c + to icicle-make-directory.</span>
<span class="linecomment">;;     icicle-find-file-in-tags-table*: Removed bindings: C-x m, C-backspace.</span>
<span class="linecomment">;; 2010/06/10 dadams</span>
<span class="linecomment">;;     icicle-cd-for-abs-files: Bound enable-recursive-minibuffers to t.</span>
<span class="linecomment">;; 2010/06/08 dadams</span>
<span class="linecomment">;;     Added: icicle-bookmark-delete-action: Make it refresh the cache.</span>
<span class="linecomment">;;     icicle-bookmark(-list|-other-window), icicle-define-bookmark-command-1:</span>
<span class="linecomment">;;       Use icicle-bookmark-delete-action.</span>
<span class="linecomment">;;       Use condition-case to filter out bad bookmarks (so no error).  Thx to M. Heerdegen.</span>
<span class="linecomment">;; 2010/06/04 dadams</span>
<span class="linecomment">;;     Applied renamings of doremi commands (added +).</span>
<span class="linecomment">;;     icicle-(buffer|*file|directory)*: Updated doc string to mention icicle-(buffers|files)-ido-like.</span>
<span class="linecomment">;; 2010/05/30 dadams</span>
<span class="linecomment">;;     Added: icicle-locate-file-no-symlinks(-other-window), icicle-locate-file(-other-window)-action,</span>
<span class="linecomment">;;            icicle-locate-file-1.</span>
<span class="linecomment">;;     icicle-locate-file*: Moved body to icicle-locate-file-1.  Use named action functions.</span>
<span class="linecomment">;;                          Respect icicle-ignored-directories (via *-files-within).</span>
<span class="linecomment">;;     icicle-cd-for-loc-files: Added optional arg NO-SYMLINKS-P.</span>
<span class="linecomment">;;     icicle-dired-saved-file-candidates(-other-window): Handle multi-completion candidates.</span>
<span class="linecomment">;;     Thx to M. Heerdegen.</span>
<span class="linecomment">;; 2010/05/28 dadams</span>
<span class="linecomment">;;     icicle-(recent|locate)-file(-other-window),</span>
<span class="linecomment">;;       Use *-transform-multi-completion in *-all-candidates-list-alt-action-fn.  Thx to M. Heerdegen.</span>
<span class="linecomment">;; 2010/05/27 dadams</span>
<span class="linecomment">;;     icicle-cd-for-loc-files: Wrap interactive spec in save-selected-window.  Thx to M. Heerdegen.</span>
<span class="linecomment">;; 2010/05/26 dadams</span>
<span class="linecomment">;;     icicle-bookmark-set: Removed pseudo-default.  Thx to Michael Heerdegen.</span>
<span class="linecomment">;; 2010/05/24 dadams</span>
<span class="linecomment">;;     icicle-comint-replace-orig-completion-fns: Rewrote to not use case.  Thx to Michael Heerdegen.</span>
<span class="linecomment">;; 2010/05/21 dadams</span>
<span class="linecomment">;;     icicle-bookmark-help-string:</span>
<span class="linecomment">;;       Use BOOKMARK-NAME, not BMK, as arg to vanilla fns, for Emacs &lt; 23.  Thx to Alexander Haeckel.</span>
<span class="linecomment">;; 2010-05-18 dadams</span>
<span class="linecomment">;;     Added: icicle-cd-for-abs-files, icicle-cd-for-loc-files.</span>
<span class="linecomment">;;     icicle-find-file-absolute*, icicle-locate-file*: Bind C-c C-d to icicle-cd-for-(abs|loc)-files.</span>
<span class="linecomment">;;     icicle-locate-file*: Make icicle-list-use-nth-parts be nil if no non-positive prefix arg.</span>
<span class="linecomment">;; 2010/05/16 dadams</span>
<span class="linecomment">;;     icicle-define-bookmark-command-1: Defined command requires bookmark+.el.</span>
<span class="linecomment">;;     Added: icicle-bookmark-specific-(buffers|files)-narrow, icicle-bookmark-this-buffer-narrow.</span>
<span class="linecomment">;;     icicle-bookmark(-other-window), icicle-bookmark-set:</span>
<span class="linecomment">;;       Bound C-M-= (b|f), C-M-. for narrowing to specific-(buffers|files), this-buffer.</span>
<span class="linecomment">;;     icicle-bookmark-cleanup: Updated for added narrowing keys.</span>
<span class="linecomment">;; 2010/05/15 dadams</span>
<span class="linecomment">;;     Added: icicle-define-bookmark-command(-1).  Added ARGS param for use as arg for *-alist-only.</span>
<span class="linecomment">;;     Added same-window commands for bookmark jumping.</span>
<span class="linecomment">;;     Added: *-specific-(buffers|files)*, *-this-buffer*, *-(all|some)-tags(-regexp)* jump commands,</span>
<span class="linecomment">;;            *-bookmarked-(buffer|file)-list.</span>
<span class="linecomment">;;     icicle-bookmark-set: *-selected-buffers-alist-only -&gt; *-specific-buffers-alist-only.</span>
<span class="linecomment">;; 2010/05/06 dadams</span>
<span class="linecomment">;;     icicle-bookmark-set: Removed spurious format call with its arg.</span>
<span class="linecomment">;; 2010/04/29 dadams</span>
<span class="linecomment">;;     icicle-explore: Bind icicle-remove-icicles-props-p to nil around call to completing-read.</span>
<span class="linecomment">;;                     Call icicle-unpropertize at the end (without that binding).</span>
<span class="linecomment">;; 2010/04/20 dadams</span>
<span class="linecomment">;;     icicle-dired(-other-window): Use icicle-dirs-first-p, not icicle-dirs-last-p, and don't reverse.</span>
<span class="linecomment">;; 2010/04/17 dadams</span>
<span class="linecomment">;;     Added: icicle-bookmark-set.</span>
<span class="linecomment">;;     icicle-bookmark-cmd: Use icicle-bookmark-set, not bookmark-set.  Simpler PARG code in that case.</span>
<span class="linecomment">;;     icicle-bookmark(-list|-other-window), icicle-define-bookmark-other-window-command:</span>
<span class="linecomment">;;       Use icicle-transform-multi-completion in icicle-delete-candidate-object.</span>
<span class="linecomment">;; 2010/04/10 dadams</span>
<span class="linecomment">;;     Corrected prefix arg use for icicle-find-file(-read-only)(-other-window).  Thx to M. Heerdegen.</span>
<span class="linecomment">;; 2010/04/09 dadams</span>
<span class="linecomment">;;     Added: icicle-find-file-read-only(-other-window).</span>
<span class="linecomment">;;     icicle-find-file(-other-window):</span>
<span class="linecomment">;;       Prefix arg on individual candidate means visit read-only.</span>
<span class="linecomment">;;       Prefix arg for the command means reverse the prefix arg effect: read-only for all by default.</span>
<span class="linecomment">;; 2010/04/02 dadams</span>
<span class="linecomment">;;     Added: icicle-bookmark-list.</span>
<span class="linecomment">;;     icicle-bookmark-cleanup: Clean up both minibuffer maps.</span>
<span class="linecomment">;; 2010/03/27 dadams</span>
<span class="linecomment">;;     icicle-define-bookmark-other-window-command: Use optional PROMPT arg.</span>
<span class="linecomment">;; 2010/03/19 dadams</span>
<span class="linecomment">;;     icicle-define-bookmark-other-window-command: Rich multi-completions per icicle-bookmark.</span>
<span class="linecomment">;; 2010/03/16 dadams</span>
<span class="linecomment">;;     icicle-bookmark(-other-window):</span>
<span class="linecomment">;;       Use tags, not just file names, in the multi-completions.</span>
<span class="linecomment">;;       Use the default join string, ^G^J, and end string, ^J^J.</span>
<span class="linecomment">;;       Use just icicle-candidate-properties-alist to highlight the file name.</span>
<span class="linecomment">;;       Remove extra quote marks from face names.</span>
<span class="linecomment">;; 2010/03/14 dadams</span>
<span class="linecomment">;;     icicle-bookmark(-other-window):</span>
<span class="linecomment">;;       Copy file/buffer name string for candidate-part face, so we don't touch bookmark-alist.</span>
<span class="linecomment">;;       Handle icicle-bookmark-refresh-cache-flag and C-u.</span>
<span class="linecomment">;;       Bind the narrow keys in minibuffer-local-completion also (lax for multi-completion).</span>
<span class="linecomment">;;       Use face file-name-shadow, not icicle-candidate-part (too distracting).</span>
<span class="linecomment">;;     icicle-bookmark-*-narrow: Use icicle-get-alist-candidate-function.</span>
<span class="linecomment">;;     icicle-define-bookmark-other-window-command: Rewrote to handle multi-completion.</span>
<span class="linecomment">;;     icicle-bookmark-non-file-narrow: Use bookmarkp-non-file-bookmark-p.</span>
<span class="linecomment">;;     icicle-bookmark-propertize-candidate: Typo in a face name.</span>
<span class="linecomment">;; 2010/03/13 dadams</span>
<span class="linecomment">;;     icicle-bookmark(-other-window):</span>
<span class="linecomment">;;       If Bookmark+ available then, depending on icicle-show-multi-completion-flag, use a</span>
<span class="linecomment">;;         multi-completion showing file or buffer.  Use icicle-candidates-alist to do that.</span>
<span class="linecomment">;;       Don't put icicle-fancy-candidates prop on prompt.</span>
<span class="linecomment">;;       Don't use icicle-sorted-bookmark-alist (removed).  Recompute each time.</span>
<span class="linecomment">;; 2010/03/10 dadams</span>
<span class="linecomment">;;     icicle-bookmark-help-string:</span>
<span class="linecomment">;;       Mention the type in the help: sequence, function, bookmark list, desktop, etc.</span>
<span class="linecomment">;;       Don't show position for types that don't use one.  Don't show file for buffer & Dired.</span>
<span class="linecomment">;; 2010/03/09 dadams</span>
<span class="linecomment">;;     icicle-color-theme: Initialize variable icicle-color-themes here, not in icicles-opt.el.</span>
<span class="linecomment">;; 2010/03/04 dadams</span>
<span class="linecomment">;;     icicle-bookmark(-other-window): Use bookmarkp-describe-bookmark(-internals) for C-M-RET.</span>
<span class="linecomment">;; 2010/03/03 dadams</span>
<span class="linecomment">;;     icicle-bookmark(-other-window), icicle-define-bookmark-other-window-command:</span>
<span class="linecomment">;;       Use bookmarkp-sort-and-remove-dups.</span>
<span class="linecomment">;;       Bind icicle-sort-orders-alist, using bookmarkp predicates.</span>
<span class="linecomment">;;     icicle-bookmark(-other-window):</span>
<span class="linecomment">;;       Set icicle-sorted-bookmark-alist and bookmarkp-sorted-alist.</span>
<span class="linecomment">;;       Use bookmarkp-sorted-alist.</span>
<span class="linecomment">;;       Don't append original icicle-sort-orders-alist.  Just include a couple of its entries.</span>
<span class="linecomment">;;     Applied renamings: icicle-sort-function to icicle-sort-comparer,</span>
<span class="linecomment">;;                        icicle-sort-functions-alist to icicle-sort-orders-alist.</span>
<span class="linecomment">;; 2010/02/28 dadams</span>
<span class="linecomment">;;     icicle-send-bug-report: Formatted body a bit.</span>
<span class="linecomment">;; 2010/02/14 dadams</span>
<span class="linecomment">;;     Added: icicle-bookmark-bookmark-list-other-window, icicle-bookmark-bookmark-list-narrow.</span>
<span class="linecomment">;;     icicle-bookmark(-other-window):</span>
<span class="linecomment">;;       Bound to C-M- prefix: icicle-bookmark-bookmark-list-narrow.  Updated doc string.</span>
<span class="linecomment">;; 2010/02/13 dadams</span>
<span class="linecomment">;;     Added: icicle-bookmark-(desktop|man)-other-window,</span>
<span class="linecomment">;;            icicle-bookmark-(dired|desktop|man)-narrow.</span>
<span class="linecomment">;;     icicle-define-bookmark-other-window-command: Raise error if bookmark+.el not found.</span>
<span class="linecomment">;;     icicle-bookmark(-other-window):</span>
<span class="linecomment">;;       Bound to C-M- prefix: icicle-bookmark-(dired|desktop|man)-narrow.</span>
<span class="linecomment">;;     icicle-bookmark-propertize-candidate:</span>
<span class="linecomment">;;       Handle also: sequence, function, bookmark list, desktop, man, buffer, bad bookmarks.</span>
<span class="linecomment">;; 2010/02/02 dadams</span>
<span class="linecomment">;;     icicle-bookmark-jump-1: Don't select minibuffer window and give it focus.</span>
<span class="linecomment">;; 2010/01/30 dadams</span>
<span class="linecomment">;;     icicle-dired(-other-window), icicle-(find|recent|locate)-file(-absolute)(-other-window)</span>
<span class="linecomment">;;       icicle-find-file-in-tags-table(-other-window):</span>
<span class="linecomment">;;         Bind icicle-all-candidates-list-alt-action-fn to open Dired on matching files.</span>
<span class="linecomment">;; 2010/01/13 dadams</span>
<span class="linecomment">;;     icicle-recent-file(-other-window):</span>
<span class="linecomment">;;       Restore C-S-RET as icicle-remove-from-recentf-candidate-action (accidentally removed).</span>
<span class="linecomment">;; 2010/01/12 dadams</span>
<span class="linecomment">;;     Added: icicle-pp-display-expression.</span>
<span class="linecomment">;;     icicle-pp-eval-expression: Use icicle-pp-display-expression.</span>
<span class="linecomment">;;     icicle-bbdb-complete-name: save-excursion + set-buffer -&gt; with-current-buffer.</span>
<span class="linecomment">;; 2009/12/21 dadams</span>
<span class="linecomment">;;     fset -&gt; defalias.</span>
<span class="linecomment">;; 2009/12/13 dadams</span>
<span class="linecomment">;;     Added: icicle-bookmark-dired-other-window, icicle-dired(-other-window).</span>
<span class="linecomment">;;     *-buffer*, *-dired-project*, *-find-file(-absolute)*, *-(recent|locate)-file*,</span>
<span class="linecomment">;;       *-find-file-in-tags-table*:</span>
<span class="linecomment">;;         Bind C-x m to icicle-bookmark-(non-file|dired|file)-other-window.</span>
<span class="linecomment">;; 2009/11/27 dadams</span>
<span class="linecomment">;;     Added: icicle(-doremi)-increment-(variable|option).</span>
<span class="linecomment">;; 2009/11/25 dadams</span>
<span class="linecomment">;;     icicle-color-theme: Raise error for empty input.  Thx to Ahei.</span>
<span class="linecomment">;; 2009/11/24 dadams</span>
<span class="linecomment">;;     icicle-color-theme: Take a snapshot each time invoked, unless prefix arg.</span>
<span class="linecomment">;; 2009/11/22 dadams</span>
<span class="linecomment">;;     icicle-color-theme: Use color-theme-initialize instead of load-library, to load themes.</span>
<span class="linecomment">;; 2009/11/21 dadams</span>
<span class="linecomment">;;     icicle-color-theme: Use color-theme-snapshot to let C-g undo changes.</span>
<span class="linecomment">;;                         Try to load color-theme-library.el (available with version 6.6.0).</span>
<span class="linecomment">;; 2009/11/17 dadams</span>
<span class="linecomment">;;     icicle-bbdb-complete-name: Bind completion-case-ignore.</span>
<span class="linecomment">;; 2009/11/14 dadams</span>
<span class="linecomment">;;     icicle-bbdb-complete-name: Replace macro bbdb-hashtable by its expansion.</span>
<span class="linecomment">;; 2009/09/21 dadams</span>
<span class="linecomment">;;     icicle-lisp-complete-symbol:</span>
<span class="linecomment">;;       Complete symbol in buffer as far as possible first.  Show completions initially.</span>
<span class="linecomment">;; 2009/09/17 dadams</span>
<span class="linecomment">;;     icicle-delete-file, icicle-(file|directory)-list,</span>
<span class="linecomment">;;       icicle-find-file(-absolute)(-other-window),</span>
<span class="linecomment">;;       icicle-(recent|locate)-file(-other-window),</span>
<span class="linecomment">;;       icicle-find-file-in-tags-table(-other-window): Use icicle-file-bindings (new macro).</span>
<span class="linecomment">;; 2009/09/16 dadams</span>
<span class="linecomment">;;     Added: icicle-insert-buffer.</span>
<span class="linecomment">;;     icicle-kill-buffer, icicle-buffer(-other-window), icicle-add-buffer-candidate:</span>
<span class="linecomment">;;       Use icicle-buffer-bindings (new macro).</span>
<span class="linecomment">;; 2009/08/29 dadams</span>
<span class="linecomment">;;     Added: icicle-define-bookmark-other-window-command, icicle-select-bookmarked-region,</span>
<span class="linecomment">;;            icicle-bookmark(-region|-info|-gnus|-w3m|(-non|-local|-remote)-file)-other-window.</span>
<span class="linecomment">;;     icicle-bookmark-propertize-candidate: Updated to reflect renamed bookmark+.el face names.</span>
<span class="linecomment">;;     icicle-bookmark-file-narrow: Use bookmarkp-file-bookmark-p.</span>
<span class="linecomment">;;     (lambda...) -&gt; #'(lambda...).</span>
<span class="linecomment">;; 2009/08/25 dadams</span>
<span class="linecomment">;;     Added: icicle-bookmark-cleanup-on-quit.</span>
<span class="linecomment">;;     icicle-bookmark(-other-window): Use icicle-bookmark-cleanup-on-quit.</span>
<span class="linecomment">;;     icicle-bookmark-cleanup: Removed code to return to original window a focus minibuffer.</span>
<span class="linecomment">;; 2009/08/24 dadams</span>
<span class="linecomment">;;     Added: icicle-bookmark-propertize-candidate.</span>
<span class="linecomment">;;     icicle-bookmark(-other-window): Put faces on bookmark candidates according to type.</span>
<span class="linecomment">;; 2009/08/23 dadams</span>
<span class="linecomment">;;     Added: icicle-bookmark-(region|info|gnus|w3m|(non-|local-|remote-)file)-narrow.</span>
<span class="linecomment">;;     icicle-bookmark(-other-window): Bind keys to bookmark candidate narrowing commands.</span>
<span class="linecomment">;;     icicle-bookmark-cleanup: Unbind the same commands.</span>
<span class="linecomment">;;     icicle-bookmark-cmd:</span>
<span class="linecomment">;;       Let bookmark+.el (latest version) handle prompting for name, even for region bookmark.</span>
<span class="linecomment">;;       Remove any newlines in bookmark name, when no prompting (thx to Thierry Volpiatto).</span>
<span class="linecomment">;; 2009/08/21 dadams</span>
<span class="linecomment">;;     icicle-bookmark-jump-1: Typo.</span>
<span class="linecomment">;; 2009/08/20 dadams</span>
<span class="linecomment">;;     icicle-bookmark-cmd: Use icicle-bookmark-other-window, not icicle-bookmark.</span>
<span class="linecomment">;;                          Fix trimmed-name: no longer than def-name.</span>
<span class="linecomment">;;     icicle-bookmark(-other-window): Bind enable-recursive-minibuffers, in case need to read.</span>
<span class="linecomment">;;     icicle-bookmark-jump-1: No crosshair highlighting for region bookmarks.</span>
<span class="linecomment">;; 2009/08/19 dadams</span>
<span class="linecomment">;;     Added: icicle-bookmark-help-string.</span>
<span class="linecomment">;;     icicle-bookmark-cmd: Handle creation of region bookmarks (new default values).</span>
<span class="linecomment">;;                          icicle-bookmark-name-length-max now applies to whole bookmark name.</span>
<span class="linecomment">;;     icicle-bookmark(-other-window):</span>
<span class="linecomment">;;       Apply icicle-candidate-short-help to candidates.  Use also for the help function.</span>
<span class="linecomment">;;     icicle-bookmark-jump-1: Use bookmark--jump-via if it is defined.</span>
<span class="linecomment">;; 2009/06/21 dadams</span>
<span class="linecomment">;;     icicle-bookmark-jump-1: Removed temporary Emacs 23 workaround for (fixed) bug #1175.</span>
<span class="linecomment">;; 2009/06/07 dadams</span>
<span class="linecomment">;;     icicle-get-alist-candidate -&gt; funcall icicle-get-alist-candidate-function.</span>
<span class="linecomment">;; 2009/05/22 dadams</span>
<span class="linecomment">;;     Require icicles-mac.el if load-library doesn't find it.</span>
<span class="linecomment">;;     Created - Split off from icicles-cmd.el.</span>
 
<span class="linecomment">;;;(@* "CHANGE LOG FOR `icicles-cmd2.el'")</span>
<span class="linecomment">;;</span>
<span class="linecomment">;; 2013/01/06 dadams</span>
<span class="linecomment">;;     icicle-(bookmark|(un)tag)-a-file: Updated calls to bmkp-*, to add nil NO-UPDATE-P argument.</span>
<span class="linecomment">;; 2013/01/05 dadams</span>
<span class="linecomment">;;     icicle-find-file-(all|some)-tags*: protect free vars in lambdas using backquote quote comma.</span>
<span class="linecomment">;;     icicle-(bookmark-a-file|find-file-tagged|): Updated doc string for new C-x C-t bindings.</span>
<span class="linecomment">;; 2012/12/31 dadams</span>
<span class="linecomment">;;     icicle-search-in-context-default-fn:</span>
<span class="linecomment">;;       Set icicle-mode-line-help instead of using icicle-show-help-in-mode-line.</span>
<span class="linecomment">;; 2012/12/22 dadams</span>
<span class="linecomment">;;     Added: icicle-search-file-found-p.</span>
<span class="linecomment">;;     icicle-search-define-candidates:</span>
<span class="linecomment">;;       Search only files that have at least one regexp match: use icicle-search-file-found-p to test.</span>
<span class="linecomment">;; 2012/11/28 dadams</span>
<span class="linecomment">;;     icicle-(fundoc|vardoc|plist): Use C-$ to toggle command/fn, option/var, faces/all.</span>
<span class="linecomment">;;     icicle-vardoc: Do not use non-neg prefix arg for options.</span>
<span class="linecomment">;;     icicle-doc: Be able to use C-$ to limit to commands, options, and faces.</span>
<span class="linecomment">;;                 Correction: separate setq in and, in case icicle-fn-doc-minus-sig returns nil.</span>
<span class="linecomment">;; 2012/11/20 dadams</span>
<span class="linecomment">;;     icicle-search-define-candidates:</span>
<span class="linecomment">;;       Added progress message for context gathering.  Thx to Michael Heerdegen.</span>
<span class="linecomment">;; 2012/11/10 dadams</span>
<span class="linecomment">;;     icicle-defined-thing-p: icicle-get-safe -&gt; get.</span>
<span class="linecomment">;;     icicle-read-color-wysiwyg:</span>
<span class="linecomment">;;       Fix case where user inputs name or RGB without completing (transformed to "").</span>
<span class="linecomment">;;       Mention sorting in doc string.</span>
<span class="linecomment">;; 2012/11/08 dadams</span>
<span class="linecomment">;;     icicle-defined-thing-p: Use icicle-get-safe.</span>
<span class="linecomment">;;     Doc strings: Use \\[...] more.</span>
<span class="linecomment">;; 2012/11/05 dadams</span>
<span class="linecomment">;;     Use \\[...] in doc strings instead of hard-coding, for some more keys.</span>
<span class="linecomment">;; 2012/11/03 dadams</span>
<span class="linecomment">;;     Added: icicle-cmd2-after-load-wid-edit+.  eval-after-load it for wid-edit+.el.</span>
<span class="linecomment">;;       Use it for all of the widget stuff (take that out of icicle-cmd2-after-load-highlight).</span>
<span class="linecomment">;; 2012/10/26 dadams</span>
<span class="linecomment">;;     icicle-search: Use \\[...] in doc string instead of hard-coding some of the keys.</span>
<span class="linecomment">;; 2012/10/22 dadams</span>
<span class="linecomment">;;     icicle-Info-index: Bind *-transform-function to *-remove-duplicates.  Emacs bug #12705.</span>
<span class="linecomment">;; 2012/10/20 dadams</span>
<span class="linecomment">;;     icicle-read-color: Fix case where user inputs without completing (WYSIWYG transforms to "").</span>
<span class="linecomment">;; 2012/10/09 dadams</span>
<span class="linecomment">;;     icicle-find-file-tagged*, icicle-read-color(-wysiwyg), icicle-frame-(bg|fg),</span>
<span class="linecomment">;;       icicle-choose(-(in)visible)-faces, icicle-(var|fun)doc, icicle-plist,</span>
<span class="linecomment">;;       icicle-goto-global-marker, icicle-occur, icicle-imenu-1,</span>
<span class="linecomment">;;       icicle-search(-bookmark(s-together|list-marked)|-buffer|-file|-sentences|-paragraphs|-pages):</span>
<span class="linecomment">;;         Bind icicle-multi-completing-p.</span>
<span class="linecomment">;; 2012/10/06 dadams</span>
<span class="linecomment">;;     icicle-hide/show-comments: Call comment-normalize-vars first.  Thx to Stefan Monnier.</span>
<span class="linecomment">;; 2012/09/08 dadams</span>
<span class="linecomment">;;     icicle-apply: Override icicle-buffer-ignore-space-prefix-flag, not icicle-ignore-space-prefix*.</span>
<span class="linecomment">;;     icicle-search: Remove mention of overriding icicle-ignore-space-prefix-flag.</span>
<span class="linecomment">;;     icicle-choose-candidate-of-type: Remove binding of icicle-ignore-space-prefix-flag.</span>
<span class="linecomment">;; 2012/09/06 dadams</span>
<span class="linecomment">;;     Use icicle-string-match-p.</span>
<span class="linecomment">;; 2012/09/05 dadams</span>
<span class="linecomment">;;     Added: icicle-select-text-at-point.</span>
<span class="linecomment">;; 2012/08/21 dadams</span>
<span class="linecomment">;;     tap-symbol-nearest-point -&gt; symbol-nearest-point. (icicles-opt.el DTRT.)</span>
<span class="linecomment">;; 2012/08/18 dadams</span>
<span class="linecomment">;;     symbol-nearest-point -&gt; tap-symbol-nearest-point.</span>
<span class="linecomment">;;     bounds-of-thing-at-point -&gt; icicle-bounds-of-thing-at-point.</span>
<span class="linecomment">;;     next-visible-thing-(1|2) -&gt; thgcmd-next-visible-thing-(1|2).</span>
<span class="linecomment">;;     next-visible-thing-1: Note: &lt; seems better than &lt;= for comparison.  I changed it to &lt; for</span>
<span class="linecomment">;;       Icicles version on 2011-05-14.  But just changed the thing-cmd.el version to &lt; today.</span>
<span class="linecomment">;; 2012/08/14 dadams</span>
<span class="linecomment">;;     icicle-cmd2-after-load-highlight:</span>
<span class="linecomment">;;       For Emacs &lt; 24, require wid-edit.el before defalias to widget-color-complete.</span>
<span class="linecomment">;; 2012/08/12 dadams</span>
<span class="linecomment">;;     icicle-read-color-WYSIWYG: Convert raw prefix arg `-' to -1.</span>
<span class="linecomment">;; 2012/08/06 dadams</span>
<span class="linecomment">;;     Renamed old-* to icicle-ORIG-*:</span>
<span class="linecomment">;;       icicle-ORIG-color, icicle-ORIG-read-color, icicle-ORIG-widget-color-complete.</span>
<span class="linecomment">;;     icicle-Info-index(-20|-action), icicle-Info-menu, icicle-Info-goto-node-1:</span>
<span class="linecomment">;;       Applied renaming to new: icicle-ORIG-*.</span>
<span class="linecomment">;; 2012/08/05 dadams</span>
<span class="linecomment">;;     Added: widgets icicle-color, old-color.  Added function icicle-widget-color-complete.</span>
<span class="linecomment">;;     icicle-read-color-wysiwyg:</span>
<span class="linecomment">;;       Added optional arg INITIAL-INPUT.</span>
<span class="linecomment">;;       Return only variable's value if user-option candidate is chosen.</span>
<span class="linecomment">;; 2012/07/17 dadams</span>
<span class="linecomment">;;     Removed: icicle-maybe-byte-compile-after-load (macro).  Removed all calls to it.</span>
<span class="linecomment">;; 2012/07/07 dadams</span>
<span class="linecomment">;;     icicle-Info-index:</span>
<span class="linecomment">;;       Bind icicle-Info-(index-nodes|manual|hist-list), for highlighting visited nodes.</span>
<span class="linecomment">;;       Raise error if not in Info-mode.</span>
<span class="linecomment">;; 2012/07/02 dadams</span>
<span class="linecomment">;;     Moved defcustom of icicle-byte-compile-eval-after-load-flag to icicles-mcmd.el (loaded first).</span>
<span class="linecomment">;;     icicle-search-bookmark(-action): Use *-search-context-regexp, not regexp, so no free warning.</span>
<span class="linecomment">;;     Changed #'(lambda...) to (lambda...).</span>
<span class="linecomment">;; 2012/05/22 dadams</span>
<span class="linecomment">;;     icicle-search-define-candidates, icicle-char-properties-in-buffers:</span>
<span class="linecomment">;;       Test with icicle-file-remote-p before file-exists-p, to avoid Tramp.</span>
<span class="linecomment">;; 2012/05/15 dadams</span>
<span class="linecomment">;;     Removed: icicle-search-desktop-bookmark (useless).</span>
<span class="linecomment">;; 2012/05/07 dadams</span>
<span class="linecomment">;;     Renamed: icicle-search-dired-marked to icicle-search-dired-marked-recursive.</span>
<span class="linecomment">;; 2012/05/06 dadams</span>
<span class="linecomment">;;     icicle-search-dired-marked: Call diredp-get-confirmation-recursive to get confirmation.</span>
<span class="linecomment">;; 2012/04/23 dadams</span>
<span class="linecomment">;;     icicle-search-dired-marked: Use diredp-get-files.  Raise error if Dired+ not present.</span>
<span class="linecomment">;;     Moved other icicle-search-dired-* functions to Dired+ as diredp-*.</span>
<span class="linecomment">;;     icicle-search-dired-get-files:</span>
<span class="linecomment">;;       If user answers no, then pick up only the marked files here 9and all files underneath).</span>
<span class="linecomment">;;     icicle-search-dired-get-files-for-dir: A no answer does not change what happens for top dir.</span>
<span class="linecomment">;; 2012/04/20 dadams</span>
<span class="linecomment">;;     Added: icicle-search-dired-get-files-for-dir, icicle-search-dired-marked-here.</span>
<span class="linecomment">;;     icicle-search-dired-marked:</span>
<span class="linecomment">;;       Added arg IGNORE-MARKS-P (prefix arg).  Pass it to icicle-search-dired-get-files.</span>
<span class="linecomment">;;     icicle-search-dired-get-files: Rewrote - uses icicle-search-dired-get-files-for-dir.</span>
<span class="linecomment">;;       Ask user whether to use Dired buffers for subdirs, if there are any.</span>
<span class="linecomment">;; 2012/04/14 dadams</span>
<span class="linecomment">;;     icicle-search-dired-get-files: Moved handling of IGNORE-MARKS-P outside the lambda.</span>
<span class="linecomment">;; 2012/04/13 dadams</span>
<span class="linecomment">;;     Added: icicle-search-dired-get-files.</span>
<span class="linecomment">;;     icicle-search-dired-marked: Use icicle-search-dired-get-files, not dired-get-marked-files.</span>
<span class="linecomment">;; 2012/04/09 dadams</span>
<span class="linecomment">;;     Changed last-command-char to last-command-event.</span>
<span class="linecomment">;;     Fixed typos: double single-quotes in autoload cookies.</span>
<span class="linecomment">;; 2012/04/08 dadams</span>
<span class="linecomment">;;     Make autoload cookies for commands load icicles[.el] explicitly.</span>
<span class="linecomment">;; 2012/04/03 dadams</span>
<span class="linecomment">;;     Moved to *-cmd1.el:</span>
<span class="linecomment">;;      icicle-send-signal-to-process, icicle-apropos, icicle-apropos-command, icicle-apropos-function,</span>
<span class="linecomment">;;      icicle-apropos-option, icicle-apropos-options-of-type, icicle-apropos-variable,</span>
<span class="linecomment">;;      icicle-apropos-zippy, icicle-apropos-opt-action, icicle-describe-option-of-type,</span>
<span class="linecomment">;;      icicle-describe-opt-action, icicle-describe-opt-of-type-complete.</span>
<span class="linecomment">;;      Plus compile-time requires of libraries yow, cookie1, apropos-fn+var.</span>
<span class="linecomment">;; 2012/04/01 dadams</span>
<span class="linecomment">;;     Added: icicle-apropos-options-of-type, icicle-apropos-opt-action.</span>
<span class="linecomment">;;     icicle-where-is: In help fn, wrap individual key sequences in `', not just all of them together.</span>
<span class="linecomment">;; 2012/03/31 dadams</span>
<span class="linecomment">;;     icicle-apropos*: Updated wrt Emacs 24 (handle PATTERN).  Added optional MSGP arg.</span>
<span class="linecomment">;; 2012/03/28 dadams</span>
<span class="linecomment">;;     Changed FILE arg in autoloads by removing .el, so .elc will be loaded if available.</span>
<span class="linecomment">;; 2012/03/10 dadams</span>
<span class="linecomment">;;     icicle-bookmark-a-file, icicle-find-file-tagged(-other-window): Bind icicle-full-cand-fn.</span>
<span class="linecomment">;;     icicle-find-file-(handle-bookmark|(all|some)-tags(-regexp))(-other-window):</span>
<span class="linecomment">;;       First code, last code: Call icicle-(un)bind-file-candidate-keys.</span>
<span class="linecomment">;;     icicle-search-bookmark: Use icicle-make-bookmark-candidate to define icicle-candidates-alist.</span>
<span class="linecomment">;; 2012/03/09 dadams</span>
<span class="linecomment">;;     icicle-untag-a-file, icicle-find-file-(all|some)-tags(-regexp)(-other-window), icicle-where-is,</span>
<span class="linecomment">;;       icicle-apropos-(variable|option|function|command), icicle-apply,</span>
<span class="linecomment">;;       icicle-save-string-to-variable, icicle-choose-candidate-of-type,</span>
<span class="linecomment">;;       icicle-read-var-value-satisfying, icicle-read-args-for-set-completion-methods:</span>
<span class="linecomment">;;         When Icomplete mode, use normal PRED, not *-must-pass-after-match-predicate.</span>
<span class="linecomment">;;     icicle-find-file-handle-bookmark(-other-window): Use bmkp-find-file(-other-window) as action fn.</span>
<span class="linecomment">;; 2012/02/26 dadams</span>
<span class="linecomment">;;     Update to reflect Bookmark+ changes (bindings etc.).</span>
<span class="linecomment">;;       Added icicle-find-file-handle-bookmark(-other-window), as nontagging C-f commands.</span>
<span class="linecomment">;;       icicle-find-file-tagged*: Use bmkp-find-file*, not find-file*, as action fn.</span>
<span class="linecomment">;;                                 Pass prefix arg to bmkp-read-tags-completing, to update cache.</span>
<span class="linecomment">;; 2012/02/20 dadams</span>
<span class="linecomment">;;     Added: icicle-Info-menu-cmd.  Actually, renamed icicle-Info-menu to icicle-Info-menu-cmd and</span>
<span class="linecomment">;;            added non-interactive icicle-Info-menu with args for compatibility with vanilla Emacs.</span>
<span class="linecomment">;;     icicle-Info-index: Added optional arg for non-interactive compatibility with vanilla Emacs.</span>
<span class="linecomment">;; 2012/02/12</span>
<span class="linecomment">;;     Added def of icicle-byte-compile-eval-after-load-flag here too, so can load before icicles.el.</span>
<span class="linecomment">;; 2012/02/11 dadams</span>
<span class="linecomment">;;     icicle-search: Update doc string for new input expansion.</span>
<span class="linecomment">;;     icicle-search-highlight-all-input-matches:</span>
<span class="linecomment">;;       Expand when apropos and 4 or prefix and 3 or 4.</span>
<span class="linecomment">;; 2012/01/25 dadams</span>
<span class="linecomment">;;     icicle-exchange-point-and-mark: Support also vanilla Emacs 22+ use of a prefix arg.</span>
<span class="linecomment">;; 2012/01/16 dadams</span>
<span class="linecomment">;;     icicle-search-define-candidates: Add COMPLEMENT to error msg.  Thx to Michael Heerdegen.</span>
<span class="linecomment">;; 2011/12/19 dadams</span>
<span class="linecomment">;;     icicle-marker+text, icicle-compilation-search-in-context-fn: Use line-(beginning|end)-position.</span>
<span class="linecomment">;; 2011/12/14 dadams</span>
<span class="linecomment">;;     icicle-search-where-arg: Do not bind icicle-bookmark-types here.</span>
<span class="linecomment">;;     icicle-search-define-candidates: For bookmarks, WHERE is a cons of conses (not just a cons).</span>
<span class="linecomment">;; 2011/12/13 dadams</span>
<span class="linecomment">;;     icicle-search-define-candidates: In bookmarks part, test BEG =? END only if both are non-nil.</span>
<span class="linecomment">;; 2011/12/06 dadams</span>
<span class="linecomment">;;     icicle-send-signal-to-process: Add process name to prompt.  Thx to Michael Heerdegen.</span>
<span class="linecomment">;; 2011/11/26 dadams</span>
<span class="linecomment">;;     Renamed icicle-read-color to icicle-read-color-wysiwyg.</span>
<span class="linecomment">;;     Added icicle-read-color (args compatible with vanilla read-color), for *-functions-to-redefine.</span>
<span class="linecomment">;;     icicle-read-color-wysiwyg: Added MSGP arg.  Updated hexrgb-read-color call (new arg list).</span>
<span class="linecomment">;;     icicle-color-help: Corrected for different cases of icicle-list-use-nth-parts (not just (1 2)).</span>
<span class="linecomment">;;     icicle-color-distance-(rgb|hsv)-lessp, icicle-choose-candidate-of-type:</span>
<span class="linecomment">;;       Applied renaming: icicle-read-color-wysiwyg.</span>
<span class="linecomment">;; 2011/11/02 dadams</span>
<span class="linecomment">;;     Added: icicle-search-autonamed-bookmark, icicle-search-temporary-bookmark.</span>
<span class="linecomment">;;     *-full search commands:</span>
<span class="linecomment">;;       Corrected doc strings to refer to the right option, icicle-hide-non-matching-lines-flag.</span>
<span class="linecomment">;; 2011/10/22 dadams</span>
<span class="linecomment">;;     icicle-send-signal-to-process:</span>
<span class="linecomment">;;       Bind icicle-last-transform-function to nil, so icicle-toggle-transforming still works well.</span>
<span class="linecomment">;; 2011/10/21 dadams</span>
<span class="linecomment">;;     icicle-read-color, icicle-where-is, icicle-apply((-list)-action), icicle-search-thing-args,</span>
<span class="linecomment">;;       icicle-set-completion-methods-for-command:</span>
<span class="linecomment">;;         Use icicle-propertize.</span>
<span class="linecomment">;; 2011/10/19 dadams</span>
<span class="linecomment">;;     Added: icicle-describe-process, icicle-send-signal-to-process.  Thx to Michael Heerdegen.</span>
<span class="linecomment">;; 2011/10/10 dadams</span>
<span class="linecomment">;;     icicle-define-search-bookmark-command: Moved to icicles-mac.el.</span>
<span class="linecomment">;;     Moved here (and to icicles-face.el) from icicles-mac.el: icicle-maybe-byte-compile-after-load.</span>
<span class="linecomment">;;     Replaced bodies of eval-after-load sexps with call to icicle-cmd2-after-load-*.</span>
<span class="linecomment">;;     Added: icicle-cmd2-after-load-(bookmark+'|hexrgb|highlight|palette|synonyms).</span>
<span class="linecomment">;;     Removed: icicle-read-single-key-description (unused).</span>
<span class="linecomment">;; 2011/10/08 dadams</span>
<span class="linecomment">;;     Moved to icicles-mac.el: icicle-read-kbd-macro, icicle-edmacro-parse-keys.</span>
<span class="linecomment">;;     Removed: icicle-orig-(buff|win)-key-complete - use regular icicle-orig*.</span>
<span class="linecomment">;;     icicle-complete-keys: Bind regular icicle-orig*, not icicle-orig-(buff|win)-key-complete.</span>
<span class="linecomment">;;     icicle-complete-keys-1: New icicle-key-description, with PREFIX arg and ANGLES, not NO-ANGLES.</span>
<span class="linecomment">;;     icicle-complete-keys-action: Set buffer & window to icicle-orig*.</span>
<span class="linecomment">;;     icicle-keys+cmds-w-prefix: Use icicle-delete-alist-dups.  Thx to Michael Heerdegen.</span>
<span class="linecomment">;;     icicle-add-key+cmd:</span>
<span class="linecomment">;;       Do not follow indirection to ultimate symbol.  Include NO-REMAP arg to key-binding.</span>
<span class="linecomment">;;       Replace ESC by M-..  Follow remapped command to its target.  Thx to Michael Heerdegen.</span>
<span class="linecomment">;;       Do not remove  VARIATION* names (Unicode).</span>
<span class="linecomment">;;     icicle-read-single-key-description: Change NO-ANGLES arg to ANGLES.</span>
<span class="linecomment">;;     icicle-where-is: Use icicle-key-description, not key-description.</span>
<span class="linecomment">;;     icicle-Info-(index|read-node-name), icicle-search-bookmark, palette-mode-map: Use icicle-kbd.</span>
<span class="linecomment">;; 2011/10/02 dadams</span>
<span class="linecomment">;;     icicle-add-key+cmd:</span>
<span class="linecomment">;;       Use Unicode char name in place of self-insert-command.  Remove empty and VARIATION* names.</span>
<span class="linecomment">;; 2011/09/27 dadams</span>
<span class="linecomment">;;     Added: icicle-search-modes (macro).</span>
<span class="linecomment">;;     icicle-search-where-arg: Use icicle-search-modes - handle zero prefix arg.</span>
<span class="linecomment">;;     icicle-(occur|sentences|paragraphs|pages), Use *-search-where-arg, to search files & bookmarks.</span>
<span class="linecomment">;;     icicle-search-define-candidates: Use nil for BEG and END if region is empty.</span>
<span class="linecomment">;;     Thx to Michael Heerdegen.</span>
<span class="linecomment">;; 2011/09/18 dadams</span>
<span class="linecomment">;;     Added: icicle-search-property-default-match-fn.  Handles MuMaMo major mode zones.</span>
<span class="linecomment">;;            icicle-search-char-prop-matches-p.  Doesn't just flatten overlay & text props and use</span>
<span class="linecomment">;;                                                set intersect.  Uses icicle-some with MATCH-FN.</span>
<span class="linecomment">;;     Moved to icicles-fn.el: icicle-flat-list (no longer used).</span>
<span class="linecomment">;;     Moved to icicles-cmd1.el: icicle-(keyword|regexp)-list.</span>
<span class="linecomment">;;     icicle-color-completion-setup: Ensure icicle-prompt is a string before adding property.</span>
<span class="linecomment">;;     icicle-search-where-arg, icicle-search-choose-buffers, icicle-search-(buffer|file):</span>
<span class="linecomment">;;       Bind icicle-prompt.</span>
<span class="linecomment">;;     icicle-search-char-property: Added arg MATCH-FN.  Add it to the return value.</span>
<span class="linecomment">;;     icicle-search-(overlay|text)-property:</span>
<span class="linecomment">;;       Added arg MATCH-FN (pass to icicle-search).  Made all args mandatory.</span>
<span class="linecomment">;;     icicle-search-text-property: When PROP is face, call font-lock-fontify-region.</span>
<span class="linecomment">;;     icicle-search-property-args:</span>
<span class="linecomment">;;       Bind match-fn to icicle-search-property-default-match-fn.  Add it to return value.</span>
<span class="linecomment">;;       Bind icicle-prompt and icicle-hist-var.</span>
<span class="linecomment">;;       For values: for non-face prop, use icicle-sexp-list, not icicle-completing-read-history.</span>
<span class="linecomment">;;     icicle-search-char-property-scan:</span>
<span class="linecomment">;;       Added arg MATCH-FN.  Use icicle-search-char-prop-matches-p.</span>
<span class="linecomment">;;       Extend zone if matching prop values also in contiguous zone.</span>
<span class="linecomment">;;     icicle-search-(regexp|thing)-scan, icicle-search-highlight-input-matches-here,</span>
<span class="linecomment">;;       icicle-search-char-property-scan:</span>
<span class="linecomment">;;         Handle t value for icicle-search-highlight-threshold.</span>
<span class="linecomment">;; 2011/09/09 dadams</span>
<span class="linecomment">;;     icicle-search-w-isearch-string: Added prefix-arg treatment.</span>
<span class="linecomment">;; 2011/09/08 dadams</span>
<span class="linecomment">;;     Added: icicle-search-w-isearch-string, from a lambda in icicles-mode.el.</span>
<span class="linecomment">;; 2011/09/05 dadams</span>
<span class="linecomment">;;     icicle-imenu-*: Others -&gt; Other, as submenu name.</span>
<span class="linecomment">;;     icicle-search, icicle-imenu*-full: Mention C-x . in doc strings.</span>
<span class="linecomment">;; 2011/09/04 dadams</span>
<span class="linecomment">;;     icicle-add-key+cmd: Handle Emacs 23+ consp char-range events, for self-insert.</span>
<span class="linecomment">;;                         Applied renaming of icicle-complete-keys-self-insert-flag to *-ranges.</span>
<span class="linecomment">;;     Removed: icicle-insert-char.</span>
<span class="linecomment">;; 2011/09/02 dadams</span>
<span class="linecomment">;;     Removed: icicle-Info-index-cmd, icicle-Info-menu-cmd, icicle-Info-goto-node-cmd.</span>
<span class="linecomment">;;     icicle-Info-index(-20|-action): Use old-Info-index.</span>
<span class="linecomment">;;     icicle-Info-goto-node-1: Use old-Info-goto-node.</span>
<span class="linecomment">;; 2011/08/27 dadams</span>
<span class="linecomment">;;     icicle-search-char-property-scan: Added optional ACTION arg.  Move hit-end after ACTION.</span>
<span class="linecomment">;;     Added: icicle-imenu-1.  Created from old icicle-imenu*, but: (1) added args FULLP for full,</span>
<span class="linecomment">;;            SUBMENU-FN to pick submenu, (2) pass PREDICATE and pos after forward-sexp for FULLP.</span>
<span class="linecomment">;;     icicle-imenu, icicle-imenu-command: Use icicle-imenu-1.</span>
<span class="linecomment">;;     Added: icicle-imenu(-command|-non-interactive-function)-full, icicle-search-defs-full,</span>
<span class="linecomment">;;            icicle-imenu-(macro|variable|user-option|face|key-(implicit|explicit)-map)(-full),</span>
<span class="linecomment">;;     icicle-apply-action, icicle-apply-list-action, icicle-search-regexp-scan,</span>
<span class="linecomment">;;       icicle-search-action-1, icicle-search-bookmark, icicle-define-search-bookmark-command,</span>
<span class="linecomment">;;       icicle-search-thing-scan, icicle-search-char-property-scan:</span>
<span class="linecomment">;;         Use icicle-condition-case-no-debug instead of condition-case.  Thx to Michael Heerdegen.</span>
<span class="linecomment">;; 2011/08/26 dadams</span>
<span class="linecomment">;;     icicle-imenu:</span>
<span class="linecomment">;;       When multiple Others menus, name them uniquely.</span>
<span class="linecomment">;;       When only one submenu, just use it (no choosing).</span>
<span class="linecomment">;;     icicle-complete-keys-action: Removed useless condition-case.</span>
<span class="linecomment">;;     Make sure to pass format string as first arg to calls to functions error and message.</span>
<span class="linecomment">;; 2011/08/17 dadams</span>
<span class="linecomment">;;     icicle-search-thing-scan: Use correct code (not 1+) also if thingatpt+.el is loaded.</span>
<span class="linecomment">;;     icicle-search-regexp-scan: Quit while loop if no more match, except if complementing.</span>
<span class="linecomment">;;     icicle-search-read-context-regexp, icicle-search-(thing|property)-args, icicle-tags-search:</span>
<span class="linecomment">;;       Change prompt when complementing (add: *NOT*).</span>
<span class="linecomment">;; 2011/08/16 dadams</span>
<span class="linecomment">;;     icicle-maybe-byte-compile-after-load the eval-after-load definitions.</span>
<span class="linecomment">;; 2011/08/14 dadams</span>
<span class="linecomment">;;     icicle-search-thing-scan: Handle icicle-search-complement-domain-p.</span>
<span class="linecomment">;;     Updated doc strings of search commands to mention complementing.</span>
<span class="linecomment">;;     icicle-imenu(-command|-non-interactive-function), icicle-complete-keys-1:</span>
<span class="linecomment">;;       Replaced mapc with dolist so do not require cl.el at runtime (Emacs 20).</span>
<span class="linecomment">;;     icicle-imenu: Ignore case when completing to the type (function etc.).</span>
<span class="linecomment">;; 2011/08/13 dadams</span>
<span class="linecomment">;;     Added: icicle-bookmark-a-file.</span>
<span class="linecomment">;;     icicle-search-regexp-scan, icicle-search-char-property-scan:</span>
<span class="linecomment">;;       Handle icicle-search-complement-domain-p.</span>
<span class="linecomment">;; 2011/08/12 dadams</span>
<span class="linecomment">;;     icicle-find-file-tagged(-other-window):</span>
<span class="linecomment">;;       Bind icicle-full-cand-fn.  Use icicle-file-bindings.</span>
<span class="linecomment">;;       Use icicle-(un)bind-file-candidate-keys.  Don't do/undo such bindings individually here.</span>
<span class="linecomment">;; 2011/08/09 dadams</span>
<span class="linecomment">;;     icicle-find-file-tagged(-other-window): Bind C-x a [+-] to adding/removing tags.</span>
<span class="linecomment">;;     icicle-define(-file)-command calls: Removed undo code if same as last code, so do not repeat it.</span>
<span class="linecomment">;; 2011/08/08 dadams</span>
<span class="linecomment">;;     icicle-find-file-tagged(-other-window): Prefix arg means use all (not just tagged) autofiles.</span>
<span class="linecomment">;; 2011/08/07 dadams</span>
<span class="linecomment">;;     Added: icicle-find-file-tagged(-other-window).</span>
<span class="linecomment">;; 2011/08/05 dadams</span>
<span class="linecomment">;;     icicle-(un)tag-a-file: Bind icicle-use-candidates-only-once-flag to t.</span>
<span class="linecomment">;; 2011/07/31 dadams</span>
<span class="linecomment">;;     Added: icicle-search-xml-element-text-node.</span>
<span class="linecomment">;;     icicle-search-thing(-scan): Added TRANSFORM-FN arg.</span>
<span class="linecomment">;;     icicle-search-define-candidates: Added message when only one candidate.</span>
<span class="linecomment">;; 2011/07/30 dadams</span>
<span class="linecomment">;;     Moved here from icicles-cmd1.el and wrapped in eval-after-load bookmark+.el:</span>
<span class="linecomment">;;       icicle-find-file-(all|some)-tags(-regexp)(-other-window), icicle-(un)tag-a-file.</span>
<span class="linecomment">;;     Moved here from synonyms.el and wrapped in eval-after-load synonyms.el: (icicle)-synonyms.</span>
<span class="linecomment">;;     Moved here from icicles-fn.el and wrapped in eval-after-load hexrgb.el:</span>
<span class="linecomment">;;       icicle-color-*-lessp (except -rgb-), icicle-color-completion-setup, icicle-color-help,</span>
<span class="linecomment">;;        icicle-make-color-candidate.</span>
<span class="linecomment">;;     Soft-require hexrgb.el only when byte-compile.</span>
<span class="linecomment">;;     icicle-frame-(bg|fg), icicle-read-color: Wrap in eval-after-load hexrgb.el.</span>
<span class="linecomment">;;     icicle-(insert|complete)-thesaurus-entry(-cand-fn): Wrap in eval-after-load synonyms.el.</span>
<span class="linecomment">;;     icicle-choose(-(in)visible)-faces, icicle-(hide|show)(-only)-faces:</span>
<span class="linecomment">;;       Use eval-after-load highlight.el, not featurep.</span>
<span class="linecomment">;;     icicle-pick-color-by-name(-action), palette keys: Use eval-after-load palette.el, not featurep.</span>
<span class="linecomment">;; 2011/07/27 dadams</span>
<span class="linecomment">;;     icicle-search-read-word: Changed regexp to what vanilla Emacs uses for word search.</span>
<span class="linecomment">;;     icicle-search(-word): Updated doc string wrt word search.</span>
<span class="linecomment">;; 2011/07/26 dadams</span>
<span class="linecomment">;;     Removed: icicle-list-end-string (no longer needed).  Thx to Michael Heerdegen.</span>
<span class="linecomment">;; 2011/07/24 dadams</span>
<span class="linecomment">;;     Moved here from palette.el, and renamed with prefix icicle-:</span>
<span class="linecomment">;;       icicle-pick-color-by-name, icicle-pick-color-by-name-action</span>
<span class="linecomment">;;     Moved here from highlight.el, and renamed with prefix icicle- (from hlt-) and suffix -faces:</span>
<span class="linecomment">;;       icicle-(hide|show)(-only)-faces, icicle-choose(-(in)visible)-faces.</span>
<span class="linecomment">;;     Added: icicle-invisible-face-p.</span>
<span class="linecomment">;;     icicle-choose(-(in)visible)-faces: Corrected:</span>
<span class="linecomment">;;       Lax if icicle-WYSIWYG-Completions-flag.  Put icicle-fancy-candidates on prompt.</span>
<span class="linecomment">;;       Use icicle-list-*, for multi-completions.  Use icicle-invisible-face-p to test invisibility.</span>
<span class="linecomment">;;     Added eval-when-compile with soft requires for bookmark+.el and highlight.el.</span>
<span class="linecomment">;; 2011/07/18 dadams</span>
<span class="linecomment">;;     icicle-search-thing, icicle-search-thing-scan:</span>
<span class="linecomment">;;       Moved normalizing BEG, END to *-scan, for multiple buffers case.  Thx to M. Heerdegen.</span>
<span class="linecomment">;; 2011/07/13 dadams</span>
<span class="linecomment">;;     icicle-search-replace-cand-in-mct: Changed &lt;= to &lt; for len-rep.  Thx to M. Heerdegen.</span>
<span class="linecomment">;; 2011/07/04 dadams</span>
<span class="linecomment">;;     icicle-search-in-context-default-fn:</span>
<span class="linecomment">;;       Bound icicle-last-completion-candidate, icicle-completion-candidates.  Thx to M. Heerdegen.</span>
<span class="linecomment">;; 2011/07/02 dadams</span>
<span class="linecomment">;;     Added: icicle-defined-thing-p.</span>
<span class="linecomment">;;     icicle-things-alist: Use icicle-defined-thing-p.  Thx to Michael Heerdegen.</span>
<span class="linecomment">;; 2011/06/03 dadams</span>
<span class="linecomment">;;     Replace icicle-help-in-mode-line-flag by icicle-help-in-mode-line-delay everywhere.</span>
<span class="linecomment">;; 2011/05/25 dadams</span>
<span class="linecomment">;;     icicle-fundoc, icicle-vardoc, icicle-plist:</span>
<span class="linecomment">;;       Use icicle-doc-action only.  Bind icicle-list-use-nth-parts to (1).  Thx to Michael Heerdegen.</span>
<span class="linecomment">;; 2011/05/24 dadams</span>
<span class="linecomment">;;     icicle-invisible-p: Use invisible-p if available (Emacs 22+).</span>
<span class="linecomment">;; 2011/05/22 dadams</span>
<span class="linecomment">;;     Added defvars for free vars to quiet byte compiler.</span>
<span class="linecomment">;; 2011/05/16 dadams</span>
<span class="linecomment">;;     icicle-search-thing-args: Message about C-M-; when ignoring comments and THING is comment.</span>
<span class="linecomment">;; 2011/05/15 dadams</span>
<span class="linecomment">;;     Added: icicle-search-xml-element.</span>
<span class="linecomment">;;     icicle-search-thing, icicle-search-thing-scan: Added PREDICATE optional arg.</span>
<span class="linecomment">;; 2011/05/14 dadams</span>
<span class="linecomment">;;     Added: icicle-things-alist.</span>
<span class="linecomment">;;     icicle-search-thing-args, icicle-(next|previous)-visible-thing:</span>
<span class="linecomment">;;       Use icicle-things-alist, not (now removed) option icicle-thing-types.</span>
<span class="linecomment">;;     icicle-next-visible-thing-1: Change comparison to &lt; from &lt;=</span>
<span class="linecomment">;;     Removed: icicle-defined-thing-p (not used).</span>
<span class="linecomment">;; 2011/05/13 dadams</span>
<span class="linecomment">;;     Renamed: icicle-last-visible-thing-type to icicle-last-thing-type.</span>
<span class="linecomment">;;     icicle-last-thing-type: Use thgcmd-last-thing-type value as default, if available.</span>
<span class="linecomment">;;     icicle-search-thing: Ensure BEG is before END (swap if needed).</span>
<span class="linecomment">;;     icicle-search-thing-args, icicle-(next|previous)-visible-thing:</span>
<span class="linecomment">;;       Use completing-read, not read-string, to read thing type.</span>
<span class="linecomment">;;     icicle-(next|previous)-visible-thing: Do not set this-command (no need).</span>
<span class="linecomment">;;     icicle-search-thing-scan: Removed code defining BEG, END if nil.  Go to BEG, not min BEG, END.</span>
<span class="linecomment">;;     icicle-next-visible-thing-2: Do not return an empty thing.</span>
<span class="linecomment">;; 2011/05/11 dadams</span>
<span class="linecomment">;;     Added: icicle-invisible-p, icicle-previous-single-char-property-change.</span>
<span class="linecomment">;;     icicle-search-thing-scan:</span>
<span class="linecomment">;;       Handle also text invisible due to overlay, and invisible prop other than t.</span>
<span class="linecomment">;;     icicle-next-visible-thing-2: Separate handling overlay and text prop.  Use icicle-invisible-p.</span>
<span class="linecomment">;; 2011/05/10 dadams</span>
<span class="linecomment">;;     Added: icicle-last-visible-thing-type, icicle-previous-visible-thing,</span>
<span class="linecomment">;;            icicle-next-visible-thing-(and-bounds|1|2).</span>
<span class="linecomment">;;     Alias icicle-next-visible-thing-(1|2) to the same commands from thing-cmds.el.</span>
<span class="linecomment">;;     icicle-search-thing-scan:</span>
<span class="linecomment">;;       Use when, not while, to skip over invisible (since use next-single-property-change).</span>
<span class="linecomment">;;       Use new icicle-next-visible-and-bounds, so save-excursion and goto min.</span>
<span class="linecomment">;;     Old icicle-next-visible is now ~ *-2, but that handles backward too.  New one is a command.</span>
<span class="linecomment">;; 2011/05/07 dadams</span>
<span class="linecomment">;;     Added: icicle-with-comments-hidden, icicle-hide/show-comments, icicle-search-thing,</span>
<span class="linecomment">;;              icicle-defined-thing-p, icicle-next-visible-thing, icicle-search-thing-args,</span>
<span class="linecomment">;;              icicle-search-thing-scan.</span>
<span class="linecomment">;;     icicle-search: Doc string tweak.</span>
<span class="linecomment">;; 2011/05/04 dadams</span>
<span class="linecomment">;;     icicle-search-read-context-regexp: Changed prompt to make clear that we search within contexts.</span>
<span class="linecomment">;;     icicle-search-define-candidates: Remove any region highlighting, so we can see search hits.</span>
<span class="linecomment">;; 2011/04/29 dadams</span>
<span class="linecomment">;;     icicle-choose-candidate-of-type: Rewrote buffer bindings based on icicle-buffer-bindings.</span>
<span class="linecomment">;; 2011/04/26 dadams</span>
<span class="linecomment">;;     Added: icicle-search-autofile-bookmark.</span>
<span class="linecomment">;; 2011/04/12 dadams</span>
<span class="linecomment">;;     Added: icicle-search-bookmark-list-marked, icicle-named-colors.</span>
<span class="linecomment">;;     icicle-search-bookmark, icicle-define-search-bookmark-command:</span>
<span class="linecomment">;;       Applied Bookmark+ renaming: bmkp-sort-and-remove-dups -&gt; bmkp-sort-omit.</span>
<span class="linecomment">;;     icicle-comint-search: Improved doc string (don't use C-next etc.).</span>
<span class="linecomment">;;     icicle-frame-(bg|fg), icicle-read-color: Rename free var named-colors to icicle-named-colors.</span>
<span class="linecomment">;;       Bind it in icicle-frame-(bg|fg), icicle-read-color, for use in icicle-color-completion-setup.</span>
<span class="linecomment">;; 2011/04/04 dadams</span>
<span class="linecomment">;;     icicle-insert-thesaurus-entry-cand-fn, icicle-goto-marker-1-action, icicle-search-final-act,</span>
<span class="linecomment">;;       icicle-comint-search:  Use icicle-recenter.</span>
<span class="linecomment">;; 2011/04/02 dadams</span>
<span class="linecomment">;;     Added: icicle-info-(buff|window), icicle-key-prefix(-2), icicle-active-map,</span>
<span class="linecomment">;;     Moved here from icicles-var.el:</span>
<span class="linecomment">;;       icicle-orig-buff-key-complete, icicle-orig-extra-cands, icicle-orig-font, icicle-orig-frame,</span>
<span class="linecomment">;;       icicle-orig-menu-bar, icicle-orig-pixelsize, icicle-orig-pointsize, icicle-this-cmd-keys,</span>
<span class="linecomment">;;       icicle-orig-show-initially-flag, icicle-orig-sort-orders-alist, icicle-orig-win-key-complete.</span>
<span class="linecomment">;;     icicle-Info-index(-goto-node)(-action):</span>
<span class="linecomment">;;       Use (new) icicle-info-(buff|window), not info-(buff|window).</span>
<span class="linecomment">;;     icicle-describe-option-of-type, icicle-describe-opt-of-type-complete:</span>
<span class="linecomment">;;       Use (new) icicle-pref-arg, not pref-arg.</span>
<span class="linecomment">;;     icicle-search: Bind (new) icicle-scan-fn-or-regexp.</span>
<span class="linecomment">;;     Moved any alias inside emacs-major-version test.</span>
<span class="linecomment">;;     icicle-complete-keys-1: Bind (new) icicle-key-prefix.</span>
<span class="linecomment">;;     icicle-complete-keys-action: Use (new) icicle-key-prefix, not prefix.</span>
<span class="linecomment">;;     icicle-keys+cmds-w-prefix: Bind (new) icicle-key-prefix-2.  Use icicle-active-map, not map.</span>
<span class="linecomment">;;     icicle-add-key+cmd: Use icicle-key-prefix-2 and icicle-active-map, not prefix and map.</span>
<span class="linecomment">;; 2011/03/31 dadams</span>
<span class="linecomment">;;     icicle-describe-opt-of-type-complete: Wrap icicle-var-is-of-type-p with condition-case.</span>
<span class="linecomment">;; 2011/03/29 dadams</span>
<span class="linecomment">;;     icicle-search-action-1: Set icicle-other-window.  Use icicle-target-window-recenter-amount.</span>
<span class="linecomment">;;     Use new icicle-* vars for various free vars (orig-buff etc.).</span>
<span class="linecomment">;;     icicle-frame-(bg|fg), icicle-read-color: prompt -&gt; icicle-prompt.</span>
<span class="linecomment">;; 2011/03/03 dadams</span>
<span class="linecomment">;;     icicle-insert-thesaurus-entry: Changed to strict completion from lax.</span>
<span class="linecomment">;;     icicle-describe-option-of-type, icicle-(fun|var)doc, icicle-plist:</span>
<span class="linecomment">;;       Removed mention of RET in prompt.</span>
<span class="linecomment">;; 2011/02/17 dadams</span>
<span class="linecomment">;;     Added defalias old-read-color for read-color.</span>
<span class="linecomment">;; 2010/12/26 dadams</span>
<span class="linecomment">;;     Removed autoload cookies except simple ones & ones with sexp on same line.  Thx to Richard Kim.</span>
<span class="linecomment">;; 2010/12/18 dadams</span>
<span class="linecomment">;;     Added more autoload cookies for commands.  Thx to Richard Kim.</span>
<span class="linecomment">;;       Specify command and file for commands defined by Icicles macros.</span>
<span class="linecomment">;;     Require icicles-opt.el before icicles-var.el (but it makes no difference).</span>
<span class="linecomment">;; 2010/12/14 dadams</span>
<span class="linecomment">;;     icicle-search-regexp-scan: Don't create marker if hit string is "".</span>
<span class="linecomment">;;     icicle-search-highlight-all-input-matches:</span>
<span class="linecomment">;;       Don't search within empty search contexts.  Do nothing if input and expanded input are "".</span>
<span class="linecomment">;;       If search doesn't advance point then forward-char.  Stop searching if eobp.</span>
<span class="linecomment">;;       Don't add (empty) overlay if search is empty.</span>
<span class="linecomment">;;     icicle-search-highlight-context-levels: Don't add overlay for empty match.</span>
<span class="linecomment">;;     icicle-search-highlight-input-matches-here: If search doesn't advance point then forward-char.</span>
<span class="linecomment">;;     icicle-search-char-property-scan: Don't create empty overlays.</span>
<span class="linecomment">;; 2010/11/10 dadams</span>
<span class="linecomment">;;     Added: icicle-read-args-for-set-completion-methods.</span>
<span class="linecomment">;;     icicle-set-((S-)TAB|completion)-methods-for-command: Added METHODS arg.</span>
<span class="linecomment">;; 2010/11/09 dadams</span>
<span class="linecomment">;;     Added: icicle-set-((S-)TAB|completion)-methods-for-command.</span>
<span class="linecomment">;; 2010/11/07 dadams</span>
<span class="linecomment">;;     Applied renaming of icicle-all-candidates-action-p to icicle-all-candidates-action.</span>
<span class="linecomment">;; 2010/10/27 dadams</span>
<span class="linecomment">;;     icicle-where-is: Use different prompt if prefix arg.  Clarify the pref-arg diff in doc string.</span>
<span class="linecomment">;; 2010/10/25 dadams</span>
<span class="linecomment">;;     icicle-search: Remove mention of icicle-search-context-match-predicate (no longer exists).</span>
<span class="linecomment">;; 2010/10/24 dadams</span>
<span class="linecomment">;;     icicle-where-is, icicle-apropos-(variable|option|function|command), icicle-apply,</span>
<span class="linecomment">;;       icicle-save-string-to-variable, icicle-choose-candidate-of-type,</span>
<span class="linecomment">;;       icicle-read-var-value-satisfying:</span>
<span class="linecomment">;;         Use icicle-must-pass-after-match-predicate, not PREDICATE arg.</span>
<span class="linecomment">;; 2010/10/09 dadams</span>
<span class="linecomment">;;     icicle-Info-goto-node, icicle-apply, icicle-goto-marker, icicle-occur, icicle-complete-keys,</span>
<span class="linecomment">;;       icicle-(comint|compilation)-search, icicle-search(-sentences|-paragraphs|-pages):</span>
<span class="linecomment">;;         Updated doc string for new prefix and modal cycling keys.</span>
<span class="linecomment">;; 2010/07/17 dadams</span>
<span class="linecomment">;;     Added: icicle-search-url-bookmark.</span>
<span class="linecomment">;;     icicle-search-bookmark, icicle-define-search-bookmark-command: w3m -&gt; url.  Added C-M-u binding.</span>
<span class="linecomment">;; 2010/07/14 dadams</span>
<span class="linecomment">;;     icicle-Info-index: Bind C-x m to icicle-bookmark-info-other-window.</span>
<span class="linecomment">;;     icicle-Info-read-node-name: Restore original binding of C-x m, if any.</span>
<span class="linecomment">;; 2010/06/21 dadams</span>
<span class="linecomment">;;     icicle-comint-search: Wrap search with unwind-protect to remove hook.  Thx to M. Heerdegen.</span>
<span class="linecomment">;; 2010/06/18 dadams</span>
<span class="linecomment">;;     icicle-search-replace-match: Specific error message for read-only buffer.  Thx to M. Heerdegen.</span>
<span class="linecomment">;;     Renamed: bookmarkp-* to bmkp-*.</span>
<span class="linecomment">;; 2010/06/12 dadams</span>
<span class="linecomment">;;     icicle-goto-marker-or-set-mark-command:</span>
<span class="linecomment">;;       Set this-command so C-SPC C-SPC activates when not t-m mode.  Thx to Chris Hecker.</span>
<span class="linecomment">;; 2010/06/11 dadams</span>
<span class="linecomment">;;     icicle-search-action-1: (unless (pos-visible-in-window-p) (recenter -2)).  Thx to M. Heerdegen.</span>
<span class="linecomment">;; 2010/06/08 dadams</span>
<span class="linecomment">;;     icicle-search-bookmark, icicle-define-search-bookmark-command:</span>
<span class="linecomment">;;       Use icicle-bookmark-delete-action.</span>
<span class="linecomment">;;       Use condition-case to filter out bad bookmarks (so no error).</span>
<span class="linecomment">;; 2010/06/04 dadams</span>
<span class="linecomment">;;     Added: icicle-ido-like-mode.</span>
<span class="linecomment">;; 2010/05/16 dadams</span>
<span class="linecomment">;;     Added: icicle-search-(all|some)-tags(-regexp)-bookmark, icicle-search-desktop-bookmark,</span>
<span class="linecomment">;;            icicle-search-specific-(buffers|files)-bookmark, icicle-search-this-buffer-bookmark.</span>
<span class="linecomment">;;     icicle-define-search-bookmark-command: Defined cmd requires bookmark+.el.  Added &rest arg ARGS.</span>
<span class="linecomment">;; 2010/05/15 dadams</span>
<span class="linecomment">;;     icicle-search-highlight-and-maybe-replace: If candidate number is nil, set to 0.</span>
<span class="linecomment">;;     icicle-search: Updated doc string: Can sort.  Don't say not to use C-|.</span>
<span class="linecomment">;; 2010/05/09 dadams</span>
<span class="linecomment">;;     Icicles search: Change to allow sorting.  Use mctized candidates, not alist + candidate nb.</span>
<span class="linecomment">;;       icicle-search-highlight-and-maybe-replace:</span>
<span class="linecomment">;;         Use *-replace-cand-in-mct, not *-replace-cand-in-alist.  Do not *-input-matches-here.</span>
<span class="linecomment">;;       icicle-search-replace-cand-in-mct: Rewrote.</span>
<span class="linecomment">;;         Handle multi-completions also.  Update CAND+MRKER to use replacement string, but keep props.</span>
<span class="linecomment">;;       icicle-search-in-context-default-fn: Rewrote.</span>
<span class="linecomment">;;         Update icicle-last-completion-candidate to current candidate.  Insert that.</span>
<span class="linecomment">;;         Recompute input-match highlighting in current context.  Remove current if no candidates.</span>
<span class="linecomment">;;       icicle-search-action-1: Do nothing if no candidates.</span>
<span class="linecomment">;;       icicle-search-help: Bind icicle-whole-candidate-as-text-prop-p to t, not nil.</span>
<span class="linecomment">;; 2010/05/04 dadams</span>
<span class="linecomment">;;     icicle-object-action: Pass TYP to icicle-apply-to-saved-candidate. (UNTESTED)</span>
<span class="linecomment">;;     icicle-choose-anything-candidate: Pass TYPE to icicle-apply-to-saved-candidate. (UNTESTED)</span>
<span class="linecomment">;;     icicle-apply, icicle-read-var-value-satisfying: Bug fix: Removed #'.</span>
<span class="linecomment">;; 2010/04/30 dadams</span>
<span class="linecomment">;;     icicle-search: Delete icicle-search-current-overlay via icicle-no-match-hook (& restore hook).</span>
<span class="linecomment">;; 2010/04/29 dadams</span>
<span class="linecomment">;;     icicle-apply: Added optional args predicate initial-input hist def inherit-input-method.</span>
<span class="linecomment">;;                   Pass them to icicle-explore.</span>
<span class="linecomment">;;     icicle-goto-marker-1: Pass a PREDICATE arg that ensures the marker points somewhere.</span>
<span class="linecomment">;; 2010/04/25 dadams</span>
<span class="linecomment">;;     icicle-complete-keys-action:</span>
<span class="linecomment">;;       Bind icicle-*, esp. *-initially-flag, around call of this-command-keys.  Thx to M Heerdegen.</span>
<span class="linecomment">;;     icicle-complete-keys: Save some icicle-* vars to reuse in icicle-complete-keys-action.</span>
<span class="linecomment">;; 2010/04/17 dadams</span>
<span class="linecomment">;;     icicle-search-bookmark, icicle-define-search-bookmark-command:</span>
<span class="linecomment">;;       Use icicle-transform-multi-completion in icicle-delete-candidate-object.</span>
<span class="linecomment">;; 2010/04/08 dadams</span>
<span class="linecomment">;;     icicle-get-anything-candidates: Removed #' - it was preventing the fn from being functionp.</span>
<span class="linecomment">;; 2010/04/03 dadams</span>
<span class="linecomment">;;     Removed: icicle-search-desktop-bookmark (no need).</span>
<span class="linecomment">;; 2010/04/02 dadams</span>
<span class="linecomment">;;     Removed:</span>
<span class="linecomment">;;       icicle-add-region, icicle-delete-region-from-alist, icicle-purge-bad-file-regions,</span>
<span class="linecomment">;;       icicle-region-add-buffers, icicle-region-add-short-help, icicle-region-help,</span>
<span class="linecomment">;;       icicle-region-open-all-files, icicle-regions, icicle-region-sorted,</span>
<span class="linecomment">;;       icicle-remove-all-regions-action, icicle-remove-all-regions-in-buffer, icicle-remove-region,</span>
<span class="linecomment">;;       icicle-search-all-regions, icicle-search-region(-action), icicle-select-region(-action).</span>
<span class="linecomment">;;     Added:</span>
<span class="linecomment">;;       icicle-search-bookmark-list-bookmark, icicle-search-bookmarks-together,</span>
<span class="linecomment">;;       icicle-search-desktop-bookmark, icicle-search-dired-bookmark, icicle-search-man-bookmark.</span>
<span class="linecomment">;;     icicle-exchange-point-and-mark, icicle-search(-define-candidates),</span>
<span class="linecomment">;;       icicle-char-properties-in-buffers:</span>
<span class="linecomment">;;         Use only region bookmarks, not Icicles saved regions.</span>
<span class="linecomment">;;     icicle-exchange-point-and-mark: Negative prefix arg prompts for bookmark name.</span>
<span class="linecomment">;;     icicle-search-define-candidates(-1): Raise the no-candidates error in parent, not in (-1).</span>
<span class="linecomment">;;     icicle-search-bookmark: Use full multi-completions.  Use bookmark sort orders.</span>
<span class="linecomment">;;                             Define narrowing keys in both minibuffer maps.</span>
<span class="linecomment">;;     icicle-search-bookmark-action: Transform multi-completion. Use bookmark posns only for region.</span>
<span class="linecomment">;;     icicle-define-search-bookmark-command: Added PROMPT arg.  Use multi-completions, bookmark sorts.</span>
<span class="linecomment">;; 2010/03/28 dadams</span>
<span class="linecomment">;;     Renamed: icicle-search-all-regions to icicle-search-region.</span>
<span class="linecomment">;;     Removed: old icicle-search-region (use icicle-search-region-bookmark instead),</span>
<span class="linecomment">;;              icicle-region-add-buffers, icicle-region-add-short-help, icicle-region-help,</span>
<span class="linecomment">;;              icicle-region-sorted, icicle-region-open-all-files, icicle-add-region,</span>
<span class="linecomment">;;              icicle-remove-region, icicle-delete-region-from-alist,</span>
<span class="linecomment">;;              icicle-purge-bad-file-regions, icicle-remove-all-regions-(in-buffer|action).</span>
<span class="linecomment">;;     icicle-search-all-regions: Use region bookmarks, not icicle-region-alist.</span>
<span class="linecomment">;; 2010/03/27 dadams</span>
<span class="linecomment">;;     Added: icicle-search-(bookmark-list|desktop|dired|man)-bookmark.</span>
<span class="linecomment">;;     icicle-search-bookmark: Use multi-completions.</span>
<span class="linecomment">;;     icicle-search-bookmark-action:</span>
<span class="linecomment">;;       Use icicle-transform-multi-completion.  Use both minibuffer completion maps.</span>
<span class="linecomment">;;       Search region if region bookmark.</span>
<span class="linecomment">;;     icicle-define-search-bookmark-command: Added optional PROMPT arg.  Use multi-completions.</span>
<span class="linecomment">;; 2010/03/13 dadams</span>
<span class="linecomment">;;     Applied renaming of icicle-add-buffer-name-flag to icicle-show-multi-completion-flag.</span>
<span class="linecomment">;; 2010/03/09 dadams</span>
<span class="linecomment">;;     icicle-regions: Use icicle-reversible-sort (with KEY arg), not sort.</span>
<span class="linecomment">;; 2010/03/03 dadams</span>
<span class="linecomment">;;     Applied renamings: icicle-sort-function to icicle-sort-comparer</span>
<span class="linecomment">;;                        icicle-sort-functions-alist to icicle-sort-orders-alist,</span>
<span class="linecomment">;;                        icicle-alternative-sort-function to icicle-alternative-sort-comparer,</span>
<span class="linecomment">;;                        icicle-last-sort-function to icicle-last-sort-comparer.</span>
<span class="linecomment">;; 2010/02/06 dadams</span>
<span class="linecomment">;;     icicle-where-is: Make sure orig-buff is current when look up the bindings.</span>
<span class="linecomment">;; 2010/01/12 dadams</span>
<span class="linecomment">;;     icicle-insert-thesaurus-entry-cand-fn, icicle-marker+text,</span>
<span class="linecomment">;;       icicle-search-(bookmark|region)-action, icicle-char-properties-in-buffer,</span>
<span class="linecomment">;;       icicle-search-char-property-scan:</span>
<span class="linecomment">;;         save-excursion + set-buffer -&gt; with-current-buffer (+ save-excursion).</span>
<span class="linecomment">;;     icicle-search-regexp-scan: set-buffer -&gt; with-current-buffer.</span>
<span class="linecomment">;; 2009/12/13 dadams</span>
<span class="linecomment">;;     icicle-Info-read-node-name: Bind C-x m to icicle-bookmark-info-other-window.</span>
<span class="linecomment">;; 2009/11/24 dadams</span>
<span class="linecomment">;;     icicle-read-color: Copy the prompt string, so *-color-completion-setup can put props.</span>
<span class="linecomment">;; 2009/11/22 dadams</span>
<span class="linecomment">;;     icicle-frame-(bg|fg): Don't apply *-make-color-candidate to named-colors (done already).</span>
<span class="linecomment">;; 2009/11/03 dadams</span>
<span class="linecomment">;;     icicle-frame-(bg|fg): Use named-colors, not x-defined-colors.</span>
<span class="linecomment">;;     icicle-read-color: No need to bind icicle-transform-function, since we use hexrgb.el.</span>
<span class="linecomment">;; 2009/09/05 dadams</span>
<span class="linecomment">;;     icicle-search-replace-all-search-hits:</span>
<span class="linecomment">;;       Bind to nil: icicle-minibuffer-message-ok-p, icicle-help-in-mode-line-flag.</span>
<span class="linecomment">;;     icicle-search-action-1: Add condition-case to ignore disappearance of *Completions* win.</span>
<span class="linecomment">;;     icicle-search-highlight-and-maybe-replace:</span>
<span class="linecomment">;;       Apply renaming of icicle-acting-on-next/prev (no -p).</span>
<span class="linecomment">;;       Use length of *-completion-candidates, not mct.</span>
<span class="linecomment">;;       Fix assignment of new candidate nb, and for both directions.</span>
<span class="linecomment">;;       Bind icicle-minibuffer-message-ok-p to inhibit no-candidates msg.</span>
<span class="linecomment">;;       Wrap around to first only if not icicle-acting-on-next/prev.</span>
<span class="linecomment">;; 2009/09/02 dadams</span>
<span class="linecomment">;;     icicle-exchange-point-and-mark: Respect icicle-region-bookmarks-flag.</span>
<span class="linecomment">;; 2009/08/29 dadams</span>
<span class="linecomment">;;     Added: icicle-define-search-bookmark-command,</span>
<span class="linecomment">;;            icicle-search(-region|-info|-gnus|-w3m|(-non|-local|-remote)-file)-bookmark,</span>
<span class="linecomment">;;            icicle-search-bookmark-action.</span>
<span class="linecomment">;;     Moved (and redefined) to icicles-cmd1.el: icicle-select-bookmarked-region.</span>
<span class="linecomment">;;     (lambda...) -&gt; #'(lambda...).</span>
<span class="linecomment">;; 2009/08/25 dadams</span>
<span class="linecomment">;;     Added icicle-select-bookmarked-region.</span>
<span class="linecomment">;;     icicle-exchange-point-and-mark:</span>
<span class="linecomment">;;       If bookmark+ is loaded, use region bookmarks.</span>
<span class="linecomment">;;       Raise error if try to save inactive region or try to select with no saved regions.</span>
<span class="linecomment">;; 2009/08/11 dadams</span>
<span class="linecomment">;;     Added: icicle-search-replace-all-search-hits.</span>
<span class="linecomment">;;     Renamed: icicle-search-replace-candidate to icicle-search-replace-cand-in-alist.</span>
<span class="linecomment">;;     Added: icicle-search-replace-cand-in-mct (not used, for now).</span>
<span class="linecomment">;;     icicle-search:</span>
<span class="linecomment">;;       Bind icicle-all-candidates-list-alt-action-fn to icicle-search-replace-all-search-hits.</span>
<span class="linecomment">;;       Bind replace-count to 0.  Bind icicle-current-input to empty string.</span>
<span class="linecomment">;;       Updated doc string.</span>
<span class="linecomment">;;     icicle-search-replace-search-hit:</span>
<span class="linecomment">;;       Do not bind icicle-completion-candidates, icicle-candidate-nb, icicle-last-input.</span>
<span class="linecomment">;;       No lack-of-current-candidate error if icicle-all-candidates-action-p.</span>
<span class="linecomment">;;     Added: icicle-search-action-1 (factored out from icicle-search-action.</span>
<span class="linecomment">;;     icicle-search-action, icicle-search-help:</span>
<span class="linecomment">;;       Bind icicle-whole-candidate-as-text-prop-p to nil, to force use of alist.</span>
<span class="linecomment">;;     icicle-search-action(-1): Do not bind icicle-candidate-nb, so don't save and restore it.</span>
<span class="linecomment">;;     icicle-search-in-context-default-fn: If replacement tried, then update the dialog state.</span>
<span class="linecomment">;;     icicle-search-highlight-and-maybe-replace: REWRITE.</span>
<span class="linecomment">;;       Msg if string to be replaced is not found in candidate.</span>
<span class="linecomment">;;       Swap order: Don't search unless first time (or replacing all).</span>
<span class="linecomment">;;       icicle-search-replace-candidate -&gt; icicle-search-replace-cand-in-alist.</span>
<span class="linecomment">;;       If replacement done, then: Update alist, minibuffer-completion-table, and</span>
<span class="linecomment">;;         minibuffer content.  Change candidate nb if navigating next/prev.  Complete again.</span>
<span class="linecomment">;;         Return indication of whether we tried to replace something.</span>
<span class="linecomment">;;     icicle-search-replace-cand-in-alist: Added catch, to skip whole list traversal.</span>
<span class="linecomment">;;     Moved byte-compile quieting defvars to top level.  Added one for tooltip-mode.</span>
<span class="linecomment">;; 2009/07/20 dadams</span>
<span class="linecomment">;;     icicle-font: Ensure no nil elements in COLLECTION arg to completing-read, for Emacs 22+.</span>
<span class="linecomment">;; 2009/06/07 dadams</span>
<span class="linecomment">;;     icicle-get-alist-candidate -&gt; funcall icicle-get-alist-candidate-function.</span>
<span class="linecomment">;;     Added: icicle-purge-bad-file-regions.</span>
<span class="linecomment">;;     icicle-add-region, icicle-(select|search)-region-action:</span>
<span class="linecomment">;;       Special-case Info buffers.  Thx to Thierry Volpiatto.</span>
<span class="linecomment">;; 2009/05/28 dadams</span>
<span class="linecomment">;;     Bind icicle-search-replacement to nil.  (Somehow forgot when moved to icicle-explore.)</span>
<span class="linecomment">;;     icicle-search-replace-search-hit: Raise an error if icicle-candidate-nb is nil.</span>
<span class="linecomment">;; 2009/05/26 dadams</span>
<span class="linecomment">;;     icicle-compilation-search: Use value 'until-move for next-error-highlight.</span>
<span class="linecomment">;; 2009/05/22 dadams</span>
<span class="linecomment">;;     Added: icicle-Info-virtual-book.</span>
<span class="linecomment">;;     Require icicles-mac.el if load-library doesn't find it.</span>
<span class="linecomment">;;     icicle-search: Set icicle-search-final-choice to result.</span>
<span class="linecomment">;;     Created - Split off from icicles-cmd.el.</span>
 
<span class="linecomment">;;;(@* "CHANGE LOG FOR `icicles-face.el'")</span>
<span class="linecomment">;;</span>
<span class="linecomment">;; 2013/01/18 dadams</span>
<span class="linecomment">;;     Removed: icicle-increment-color-(hue|saturation|value) - moved to hexrgb.el and modified.</span>
<span class="linecomment">;;     icicle-search-context-level-*: Use hexrgb-increment-*, with past increment divided by 100.</span>
<span class="linecomment">;; 2012/11/04 dadams</span>
<span class="linecomment">;;     icicle-annotation: Fix default value for older Emacs versions.</span>
<span class="linecomment">;; 2012/10/27 dadams</span>
<span class="linecomment">;;     Added icicle-annotation.</span>
<span class="linecomment">;; 2012/07/07 dadams</span>
<span class="linecomment">;;     Added: icicle-historical-candidate-other (used only for icicle-Info-index so far).</span>
<span class="linecomment">;; 2012/03/29 dadams</span>
<span class="linecomment">;;     Removed autoload cookies: hexrgb require, defs of *-increment-*, and *-search-context-level-*.</span>
<span class="linecomment">;; 2012/03/28 dadams</span>
<span class="linecomment">;;     Soft-require hexrgb.el at autoload generation-time and load-time.  Removed eval-when-compile.</span>
<span class="linecomment">;;     Moved *-increment-* function defs from *-face-after-load-hexrgb to (when (featurep 'hexrgb)...),</span>
<span class="linecomment">;;       and add autoload cookie for that.</span>
<span class="linecomment">;;     Removed: icicle-byte-compile-eval-after-load-flag, icicle-maybe-byte-compile-after-load,</span>
<span class="linecomment">;;              icicle-face-after-load-hexrgb.</span>
<span class="linecomment">;;     Use (when (featurep 'hexrgb)...) instead of (defun icicle-face-after-load-hexrgb...) as wrapper.</span>
<span class="linecomment">;;     Removed calls to icicle-maybe-byte-compile-after-load.</span>
<span class="linecomment">;;     Removed (eval-after-load "hexrgb" '(icicle-face-after-load-hexrgb)).</span>
<span class="linecomment">;;     Removed autoload cookie with autoloads for icicle-increment-color-*.</span>
<span class="linecomment">;;     Changed FILE arg in autoloads by removing .el, so .elc will be loaded if available.</span>
<span class="linecomment">;; 2012/03/25 dadams</span>
<span class="linecomment">;;     Replace autoload cookies for *-increment-color-* by autoloads inside soft-require of hexrgb.el.</span>
<span class="linecomment">;; 2012/02/12</span>
<span class="linecomment">;;     Added def of icicle-byte-compile-eval-after-load-flag here too, so can load before icicles.el.</span>
<span class="linecomment">;; 2011/10/21 dadams</span>
<span class="linecomment">;;     Added face: icicle-msg-emphasis.</span>
<span class="linecomment">;; 2011/10/10 dadams</span>
<span class="linecomment">;;     Added: icicle-face-after-load-hexrgb.</span>
<span class="linecomment">;;     Replaced bodies of eval-after-load sexps with call to icicle-face-after-load-hexrgb.</span>
<span class="linecomment">;;     Added autoload cookies for icicle-increment-color-*.</span>
<span class="linecomment">;;     Removed eval-when-compile to load icicles-mac.</span>
<span class="linecomment">;;     Moved here (and to icicles-cmd2.el) from icicles-mac.el: icicle-maybe-byte-compile-after-load.</span>
<span class="linecomment">;; 2011/10/08 dadams</span>
<span class="linecomment">;;     eval-when-compile icicles-mac.el.</span>
<span class="linecomment">;; 2011/08/16 dadams</span>
<span class="linecomment">;;     Require icicles-mac.el.</span>
<span class="linecomment">;;     icicle-maybe-byte-compile-after-load the eval-after-load definitions.</span>
<span class="linecomment">;; 2011/07/30 dadams</span>
<span class="linecomment">;;     eval-after-load hexrgb.el, not runtime error if not feature, for all fns that use hexrgb.el.</span>
<span class="linecomment">;;     Moved here from icicles-opt.el: icicle-increment-color-value.</span>
<span class="linecomment">;;     icicle-search-context-level-*: Use fboundp icicle-increment-color-satur*, not featurep hexrgb.</span>
<span class="linecomment">;;     Soft-require hexrgb.el when byte compile.</span>
<span class="linecomment">;; 2010/12/26 dadams</span>
<span class="linecomment">;;     Removed autoload cookies except simple ones & ones with sexp on same line.  Thx to Richard Kim.</span>
<span class="linecomment">;; 2010/05/05 dadams</span>
<span class="linecomment">;;     icicle-mustmatch-completion: Changed line-width from 2 to -2.</span>
<span class="linecomment">;; 2010/04/08 dadams</span>
<span class="linecomment">;;     Added autoload cookies.</span>
<span class="linecomment">;; 2010/03/13 dadams</span>
<span class="linecomment">;;     Made icicle-candidate-part paler (light background): #EF84FFEAF427, not #DB17FFF4E581.</span>
<span class="linecomment">;; 2010/02/17 dadams</span>
<span class="linecomment">;;     Moved functions here from icicles-opt.el: icicle-increment-color-(hue|saturation).</span>
<span class="linecomment">;;     So no longer require icicles-opt.el.</span>
<span class="linecomment">;; 2009/04/18 dadams</span>
<span class="linecomment">;;     Removed load-time warning about using Icicles in a text terminal.</span>
<span class="linecomment">;; 2009/04/12 dadams</span>
<span class="linecomment">;;     Added: face icicle-mode-line-help.</span>
<span class="linecomment">;; 2009/01/13 dadams</span>
<span class="linecomment">;;     Added: icicle-extra-candidate.</span>
<span class="linecomment">;; 2008/10/26 dadams</span>
<span class="linecomment">;;     Added group: Icicles-Files.</span>
<span class="linecomment">;; 2008/03/29 dadams</span>
<span class="linecomment">;;     Redefined and renamed faces for completion status indicators.</span>
<span class="linecomment">;;       Renamed: icicle-completing-mustmatch-prompt-prefix to icicle-mustmatch-completion,</span>
<span class="linecomment">;;                icicle-mode-lighter-highlight(-plus) to icicle(-multi-command)-completion.</span>
<span class="linecomment">;;       Removed: icicle-completing-prompt-prefix, icicle-prompt-suffix.</span>
<span class="linecomment">;; 2008/03/09 dadams</span>
<span class="linecomment">;;     Added: icicle-mode-lighter-highlight.</span>
<span class="linecomment">;; 2007/12/10 dadams</span>
<span class="linecomment">;;     Added: icicle-input-completion-fail-lax.</span>
<span class="linecomment">;; 2007/11/18 dadams</span>
<span class="linecomment">;;     Added: icicle-proxy-candidate.</span>
<span class="linecomment">;;     icicle-special-candidate: No longer use a raised box.</span>
<span class="linecomment">;; 2007/10/22 dadams</span>
<span class="linecomment">;;     icicle-special-candidate: Raised box.</span>
<span class="linecomment">;; 2007/08/19 dadams</span>
<span class="linecomment">;;     Added: icicle-input-completion-fail.</span>
<span class="linecomment">;; 2007/06/21 dadams</span>
<span class="linecomment">;;     Added: icicle-candidate-part.  Changed definition of icicle-special-candidate.</span>
<span class="linecomment">;; 2007/06/17 dadams</span>
<span class="linecomment">;;     Added: icicle-saved-candidate.</span>
<span class="linecomment">;; 2007/06/12 dadams</span>
<span class="linecomment">;;     icicle-prompt-suffix: No box for dark background.</span>
<span class="linecomment">;; 2007/06/11 dadams</span>
<span class="linecomment">;;     Better defaults for dark background frames.</span>
<span class="linecomment">;; 2007/06/07 dadams</span>
<span class="linecomment">;;     Changed emacs-commentary-link to point to icicles-doc1.el and icicles-doc2.el.</span>
<span class="linecomment">;; 2007/05/22 dadams</span>
<span class="linecomment">;;     Protected icicle-search-context-level-1 to *-8, in case hexrgb is not loaded.</span>
<span class="linecomment">;; 2007/04/20 dadams</span>
<span class="linecomment">;;     Added: icicle-search-context-level-1 through *-8.</span>
<span class="linecomment">;;     Require icicles-opt.el.</span>
<span class="linecomment">;; 2006/12/22 dadams</span>
<span class="linecomment">;;     Renamed group icicles to Icicles.</span>
<span class="linecomment">;;     Added Icicles subgroups, and assigned them instead of group Icicles:</span>
<span class="linecomment">;;      -Buffers, -Completions-Display, -Key-Bindings, -Key-Completion, -Matching,</span>
<span class="linecomment">;;      -Minibuffer-Display, -Miscellaneous, -Searching.</span>
<span class="linecomment">;; 2006/11/06 dadams</span>
<span class="linecomment">;;     icicle-search-highlight-all-flag -&gt; icicle-search-highlight-threshold (integer)</span>
<span class="linecomment">;; 2006/10/16 dadams</span>
<span class="linecomment">;;     icicle-special-candidate: changed background from Pink to #DB17FFF4E581.</span>
<span class="linecomment">;; 2006/10/04 dadams</span>
<span class="linecomment">;;     Added: icicle-special-candidate.</span>
<span class="linecomment">;; 2006/08/13 dadams</span>
<span class="linecomment">;;     Added: icicle-completing-prompt-prefix.</span>
<span class="linecomment">;; 2006/07/16 dadams</span>
<span class="linecomment">;;     Added dark-background face suggestions from Le Wang - thx.</span>
<span class="linecomment">;; 2006/06/30 dadams</span>
<span class="linecomment">;;     Added: minibuffer-prompt for Emacs &lt; 22 (e.g. Emacs 21.4 has propertize).</span>
<span class="linecomment">;; 2006/04/28 dadams</span>
<span class="linecomment">;;     Added: icicle-whitespace-highlight.</span>
<span class="linecomment">;; 2006/04/14 dadams</span>
<span class="linecomment">;;     Renamed icicle-search-refined-regexp to icicle-search-current-input.</span>
<span class="linecomment">;; 2006/04/07 dadams</span>
<span class="linecomment">;;     Added: icicle-search-main-regexp-others.</span>
<span class="linecomment">;;     Renamed: icicle-search-main-regexp to icicle-search-main-regexp-current.</span>
<span class="linecomment">;; 2006/03/27 dadams</span>
<span class="linecomment">;;     Added: icicle-search-*-regexp.</span>
<span class="linecomment">;; 2006/03/22 dadams</span>
<span class="linecomment">;;     Renamed: icicle-root-highlight-* to icicle-match-highlight-*.</span>
<span class="linecomment">;; 2006/03/21 dadams</span>
<span class="linecomment">;;     Added: icicle-common-match-highlight-Completions.</span>
<span class="linecomment">;;     icicle-root-highlight-Completions: Changed default face.</span>
<span class="linecomment">;; 2006/03/08 dadams</span>
<span class="linecomment">;;     Added: icicle-current-candidate-highlight.</span>
 
<span class="linecomment">;;;(@* "CHANGE LOG FOR `icicles-fn.el'")</span>
<span class="linecomment">;;</span>
<span class="linecomment">;; 2012/12/31 dadams</span>
<span class="linecomment">;;     icicle-next-candidate: Set icicle-mode-line-help.  Do not call icicle-show-help-in-mode-line.</span>
<span class="linecomment">;;     icicle-insert-cand-in-minibuffer:</span>
<span class="linecomment">;;       Ignore errors in put-text-property.  If retrieve singleton cand set, it is read-only (why?).</span>
<span class="linecomment">;;     icicle-insert-candidates: Corrected '(face 'icicle-annotation) to '(face icicle-annotation).</span>
<span class="linecomment">;; 2012/12/28 dadams</span>
<span class="linecomment">;;     icicle-add-default-to-prompt: Handle nil DEFAULT.  Thx to Michael Heerdegen.</span>
<span class="linecomment">;; 2012/12/22 dadams</span>
<span class="linecomment">;;     Added: icicle-add-default-to-prompt.</span>
<span class="linecomment">;;     icicle-completing-read, icicle-read-string: Use icicle-add-default-to-prompt.</span>
<span class="linecomment">;; 2012/12/21 dadams</span>
<span class="linecomment">;;     icicle-unsorted(-file-name)-(prefix|apropos)-candidates:</span>
<span class="linecomment">;;       Compute common match in all cases except i-e-i-t-c-m = 0, and set *-common-match-string to it.</span>
<span class="linecomment">;;     icicle-save-or-restore-input:</span>
<span class="linecomment">;;       Removed test for icicle-expand-input-to-common-match level: expand for all levels.</span>
<span class="linecomment">;; 2012/12/14 dadams</span>
<span class="linecomment">;;     Added: icicle-multi-comp-apropos-complete-match.</span>
<span class="linecomment">;; 2012/12/12 dadams</span>
<span class="linecomment">;;     icicle-expanded-common-match-1:</span>
<span class="linecomment">;;       Use string-match, not icicle-apropos-complete-match-fn, except for first condition (and).</span>
<span class="linecomment">;;     icicle-insert-candidates: Wrap funcall of annotation fn with condition-case, just in case.</span>
<span class="linecomment">;; 2012/12/10 dadams</span>
<span class="linecomment">;;     icicle-read-file-name-default: Protect minibuffer-local-filename-syntax with boundp.</span>
<span class="linecomment">;; 2012/12/06 dadams</span>
<span class="linecomment">;;     Moved minibuffer-with-setup-hook here from icicles-mac.el (and removed eval-when-compile).</span>
<span class="linecomment">;;     icicle-read-shell-command, icicle-dired-read-shell-command:</span>
<span class="linecomment">;;       Use minibuffer-with-setup-hook unconditionally, since provided here unconditionally.</span>
<span class="linecomment">;; 2012/12/05 dadams</span>
<span class="linecomment">;;     icicle-completing-read: Remove HINT before adding it our way.  Thx to Christopher Schmidt.</span>
<span class="linecomment">;; 2012/12/02 dadams</span>
<span class="linecomment">;;     Added: icicle-read-file-name-default, icicle-ORIG-read-file-name-default.</span>
<span class="linecomment">;; 2012/11/27 dadams</span>
<span class="linecomment">;;     icicle-completing-read:</span>
<span class="linecomment">;;       For icicle-default-value = t: Append ": " to icicle-default-in-prompt-format-function result.</span>
<span class="linecomment">;; 2012/11/26 dadams</span>
<span class="linecomment">;;     icicle-completing-read: Use new option icicle-default-in-prompt-format-function.</span>
<span class="linecomment">;; 2012/11/21 dadams</span>
<span class="linecomment">;;     icicle-completing-read: Commented out removing dir part of icicle-default-value in prompt.</span>
<span class="linecomment">;; 2012/11/17 dadams</span>
<span class="linecomment">;;     icicle-completing-read:</span>
<span class="linecomment">;;       When (eq icicle-default-value t) add DEF to PROMPT.  Thx to Michael Heerdegen.</span>
<span class="linecomment">;; 2012/11/10 dadams</span>
<span class="linecomment">;;     icicle-custom-type: icicle-get-safe -&gt; get.</span>
<span class="linecomment">;;     icicle-fuzzy-candidates: Show all (not no) candidates for empty input, sorted alphabetically.</span>
<span class="linecomment">;; 2012/11/08 dadams</span>
<span class="linecomment">;;     Added: icicle-get-safe.</span>
<span class="linecomment">;;     icicle-completion-setup-function, icicle-var-(is-of|matches|inherits)-type-p,</span>
<span class="linecomment">;;       icicle-var-val-satisfies-type-p, icicle-custom-type, icicle-fit-completions-window,</span>
<span class="linecomment">;;       icicle-next-candidate, icicle-recompute-candidates, icicle-save-or-restore-input,</span>
<span class="linecomment">;;       icicle-highlight-input-noncompletion:</span>
<span class="linecomment">;;         Use icicle-get-safe.</span>
<span class="linecomment">;; 2012/11/07 dadams</span>
<span class="linecomment">;;     icicle-read-char-by-name, icicle-read-from-minibuffer: char-to-string -&gt; string.</span>
<span class="linecomment">;;     icicle-scatter: Non-backtracking version.</span>
<span class="linecomment">;; 2012/10/27 dadams</span>
<span class="linecomment">;;     Added: icicle-member-ignore-case.</span>
<span class="linecomment">;;     icicle-insert-candidates:</span>
<span class="linecomment">;;       Insert annotation only if icicle-show-annotations-flag.  Highlight w/ face icicle-annotation.</span>
<span class="linecomment">;; 2012/10/24 dadams</span>
<span class="linecomment">;;     icicle-completion--embedded-envvar-table: Return 0 as the first boundary.  Thx to M. Heerdegen.</span>
<span class="linecomment">;; 2012/10/22 dadams</span>
<span class="linecomment">;;     icicle-display-candidates-in-Completions: Check Info topic first in icicle-Info-index-cache.</span>
<span class="linecomment">;;     icicle-Info-node-is-indexed-by-topic:</span>
<span class="linecomment">;;       Return triplet: (TOPIC NODE FILE).  Cache triplet in icicle-Info-index-cache (new).</span>
<span class="linecomment">;; 2012/10/21 dadams</span>
<span class="linecomment">;;     icicle-take: Use a simpler definition.</span>
<span class="linecomment">;; 2012/10/20 dadams</span>
<span class="linecomment">;;     icicle-completion--embedded-envvar-table: Added more of vanilla code.  Thx to Michael Heerdegen.</span>
<span class="linecomment">;; 2012/10/18 dadams</span>
<span class="linecomment">;;     icicle-read-file-name, icicle-read-number, icicle-read-char-exclusive,</span>
<span class="linecomment">;;       icicle-read-string-completing, icicle-read-face-name:</span>
<span class="linecomment">;;         Do not augment icicle-proxy-candidates if icicle-exclude-default-proxies is non-nil.</span>
<span class="linecomment">;;         For all of them except icicle-read-face-name (already done): Augment, do not just replace.</span>
<span class="linecomment">;; 2012/10/17 dadams</span>
<span class="linecomment">;;     icicle-display-candidates-in-Completions:</span>
<span class="linecomment">;;       For *Completions* mode line: treat nil icicle-apropos-complete-match-fn like apropos.</span>
<span class="linecomment">;; 2012/10/15 dadams</span>
<span class="linecomment">;;     icicle-(highlight|clear)-lighter: Use || to indicate multi-completion.</span>
<span class="linecomment">;; 2012/10/10 dadams</span>
<span class="linecomment">;;     icicle-display-candidates-in-Completions:</span>
<span class="linecomment">;;       Add lighter and completion mode to *Completions* mode line. </span>
<span class="linecomment">;;     icicle-(prefix|apropos)-candidates:</span>
<span class="linecomment">;;       Call *-maybe-sort-maybe-truncate even if *-sort-comparer is nil.  Needed for truncation.</span>
<span class="linecomment">;;     icicle-maybe-sort-maybe-truncate:</span>
<span class="linecomment">;;       Handle new icicle-max-candidates value of RESET, from icicle-doremi-increment-max-candidates+</span>
<span class="linecomment">;; 2012/10/09 dadams</span>
<span class="linecomment">;;     icicle-read-face-name: Bind icicle-multi-completing-p to t.</span>
<span class="linecomment">;; 2012/10/05 dadams</span>
<span class="linecomment">;;     icicle-next-candidate: Removed setting of icicle-default-directory (unused).</span>
<span class="linecomment">;; 2012/10/02 dadams</span>
<span class="linecomment">;;     icicle-file-name-(non)directory, icicle-input-from-minibuffer:</span>
<span class="linecomment">;;       string-to-list -&gt; append the string to (),</span>
<span class="linecomment">;;         Because Emacs 24 now breaks older byte-compiled code, since it removed string-to-sequence.</span>
<span class="linecomment">;; 2012/10/01 dadams</span>
<span class="linecomment">;;     icicle-file-name-(non)directory, icicle-input-from-minibuffer:</span>
<span class="linecomment">;;       Rewrote to be more robust: do not hard-code ^G as the REPL-CHAR.  Use a char not in string.</span>
<span class="linecomment">;; 2012/09/25 dadams</span>
<span class="linecomment">;;     icicle-input-from-minibuffer, icicle-minibuf-input-sans-dir,</span>
<span class="linecomment">;;       icicle-highlight-input-noncompletion:</span>
<span class="linecomment">;;         Handle the icicle-abs-file-candidates case also - same as the icicle-file-name-input-p case.</span>
<span class="linecomment">;; 2012/09/24 dadams</span>
<span class="linecomment">;;     Added: icicle-last-accessed-first-p.</span>
<span class="linecomment">;;     icicle-read-shell-command-completing: Pass non-nil NO-ERROR-P arg to icicle-describe-file.</span>
<span class="linecomment">;;     icicle-file-type-less-p, icicle-dirs-(first|last)-p, icicle-last-modified-first-p:</span>
<span class="linecomment">;;       Use file comparison also if icicle-abs-file-candidates.</span>
<span class="linecomment">;; 2012/09/17 dadams</span>
<span class="linecomment">;;     icicle-insert-candidates:</span>
<span class="linecomment">;;       Add an extra newline after multi-line candidates only, not after all cands if ANY-MULTILINE-P.</span>
<span class="linecomment">;; 2012/09/08 dadams</span>
<span class="linecomment">;;     Added: icicle-read-buffer, icicle-ORIG-read-buffer.</span>
<span class="linecomment">;;     icicle-unsorted-(prefix|apropos)-candidates:</span>
<span class="linecomment">;;       Use buffer-name alist, if not ignoring space prefix and not internal-complete-buffer.</span>
<span class="linecomment">;;       Ensure icicle-buffer-name-input-p to pass icicle-buffer-ignore-space-prefix-flag arg.</span>
<span class="linecomment">;;     icicle-unsorted-file-name-(prefix|apropos)-candidates,</span>
<span class="linecomment">;;       icicle-apropos-any-file-name-candidates-p:</span>
<span class="linecomment">;;         Do not pass icicle-ignore-space-prefix-flag arg to icicle-all-completions.</span>
<span class="linecomment">;;     icicle-display-Completions, icicle-apropos-any-candidates-p:</span>
<span class="linecomment">;;       Ensure icicle-buffer-name-input-p to pass icicle-buffer-ignore-space-prefix-flag arg.</span>
<span class="linecomment">;; 2012/09/06 dadams</span>
<span class="linecomment">;;     Added icicle-string-match-p.  Use it.</span>
<span class="linecomment">;; 2012/08/31 dadams</span>
<span class="linecomment">;;     icicle-read-from-minibuffer: Improved doc string.</span>
<span class="linecomment">;; 2012/08/28 dadams</span>
<span class="linecomment">;;     icicle-read-number: Allow for DEFAULT to be a cons with nil elements.  Thx to C. Schmidt.</span>
<span class="linecomment">;; 2012/08/18 dadams</span>
<span class="linecomment">;;     Added: icicle-bounds-of-thing-at-point.</span>
<span class="linecomment">;;     thing-at-point -&gt; icicle-thing-at-point, everywhere.</span>
<span class="linecomment">;; 2012/08/13 dadams</span>
<span class="linecomment">;;     icicle-completing-read-multiple: Doc string improvement.</span>
<span class="linecomment">;; 2012/08/06 dadams</span>
<span class="linecomment">;;     Renamed old-* to icicle-ORIG-*:</span>
<span class="linecomment">;;       icicle-ORIG-choose-completion-string, icicle-ORIG-completing-read,</span>
<span class="linecomment">;;       icicle-ORIG-completing-read-multiple, icicle-ORIG-completion-setup-function,</span>
<span class="linecomment">;;       icicle-ORIG-dired-smart-shell-command, icicle-ORIG-display-completion-list,</span>
<span class="linecomment">;;       icicle-ORIG-face-valid-attribute-values, icicle-ORIG-minibuffer-default-add-completions,</span>
<span class="linecomment">;;       icicle-ORIG-read-char-by-name, icicle-ORIG-read-face-name,</span>
<span class="linecomment">;;       icicle-ORIG-read-from-minibuffer, icicle-ORIG-read-number,</span>
<span class="linecomment">;;       icicle-ORIG-read-string, icicle-ORIG-shell-command, icicle-ORIG-shell-command-on-region,</span>
<span class="linecomment">;;       icicle-ORIG-crm-local-completion-map, icicle-ORIG-crm-local-must-match-map.</span>
<span class="linecomment">;;     icicle-read-file-name-1: Applied renaming: new name icicle-orig-read-file-name-fn.</span>
<span class="linecomment">;; 2012/07/21 dadams</span>
<span class="linecomment">;;     icicle-show-help-in-mode-line:</span>
<span class="linecomment">;;       Allow value of property icicle-mode-line-help to be a function.</span>
<span class="linecomment">;;       For a file-name candidate, call icicle-help-line-buffer with NO-FILE-P.</span>
<span class="linecomment">;;     icicle-help-line-buffer: Added optional arg NO-FILE-P.  Include file name, if any.</span>
<span class="linecomment">;; 2012/07/19 dadams</span>
<span class="linecomment">;;     icicle-insert-candidates: Fix change from 7/18: ensure icicle-last-completion is non-nil.</span>
<span class="linecomment">;; 2012/07/18 dadams</span>
<span class="linecomment">;;     icicle-insert-candidates: Handle annotations.</span>
<span class="linecomment">;; 2012/07/17 dadams</span>
<span class="linecomment">;;     icicle-read-char-by-name: Show char and its code point in mode line when cycle.</span>
<span class="linecomment">;; 2012/07/07 dadams</span>
<span class="linecomment">;;     Added: icicle-Info-node-is-indexed-by-topic.</span>
<span class="linecomment">;;     icicle-display-candidates-in-Completions:</span>
<span class="linecomment">;;       Added highlighting of topics pointing to visited Info nodes, for icicle-Info-index.</span>
<span class="linecomment">;;       Call icicle-transform-multi-completion on file-name cand for historical-cand highlighting.</span>
<span class="linecomment">;;     File-name completion fixes (thx to Michael Heerdegen):</span>
<span class="linecomment">;;       Added: icicle-completion--embedded-envvar-table.</span>
<span class="linecomment">;;       icicle-unsorted-file-name-prefix-candidates:</span>
<span class="linecomment">;;         Use substitute-in-file-name on arg INPUT.</span>
<span class="linecomment">;;         For Emacs 24+, bind minibuffer-completion-table to icicle-file-name-completion-table.</span>
<span class="linecomment">;;       icicle-insert-cand-in-minibuffer: Removed insert-default-directory from AND as condition.</span>
<span class="linecomment">;;       icicle-save-or-restore-input:</span>
<span class="linecomment">;;         Removed insert-default-directory from COMMON condition for file-name completion.</span>
<span class="linecomment">;;         Pass (NOT INSERT-DEFAULT-DIRECTORY) as 3rd arg to icicle-abbreviate-or-expand-file-name.</span>
<span class="linecomment">;;       icicle-abbreviate-or-expand-file-name: Added optional arg DONT-ADD-DEFAULT-DIR-P.</span>
<span class="linecomment">;;     Removed #' from lambdas.</span>
<span class="linecomment">;; 2012/06/25 dadams</span>
<span class="linecomment">;;     Corrected change of 5/13: Removed call to file-name-as-directory.</span>
<span class="linecomment">;;     icicle-alt-act-fn-for-type: Removed backquoting from lambda, since it uses a macro in *-mac.el.</span>
<span class="linecomment">;; 2012/06/24 dadams</span>
<span class="linecomment">;;     icicle-read-shell-command-completing:</span>
<span class="linecomment">;;       Use shell-command-to-string in *Help* explicitly, not just shell-command.</span>
<span class="linecomment">;;       Thx to Christopher Schmidt & Michael Heerdegen.</span>
<span class="linecomment">;;     icicle-help-line-(buffer|file): Handle fixnum overflow if buffer or file is too big.</span>
<span class="linecomment">;;     icicle-insert-candidates: Remove extra newline at eob when vertical format.</span>
<span class="linecomment">;; 2012/06/21 dadams</span>
<span class="linecomment">;;     icicle-prefix-any-file-name-candidates-p: updated for Emacs 23+ (file-name PRED).</span>
<span class="linecomment">;; 2012/06/18 dadams</span>
<span class="linecomment">;;     icicle-help-line-buffer: Use format-mode-line if available.</span>
<span class="linecomment">;; 2012/06/09 dadams</span>
<span class="linecomment">;;     icicle-display-candidates-in-Completions, icicle-highlight-initial-whitespace:</span>
<span class="linecomment">;;       Use point-max if 1+ point is greater.</span>
<span class="linecomment">;;     icicle-display-completion-list:</span>
<span class="linecomment">;;       Insert help string only if there are completions.</span>
<span class="linecomment">;;       Show text "There are no possible..." anyway, even if the show flag is nil.</span>
<span class="linecomment">;;     icicle-expand-file-name-20: Move forward-line only if the show flag is non-nil - else no-op.</span>
<span class="linecomment">;; 2012/05/22 dadams</span>
<span class="linecomment">;;     icicle-file-remote-p: Aligned with bmkp-file-remote-p - removed ffap; added final string-match.</span>
<span class="linecomment">;;     icicle-show-help-in-mode-line, icicle-quote-file-name-part-of-cmd:</span>
<span class="linecomment">;;       Test with icicle-file-remote-p before file-exists-p, to avoid Tramp.  Thx to Michael Albinus.</span>
<span class="linecomment">;; 2012/05/13 dadams</span>
<span class="linecomment">;;     icicle-completion-setup-function (all Emacs versions):</span>
<span class="linecomment">;;       Corrected what becomes default-directory:  Use substitute-in-file-name, to expand env vars.</span>
<span class="linecomment">;;       Use expand-file-name and file-name-as-directory.</span>
<span class="linecomment">;; 2012/04/30 dadams</span>
<span class="linecomment">;;     icicle-unsorted-file-name-prefix-candidates:</span>
<span class="linecomment">;;       Forgot to use PRED, not default-directory, in second call to try-completion.</span>
<span class="linecomment">;; 2012/04/23 dadams</span>
<span class="linecomment">;;     icicle-files-within(-1): If Dired+ available, use diredp-files-within(-1).</span>
<span class="linecomment">;;     Moved to dired+.el (and renamed prefix): icicle-directories-within.</span>
<span class="linecomment">;; 2012/04/20 dadams</span>
<span class="linecomment">;;     Added: icicle-directories-within (not yet used).</span>
<span class="linecomment">;;     icicle-files-within: Added args INCLUDE-DIRS-P, PREDICATE.  Remove killed Dired buffers.</span>
<span class="linecomment">;; 2012/04/13 dadams</span>
<span class="linecomment">;;     icicle-files-within-1: Allow FILE-LIST to be a function.  *-within: Updated doc accordingly.</span>
<span class="linecomment">;; 2012/04/08 dadams</span>
<span class="linecomment">;;     icicle-minibuffer-default-add-dired-shell-commands: Make autoload cookie load icicles[.el].</span>
<span class="linecomment">;; 2012/03/30 dadams</span>
<span class="linecomment">;;     icicle-join-nth-parts:</span>
<span class="linecomment">;;       Handle a singleton PARTS normally, according to icicle-list-use-nth-parts - do not just</span>
<span class="linecomment">;;       return the CAND.  If PARTS is nil, return "".</span>
<span class="linecomment">;; 2012/03/16 dadams</span>
<span class="linecomment">;;     icicle-display-candidates-in-Completions:</span>
<span class="linecomment">;;       Show thumbnails for image-file bookmarks also (see Bookmark+).</span>
<span class="linecomment">;;       Call remove-images to remove left-over image overlays (bug fix).</span>
<span class="linecomment">;;     icicle-unpropertize-completion: Removed icicle-keep-newline (no longer used).</span>
<span class="linecomment">;; 2012/02/29 dadams</span>
<span class="linecomment">;;     icicle-set-difference.  Added optional KEY arg.</span>
<span class="linecomment">;; 2012/02/22 dadams</span>
<span class="linecomment">;;     icicle-read-char-by-name: Updated per Juri's Emacs 24 patch (see Emacs bug #10857).</span>
<span class="linecomment">;; 2012/02/18 dadams</span>
<span class="linecomment">;;     icicle-show-help-in-mode-line: Use property help-echo if icicle-mode-line-help is nil.</span>
<span class="linecomment">;; 2012/02/11 dadams</span>
<span class="linecomment">;;     icicle-display-candidates-in-Completions:</span>
<span class="linecomment">;;       Always highlight expanded common match now, not just when prefix or *-expand-input is non-nil.</span>
<span class="linecomment">;;     icicle-unsorted(-file-name)-(prefix|apropos)-candidates:</span>
<span class="linecomment">;;       Set icicle-common-match-string to expansion only if expanding (prefix: 3 or 4, apropos: 4).</span>
<span class="linecomment">;;     icicle-save-or-restore-input:</span>
<span class="linecomment">;;       Do not save if apropos and not 4 or prefix and not 3 or 4. (Before: checked only for apropos.)</span>
<span class="linecomment">;;     icicle-remove-duplicates:</span>
<span class="linecomment">;;       Do not use hash table for Emacs 20, even if cl.el loaded, so can byte-compile and use later.</span>
<span class="linecomment">;; 2012/02/08 dadams</span>
<span class="linecomment">;;     icicle-remove-duplicates: Redefined to use a hash table.</span>
<span class="linecomment">;;     icicle-remove-dups-if-extras: Call icicle-remove-duplicates (not inlined).</span>
<span class="linecomment">;; 2012/02/02 dadams</span>
<span class="linecomment">;;     icicle-fuzzy-candidates: Use (min (length input) icicle-swank-prefix-length), not just the var.</span>
<span class="linecomment">;; 2012/01/20 dadams</span>
<span class="linecomment">;;     icicle-call-then-update-Completions: Do the sit-for even if only one candidate.</span>
<span class="linecomment">;; 2012/01/17 dadams</span>
<span class="linecomment">;;     icicle-insert-candidates:</span>
<span class="linecomment">;;       Put mouse-face on final \n also.  No longer use property icicle-keep-newline.</span>
<span class="linecomment">;;       No longer treat single-newline candidate specially.  Thx to Michael Heerdegen.</span>
<span class="linecomment">;;     icicle-file-remote-p: Respect new var icicle-network-drive-means-remote-flag: nil means local.</span>
<span class="linecomment">;;     icicle-call-then-update-Completions: Corrected logic for triggering re-complete.</span>
<span class="linecomment">;;       In particular, REMOTE-TEST = file-remote-p prevents, rather than causes, re-completion.</span>
<span class="linecomment">;;     icicle-ms-windows-NET-USE: Corrected hash-table support test: fboundp puthash, not hash-table-p.</span>
<span class="linecomment">;;     icicle-choose-completion-string: let -&gt; let* (typo).</span>
<span class="linecomment">;; 2012/01/14 dadams</span>
<span class="linecomment">;;     Added: icicle-char-cands-from-charlist, icicle-read-char-maybe-completing, icicle-ucs-names.</span>
<span class="linecomment">;;     icicle-read-char-by-name: Added optional arg NAMES.  Use icicle-ucs-names, not ucs-names.</span>
<span class="linecomment">;; 2011/12/31 dadams</span>
<span class="linecomment">;;     Reversed fix of 2011/04/12 for Emacs &lt; 23:</span>
<span class="linecomment">;;       icicle-unsorted-file-name-*, icicle-apropos-any-file-name-candidates-p:</span>
<span class="linecomment">;;         Use default-directory, not minibuffer-completion-predicate, for Emacs &lt; 23.</span>
<span class="linecomment">;; 2011/12/28 dadams</span>
<span class="linecomment">;;     Removed mention of obsolete option icicle-cycle-into-subdirs-flag.</span>
<span class="linecomment">;; 2011/12/24 dadams</span>
<span class="linecomment">;;     icicle-insert-candidates:</span>
<span class="linecomment">;;       When only one column, set window width to column width.</span>
<span class="linecomment">;;       Use option icicle-Completions-max-columns.</span>
<span class="linecomment">;;     icicle-fit-completions-window: Clarify doc string.</span>
<span class="linecomment">;; 2011/12/15 dadams</span>
<span class="linecomment">;;     icicle-display-candidates-in-Completions:</span>
<span class="linecomment">;;       For face icicle-historical-candidate, expand file names before comparing.</span>
<span class="linecomment">;; 2011/12/06 dadams</span>
<span class="linecomment">;;     icicle-read-from-minibuffer: Do not add default value to prompt.</span>
<span class="linecomment">;; 2011/10/21 dadams</span>
<span class="linecomment">;;     Added: icicle-propertize.</span>
<span class="linecomment">;;     Renamed: icicle-unpropertize to icicle-unpropertize-completion.  Applied renaming everywhere.</span>
<span class="linecomment">;;     icicle-display-candidates-in-Completions, icicle-kill-a-buffer: Use icicle-propertize.</span>
<span class="linecomment">;; 2011/10/09 dadams</span>
<span class="linecomment">;;     Moved here from icicles-mac.el: icicle-try-switch-buffer, select-frame-set-input-focus.</span>
<span class="linecomment">;;     Copied here from icicles-mac.el: icicle-assoc-delete-all.</span>
<span class="linecomment">;;     Removed autoload cookie for icicle-maybe-cached-action.</span>
<span class="linecomment">;; 2011/10/08 dadams</span>
<span class="linecomment">;;     Added: icicle-delete-alist-dups.</span>
<span class="linecomment">;;     icicle-completing-read-history:</span>
<span class="linecomment">;;       Use prin1, not princ, to convert to strings.  Thx to Michael Heerdegen.</span>
<span class="linecomment">;;     icicle-key-description: Added PREFIX arg.  Use Emacs 22+ form of key-description if available.</span>
<span class="linecomment">;;                             Changed arg NO-ANGLES to ANGLES.</span>
<span class="linecomment">;;     icicle-read-char-by-name: Do not remove  VARIATION* names (Unicode).</span>
<span class="linecomment">;; 2011/10/05 dadams</span>
<span class="linecomment">;;     icicle-display-candidates-in-Completions:</span>
<span class="linecomment">;;       Use same font family, not same font, as orig buff.  Only for Emacs 23+, and only when</span>
<span class="linecomment">;;         icicle-pre-minibuffer-buffer is defined.  Removed dedicated-p condition.  Removed zoom-out.</span>
<span class="linecomment">;; 2011/10/02 dadams</span>
<span class="linecomment">;;     Added: icicle-read-char-by-name.</span>
<span class="linecomment">;;     icicle-display-candidates-in-Completions: Give *Completions* the same font as starting buffer.</span>
<span class="linecomment">;; 2011/09/14 dadams</span>
<span class="linecomment">;;     Added: icicle-some.</span>
<span class="linecomment">;;     Moved here from icicles-cmd2.el: icicle-flat-list (but no longer used).</span>
<span class="linecomment">;; 2011/09/05 dadams</span>
<span class="linecomment">;;     icicle-display-candidates-in-Completions: Act on new option icicle-hide-non-matching-lines-flag.</span>
<span class="linecomment">;; 2011/09/02 dadams</span>
<span class="linecomment">;;     Added: icicle-delete-dups.</span>
<span class="linecomment">;;     icicle-display-candidates-in-Completions: Don't highlight an empty match.</span>
<span class="linecomment">;;     icicle-insert-candidates:</span>
<span class="linecomment">;;       If only one column then colwidth should not be more than max-cand-len.</span>
<span class="linecomment">;;       If whole cand is a single \n then do not treat it as the last \n (do not remove mouse-face).</span>
<span class="linecomment">;; 2011/08/27 dadams</span>
<span class="linecomment">;;     icicle-recentf-make-menu-items, icicle-display-candidates-in-Completions,</span>
<span class="linecomment">;;       icicle-command-abbrev-save, icicle-kill-a-buffer:</span>
<span class="linecomment">;;         Use icicle-condition-case-no-debug instead of condition-case.  Thx to Michael Heerdegen.</span>
<span class="linecomment">;; 2011/08/26 dadams</span>
<span class="linecomment">;;     icicle-place-cursor: Put cursor at eob if get invalid-regexp error.</span>
<span class="linecomment">;;     icicle-get-candidates-from-saved-set: Use %s, not %S, in error format string.</span>
<span class="linecomment">;; 2011/08/15 dadams</span>
<span class="linecomment">;;     icicle-display-completion-list: Do not call (last ...) if COMPLETIONS is null.</span>
<span class="linecomment">;;     Added: icicle-all-completions.</span>
<span class="linecomment">;;     Use icicle-all-completions, not all-completions, wherever a 4th arg is passed.</span>
<span class="linecomment">;; 2011/08/12 dadams</span>
<span class="linecomment">;;     icicle-completing-p: Handle cases of filename must-match maps.</span>
<span class="linecomment">;;     icicle-file-name-input-p: Improved doc string.</span>
<span class="linecomment">;; 2011/08/09 dadams</span>
<span class="linecomment">;;     Added: icicle-replace-mct-cand-in-mct.</span>
<span class="linecomment">;; 2011/08/07 dadams</span>
<span class="linecomment">;;     icicle-display-candidates-in-Completions,</span>
<span class="linecomment">;;       icicle-highlight-(initial-whitespace|complete-input|lighter), icicle-case-string-less-p,</span>
<span class="linecomment">;;       icicle-expanded-common-match-1, icicle-insert-cand-in-minibuffer, icicle-place-cursor,</span>
<span class="linecomment">;;       icicle-(special|extra)-candidates-first-p: Handle absolute file names too:</span>
<span class="linecomment">;;           (icicle-file-name-input-p) -&gt; (or (icicle-file-name-input-p) icicle-abs-file-candidates)</span>
<span class="linecomment">;;     icicle-display-candidates-in-Completions:: icicle-transform-multi-completion for image-file.</span>
<span class="linecomment">;; 2011/08/03 dadams</span>
<span class="linecomment">;;     icicle-lisp-vanilla-completing-read:</span>
<span class="linecomment">;;       Handle recent Emacs 24 changes: make-compose-keymap etc.  Thx to Stefan Monnier.</span>
<span class="linecomment">;; 2011/07/30 dadams</span>
<span class="linecomment">;;     Moved to icicles-cmd2.el and wrapped in eval-after-load hexrgb:</span>
<span class="linecomment">;;       icicle-color-*-lessp (except -rgb-), icicle-color-completion-setup, icicle-color-help,</span>
<span class="linecomment">;;        icicle-make-color-candidate.</span>
<span class="linecomment">;; 2011/07/27 dadams</span>
<span class="linecomment">;;     Use icicle-completions-format everywhere, not icicle-completions-format-internal (removed).</span>
<span class="linecomment">;;     icicle-nb-of-cand-in-Completions-horiz: Bind icicle-completions-format to horizontal, not nil.</span>
<span class="linecomment">;; 2011/07/26 dadams</span>
<span class="linecomment">;;     icicle-insert-candidates: Vertical multiline: add only one newline, not two.  Use \' not $.</span>
<span class="linecomment">;;     Removed: icicle-list-end-string (no longer needed).</span>
<span class="linecomment">;;     Thx to Michael Heerdegen.</span>
<span class="linecomment">;; 2011/07/20 dadams</span>
<span class="linecomment">;;     icicle-mctized-full-candidate: Don't change icicle-completions-format-internal to horizontal.</span>
<span class="linecomment">;;     icicle-insert-candidates: If any candidate is multiline then use only one column.</span>
<span class="linecomment">;;     Thx to Michael Heerdegen.</span>
<span class="linecomment">;; 2011/07/06 dadams</span>
<span class="linecomment">;;     icicle-fit-completions-window:</span>
<span class="linecomment">;;       Emacs 22/23 fix: do not call fit-window-to-buffer.  Thx to Michael Heerdegen.</span>
<span class="linecomment">;;     icicle-read-face-name: Added version for Emacs 24+.</span>
<span class="linecomment">;; 2011/06/05 dadams</span>
<span class="linecomment">;;     icicle-unsorted(-file-name)-prefix-candidates, icicle-prefix-any(-file-name)-candidates-p:</span>
<span class="linecomment">;;       Add METADATA arg to icicle-completion-(try|all)-completion(s) calls.</span>
<span class="linecomment">;; 2011/06/03 dadams</span>
<span class="linecomment">;;     icicle-completion-(all|try)-completion(s):</span>
<span class="linecomment">;;       Added optional METADATA arg to handle Emacs 24's new METADATA arg.</span>
<span class="linecomment">;;     Replace icicle-help-in-mode-line-flag by icicle-help-in-mode-line-delay everywhere.</span>
<span class="linecomment">;;     icicle-show-in-mode-line: Use icicle-help-in-mode-line-delay, not hard-coded 10 sec.</span>
<span class="linecomment">;; 2011/05/31 dadams</span>
<span class="linecomment">;;     icicle-read-file-name: Reordered let bindings (cosmetic).</span>
<span class="linecomment">;; 2011/05/22 dadams</span>
<span class="linecomment">;;     Added defvars for free vars to quiet byte compiler.</span>
<span class="linecomment">;; 2011/05/12 dadams</span>
<span class="linecomment">;;     icicle-candidate-short-help: Do nothing if string is empty ("").</span>
<span class="linecomment">;; 2011/05/07 dadams</span>
<span class="linecomment">;;     icicle-insert-cand-in-minibuffer: Go to prompt end before insert.</span>
<span class="linecomment">;; 2011/05/04 dadams</span>
<span class="linecomment">;;     icicle-transform-multi-completion: If cand is "" just return it.  (Emacs 20 split-string bug.)</span>
<span class="linecomment">;; 2011/05/03 dadams</span>
<span class="linecomment">;;     Added: icicle-position, icicle-merge-saved-order-less-p.</span>
<span class="linecomment">;;     icicle-display-candidates-in-Completions: Respect icicle-highlight-saved-candidates-flag.</span>
<span class="linecomment">;; 2011/04/20 dadams</span>
<span class="linecomment">;;     icicle-completion-setup-function: Last version is for Emacs 23.3 also. Thx to Michael Heerdegen.</span>
<span class="linecomment">;; 2011/04/18 dadams</span>
<span class="linecomment">;;     icicle-face-valid-attribute-values: Added Emacs 23+ version.  Thx to Aankhen.</span>
<span class="linecomment">;; 2011/04/12 dadams</span>
<span class="linecomment">;;     Added defvars for icicle-dirs-done and icicle-files, for free vars.</span>
<span class="linecomment">;;       Bind *-files in icicle-dired-read-shell-command.  Bind *-dirs-done in icicle-files-within.</span>
<span class="linecomment">;;       Use *-files in icicle-*-add-dired-*.  Use *-dirs-done in icicle-files-within-1.</span>
<span class="linecomment">;;     icicle-color-completion-setup: Renamed (free elsewhere): named-colors -&gt; icicle-named-colors.</span>
<span class="linecomment">;;                                    Applied renaming: prompt -&gt; icicle-prompt.</span>
<span class="linecomment">;;     icicle-unsorted-file-name-prefix-candidates, icicle-unsorted-file-name-apropos-candidates,</span>
<span class="linecomment">;;       icicle-apropos-any-file-name-candidates-p:</span>
<span class="linecomment">;;         Use minibuffer-completion-predicate, not default-directory, in calls to all-completions.</span>
<span class="linecomment">;;         Thx to Michael Heerdegen.</span>
<span class="linecomment">;; 2011/03/31 dadams</span>
<span class="linecomment">;;     icicle-read-file-name, icicle-read-number, icicle-read-char-exclusive,</span>
<span class="linecomment">;;       icicle-read-string-completing, icicle-color-completion-setup:</span>
<span class="linecomment">;;         Wrap calls to icicle-var-is-of-type-p with condition-case.  Thx to Michael Heerdegen.</span>
<span class="linecomment">;; 2011/03/29 dadams</span>
<span class="linecomment">;;     icicle-show-help-in-mode-line: Removed boundp condition for icicle-completing-keys-p.</span>
<span class="linecomment">;;     icicle-scroll-or-update-Completions:</span>
<span class="linecomment">;;       Applied renaming: icicle-scroll-Completions to icicle-scroll-Completions-forward.</span>
<span class="linecomment">;;     icicle-color-completion-setup: prompt -&gt; icicle-prompt.</span>
<span class="linecomment">;;     icicle-alt-act-fn-for-type: orig-window -&gt; icicle-orig-window.</span>
<span class="linecomment">;; 2011/03/26 dadams</span>
<span class="linecomment">;;     icicle-read-face-name: Need copy-sequence for prompt in later Emacs versions also (forgot).</span>
<span class="linecomment">;; 2011/03/17 dadams</span>
<span class="linecomment">;;     icicle-display-candidates-in-Completions: Added 2-pixel margin around thumbnail image.</span>
<span class="linecomment">;; 2011/03/04 dadams</span>
<span class="linecomment">;;     icicle-read-file-name: Bind read-file-name-predicate.  Thx to Michael Heerdegen.</span>
<span class="linecomment">;;     icicle-alt-act-fn-for-type: Ensure orig-window is live before use it.  Thx to Michael Heerdegen.</span>
<span class="linecomment">;; 2011/02/22 dadams</span>
<span class="linecomment">;;     icicle-display-candidates-in-Completions: Show thumbnail for an image file.</span>
<span class="linecomment">;;                                               Call icicle-fit-completions-window explicitly here.</span>
<span class="linecomment">;;     icicle-fit-completions-window: Added optional arg (not used yet).  Ensure window is Completions.</span>
<span class="linecomment">;; 2011/02/20 dadams</span>
<span class="linecomment">;;     Added: icicle-color-(distance)-(hsv|rgb)-lessp.</span>
<span class="linecomment">;;     icicle-color-completion-setup: Added sort orders for HSV and RGB: component order and distance.</span>
<span class="linecomment">;; 2011/02/17 dadams</span>
<span class="linecomment">;;     icicle-join-nth-parts: If only one part then don't append the join string.</span>
<span class="linecomment">;; 2011/01/31 dadams</span>
<span class="linecomment">;;     icicle-insert-candidates: Fixed test for remainder cands: (= n (* r c)), not (= 0 (mod n r)).</span>
<span class="linecomment">;; 2011/01/11 dadams</span>
<span class="linecomment">;;     icicle-choose-completion-string:</span>
<span class="linecomment">;;       Removed code that uses base-size, choose-completion-delete-max-match.  Just replace all input.</span>
<span class="linecomment">;; 2011/01/05 dadams</span>
<span class="linecomment">;;     Added: icicle-file-type-less-p.</span>
<span class="linecomment">;;     icicle-highlight-input-noncompletion: When move overlay, specify buffer (for recursive minibuf).</span>
<span class="linecomment">;; 2010/12/26 dadams</span>
<span class="linecomment">;;     Removed autoload cookies except simple ones & ones with sexp on same line.  Thx to Richard Kim.</span>
<span class="linecomment">;; 2010/12/23 dadams</span>
<span class="linecomment">;;     icicle-expand-file-name-20: Allow for inputs to be nil.</span>
<span class="linecomment">;; 2010/12/18 dadams</span>
<span class="linecomment">;;     Moved icicle-assoc-delete-all to icicles-mac.el, since used there.</span>
<span class="linecomment">;;     Added autoload cookies for cmds & macro; removed them from non-interactive functions.</span>
<span class="linecomment">;; 2010/12/14 dadams</span>
<span class="linecomment">;;     Added: icicle-expand-file-name-20.</span>
<span class="linecomment">;;     Renamed: icicle-expand-file-name to icicle-expand-file-or-dir-name.</span>
<span class="linecomment">;;     icicle-abbreviate-or-expand-file-name, icicle-expand-file-or-dir-name:</span>
<span class="linecomment">;;       Use icicle-expand-file-name-20.</span>
<span class="linecomment">;;     icicle-completion-setup-function for Emacs &lt; 22: Fix typo: last-command -&gt; this-command.</span>
<span class="linecomment">;;     icicle-expanded-common-match: Removed from doc string: statement that result is regexp-quoted.</span>
<span class="linecomment">;; 2010/12/11 dadams</span>
<span class="linecomment">;;     icicle-completion-setup-function: Added a version for Emacs 23.2+.  Thx to Michael Heerdegen.</span>
<span class="linecomment">;; 2010/11/20 dadams</span>
<span class="linecomment">;;     icicle-toggle-icicle-mode-twice: Soft-require icicles-mode.el.</span>
<span class="linecomment">;;     eval-after-load for crm.el:</span>
<span class="linecomment">;;       Put toggle-twice on eval-after-load of icicles-mode, instead of doing it if i-m.el is loaded.</span>
<span class="linecomment">;; 2010/11/07 dadams</span>
<span class="linecomment">;;     Added helper macro icicle-maybe-cached-action.</span>
<span class="linecomment">;;     icicle-alt-act-fn-for-type: use icicle-maybe-cached-action so use same action for all cands.</span>
<span class="linecomment">;; 2010/11/06 dadams</span>
<span class="linecomment">;;     icicle-fuzzy-candidates: Filter using icicle-must-pass-after-match-predicate.</span>
<span class="linecomment">;;                              Respect also extra cands and proxy cands.</span>
<span class="linecomment">;;                              Let C-g exit completion.</span>
<span class="linecomment">;; 2010/10/25 dadams</span>
<span class="linecomment">;;     icicle-read-shell-command-completing:</span>
<span class="linecomment">;;       Use icicle-must-pass-after-match-predicate, not icicle-must-pass-predicate.</span>
<span class="linecomment">;; 2010/10/24 dadams</span>
<span class="linecomment">;;     icicle-unsorted(-file-name)-(prefix|apropos)-candidates:</span>
<span class="linecomment">;;       Respect icicle-must-pass-after-match-predicate.</span>
<span class="linecomment">;;     icicle-alt-act-fn-for-type: Use icicle-must-pass-after-match-predicate, not PREDICATE arg.</span>
<span class="linecomment">;; 2010/10/07 dadams</span>
<span class="linecomment">;;     Added: icicle-current-TAB-method (function).  Use it in place of var everywhere.</span>
<span class="linecomment">;; 2010/10/04 dadams</span>
<span class="linecomment">;;     directory-sep-char -&gt; ?/ (It was removed from Emacs 24.)</span>
<span class="linecomment">;; 2010/06/18 dadams</span>
<span class="linecomment">;;     icicle-completing-read:</span>
<span class="linecomment">;;       Initialize icicle-completions-format-internal to icicle-completions-format.</span>
<span class="linecomment">;;     icicle-mctized-full-candidate:</span>
<span class="linecomment">;;       Set icicle-completions-format-internal to horizontal for multi-line multi-completions.</span>
<span class="linecomment">;;     icicle-insert-candidates:</span>
<span class="linecomment">;;       Remove face property from end of candidate to next column.</span>
<span class="linecomment">;;       Replace icicle-completions-format by icicle-completions-format-internal.</span>
<span class="linecomment">;;     Renamed: bookmarkp-* to bmkp-*.</span>
<span class="linecomment">;; 2010/06/14 dadams</span>
<span class="linecomment">;;     icicle-read-from-minibuffer:</span>
<span class="linecomment">;;       If add file-name default to prompt, remove dir part first.  Thx to Chris Hecker.</span>
<span class="linecomment">;;     icicle-next-candidate: Do not icicle-recompute-candidates if this command was repeated.</span>
<span class="linecomment">;;     icicle-increment-cand-nb+signal-end:</span>
<span class="linecomment">;;       Signal wrap from initial, not from 0.  Negative INCR -&gt; start at end.  Thx to M. Heerdegen.</span>
<span class="linecomment">;;     icicle-call-then-update-Completions:</span>
<span class="linecomment">;;       Set icicle-last-input to nil so icicle-save-or-restore-input makes next-candidate recompute.</span>
<span class="linecomment">;; 2010/06/12 dadams</span>
<span class="linecomment">;;     icicle-fit-completions-window: Let-bind window-min-height to prevent deletion in Emacs 23.</span>
<span class="linecomment">;; 2010/06/10 dadams</span>
<span class="linecomment">;;     icicle-maybe-sort-and-strip-candidates:</span>
<span class="linecomment">;;       Set icicle-completion-candidates to result of *maybe...maybe*.  (It broke C-~.)</span>
<span class="linecomment">;; 2010/06/09 dadams</span>
<span class="linecomment">;;     icicle-isearch-complete-past-string: Use the last-used ring.  Thx to Michael Heerdegen.</span>
<span class="linecomment">;; 2010/06/08 dadams</span>
<span class="linecomment">;;     icicle-display-candidates-in-Completions: Show also total when truncated: N shown / M.</span>
<span class="linecomment">;;     icicle-maybe-sort-maybe-truncate: Save icicle-nb-candidates-before-truncation before truncating.</span>
<span class="linecomment">;; 2010/06/04 dadams</span>
<span class="linecomment">;;     Added: icicle-clear-lighter, icicle-maybe-sort-maybe-truncate, icicle-take.</span>
<span class="linecomment">;;     icicle-(prefix|apropos)-candidates, icicle-strip-ignored-files-and-sort,</span>
<span class="linecomment">;;       icicle-maybe-sort-and-strip-candidates, icicle-display-Completions:</span>
<span class="linecomment">;;         Use icicle-maybe-sort-maybe-truncate, not icicle-reversible-sort.</span>
<span class="linecomment">;;     icicle-(un)highlight-lighter: Use icicle-clear-lighter (factored out).</span>
<span class="linecomment">;; 2010/05/30 dadams</span>
<span class="linecomment">;;     Added: icicle-files-within-1.</span>
<span class="linecomment">;;     icicle-files-within:</span>
<span class="linecomment">;;       Use icicle-files-within-1.  Optionally don't follow symlinks (new arg NO-SYMLINKS-P).</span>
<span class="linecomment">;;       Don't process same dir twice.  Respect icicle-ignored-directories.  Thx to Michael Heerdegen.</span>
<span class="linecomment">;; 2010/05/18 dadams</span>
<span class="linecomment">;;     icicle-save-or-restore-input:</span>
<span class="linecomment">;;       Use icicle-file-directory-p, not file-directory-p (fails: ~/foo//usr/).  Thx to M. Heerdegen.</span>
<span class="linecomment">;; 2010/05/04 dadams</span>
<span class="linecomment">;;     icicle-alt-act-fn-for-type: Pass TYPE to icicle-apply-to-saved-candidate.</span>
<span class="linecomment">;; 2010/04/30 dadams</span>
<span class="linecomment">;;     icicle(-file-name)-unsorted-(apropos|prefix)-candidates, icicle-fuzzy-candidates:</span>
<span class="linecomment">;;       Set icicle-common-match-string to nil when no candidates.</span>
<span class="linecomment">;; 2010/04/29 dadams</span>
<span class="linecomment">;;     icicle-unpropertize: Do nothing unless icicle-remove-icicles-props-p.</span>
<span class="linecomment">;; 2010/04/27 dadams</span>
<span class="linecomment">;;     icicle-show-help-in-mode-line: Test value, not just boundp, of icicle-completing-keys-p.</span>
<span class="linecomment">;; 2010/04/21 dadams</span>
<span class="linecomment">;;     icicle-mode-line-name-less-p: Removed bogus calls to symbol-name.  Thx to Michael Heerdegen.</span>
<span class="linecomment">;; 2010/04/20 dadams</span>
<span class="linecomment">;;     Added: icicle-dirs-first-p.</span>
<span class="linecomment">;; 2010/04/02/dadams</span>
<span class="linecomment">;;     icicle-completing-p: Cache t, not the keymap portion.</span>
<span class="linecomment">;; 2010/03/16 dadams</span>
<span class="linecomment">;;     icicle-display-candidates-in-Completions, treating icicle-candidate-properties-alist:</span>
<span class="linecomment">;;       For subsequent matches of join string, skip over the last join string (not 1 char).</span>
<span class="linecomment">;;     icicle-candidate-short-help: Treat each property individually.</span>
<span class="linecomment">;; 2010/03/13 dadams</span>
<span class="linecomment">;;     icicle-reversible-sort: Respect icicle-transform-before-sort-p.</span>
<span class="linecomment">;; 2010/03/10 dadams</span>
<span class="linecomment">;;     icicle-show-help-in-mode-line:</span>
<span class="linecomment">;;       Put this test first: If candidate is a string with a help property, use that.</span>
<span class="linecomment">;;       Use get-file-buffer, not get-buffer, for a visited file.</span>
<span class="linecomment">;; 2010/03/09 dadams</span>
<span class="linecomment">;;     icicle-reversible-sort: Added optional KEY arg.  Set LIST to sort result and return it.</span>
<span class="linecomment">;;     icicle-multi-sort: Set RESULT to funcall result.</span>
<span class="linecomment">;; 2010/03/03 dadams</span>
<span class="linecomment">;;     Added: icicle-multi-sort, icicle-make-plain-predicate, icicle-alpha-p.</span>
<span class="linecomment">;;     icicle-reversible-sort: Use icicle-sort-comparer and icicle-multi-sort.</span>
<span class="linecomment">;;                             Reset to unsorted if an error is raised.</span>
<span class="linecomment">;;     Applied renamings: icicle-sort-function to icicle-sort-comparer,</span>
<span class="linecomment">;;                        icicle-sort-functions-alist to icicle-sort-orders-alist.</span>
<span class="linecomment">;;     icicle-read-shell-command-completing: Removed extra binding for icicle-sort-function.</span>
<span class="linecomment">;; 2010/01/12 dadams</span>
<span class="linecomment">;;     icicle-display-candidates-in-Completions: set-buffer -&gt; with-current-buffer.</span>
<span class="linecomment">;; 2009/12/25 dadams</span>
<span class="linecomment">;;     icicle-strip-ignored-files-and-sort:</span>
<span class="linecomment">;;       Call completion-ignored-build-apply and icicle-update-ignored-extensions-regexp.</span>
<span class="linecomment">;; 2009/12/21 dadams</span>
<span class="linecomment">;;     fset -&gt; defalias.</span>
<span class="linecomment">;; 2009/12/07 dadams</span>
<span class="linecomment">;;     Added: icicle-minibuffer-default-add-dired-shell-commands.</span>
<span class="linecomment">;;     icicle-dired-read-shell-command: Instead of using minibuffer-default-add-shell-commands,</span>
<span class="linecomment">;;       use icicle-minibuffer-default-add-dired-shell-commands.</span>
<span class="linecomment">;;     icicle-read-shell-command-completing: Bind insert-default-directory to nil.</span>
<span class="linecomment">;;     icicle-dir-prefix-wo-wildcards: Don't ever return nil - return "" if need be.</span>
<span class="linecomment">;;     icicle-read-string:</span>
<span class="linecomment">;;       Handle a consp default-value when user enters "": use the car.  Thx to Sakuma Ryo.</span>
<span class="linecomment">;; 2009/12/03 dadams</span>
<span class="linecomment">;;     icicle-completing-read:</span>
<span class="linecomment">;;       Make sure we don't use a nil def value for init value.  Thx to Sebastian Luque.</span>
<span class="linecomment">;; 2009/11/27 dadams</span>
<span class="linecomment">;;     *-display-candidates-in-Completions, *-prefix-candidates, *-fuzzy-candidates:</span>
<span class="linecomment">;;       Handle swank completions too.</span>
<span class="linecomment">;; 2009/11/25 dadams</span>
<span class="linecomment">;;     icicle-insert-candidates: Handle vertical layout: icicle-completions-format.</span>
<span class="linecomment">;; 2009/11/03 dadams</span>
<span class="linecomment">;;     icicle-color-completion-setup: Use hexrgb-defined-colors, not x-defined-colors.</span>
<span class="linecomment">;;                                    No icicle-transform-function, since we use hexrgb.el.</span>
<span class="linecomment">;; 2009/10/25 dadams</span>
<span class="linecomment">;;     Added: icicle-dir-prefix-wo-wildcards.  Use in icicle-insert-cand-in-minibuffer.</span>
<span class="linecomment">;;     icicle-save-or-restore-input: Remove test comparing last completion with current input.</span>
<span class="linecomment">;;     icicle-abbreviate-or-expand-file-name: If arg is absolute, do not expand.</span>
<span class="linecomment">;;     icicle-display-candidates-in-Completions, icicle-prefix-candidates,</span>
<span class="linecomment">;;       icicle-not-basic-prefix-completion-p:</span>
<span class="linecomment">;;         Updated for new completion methods.  Use *-current-TAB-method, not old fuzzy flag.</span>
<span class="linecomment">;; 2009/10/24 dadams</span>
<span class="linecomment">;;     icicle-unsorted-file-name-*-candidates, icicle-*-any-file-name-candidates-p:</span>
<span class="linecomment">;;       Got rid of slashed-p.</span>
<span class="linecomment">;;     icicle-unsorted-file-name-apropos-candidates:</span>
<span class="linecomment">;;       Set icicle-common-match-string to nil if there are no candidates.</span>
<span class="linecomment">;;     icicle-apropos-any-file-name-candidates-p:</span>
<span class="linecomment">;;       When input is a dir, remove final /, so we don't non-match highlight the / (empty dir).</span>
<span class="linecomment">;;       Bind case-fold-search, for apropos matching.</span>
<span class="linecomment">;;     icicle-abbreviate-or-expand-file-name: Set DIR to nil if it's relative.</span>
<span class="linecomment">;; 2009/10/22 dadams</span>
<span class="linecomment">;;     Added: icicle-file-name-directory.</span>
<span class="linecomment">;;     icicle-completion-setup-function, icicle-display-candidates-in-Completions,</span>
<span class="linecomment">;;       icicle-save-or-restore-input, icicle-file-name-directory-w-default,</span>
<span class="linecomment">;;       icicle-historical-alphabetic-p:</span>
<span class="linecomment">;;         Use icicle-file-name-directory, not file-name-directory.</span>
<span class="linecomment">;; 2009/10/17 dadams</span>
<span class="linecomment">;;     icicle-completion-try-completion: Return RES.</span>
<span class="linecomment">;; 2009/10/12 dadams</span>
<span class="linecomment">;;     icicle-unsorted-prefix-candidates, icicle-prefix-any-candidates-p:</span>
<span class="linecomment">;;       Use length of INPUT, not length from point backward to field-beginning.</span>
<span class="linecomment">;;     icicle-input-from-minibuffer: Added optional LEAVE-ENVVARS-P arg.</span>
<span class="linecomment">;;     icicle-next-candidate, icicle-highlight-complete-input:</span>
<span class="linecomment">;;       Call icicle-input-from-minibuffer with LEAVE-ENVVARS-P arg.</span>
<span class="linecomment">;;     icicle-completion-all-completions:</span>
<span class="linecomment">;;       If not basic completion (Emacs 23) and input ends in $, then append $ to cands also.</span>
<span class="linecomment">;; 2009/09/25 dadams</span>
<span class="linecomment">;;     icicle-file-name-prefix-candidates: Use whole input, not just nondirectory.</span>
<span class="linecomment">;;     Added: icicle-not-basic-prefix-completion-p.  Use where appropriate.</span>
<span class="linecomment">;; 2009/09/19 dadams</span>
<span class="linecomment">;;     icicle-unpropertize: Remove the internal text properties added by Icicles.</span>
<span class="linecomment">;;     icicle-completing-read, icicle-read-file-name: Call icicle-unpropertize unconditionally.</span>
<span class="linecomment">;; 2009/09/12 dadams</span>
<span class="linecomment">;;     icicle-kill-a-buffer: Bind enable-recursive-minibuffers, to confirm modified buffer.</span>
<span class="linecomment">;; 2009/09/05 dadams</span>
<span class="linecomment">;;     icicle-msg-maybe-in-minibuffer: Do nothing if icicle-minibuffer-message-ok-p is nil.</span>
<span class="linecomment">;; 2009/08/19 dadams</span>
<span class="linecomment">;;     icicle-candidate-short-help: Return (possibly propertized) STRING.</span>
<span class="linecomment">;; 2009/08/09 dadams</span>
<span class="linecomment">;;     Added: icicle-insert-cand-in-minibuffer - factored out code from icicle-next-candidate.</span>
<span class="linecomment">;;     eval-after-load "crm":</span>
<span class="linecomment">;;       Test that icy-mode is available using featurep, not fboundp.  Thx to Michael Heerdegen.</span>
<span class="linecomment">;; 2009/07/26 dadams</span>
<span class="linecomment">;;     icicle-completing-read, icicle-read-file-name-1:</span>
<span class="linecomment">;;       Bind minibuffer-history-variable to itself.</span>
<span class="linecomment">;; 2009/07/13 dadams</span>
<span class="linecomment">;;     icicle-read-face-name (Emacs 20 version): Use copy-sequence on prompt, before add prop.</span>
<span class="linecomment">;; 2009/07/12 dadams</span>
<span class="linecomment">;;     icicle-display-completion-list:</span>
<span class="linecomment">;;       Use different protection (fboundp) for fix for latest Emacs 23 crap (base size in cdr).</span>
<span class="linecomment">;; 2009/07/11 dadams</span>
<span class="linecomment">;;     icicle-next-candidate:</span>
<span class="linecomment">;;       If icicle-regexp-quote-flag, regexp-quote before string-match for highlighting root.</span>
<span class="linecomment">;;     icicle-place-cursor: If icicle-regexp-quote-flag, regexp-quote input to search for it.</span>
<span class="linecomment">;; 2009/07/02 dadams</span>
<span class="linecomment">;;     icicle-displayable-cand-from-saved-set:</span>
<span class="linecomment">;;       If icicle-readable-to-markers returns an atom, just use that.</span>
<span class="linecomment">;; 2009/06/17 dadams</span>
<span class="linecomment">;;     icicle-fit-completions-window: Scale text size initially.</span>
<span class="linecomment">;; 2009/06/07 dadams</span>
<span class="linecomment">;;     icicle-get-alist-candidate -&gt; funcall icicle-get-alist-candidate-function.</span>
<span class="linecomment">;;     icicle-mctize-all:  If PRED is nil, so is NEWPRED (use and instead of when).</span>
<span class="linecomment">;; 2009/05/22 dadams</span>
<span class="linecomment">;;     Require icicles-mac.el if load-library doesn't find it.</span>
<span class="linecomment">;; 2009/05/18 dadams</span>
<span class="linecomment">;;     icicle-display-candidates-in-Completions: deactivate-mark in *Completions* after display.</span>
<span class="linecomment">;; 2009/05/17 dadams</span>
<span class="linecomment">;;     icicle-next-candidate: Updated to reflect thumb-frm.el name changes.</span>
<span class="linecomment">;; 2009/05/17 dadams</span>
<span class="linecomment">;;     Added: icicle-toggle-icicle-mode-twice.</span>
<span class="linecomment">;;     In eval-after-load crm: Use icicle-toggle-icicle-mode-twice, not icy-mode calls.</span>
<span class="linecomment">;; 2009/05/15 dadams</span>
<span class="linecomment">;;     icicle-unhighlight-lighter: Wrap redisplay in condition-case, like elsewhere.</span>
<span class="linecomment">;; 2009/05/11 dadams</span>
<span class="linecomment">;;     Added: icicle-upcase.  Use in place of upcase everywhere, to work around Emacs 20 bug.</span>
<span class="linecomment">;;     Added: icicle-local-keys-first-p.</span>
<span class="linecomment">;;     icicle-display-candidates-in-Completions:</span>
<span class="linecomment">;;       Don't highlight historical candidate if in icicle-hist-cands-no-highlight.</span>
<span class="linecomment">;; 2009/05/09 dadams</span>
<span class="linecomment">;;     icicle-input-from-minibuffer: Keep text properties when pick up input.</span>
<span class="linecomment">;;     icicle-highlight-input-noncompletion(-rest): Use an overlay instead of text property.</span>
<span class="linecomment">;;     icicle-show-help-in-mode-line: Fix special case for pseudo-key/cmd ..: go up to prefix.</span>
<span class="linecomment">;; 2009/05/07 dadams</span>
<span class="linecomment">;;     icicle-display-candidates-in-Completions, in the code that hides common match:</span>
<span class="linecomment">;;       Don't reset display property to nil.</span>
<span class="linecomment">;;       Use icicle-common-match-string, not current input.</span>
<span class="linecomment">;;     icicle-expanded-common-match-1:</span>
<span class="linecomment">;;       If input doesn't match candidate, return nil.  Throw nil, not input, everywhere.</span>
<span class="linecomment">;;     *-unsorted(-file-name)-apropos-candidates, *-apropos-any(-file-name)-candidates-p:</span>
<span class="linecomment">;;       Protect calls to icicle-apropos-complete-match-fn with condition-case, for Emacs 20.</span>
<span class="linecomment">;;     icicle-place-cursor: Added optional arg.</span>
<span class="linecomment">;; 2009/05/05 dadams</span>
<span class="linecomment">;;     icicle-alt-act-fn-for-type:</span>
<span class="linecomment">;;       Bind completion-ignore-case, based on read-buffer-completion-ignore-case.</span>
<span class="linecomment">;; 2009/05/03 dadams</span>
<span class="linecomment">;;     Use (fboundp 'minibuffer-default-add-completions), not (&gt; emacs-major version 22).</span>
<span class="linecomment">;; 2009/05/01 dadams</span>
<span class="linecomment">;;     Renamed: icicle-choose-action-for-type to icicle-alt-act-fn-for-type.</span>
<span class="linecomment">;;     icicle-type-actions-alist: Rewrote.  Handle both list of objs and single obj.</span>
<span class="linecomment">;;     icicle-quote-file-name-part-of-cmd: Rewrote.  Quote file name always, and only file name.</span>
<span class="linecomment">;; 2009/04/30 dadams</span>
<span class="linecomment">;;     icicle-show-in-mode-line: Clear any message (e.g. Computing completion candidates...).</span>
<span class="linecomment">;; 2009/04/29 dadams</span>
<span class="linecomment">;;     icicle-get-alist-candidate: If NO-ERROR-P is 'no-error-no-msg, just return nil (no msg).</span>
<span class="linecomment">;;     icicle-choose-action-for-type: Use lax completion.</span>
<span class="linecomment">;; 2009/04/28 dadams</span>
<span class="linecomment">;;     icicle-choose-action-for-type:</span>
<span class="linecomment">;;       Moved here from icicles-mac.el, changed to a function, and locally bind</span>
<span class="linecomment">;;       *-alt-action-fn  to icicle-choose-action-for-type function.</span>
<span class="linecomment">;;       For undefined TYPE, provide all functions as candidates.</span>
<span class="linecomment">;;     Added eval-when-compile of load-library icicles-mac.</span>
<span class="linecomment">;; 2009/04/27 dadams</span>
<span class="linecomment">;;     icicle-recompute-candidates:</span>
<span class="linecomment">;;       Keep no-display completion mode, if that's current.</span>
<span class="linecomment">;;       Set icicle-last-completion-command only if completion type, not user input, changed.</span>
<span class="linecomment">;;     icicle-complete-again-update: Added icicle-prefix-complete-no-display to first case.</span>
<span class="linecomment">;; 2009/04/19 dadams</span>
<span class="linecomment">;;     Use unless instead of or for fset's. (cosmetic)</span>
<span class="linecomment">;;     icicle-completing-read, icicle-read-from-minibuffer, icicle-read-string:</span>
<span class="linecomment">;;       Renamed history parameter to HIST-m@%=!$+&^*z, so C-h f output looks less strange.</span>
<span class="linecomment">;; 2009/04/18 dadams</span>
<span class="linecomment">;;     Soft-require hexrgb.el unconditionally, not just when there is a window-system.</span>
<span class="linecomment">;; 2009/04/12 dadams</span>
<span class="linecomment">;;     icicle-display-candidates-in-Completions: Added number of candidates to mode-line.</span>
<span class="linecomment">;;     icicle-show-help-in-mode-line: Use face icicle-show-help-in-mode-line.  Fix prefix keys.</span>
<span class="linecomment">;; 2009/04/11 dadams</span>
<span class="linecomment">;;     icicle-candidate-short-help:</span>
<span class="linecomment">;;       Do nothing if either icicle-help-in-mode-line-flag or tooltip-mode is nil.</span>
<span class="linecomment">;;     icicle-show-help-in-mode-line:</span>
<span class="linecomment">;;       If no symbol help, try string.</span>
<span class="linecomment">;;       Handle lambdas, menu-function-# from easy-menu, and prefix keys.</span>
<span class="linecomment">;;     icicle-make-color-candidate: Construct short help only if user will see it.</span>
<span class="linecomment">;; 2009/04/10 dadams</span>
<span class="linecomment">;;     Added: icicle-candidate-short-help, icicle-color-completion-setup (from i*-read-color).</span>
<span class="linecomment">;;     Moved here from icicle-cmds.el:</span>
<span class="linecomment">;;      icicle-remove-color-duplicates, icicle-color-help, icicle-make-color-candidate.</span>
<span class="linecomment">;;     icicle-make-color-candidate: Added short help, using icicle-candidate-short-help.</span>
<span class="linecomment">;;     icicle-show-help-in-mode-line:</span>
<span class="linecomment">;;       Treat :icicle-candidate-help text property on strings.</span>
<span class="linecomment">;;       Use candidate, not cand, for stringp clause, and use icicle-transform-multi-completion.</span>
<span class="linecomment">;;       Renamed: :icicle-candidate-help to icicle-mode-line-help.</span>
<span class="linecomment">;; 2009/04/08 dadams</span>
<span class="linecomment">;;     icicle-show-help-in-mode-line: Treat absolute file names too.</span>
<span class="linecomment">;; 2009/04/07 dadams</span>
<span class="linecomment">;;     icicle-show-help-in-mode-line: (bufferp (get-buffer...)...) -&gt; (get-buffer...) Duh.</span>
<span class="linecomment">;; 2009/04/06 dadams</span>
<span class="linecomment">;;     Added: icicle-show-help-in-mode-line - from code in icicle-next-candidate:</span>
<span class="linecomment">;;              Added arg.  Handle: faces, buffer names, file names, :icicle-candidate-help.</span>
<span class="linecomment">;;     Added: icicle-help-line-(buffer|file).</span>
<span class="linecomment">;;     icicle-next-candidate: Use icicle-show-help-in-mode-line.</span>
<span class="linecomment">;; 2009/04/05 dadams</span>
<span class="linecomment">;;     Added: icicle-show-in-mode-line.</span>
<span class="linecomment">;;     icicle-next-candidate: Use icicle-show-in-mode-line to show help in mode-line.</span>
<span class="linecomment">;; 2009/04/04 dadams</span>
<span class="linecomment">;;     Added: icicle-buffer-smaller-p, icicle-major-mode-name-less-p,</span>
<span class="linecomment">;;            icicle-mode-line-name-less-p, icicle-buffer-file/process-name-less-p.</span>
<span class="linecomment">;; 2009/04/03 dadams</span>
<span class="linecomment">;;     icicle-read-from-minibuffer: Save filtered default val as icicle-filtered-default-value.</span>
<span class="linecomment">;;     icicle-lisp-vanilla-completing-read: Use icicle-filtered-default-value, not DEF, at end.</span>
<span class="linecomment">;; 2009/03/29 dadams</span>
<span class="linecomment">;;     icicle-read-shell-command: If non-nil initial-contents, punt to use original (old-*).</span>
<span class="linecomment">;; 2009/03/27 dadams</span>
<span class="linecomment">;;     Don't fset minibuffer-default-add-completions unless &gt; Emacs 22.</span>
<span class="linecomment">;; 2009/03/27 dadams</span>
<span class="linecomment">;;     icicle-read-from-minibuffer: Use icicle-filter-wo-input on default-value (all values).</span>
<span class="linecomment">;;     icicle-completing-read, icicle-read-file-name-1:</span>
<span class="linecomment">;;       Use icicle-filter-wo-input on default value only to get init value.</span>
<span class="linecomment">;;     Added: icicle-minibuffer-default-add-completions, icicle-first-N.</span>
<span class="linecomment">;; 2009/03/26 dadams</span>
<span class="linecomment">;;     icicle-completing-read, icicle-read-file-name-1:</span>
<span class="linecomment">;;       Filter default values using icicle-filter-wo-input.</span>
<span class="linecomment">;;     icicle-filter-wo-input: Return the candidate, if it passes filtering.</span>
<span class="linecomment">;; 2009/03/16 dadams</span>
<span class="linecomment">;;     Added: icicle-recentf-make-menu-items.</span>
<span class="linecomment">;; 2009/03/10 dadams</span>
<span class="linecomment">;;     icicle-read-shell-command-completing: Applied renamings: icicle-guess-commands-in-path,</span>
<span class="linecomment">;;       icicle-shell-command-candidates-cache, icicle-recompute-shell-command-candidates.</span>
<span class="linecomment">;;     Moved to icicles-opt.el and renamed: icicle-shell-command-candidates.</span>
<span class="linecomment">;; 2009/03/08 dadams</span>
<span class="linecomment">;;     Added: icicle-quote-file-name-part-of-cmd.</span>
<span class="linecomment">;;     icicle-read-shell-command-completing:</span>
<span class="linecomment">;;       Call icicle-quote-file-name-part-of-cmd to escape spaces etc. in file names.</span>
<span class="linecomment">;;       Removed unneeded minibuffer-local-*-map let bindings.</span>
<span class="linecomment">;;     icicle-dired-smart-shell-command:</span>
<span class="linecomment">;;       Protected dired-default-directory with fboundp, for Emacs 20.</span>
<span class="linecomment">;; 2009/03/01 dadams</span>
<span class="linecomment">;;     icicle-read-from-minibuffer:</span>
<span class="linecomment">;;       No longer use icicle-complete-on-demand-cmd and on-demand-map.</span>
<span class="linecomment">;; 2009/02/28 dadams</span>
<span class="linecomment">;;     Don't fset old-dired-smart-shell-command here - do after load Dired-X (icicles-mode.el).</span>
<span class="linecomment">;;     Added for Emacs 20: definition of replace-regexp-in-string.</span>
<span class="linecomment">;;     icicle-read-(number|string-completing):</span>
<span class="linecomment">;;       No need for fboundp of replace-regexp-in-string, since provide it now for Emacs 20.</span>
<span class="linecomment">;;     icicle-read-file-name: Treat directory candidates as special candidates.</span>
<span class="linecomment">;;     icicle-read-shell-command-completing:</span>
<span class="linecomment">;;       Candidate help depends on candidate type.</span>
<span class="linecomment">;;       Use existing icicle-extra-candidates as its own default, not icicle-file-extras.</span>
<span class="linecomment">;; 2009/02/27 dadams</span>
<span class="linecomment">;;     icicle-shell-command: Fixed typo: shell-command -&gt; old-shell-command.</span>
<span class="linecomment">;;     icicle-read-shell-command-completing: Append icicle-file-extras to i*-extra-candidates.</span>
<span class="linecomment">;; 2009/02/23 dadams</span>
<span class="linecomment">;;     icicle-read-shell-command-completing:</span>
<span class="linecomment">;;       Bind icicle-extra-candidates-dir-insert-p, not insert-default-directory, to nil.</span>
<span class="linecomment">;;     icicle-next-candidate: Protect dir insertion with icicle-extra-candidates-dir-insert-p.</span>
<span class="linecomment">;; 2009/02/22 dadams</span>
<span class="linecomment">;;     icicle-dired-read-shell-command: Use minibuffer-default-add-shell-commands if available.</span>
<span class="linecomment">;; 2009/02/20 dadams</span>
<span class="linecomment">;;     icicle-read-from-minibuffer: Treat icicle-complete-on-demand-cmd - on-demand completion.</span>
<span class="linecomment">;;     Added: icicle-dired-smart-shell-command, icicle-read-shell-command-completing,</span>
<span class="linecomment">;;            icicle-dired-read-shell-command, icicle-extra-candidates-first-p,</span>
<span class="linecomment">;;            icicle-require-match-p, icicle-shell-command(-on-region).</span>
<span class="linecomment">;;     icicle-read-shell-command:</span>
<span class="linecomment">;;       Call icicle-read-shell-command-completing.  Define always, not just when mailcap.</span>
<span class="linecomment">;;     icicle-dired-guess-shell-command: Just call icicle-read-shell-command-completing.</span>
<span class="linecomment">;;     icicle-shell-command-candidates: Cache completions in icicle-shell-command-candidates.</span>
<span class="linecomment">;;     icicle-highlight-input-noncompletion(-rest), icicle-highlight-lighter:</span>
<span class="linecomment">;;       Use function icicle-require-match-p, not var.</span>
<span class="linecomment">;;     icicle-completing-p: Test also whether parent map is a completion map.  Always cache.</span>
<span class="linecomment">;; 2009/02/17 dadams</span>
<span class="linecomment">;;     icicle-read-shell-command: Handle nil default-value.  Thx to Kao Felix.</span>
<span class="linecomment">;;     icicle-read-file-name: Append new proxy cands to any existing ones.</span>
<span class="linecomment">;;                            Don't assume that a proxy cand is a variable.</span>
<span class="linecomment">;; 2009/01/25 dadams</span>
<span class="linecomment">;;     Added: *-dired-guess-shell-command, *-read-shell-command, *-shell-command-candidates.</span>
<span class="linecomment">;; 2009/01/17 dadams</span>
<span class="linecomment">;;     icicle-display-candidates-in-Completions: Highlight Levenshtein (1) match.</span>
<span class="linecomment">;;     icicle-unsorted-apropos(-file-name)-candidates, icicle-display-Completions,</span>
<span class="linecomment">;;       icicle-apropos-any(-file-name)-candidates-p: Removed PCM.</span>
<span class="linecomment">;;     Added: icicle-levenshtein(-strict|-one)-match, icicle-levenshtein-one-regexp,</span>
<span class="linecomment">;;            icicle-substrings-of-length.</span>
<span class="linecomment">;; 2009/01/15 dadams</span>
<span class="linecomment">;;     Lose "icicle-" for fboundp's: completion-all-completions, completion-try-completion.</span>
<span class="linecomment">;; 2009/01/14 dadams</span>
<span class="linecomment">;;     Added: icicle-remove-dups-if-extras.</span>
<span class="linecomment">;; 2009/01/13 dadams</span>
<span class="linecomment">;;     Added: icicle-completion-all-completions, icicle-completion-try-completion.</span>
<span class="linecomment">;;     icicle-unsorted(-file-name)-(prefix|apropos)-candidates, icicle-display-Completions,</span>
<span class="linecomment">;;       icicle-any-(prefix|apropos)(-file-name)-candidates-p:</span>
<span class="linecomment">;;         Respect icicle-respect-completion-styles-p (Emacs 23).</span>
<span class="linecomment">;;     icicle-unsorted-file-name-prefix-candidates: Removed matching "^"++(regexp-quote input).</span>
<span class="linecomment">;;     icicle(-unsorted)(-file-name)-(prefix|apropos)-candidates:</span>
<span class="linecomment">;;       Call icicle-transform-candidates for extra candidates and proxy candidates too.</span>
<span class="linecomment">;;     icicle-display-candidates-in-Completions: Highlight extra candidates.</span>
<span class="linecomment">;;     icicle-face-valid-attribute-values:</span>
<span class="linecomment">;;       Use font-family-list instead of x-font-family-list, if available.</span>
<span class="linecomment">;; 2009/01/03 dadams</span>
<span class="linecomment">;;     icicle-call-then-update-Completions:</span>
<span class="linecomment">;;       If icicle-last-completion-command is nil, test icicle-current-completion-mode - don't</span>
<span class="linecomment">;;       just call icicle-prefix-complete.  E.g. icicle-search shouldn't end with a single</span>
<span class="linecomment">;;       prefix match.</span>
<span class="linecomment">;; 2008/12/25 dadams</span>
<span class="linecomment">;;     Added: icicle-save-raw-input (factored out from icicle-save-or-restore-input).</span>
<span class="linecomment">;;     icicle-save-or-restore-input:</span>
<span class="linecomment">;;       Change test whether last-command is cycling cmd to add also not being completing cmd.</span>
<span class="linecomment">;;       Use icicle-completing-p instead of testing this-command for being a cycling cmd.</span>
<span class="linecomment">;;       Use icicle-save-raw-input.</span>
<span class="linecomment">;;     icicle-next-candidate: Set icicle-cycling-p (new var) to t.</span>
<span class="linecomment">;; 2008/12/20 dadams</span>
<span class="linecomment">;;     icicle-save-or-restore-input: Don't restore last input if this is a completing command.</span>
<span class="linecomment">;; 2008/12/07 dadams</span>
<span class="linecomment">;;     icicle-completing-read, icicle-read-file-name-1:</span>
<span class="linecomment">;;       Removed icicle-prompt.  Don't add completion prompt prefix, except for Emacs 20.</span>
<span class="linecomment">;; 2008/12/06 dadams</span>
<span class="linecomment">;;     icicle-call-then-update-Completions:</span>
<span class="linecomment">;;       To update, call icicle-last-completion-command, not icicle-(apropos|prefix)-complete.</span>
<span class="linecomment">;; 2008/12/02 dadams</span>
<span class="linecomment">;;     icicle-unsorted(-file-name)-apropos-candidates:</span>
<span class="linecomment">;;       Call icicle-filter-wo-input before filtering with user input (as the doc string says).</span>
<span class="linecomment">;; 2008/11/28 dadams</span>
<span class="linecomment">;;     icicle-recompute-candidates, icicle-save-or-restore-input:</span>
<span class="linecomment">;;       Test property icicle-(prefix|apropos)-completing-command, not eq cmds.</span>
<span class="linecomment">;; 2008/11/23 dadams</span>
<span class="linecomment">;;     icicle-read-file-name:</span>
<span class="linecomment">;;       Don't initialize icicle-proxy-candidates unless icicle-add-proxy-candidates-flag.</span>
<span class="linecomment">;;       Don't add + to completion indicator if Emacs 23.</span>
<span class="linecomment">;; 2008/11/22 dadams</span>
<span class="linecomment">;;     icicle-completing-read:</span>
<span class="linecomment">;;       Bind icicle-fancy-cands-internal-p.  Do not call icicle-mctize-all unless fancy cands.</span>
<span class="linecomment">;;     icicle-mctized-full-candidate:</span>
<span class="linecomment">;;       No-op unless icicle-fancy-cands-internal-p or icicle-whole-candidate-as-text-prop-p.</span>
<span class="linecomment">;;     icicle-read-(number|char-exclusive|string-completing|face-name):</span>
<span class="linecomment">;;       Put icicle-fancy-candidates property on prompt if proxy candidates.</span>
<span class="linecomment">;;     icicle-display-candidates-in-Completions:</span>
<span class="linecomment">;;       Don't transform candidates unless icicle-fancy-cands-internal-p.</span>
<span class="linecomment">;; 2008/11/18 dadams</span>
<span class="linecomment">;;     icicle-display-candidates-in-Completions:</span>
<span class="linecomment">;;       Add icicle-special-candidate property as text property to candidates in</span>
<span class="linecomment">;;         icicle-completion-candidates, instead of just to display candidate, so returned also.</span>
<span class="linecomment">;;       Added support for icicle-display-string property.</span>
<span class="linecomment">;;       For these properties: look up symbol first in minibuffer-completion-table if obarray.</span>
<span class="linecomment">;; 2008/11/14 dadams</span>
<span class="linecomment">;;     icicle-display-candidates-in-Completions:</span>
<span class="linecomment">;;       Respect icicle-hide-common-match-in-Completions-flag.</span>
<span class="linecomment">;; 2008/11/10 dadams</span>
<span class="linecomment">;;     icicle(-unsorted)(-file-name)-(apropos|prefix)-candidates:</span>
<span class="linecomment">;;       Moved special and proxy candidates outside match filtering,</span>
<span class="linecomment">;;         reversing a change made on 2007/11/18.  Dunno why that change was made.</span>
<span class="linecomment">;;       But filter special and proxy candidates using the input.</span>
<span class="linecomment">;; 2008/11/09 dadams</span>
<span class="linecomment">;;     Added: icicle-join-nth-parts, icicle-display-cand-from-full-cand.</span>
<span class="linecomment">;;     icicle-transform-multi-completion: Use icicle-join-nth-parts.</span>
<span class="linecomment">;;     icicle-transform-multi-completion: Don't test icicle-list-join-string (always non-nil).</span>
<span class="linecomment">;;     icicle-first-matching-candidate:</span>
<span class="linecomment">;;       Fix: set res properly, not to the tested value.  Thx to Hannes Janetzek.</span>
<span class="linecomment">;; 2008/11/07 dadams</span>
<span class="linecomment">;;     icicle-color-name-w-bg: Return input if hexrgb.el is not loaded.  Thx to Fabrice Knevez.</span>
<span class="linecomment">;; 2008/11/04 dadams</span>
<span class="linecomment">;;     icicle-read-face-name: Soft-require eyedropper.el or palette.el.</span>
<span class="linecomment">;; 2008/11/03 dadams</span>
<span class="linecomment">;;     icicle-expanded-common-match: Bug fix for Emacs 20: If error matching, just return INPUT.</span>
<span class="linecomment">;;     icicle-highlight-input-noncompletion: Erase any message first before highlighting.</span>
<span class="linecomment">;; 2008/11/02 dadams</span>
<span class="linecomment">;;     icicle-display-candidates-in-Completions: For icicle-candidate-properties-alist, use</span>
<span class="linecomment">;;       narrowed buffer content, not i-current-completion-in-Completions.</span>
<span class="linecomment">;; 2008/10/24 dadams</span>
<span class="linecomment">;;     icicle-first-matching-candidate:</span>
<span class="linecomment">;;       Use regexp-quote on CAND.</span>
<span class="linecomment">;;       Add icicle-list-end-string to each entry in CANDIDATES.</span>
<span class="linecomment">;;       Iteration, not recursion.</span>
<span class="linecomment">;;     icicle-get-alist-candidate: Added optional arg NO-ERROR-P.</span>
<span class="linecomment">;; 2008/10/18 dadams</span>
<span class="linecomment">;;     Replaced customize-save-variable by funcall icicle-customize-save-variable-function.</span>
<span class="linecomment">;; 2008/10/14 dadams</span>
<span class="linecomment">;;     Applied renaming of icicle-completion-help to icicle-minibuffer-help.</span>
<span class="linecomment">;; 2008/10/06 dadams</span>
<span class="linecomment">;;     Don't toggle icy-mode after loading crm.el unless icy-mode is defined (!).</span>
<span class="linecomment">;;     icicle-ms-windows-NET-USE: If hash tables not available, just run the NET USE process.</span>
<span class="linecomment">;; 2008/10/04 dadams</span>
<span class="linecomment">;;     Substitute Icicles version of completing-read-multiple and its maps.  Thx to Per Nordlow.</span>
<span class="linecomment">;;       Added: (icicle|old)-completing-read-multiple, icicle-define-crm-completion-map,</span>
<span class="linecomment">;;              (icicle|old)-crm-local-(completion|must-match)-map.</span>
<span class="linecomment">;;     icicle-display-completion-list: Protect against Emacs 23 nonsense with base-size in cdr.</span>
<span class="linecomment">;; 2008/09/30 dadams</span>
<span class="linecomment">;;     Added: icicle-ms-windows-NET-USE.  Thx to Thomas Lim.</span>
<span class="linecomment">;;     icicle-file-remote-p: Use icicle-ms-windows-NET-USE.</span>
<span class="linecomment">;;     icicle-highlight-input-noncompletion: Return file-local-p if test shows it's local.</span>
<span class="linecomment">;;     icicle-call-then-update-Completions:</span>
<span class="linecomment">;;       Treat also known file-local-p return from icicle-highlight-input-noncompletion.</span>
<span class="linecomment">;;     Renamed icicle-isearch-complete-1 to icicle-isearch-complete-past-string and moved it</span>
<span class="linecomment">;;       here from icicles-mcmd.el.</span>
<span class="linecomment">;;     icicle-isearch-complete-past-string: Always use regexp-search-ring.  Changed prompt.</span>
<span class="linecomment">;; 2008/09/27 dadams</span>
<span class="linecomment">;;     icicle-highlight-input-noncompletion: Fixed typo: implicit-remote -&gt; implicit.</span>
<span class="linecomment">;; 2008/09/20 dadams</span>
<span class="linecomment">;;     icicle-(apropos|prefix)-candidates, icicle-maybe-sort-and-strip-candidates:</span>
<span class="linecomment">;;       Strip ignored files if icicle-abs-file-candidates.</span>
<span class="linecomment">;; 2008/09/19 dadams</span>
<span class="linecomment">;;     icicle-get-candidates-from-saved-set: Added optional arg DONT-EXPAND-FILESETS-P.</span>
<span class="linecomment">;;                                           Use icicle-kill-a-buffer, not kill-buffer.</span>
<span class="linecomment">;;     Moved icicle-kill-a-buffer here from icicles-cmd.el.</span>
<span class="linecomment">;;     Added: icicle-unpropertize.</span>
<span class="linecomment">;;     icicle-completing-read, icicle-read-file-name: Use icicle-unpropertize.</span>
<span class="linecomment">;; 2008/09/16 dadams</span>
<span class="linecomment">;;     filesets-get-filelist: Fixed :tree so it includes files in subdirs.</span>
<span class="linecomment">;;     Added: icicle-filesets-files-under.</span>
<span class="linecomment">;; 2008/09/15 dadams</span>
<span class="linecomment">;;     Added: icicle-saved-fileset-p, icicle-displayable-cand-from-saved-set.</span>
<span class="linecomment">;;     icicle-get-candidates-from-saved-set:</span>
<span class="linecomment">;;       Rewrote code to convert saved candidates to displayable candidates.</span>
<span class="linecomment">;;         Use icicle-displayable-cand-from-*, icicle-saved-fileset-p.  Require filesets.el.</span>
<span class="linecomment">;;       Moved filesets-get-fileset-from-name into and of first cond clause.</span>
<span class="linecomment">;;     Wrapped defun of filesets-get-filelist in eval-after-load.</span>
<span class="linecomment">;; 2008/09/13 dadams</span>
<span class="linecomment">;;     Added: icicle-get-candidates-from-saved-set (factored from code in</span>
<span class="linecomment">;;            icicle-retrieve-candidates-from-set), filesets-get-filelist (redefined),</span>
<span class="linecomment">;;            icicle-explicit-saved-completion-candidates.</span>
<span class="linecomment">;;     Moved here from icicles-mcmd.el: icicle-readable-to-markers.</span>
<span class="linecomment">;; 2008/09/04 dadams</span>
<span class="linecomment">;;     icicle-read-file-name-1: Removed unused code for non icicle-mode case.</span>
<span class="linecomment">;; 2008/09/03 dadams</span>
<span class="linecomment">;;     Removed: icicle-(un)highlight-crosshairs, icicle-unhighlight-crosshairs+cleanup.</span>
<span class="linecomment">;; 2008/09/01 dadams</span>
<span class="linecomment">;;     Added: icicle-(un)highlight-crosshairs, icicle-unhighlight-crosshairs+cleanup.</span>
<span class="linecomment">;; 2008/08/29 dadams</span>
<span class="linecomment">;;     icicle-mctize-all:</span>
<span class="linecomment">;;       Do it for all list collections (new icicle-mctized-full-candidate).</span>
<span class="linecomment">;;       Adjust PRED to use cdr only for conses with string cars.</span>
<span class="linecomment">;;     icicle-mctized-full-candidate:</span>
<span class="linecomment">;;       Treat all kinds of list entries: strings, symbols, and conses with symbol args, etc.</span>
<span class="linecomment">;; 2008/08/25 dadams</span>
<span class="linecomment">;;     icicle-display-candidates-in-Completions: Do nothing if NO-DISPLAY-P is 'no-msg.</span>
<span class="linecomment">;; 2008/08/24 dadams</span>
<span class="linecomment">;;     icicle-filter-wo-input: Filter out empty-string candidates: "".</span>
<span class="linecomment">;;     Added: icicle-minibuf-input-sans-dir.</span>
<span class="linecomment">;;     Renamed: icicle-minibuffer-contents-from-minibuffer to icicle-input-from-minibuffer,</span>
<span class="linecomment">;;              icicle-minibuffer-contents to icicle-minibuf-input.</span>
<span class="linecomment">;;     icicle-display-candidates-in-Completions, icicle-next-candidate, icicle-place-cursor:</span>
<span class="linecomment">;;       Use icicle-minibuf-input-sans-dir.</span>
<span class="linecomment">;; 2008/08/23 dadams</span>
<span class="linecomment">;;     icicle-display-candidates-in-Completions:</span>
<span class="linecomment">;;       Wrap preliminary display of *Completions* in save-selected-window.</span>
<span class="linecomment">;; 2008/08/22 dadams</span>
<span class="linecomment">;;     icicle-display-candidates-in-Completions:</span>
<span class="linecomment">;;       Display *Completions* before calling with-output-to-temp-buffer and filling it.</span>
<span class="linecomment">;;        This is so we can know the window width, to determine the correct formatting.</span>
<span class="linecomment">;;     icicle-insert-candidates:</span>
<span class="linecomment">;;       Don't use lru window or *-Completions-*-default-width (removed).  Failsafe width 40.</span>
<span class="linecomment">;; 2008/08/21 dadams</span>
<span class="linecomment">;;     icicle-completing-read:</span>
<span class="linecomment">;;       Bind minibuffer-completing-file-name to nil if not completing a file name.</span>
<span class="linecomment">;;       Removed setq of minibuffer-completion-table. Already do it in *-lisp-vanilla-*.</span>
<span class="linecomment">;; 2008/08/20 dadams</span>
<span class="linecomment">;;     icicle-insert-candidates:</span>
<span class="linecomment">;;       Turn off mouse-face after insert candidate.</span>
<span class="linecomment">;;       Fixup whitespace correctly: Don't remove whitespace that is part of a candidate.</span>
<span class="linecomment">;;     Added: icicle-ding.</span>
<span class="linecomment">;;     icicle-read-number: Replaced ding by icicle-ding.</span>
<span class="linecomment">;; 2008/08/18 dadams</span>
<span class="linecomment">;;     Moved here from icicles-cmd.el (and renamed from *-less-p): icicle-cdr-lessp.</span>
<span class="linecomment">;;     Added: icicle-delete-count, icicle-mctize-all, icicle-mctized-(display|full)-candidate,</span>
<span class="linecomment">;;            icicle-part-1-cdr-lessp.</span>
<span class="linecomment">;;     Renamed: icicle-delete-if(-not)     to icicle-remove-if(-not),</span>
<span class="linecomment">;;              icicle-put-alist-candidate to icicle-put-whole-cand-prop,</span>
<span class="linecomment">;;              icicle-update-completions  to icicle-complete-again-update.</span>
<span class="linecomment">;;     icicle-completing-read: Factored out transformation to MCT into new fn icicle-mctize-all.</span>
<span class="linecomment">;; 2008/08/08 dadams</span>
<span class="linecomment">;;     icicle-completing-read: Updated doc string for Emacs 23.</span>
<span class="linecomment">;; 2008/08/03 dadams</span>
<span class="linecomment">;;     icicle-completing-read: Convert the predicate to apply to just the cdr (= original cons).</span>
<span class="linecomment">;;     icicle-save-or-restore-input: Don't save empty string ("") to C-l history.</span>
<span class="linecomment">;; 2008/07/27 dadams</span>
<span class="linecomment">;;     Added: icicle-2nd-part-string-less-p.</span>
<span class="linecomment">;;     Moved here from icicles-mcmd.el: icicle-transform-multi-completion.</span>
<span class="linecomment">;; 2008/07/19 dadams</span>
<span class="linecomment">;;     icicle-choose-completion-string: Don't move to point-max unless in minibuffer.</span>
<span class="linecomment">;; 2008/06/24 dadams</span>
<span class="linecomment">;;     Make *-must-match-filename-map an alias for *-filename-completion-map.  Use the latter.</span>
<span class="linecomment">;; 2008/06/22 dadams</span>
<span class="linecomment">;;     icicle-completing-read, icicle-read-file-name:</span>
<span class="linecomment">;;       Remove text properties from result (only) if icicle-unpropertize-*-flag.</span>
<span class="linecomment">;; 2008/06/21 dadams</span>
<span class="linecomment">;;     icicle-read-file-name: Remove text properties from result file name.</span>
<span class="linecomment">;; 2008/06/01 dadams</span>
<span class="linecomment">;;     icicle-lisp-vanilla-completing-read: Typo: minibuffer-local-must-match-filename-map.</span>
<span class="linecomment">;;     Put sort predicate properties on some sort predicate symbols, e.g. icicle-dirs-last-p.</span>
<span class="linecomment">;; 2008/05/22 dadams</span>
<span class="linecomment">;;     icicle-read-file-name: Bind minibuffer-completing-file-name to t.</span>
<span class="linecomment">;;     icicle-read-file-name-1: Do not prepend ". " if Emacs 23+, since it uses completing-read.</span>
<span class="linecomment">;;     icicle-(un)highlight-lighter: Reflect case-sensitivity in lighter.</span>
<span class="linecomment">;; 2008/05/11 dadams</span>
<span class="linecomment">;;     icicle-unsorted(-file-name)-apropos-candidates:</span>
<span class="linecomment">;;       Pass input to all-completions only if not icicle-apropos-complete-match-fn.</span>
<span class="linecomment">;; 2008/05/11 dadams</span>
<span class="linecomment">;;     Renamed icicle-fit-Completions-window to icicle-fit-completions-window.</span>
<span class="linecomment">;;     icicle-fit-completions-window: Use current window - not necessarily for *Completions*.</span>
<span class="linecomment">;; 2008/05/06 dadams</span>
<span class="linecomment">;;     icicle-highlight-lighter: Wrap redisplay in condition-case to ignore any errors.</span>
<span class="linecomment">;; 2008/05/05 dadams</span>
<span class="linecomment">;;     icicle-file-name-input-p: Redefined to just use minibuffer-completing-file-name.</span>
<span class="linecomment">;; 2008/05/01 dadams</span>
<span class="linecomment">;;     icicle-lisp-vanilla-completing-read, icicle-lisp-vanilla-completing-read,</span>
<span class="linecomment">;;       icicle-read-from-minibuffer, icicle-read-number, icicle-read-string-completing:</span>
<span class="linecomment">;;         Adapted to Emacs 23 change to allow list of strings for default value.</span>
<span class="linecomment">;; 2008/04/25 dadams</span>
<span class="linecomment">;;     icicle-call-then-update-Completions:</span>
<span class="linecomment">;;       nil icicle-test-for-remote-files-flag means don't test for remote file name.</span>
<span class="linecomment">;;     icicle-highlight-input-noncompletion:</span>
<span class="linecomment">;;       Correction: implicit, not always, in combination with not incremental completion.</span>
<span class="linecomment">;;       Added check for icicle-completing-command if value is explicit*.</span>
<span class="linecomment">;;       Added check for icicle-test-for-remote-files-flag if *-strict with lax completion.</span>
<span class="linecomment">;;       Protect call to icicle-file-remote-p with check of icicle-test-for-remote-files-flag.</span>
<span class="linecomment">;; 2008/04/18 dadams</span>
<span class="linecomment">;;     Renamed icicle-init-value-flag to icicle-default-value.</span>
<span class="linecomment">;;     icicle-read-from-minibuffer:</span>
<span class="linecomment">;;       If icicle-default-value is t, add to prompt.  Thx to Dominique Quatrevaux.</span>
<span class="linecomment">;;     icicle-completing-read, icicle-read-file-name-1, icicle-read-from-minibuffer:</span>
<span class="linecomment">;;       Change icicle-default-value test to rule out t also.</span>
<span class="linecomment">;;     icicle-completion-setup-function:</span>
<span class="linecomment">;;       Don't call file-name-directory unless minibuffer-completing-file-name.</span>
<span class="linecomment">;; 2008/04/01 dadams</span>
<span class="linecomment">;;     icicle-unsorted(-file-name)-apropos-candidates:</span>
<span class="linecomment">;;       If icicle-unsorted-apropos-candidates pass input to all-completions.</span>
<span class="linecomment">;;     icicle-expanded-common-match-1:</span>
<span class="linecomment">;;       Use icicle-apropos-complete-match-fn throughout, but return nil if that is nil.</span>
<span class="linecomment">;;     icicle-display-candidates-in-Completions:</span>
<span class="linecomment">;;       If icicle-apropos-complete-match-fn is nil, don't try to highlight input match.</span>
<span class="linecomment">;; 2008/03/31 dadams</span>
<span class="linecomment">;;     icicle-display-candidates-in-Completions:</span>
<span class="linecomment">;;       Allow for no completion type, for No completions msg.</span>
<span class="linecomment">;; 2008/03/30 dadams</span>
<span class="linecomment">;;     icicle-read-file-name-1:</span>
<span class="linecomment">;;       Bind read-file-name-function to nil.</span>
<span class="linecomment">;;       Funcall icicle-old-read-file-name-fn instead of old-read-file-name.</span>
<span class="linecomment">;;     icicle-(un)highlight-lighter: Respect icicle-highlight-lighter-flag.</span>
<span class="linecomment">;;     Top-level: Moved fset for old-read-file-name to icicles-mode.el and renamed it.</span>
<span class="linecomment">;; 2008/03/29 dadams</span>
<span class="linecomment">;;     icicle-completing-read, icicle-read-file-name-1:</span>
<span class="linecomment">;;       Combine new faces for single-character minibuffer completion status indicator.</span>
<span class="linecomment">;;       Call icicle-highlight-lighter after establishing require-match, not at beginning.</span>
<span class="linecomment">;;       No longer use completing-prompt-prefix(-symb).</span>
<span class="linecomment">;;       No longer use icicle-reminder-prompt-flag (no longer add help to prompt).</span>
<span class="linecomment">;;     Removed: icicle-control-reminder-prompt.</span>
<span class="linecomment">;;     icicle-highlight-lighter:</span>
<span class="linecomment">;;       Combine faces for highlighting.  Indicate multi-command and strict/lax completion.</span>
<span class="linecomment">;;     icicle-unhighlight-lighter: Add + for multi-command.  Don't bother to propertize strg.</span>
<span class="linecomment">;;     icicle-file-remote-p: If name matches Windows drive letter, don't try other remote tests.</span>
<span class="linecomment">;; 2008/03/11 dadams</span>
<span class="linecomment">;;     icicle-completing-read-history:</span>
<span class="linecomment">;;       Convert cons list elements to strings.  Lets you use M-o with command-history.</span>
<span class="linecomment">;; 2008/03/09 dadams</span>
<span class="linecomment">;;     Added: icicle-(un)highlight-lighter.</span>
<span class="linecomment">;;     icicle-completing-read, icicle-read-file-name: Call icicle-highlight-lighter.</span>
<span class="linecomment">;; 2008/03/08 dadams</span>
<span class="linecomment">;;     icicle-completing-p: Replaced where-is-internal test with completion keymaps test.</span>
<span class="linecomment">;; 2008/03/05 dadams</span>
<span class="linecomment">;;     icicle-completing-read:</span>
<span class="linecomment">;;       Copy TABLE etc. only if candidates are strings.  Thx to Damon Permezel for bug report.</span>
<span class="linecomment">;;     icicle-files-within: Skip inaccessible directories and unreadable files.  Thx to Damon.</span>
<span class="linecomment">;; 2008/02/28 dadams</span>
<span class="linecomment">;;     icicle-completing-read: Fixed test for multicompletion: List of strings, not just list.</span>
<span class="linecomment">;; 2008/02/24 dadams</span>
<span class="linecomment">;;     Added: icicle-scatter(-match).</span>
<span class="linecomment">;;     icicle-display-*-in-Completions: Highlighting of input match can use icicle-scatter.</span>
<span class="linecomment">;;                                      Use icicle-apropos-complete-match-fn in message.</span>
<span class="linecomment">;;     icicle-expanded-common-match-1: Use icicle-apropos-complete-match-fn, not string-match.</span>
<span class="linecomment">;; 2008/02/23 dadams</span>
<span class="linecomment">;;     icicle-completing-read:</span>
<span class="linecomment">;;       Change initial-input to a cons with 0 position if icicle-init-value-flag is *-start.</span>
<span class="linecomment">;;     icicle-lisp-vanilla-completing-read: Set position to end of initial-input, by default.</span>
<span class="linecomment">;;                                          Convert zero-based position to one-based.</span>
<span class="linecomment">;; 2008/02/22 dadams</span>
<span class="linecomment">;;     icicle-completing-read:</span>
<span class="linecomment">;;       For all alist candidates (not just multi-completion):</span>
<span class="linecomment">;;         Copy the car and replace the cdr with the whole candidate.</span>
<span class="linecomment">;;     icicle-get-alist-candidate: Get and return just whole icicle-whole-candidate property.</span>
<span class="linecomment">;;     icicle-completion-setup-function (for Emacs 20):</span>
<span class="linecomment">;;       minibuffer-prompt-end -&gt; icicle-minibuffer-prompt-end.</span>
<span class="linecomment">;; 2008/02/16 dadams</span>
<span class="linecomment">;;     icicle-get-alist-candidate:</span>
<span class="linecomment">;;       Reconstitute whole candidate, by consing string onto data, which is only the cdr now.</span>
<span class="linecomment">;;     icicle-completing-read: Use icicle-put-alist-candidate to put candidate data onto string.</span>
<span class="linecomment">;;     Added: icicle-put-alist-candidate.  Put only the cdr (data), not whole, onto the string.</span>
<span class="linecomment">;; 2008/02/14 dadams</span>
<span class="linecomment">;;     Added: icicle-substring-no-properties.</span>
<span class="linecomment">;; 2008/02/11 dadams</span>
<span class="linecomment">;;     icicle-read-string-completing: Moved save-match-data so replace-match can use match data.</span>
<span class="linecomment">;; 2008/02/06 dadams</span>
<span class="linecomment">;;     icicle-highlight-input-noncompletion:</span>
<span class="linecomment">;;       Wait icicle-highlight-input-completion-failure-delay before highlighting.</span>
<span class="linecomment">;;       Don't highlight if past icicle-highlight-input-completion-failure-threshold.</span>
<span class="linecomment">;;       Combined input-pending test with highlighting test, and moved it before file-name test.</span>
<span class="linecomment">;;       Conditionalized face removal.</span>
<span class="linecomment">;;       Return nil when input within delay preempts highlighting.</span>
<span class="linecomment">;;     icicle-highlight-initial-whitespace: Removed only vestigial whitespace highlighting.</span>
<span class="linecomment">;;     icicle-read-number: Moved save-match-data outside cond.</span>
<span class="linecomment">;; 2008/02/03 dadams</span>
<span class="linecomment">;;     icicle-choose-completion-string:</span>
<span class="linecomment">;;       Go to point-max before insert choice.  Respect icicle-dir-candidate-can-exit-p.</span>
<span class="linecomment">;;     icicle-completion-setup-function:</span>
<span class="linecomment">;;       Set default dir only if this is a completion cmd or not *-comp-base-is-default-dir-p.</span>
<span class="linecomment">;;       If icicle-comp-base-is-default-dir-p, set completion-base-size to default-dir length.</span>
<span class="linecomment">;;     icicle-read-file-name: Bind ffap vars to prevent slowing down ffap-guesser.</span>
<span class="linecomment">;; 2008/01/29 dadams</span>
<span class="linecomment">;;     Added: icicle-(apropos|prefix)-any(-file-name)-candidates-p,</span>
<span class="linecomment">;;            icicle-subst-envvar-in-file-name, icicle-highlight-input-noncompletion-rest,</span>
<span class="linecomment">;;            icicle-any-candidates-p, icicle-file-remote-p.</span>
<span class="linecomment">;;     icicle-minibuffer-contents-from-minibuffer: Use icicle-subst-envvar-in-file-name.</span>
<span class="linecomment">;;     icicle-call-then-update-Completions:</span>
<span class="linecomment">;;       Reinitialize icicle-input-fail-pos to nil.</span>
<span class="linecomment">;;       If we know input is a remote file name from failure highlighting, skip remote test.</span>
<span class="linecomment">;;       Use icicle-file-remote-p, not file-remote-p.</span>
<span class="linecomment">;;     icicle-highlight-input-noncompletion: Rewrote.</span>
<span class="linecomment">;;       Takes no args now.</span>
<span class="linecomment">;;       Do nothing if input pending or input is empty.</span>
<span class="linecomment">;;       Use icicle-file-remote-p, not file-remote-p.  Return value indicating remote file name.</span>
<span class="linecomment">;;       Use new values of icicle-highlight-input-completion-failure, including always.</span>
<span class="linecomment">;;       First check through last two chars, then icicle-highlight-input-noncompletion-rest.</span>
<span class="linecomment">;;     icicle-highlight-input-noncompletion-rest (was in icicle-highlight-input-noncompletion):</span>
<span class="linecomment">;;       No longer use icicle-max-chars-noncompletion-highlight.</span>
<span class="linecomment">;;       Use icicle-any-candidates-p, so don't compute candidate lists.</span>
<span class="linecomment">;; 2008/01/15 dadams</span>
<span class="linecomment">;;     icicle-command-abbrev-save: Added condition-case with message in case of error.</span>
<span class="linecomment">;;     icicle-control-reminder-prompt: Added message.</span>
<span class="linecomment">;; 2008/01/13 dadams</span>
<span class="linecomment">;;     icicle-read-face-name: Use icicle-transform-multi-completion.</span>
<span class="linecomment">;;     icicle-next-candidate: Do not use icicle-transform-multi-completion.</span>
<span class="linecomment">;;     icicle-next-candidate, icicle-save-or-restore-input: Do not treat handle-switch-frame.</span>
<span class="linecomment">;; 2008/01/08 dadams</span>
<span class="linecomment">;;     Renamed icicle-expanded-common-match to icicle-expanded-common-match-1.</span>
<span class="linecomment">;;     New icicle-expanded-common-match uses longest of two tries.</span>
<span class="linecomment">;;     icicle-expanded-common-match-1, first loop: Match ecm only up to orig-match-end.</span>
<span class="linecomment">;;     icicle-read-file-name: Use icicle-var-is-of-type-p for proxy candidates.</span>
<span class="linecomment">;;     icicle-choose-completion-string, icicle-strip-ignored-files-and-sort,</span>
<span class="linecomment">;;       icicle-filter-wo-input, icicle-first-matching-candidate,</span>
<span class="linecomment">;;       icicle-(proxy-candidate|prefix-keys)-first-p,  icicle-var-(matches|inherits)-type-p,</span>
<span class="linecomment">;;       icicle-read-(number|face-name|file-name|string-completing),</span>
<span class="linecomment">;;       icicle-unsorted(-file-name)-prefix-candidates, icicle-expanded-common-match-1,</span>
<span class="linecomment">;;       icicle-next-candidate, icicle-remove-dots: Wrap string-match in save-match-data.</span>
<span class="linecomment">;;     icicle-display-candidates-in-Completions: Moved save-match-data locations.</span>
<span class="linecomment">;; 2008/01/05 dadams</span>
<span class="linecomment">;;     icicle-next-candidate: Don't refresh Completions if last-command = handle-switch-frame.</span>
<span class="linecomment">;; 2008/01/04 dadams</span>
<span class="linecomment">;;     icicle-insert-candidates: Put property icicle-keep-newline on final \n of candidate.</span>
<span class="linecomment">;; 2007/12/31 dadams</span>
<span class="linecomment">;;     icicle-choose-completion-string: In minibuffer, delete all input before inserting.</span>
<span class="linecomment">;; 2007/12/27 dadams</span>
<span class="linecomment">;;     icicle-unsorted(-file-name)-apropos-candidates:</span>
<span class="linecomment">;;       Use null *-apropos-*-match-fn, not function-valued TABLE to inhibit input match.</span>
<span class="linecomment">;; 2007/12/26 dadams</span>
<span class="linecomment">;;     icicle-next-candidate: Raise *Completions* frame at the end.</span>
<span class="linecomment">;; 2007/12/24 dadams</span>
<span class="linecomment">;;     icicle-unsorted(-file-name)-apropos-candidates:</span>
<span class="linecomment">;;       Don't match input regexp if minibuffer-completion-table is a function.</span>
<span class="linecomment">;;     icicle-var-inherits-type-p:</span>
<span class="linecomment">;;       Recheck var-type match after set var-type to its car.</span>
<span class="linecomment">;;       Handle string (regexp) TYPES elements.</span>
<span class="linecomment">;;     icicle-value-satisfies-type-p: Skip type check for string type (regexp).</span>
<span class="linecomment">;;     icicle-var-is-of-type-p: Doc string.  Use icicle-var-matches-type-p.</span>
<span class="linecomment">;;     Added: icicle-var-matches-type-p, icicle-custom-type.</span>
<span class="linecomment">;; 2007/12/23 dadams</span>
<span class="linecomment">;;     icicle-var-is-of-type-p:</span>
<span class="linecomment">;;       Added MODE arg.  Use icicle-var-inherits-type-p, icicle-var-val-satisfies-type-p.</span>
<span class="linecomment">;;       Redefined as MODE choice, not just a simple or.  Treat more cases.</span>
<span class="linecomment">;;     Added: icicle-var-inherits-type-p, icicle-var-val-satisfies-type-p,</span>
<span class="linecomment">;;            icicle-value-satisfies-type-p.</span>
<span class="linecomment">;;     icicle-read-(number|char-exclusive|string-completing|face-name):</span>
<span class="linecomment">;;       Don't fill icicle-proxy-candidates unless icicle-add-proxy-candidates-flag.</span>
<span class="linecomment">;;       Corrected doc string to refer to icicle-add-proxy-candidates-flag.</span>
<span class="linecomment">;; 2007/12/22 dadams</span>
<span class="linecomment">;;     icicle-var-is-of-type-p:</span>
<span class="linecomment">;;       Check supertypes also.  Use both :validate and :match.</span>
<span class="linecomment">;;       Wrap type check in condition-case. Use widget-put instead of plist-put.</span>
<span class="linecomment">;;     Added soft require of wid-edit+.el.</span>
<span class="linecomment">;; 2007/12/21 dadams</span>
<span class="linecomment">;;     icicle-var-is-of-type-p: Use :validate, not :match, for the test.</span>
<span class="linecomment">;; 2007/12/19 dadams</span>
<span class="linecomment">;;     icicle-display-candidates-in-Completions:</span>
<span class="linecomment">;;       Ensure icicle-last-input is non-nil in (file-name-directory icicle-last-input).</span>
<span class="linecomment">;; 2007/12/14 dadams</span>
<span class="linecomment">;;     icicle-fit-Completions-window:</span>
<span class="linecomment">;;       Don't try to get a property if it's not a symbol.  Thx to Mike Mattie.</span>
<span class="linecomment">;; 2007/12/11 dadams</span>
<span class="linecomment">;;     Added: icicle-read-char-exclusive.</span>
<span class="linecomment">;;     icicle-read-face-name: Include face-name vars as proxy candidates.</span>
<span class="linecomment">;; 2007/12/10 dadams</span>
<span class="linecomment">;;     icicle-highlight-input-noncompletion: Use face icicle-input-completion-fail-lax also.</span>
<span class="linecomment">;; 2007/12/09 dadams</span>
<span class="linecomment">;;     icicle-highlight-input-noncompletion: Respect icicle-max-chars-noncompletion-highlight.</span>
<span class="linecomment">;; 2007/12/08 dadams</span>
<span class="linecomment">;;     icicle-read-file-name:</span>
<span class="linecomment">;;       Include file-name variables as proxy candidates.  Reset icicle-proxy-candidates at end.</span>
<span class="linecomment">;;     icicle-read-number: float type is not defined before Emacs 22.</span>
<span class="linecomment">;;     icicle-read-string-completing:</span>
<span class="linecomment">;;       Set default to "" if nil, but only after completing-read.</span>
<span class="linecomment">;;       Set car of hist to var value, replacing var name.  Treat consp hist also.</span>
<span class="linecomment">;; 2007/12/03 dadams</span>
<span class="linecomment">;;     Renamed icicle-longest-common-match to icicle-expanded-common-match.</span>
<span class="linecomment">;; 2007/12/02 dadams</span>
<span class="linecomment">;;     Added: icicle-var-is-of-type-p.</span>
<span class="linecomment">;;     icicle-read-(number|string-completing):</span>
<span class="linecomment">;;       Use icicle-var-is-of-type-p, to handle compatible types.</span>
<span class="linecomment">;; 2007/11/30 dadams</span>
<span class="linecomment">;;     icicle-read-file-name, icicle-read-(number|string-completing),</span>
<span class="linecomment">;;       icicle-display-candidates-in-Completions, icicle-proxy-candidate-first-p:</span>
<span class="linecomment">;;         Use only membership in icicle-proxy-candidates, not icicle-proxy-candidate property.</span>
<span class="linecomment">;;     icicle-choose-completion-string:</span>
<span class="linecomment">;;       Condition for exit: could be no minibuffer-completion-table if extra or proxy cands.</span>
<span class="linecomment">;; 2007/11/29 dadams</span>
<span class="linecomment">;;     icicle-read-(number|string-completing):</span>
<span class="linecomment">;;       Treat icicle-add-proxy-candidates-flag and icicle-proxy-candidates.</span>
<span class="linecomment">;;     icicle-display-candidates-in-Completions: Treat empty icicle-completion-candidates.</span>
<span class="linecomment">;; 2007/11/27 dadams</span>
<span class="linecomment">;;     Added: icicle-read-number, icicle-read-string-completing.</span>
<span class="linecomment">;;     icicle-read-file-name: Remove icicle-proxy-candidate property in unwind-protect.</span>
<span class="linecomment">;; 2007/11/25 dadams</span>
<span class="linecomment">;;     Added: icicle-command-abbrev(-save|-used-more-p).</span>
<span class="linecomment">;; 2007/11/24 dadams</span>
<span class="linecomment">;;     icicle-longest-common-match,  first loop: string-match -&gt; not string-match.</span>
<span class="linecomment">;;                                               len-first -&gt; length of lcm.</span>
<span class="linecomment">;;     Added: icicle-proxy-candidate-first-p.</span>
<span class="linecomment">;; 2007/11/18 dadams</span>
<span class="linecomment">;;     icicle(-unsorted)(-file-name)-(apropos|prefix)-candidates:</span>
<span class="linecomment">;;       Include also icicle-proxy-candidates.</span>
<span class="linecomment">;;       Move special and proxy candidates inside match filtering.</span>
<span class="linecomment">;;     icicle-display-candidates-in-Completions:</span>
<span class="linecomment">;;       Don't expand directory when highlighting special candidate.</span>
<span class="linecomment">;; 2007/11/02 dadams</span>
<span class="linecomment">;;     icicle-longest-common-match:</span>
<span class="linecomment">;;       First loop: (1) match against at most len-first, (2) put the match into the and test.</span>
<span class="linecomment">;; 2007/10/28 dadams</span>
<span class="linecomment">;;     icicle-display-candidates-in-Completions:</span>
<span class="linecomment">;;       Always highlight longest common match for prefix completion.</span>
<span class="linecomment">;;     icicle-unsorted(-file-name)-prefix-candidates, icicle-fuzzy-candidates:</span>
<span class="linecomment">;;       Set icicle-common-match-string, regardless of icicle-expand-input-*-flag.</span>
<span class="linecomment">;;     icicle-save-or-restore-input:</span>
<span class="linecomment">;;       Update to lcm even if no input change, if completion mode changed.</span>
<span class="linecomment">;;       Update to lcm if prefix completing, even if icicle-expand-input-*-flag is nil.</span>
<span class="linecomment">;;       Save input for C-l even if this command is an icicle-completing-command (?).</span>
<span class="linecomment">;;       Don't reset raw input to "" if cycling, so keep highlight in *Completions*.</span>
<span class="linecomment">;;     icicle-longest-common-match: Test prefix through embedded input each time.</span>
<span class="linecomment">;; 2007/10/26 dadams</span>
<span class="linecomment">;;     icicle-read-face-name (Emacs 22): Fix the treatment of default value.</span>
<span class="linecomment">;; 2007/10/22 dadams</span>
<span class="linecomment">;;     icicle-display-candidates-in-Completions:</span>
<span class="linecomment">;;       Highlight only regexp matching part of special candidates.</span>
<span class="linecomment">;;       Highlight special cands regardless of icicle-highlight-historical-candidates-flag.</span>
<span class="linecomment">;; 2007/10/02 dadams</span>
<span class="linecomment">;;     icicle-next-candidate:</span>
<span class="linecomment">;;       Apply abbreviate-file-name to file-name input.  Thx to Joonhwan Lee.</span>
<span class="linecomment">;; 2007/09/29 dadams</span>
<span class="linecomment">;;     Added: icicle-fuzzy-candidates.</span>
<span class="linecomment">;;     icicle-prefix-candidates: Treat fuzzy completion.</span>
<span class="linecomment">;;     icicle-display-candidates-in-Completions:</span>
<span class="linecomment">;;       For prefix completion, highlight literal input match in Completions.</span>
<span class="linecomment">;; 2007/09/26 dadams</span>
<span class="linecomment">;;     icicle-read-from-minibuffer: Removed keep-all arg - see also 2006/06/01.</span>
<span class="linecomment">;; 2007/09/22 dadamms</span>
<span class="linecomment">;;     icicle-completing-read, icicle-read-from-minibuffer:</span>
<span class="linecomment">;;       Ensure that init arg is string when get it from default arg via icicle-init-*-flag.</span>
<span class="linecomment">;; 2007/09/18 dadams</span>
<span class="linecomment">;;     icicle-call-then-update-Completions:</span>
<span class="linecomment">;;       Test icicle-current-completion-mode, not icicle-last-completion-command.</span>
<span class="linecomment">;; 2007/09/16 dadams</span>
<span class="linecomment">;;     icicle-call-then-update-Completions:</span>
<span class="linecomment">;;       Don't complete if file-remote-p.</span>
<span class="linecomment">;;       Highlight completion failure only if input &gt; icicle-*-display-min-input-chars.</span>
<span class="linecomment">;;     icicle-highlight-input-noncompletion:</span>
<span class="linecomment">;;       Don't highlight unless also icicle-incremental-completion-flag.</span>
<span class="linecomment">;;       Call icicle-file-name-*-candidates for file-name input.</span>
<span class="linecomment">;;       Don't highlight if file-remote-p and reading file name.  Instead, remove highlighting.</span>
<span class="linecomment">;; 2007/09/14 dadams</span>
<span class="linecomment">;;     icicle-highlight-input-noncompletion, icicle-update-completions,</span>
<span class="linecomment">;;       icicle-recompute-candidates:</span>
<span class="linecomment">;;         Wrapped condition-case around candidates computation.</span>
<span class="linecomment">;; 2007/09/02 dadams</span>
<span class="linecomment">;;     icicle-display-candidates-in-Completions:</span>
<span class="linecomment">;;       Restore point and window point to start of candidates in *Completions*.</span>
<span class="linecomment">;; 2007/08/21 dadams</span>
<span class="linecomment">;;     icicle-highlight-input-noncompletion: Remove any vestigial highlighting on matched part.</span>
<span class="linecomment">;; 2007/08/19 dadams</span>
<span class="linecomment">;;     Added: icicle-lisp-vanilla-completing-read, icicle-highlight-input-noncompletion.</span>
<span class="linecomment">;;     icicle-completing-read:</span>
<span class="linecomment">;;       Allow reading and returning string candidates with properties:</span>
<span class="linecomment">;;         bind minibuffer-allow-text-properties.</span>
<span class="linecomment">;;       Put whole candidate on string as text property.</span>
<span class="linecomment">;;       Use icicle-lisp-vanilla-completing-read, not old-completing-read.</span>
<span class="linecomment">;;     icicle-call-then-update-Completions: Call icicle-highlight-input-noncompletion.</span>
<span class="linecomment">;;     icicle-get-alist-candidate:</span>
<span class="linecomment">;;       If icicle-whole-candidate-as-text-prop-p, try to get full candidate from text prop.</span>
<span class="linecomment">;; 2007/08/16 dadams</span>
<span class="linecomment">;;     icicle-insert-candidates: Don't reset text props if endpos &gt; point.  Thx to Chris Hecker.</span>
<span class="linecomment">;; 2007/08/14 dadams</span>
<span class="linecomment">;;     icicle-increment-cand-nb+signal-end: Removed audible bell - use visible bell only.</span>
<span class="linecomment">;; 2007/07/22 dadams</span>
<span class="linecomment">;;     icicle-read-face-name (Emacs 22 version):</span>
<span class="linecomment">;;       Revert multiple branch to not use icicle-make-face-candidate.</span>
<span class="linecomment">;;     Moved here from icicles-mode.el: icicle-completing-p.</span>
<span class="linecomment">;; 2007/07/06 dadams</span>
<span class="linecomment">;;     icicle-display-candidates-in-Completions: Leave cursor at start of candidates.</span>
<span class="linecomment">;; 2007/07/03 dadams</span>
<span class="linecomment">;;     icicle-save-or-restore-input:</span>
<span class="linecomment">;;       Add current-raw-input to icicle-previous(-non)-file-*-raw-inputs, respecting max len.</span>
<span class="linecomment">;;       Don't save input if current command is C-l or C-L.</span>
<span class="linecomment">;;       If don't save raw input, set it to empty string.</span>
<span class="linecomment">;;     Added: icicle-put-at-head.</span>
<span class="linecomment">;;     icicle-highlight-complete-input: Ensure no error treatment in call to search-forward.</span>
<span class="linecomment">;;     icicle-display-candidates-in-Completions:</span>
<span class="linecomment">;;       Ensure non-nil current(-raw)-input, for highlight.</span>
<span class="linecomment">;; 2007/06/23 dadams</span>
<span class="linecomment">;;     Added: icicle-completing-read-history.</span>
<span class="linecomment">;;     Moved here from icicles-cmd.el: icicle-read-from-minibuf-nil-default.</span>
<span class="linecomment">;; 2007/06/20 dadams</span>
<span class="linecomment">;;     icicle-make-face-candidate, icicle-read-face-name:</span>
<span class="linecomment">;;       Use new string value of icicle-WYSIWYG-Completions-flag.</span>
<span class="linecomment">;; 2007/06/19 dadams</span>
<span class="linecomment">;;     icicle-read-face-name:</span>
<span class="linecomment">;;       Use a multi-completion, depending on icicle-WYSIWYG-Completions-flag.</span>
<span class="linecomment">;;       For Emacs 22, isolate the multiple case and do nothing for it.</span>
<span class="linecomment">;;     icicle-make-face-candidate: Treat also whole-number value for icicle-WYSIWYG-*-flag.</span>
<span class="linecomment">;; 2007/06/17 dadams</span>
<span class="linecomment">;;     icicle-make-face-candidate: Respect icicle-WYSIWYG-Completions-flag.</span>
<span class="linecomment">;;     icicle-display-candidates-in-Completions: highlight saved candidates.</span>
<span class="linecomment">;;     icicle-place-overlay: Added priority arg.</span>
<span class="linecomment">;; 2007/06/13 dadams</span>
<span class="linecomment">;;     icicle-display-candidates-in-Completions:</span>
<span class="linecomment">;;       Upgrade icicle-incremental-completion-p only if redisplaying.  Thx Mark Elston.</span>
<span class="linecomment">;; 2007/06/10 dadams</span>
<span class="linecomment">;;     Removed unconditional add-hook for icicle-fit-Completions-window.</span>
<span class="linecomment">;; 2007/06/09 dadams</span>
<span class="linecomment">;;     icicle-insert-candidates: Don't mouse-face last char of candidate if it is a newline.</span>
<span class="linecomment">;;     icicle-display-candidates-in-Completions: Treat icicle-candidate-properties-alist last.</span>
<span class="linecomment">;; 2007/06/07 dadams</span>
<span class="linecomment">;;     icicle-read-face-name: Use (icicle-)face-name-history.</span>
<span class="linecomment">;; 2007/06/05 dadams</span>
<span class="linecomment">;;     Added soft require of hexrgb.el, but only if window-system.</span>
<span class="linecomment">;;     icicle-color*: Protected with featurep hexrgb and error message.</span>
<span class="linecomment">;; 2007/06/01 dadams</span>
<span class="linecomment">;;     icicle-completing-read, icicle-read-from-minibuffer, icicle-read-string:</span>
<span class="linecomment">;;       Use M@R%M=X!L$S+P&L^T*Z to avoid name capture by minibuffer-history-variable's value.</span>
<span class="linecomment">;;     icicle-display-candidates-in-Completions, icicle-historical-alphabetic-p,</span>
<span class="linecomment">;;       icicle-most-recent-first-p:</span>
<span class="linecomment">;;         Ensure value of minibuffer-history-variable is bound.</span>
<span class="linecomment">;; 2007/05/29 dadams</span>
<span class="linecomment">;;     icicle-call-then-update-Completions: Don't recomplete if only one candidate.</span>
<span class="linecomment">;; 2007/05/24 dadams</span>
<span class="linecomment">;;     icicle-completing-read, icicle-read-file-name:</span>
<span class="linecomment">;;       Fix length test for consp initial-input.  Thx to Anupam Sengupta.</span>
<span class="linecomment">;; 2007/05/04 dadams</span>
<span class="linecomment">;;     icicle-unsorted-*: C-g quits to top-level.</span>
<span class="linecomment">;;     icicle-candidate-set-1, icicle-scroll-or-update-*, icicle-msg-maybe-in-minibuffer:</span>
<span class="linecomment">;;       Move to minibuffer window for minibuffer-message.</span>
<span class="linecomment">;;     icicle-display-candidates-in-Completions, icicle-highlight-initial-whitespace,</span>
<span class="linecomment">;;     icicle-unsorted-file-name-*-candidates, icicle-longest-common-match,</span>
<span class="linecomment">;;     icicle-next-candidate, icicle-place-cursor, icicle-highlight-complete-input,</span>
<span class="linecomment">;;       icicle-special-candidates-first-p, icicle-case-string-less-p:</span>
<span class="linecomment">;;         Use read-file-name-completion-ignore-case, if completing file name.</span>
<span class="linecomment">;;     Moved mention of read-file-name-completion-ignore-case and</span>
<span class="linecomment">;;       icicle-cycle-into-subdirs-flag from icicle-completing-read to icicle-read-file-name.</span>
<span class="linecomment">;;     Added empty defvars for Emacs 22 standard vars, to quiet byte compiler.</span>
<span class="linecomment">;; 2007/04/29 dadams</span>
<span class="linecomment">;;     Added: icicle-last-modified-first-p.</span>
<span class="linecomment">;;     icicle-call-then-update-Completions: Delete icicle-complete-input-overlay.</span>
<span class="linecomment">;; 2007/04/08 dadams</span>
<span class="linecomment">;;     Added: icicle-highlight-candidate-in-Completions, from code in icicle-next-candidate.</span>
<span class="linecomment">;;            But changed to: 1) make Completions dedicated and 2) not bind case-fold-search.</span>
<span class="linecomment">;;     icicle-next-candidate: Use icicle-highlight-candidate-in-Completions.</span>
<span class="linecomment">;; 2007/04/02 dadams</span>
<span class="linecomment">;;     Moved here from icicles-cmd.el: icicle-filter-alist, icicle-first-matching-candidate.</span>
<span class="linecomment">;; 2007/04/01 dadams</span>
<span class="linecomment">;;     icicle-insert-candidates: Don't fixup-whitespace if bolp.</span>
<span class="linecomment">;; 2007/03/30 dadams</span>
<span class="linecomment">;;     icicle-fit-Completions-window: Don't resize *Completions* window if split horizontally.</span>
<span class="linecomment">;;     icicle-insert-candidates:</span>
<span class="linecomment">;;       Calculate nb of columns using max-candidate-len, not number of candidates.</span>
<span class="linecomment">;;       Indent at least one colwidth, and leave less space between candidates.</span>
<span class="linecomment">;; 2007/03/26 dadams</span>
<span class="linecomment">;;     icicle-completion-setup-function:</span>
<span class="linecomment">;;       Protected minibuffer-completing-symbol with boundp (not define in Emacs 23).</span>
<span class="linecomment">;; 2007/03/23 dadams</span>
<span class="linecomment">;;     icicle-completing-read, icicle-read-file-name:</span>
<span class="linecomment">;;       Record require-match in icicle-require-match-p.</span>
<span class="linecomment">;; 2007/03/17 dadams</span>
<span class="linecomment">;;     icicle-read-face-name: Undo Emacs 21+ brain-dead treatment of PROMPT arg.</span>
<span class="linecomment">;; 2007/03/14 dadams</span>
<span class="linecomment">;;     icicle-fit-Completions-window:</span>
<span class="linecomment">;;       Don't let *Completions* take over the frame, so don't lose other window.</span>
<span class="linecomment">;;       Respect icicle-Completions-window-max-height property of top-level command.</span>
<span class="linecomment">;; 2007/03/12 dadams</span>
<span class="linecomment">;;     Added: icicle-fit-Completions-window.  Use in temp-buffer-show-hook.</span>
<span class="linecomment">;;     icicle-display-completion-list:</span>
<span class="linecomment">;;       Print help lines here, not in icicle-completion-setup-*, so window fit includes them.</span>
<span class="linecomment">;;       Put face on string candidates intro string, Possible completions are:.</span>
<span class="linecomment">;;     icicle-completion-setup-function:</span>
<span class="linecomment">;;       Don't print the help lines here.</span>
<span class="linecomment">;;       Updated wrt latest Emacs 22 CVS version.</span>
<span class="linecomment">;;     icicle-insert-Completions-help-string: Remove second newline at end.</span>
<span class="linecomment">;;     icicle-start-of-candidates-in-Completions: Advance 1 or 2 lines, not 0 or 3.</span>
<span class="linecomment">;; 2007/03/10 dadams</span>
<span class="linecomment">;;     icicle-display-completion-list: Rewrote to adjust columns to window width.</span>
<span class="linecomment">;;     Added: icicle-insert-candidates.</span>
<span class="linecomment">;; 2007/03/09 dadams</span>
<span class="linecomment">;;     Moved icicle-get-alist-candidate here from icicles-cmd.el.</span>
<span class="linecomment">;; 2007/03/07 dadams</span>
<span class="linecomment">;;     icicle-choose-completion-string, icicle-next-candidate:</span>
<span class="linecomment">;;       Use 0, not t, as frame arg to get-buffer-window.</span>
<span class="linecomment">;; 2007/03/04 dadams</span>
<span class="linecomment">;;     icicle-highlight-initial-whitespace: Removed unused local var input-start-position.</span>
<span class="linecomment">;;     icicle-completing-read: Do not initialize icicle-candidates-alist.</span>
<span class="linecomment">;; 2007/03/03 dadams</span>
<span class="linecomment">;;     icicle-reversible-sort: Don't display Sorting candidates message - too annoying.</span>
<span class="linecomment">;; 2007/03/02 dadams</span>
<span class="linecomment">;;     icicle-completion-setup-function for Emacs 22: Don't use file-name-directory if nil.</span>
<span class="linecomment">;; 2007/03/01 dadams</span>
<span class="linecomment">;;     icicle-completing-read: Initialize icicle-candidates-alist.</span>
<span class="linecomment">;; 2007/02/24 dadams</span>
<span class="linecomment">;;     icicle-next-candidate:</span>
<span class="linecomment">;;       Transform multi-completion icicle-last-completion-candidate.</span>
<span class="linecomment">;;       If last-command is icicle(mouse)-remove-candidate don't reset common match string or</span>
<span class="linecomment">;;         redisplay *Completions*.</span>
<span class="linecomment">;;     icicle-recompute-candidates:</span>
<span class="linecomment">;;       Don't recompute if icicle-last-completion-command is icicle-mouse-remove-candidate.</span>
<span class="linecomment">;; 2007/02/18 dadams</span>
<span class="linecomment">;;     icicle-save-or-restore-input: Use "" if file-name-directory is nil.  Thx Shreevatsa R.</span>
<span class="linecomment">;; 2007/02/17 dadams</span>
<span class="linecomment">;;     icicle-reversible-sort: No Sorting... message if icicle-edit-update-p.  Thx Shreevatsa.</span>
<span class="linecomment">;; 2007/02/05 dadams</span>
<span class="linecomment">;;     icicle-completing-read: Added info about multi-completions to doc string.</span>
<span class="linecomment">;; 2007/02/04 dadams</span>
<span class="linecomment">;;     icicle-display-candidates-in-Completions: Fixed composition of multiple faces.</span>
<span class="linecomment">;; 2007/02/03 dadams</span>
<span class="linecomment">;;     Renamed icicle-icompleting-p to icicle-edit-update-p.</span>
<span class="linecomment">;;     Require icicles-var.el.  Removed eval-when-compile for require of icicles-opt.</span>
<span class="linecomment">;; 2007/02/02 dadams</span>
<span class="linecomment">;;     icicle-case-string-less-p: Use var, not function, icicle-completing-p (else too slow).</span>
<span class="linecomment">;;     icicle-reversible-sort: Added sorting progress message.</span>
<span class="linecomment">;; 2007/01/29 dadams</span>
<span class="linecomment">;;     icicle-display-candidates-in-Completions:</span>
<span class="linecomment">;;       Allow for consp proplist value of icicle-special-candidate.</span>
<span class="linecomment">;;     icicle-special-candidates-first-p: Added neither-special case.  Treat letter case.</span>
<span class="linecomment">;;     Renamed: icicle-case-insensitive-string-lessp to icicle-case-insensitive-string-less-p.</span>
<span class="linecomment">;;     Added: icicle-case-string-less-p.</span>
<span class="linecomment">;;     icicle-historical-alphabetic-p, icicle-most-recent-first-p, icicle-dirs-last-p,</span>
<span class="linecomment">;;       icicle-part-N-lessp, icicle-prefix-keys-first-p:</span>
<span class="linecomment">;;         Use icicle-case-string-less-p, not string-lessp.</span>
<span class="linecomment">;;     icicle-prefix-keys-first-p: Ignore case.</span>
<span class="linecomment">;; 2007/01/28 dadams</span>
<span class="linecomment">;;     Added: icicle-command-names-alphabetic-p.</span>
<span class="linecomment">;;     Moved here from icicles-cmd.el:</span>
<span class="linecomment">;;       icicle-prefix-keys-first-p, icicle-special-candidates-first-p.</span>
<span class="linecomment">;; 2007/01/23 dadams</span>
<span class="linecomment">;;     Added: icicle-read-face-name, icicle-make-face-candidate,</span>
<span class="linecomment">;;            icicle-face-valid-attribute-values, icicle-color-name-w-bg.</span>
<span class="linecomment">;;     icicle-choose-completion-string: Added Emacs 21 version.</span>
<span class="linecomment">;;     icicle-display-candidates-in-Completions:</span>
<span class="linecomment">;;       Only highlight past inputs if icicle-highlight-historical-candidates-flag.</span>
<span class="linecomment">;; 2007/01/22 dadams</span>
<span class="linecomment">;;     icicle-part-N-lessp, icicle-color-*-lessp: Do nothing if strings are not multipart.</span>
<span class="linecomment">;;     icicle-display-candidates-in-Completions:</span>
<span class="linecomment">;;       Highlight past inputs after treat *-prop*-alist.</span>
<span class="linecomment">;;     icicle-delete-whitespace-from-string: Added optional args.</span>
<span class="linecomment">;; 2007/01/21 dadams</span>
<span class="linecomment">;;     Added: icicle-part-*-lessp, icicle-color-*-lessp.</span>
<span class="linecomment">;; 2007/01/20 dadams</span>
<span class="linecomment">;;     Added: icicle-display-completion-list.</span>
<span class="linecomment">;; 2007/01/19 dadams</span>
<span class="linecomment">;;     icicle-display-candidates-in-Completions: Treat icicle-candidate-properties-alist.</span>
<span class="linecomment">;; 2007/01/15 dadams</span>
<span class="linecomment">;;     Added: icicle-reversible-sort.  Use it where standard sort function was used.</span>
<span class="linecomment">;;     Renamed: icicle-sort-and-strip-ignored to icicle-strip-ignored-files-and-sort,</span>
<span class="linecomment">;;              icicle-sort-dirs-last to icicle-dirs-last-p,</span>
<span class="linecomment">;;              icicle-sort-case-insensitively to icicle-case-insensitive-string-lessp.</span>
<span class="linecomment">;;     Grouped sort functions together.</span>
<span class="linecomment">;; 2007/01/14 dadams</span>
<span class="linecomment">;;     icicle-next-candidate: Use icicle-transform-multi-completion.  Thx to Rubikitch.</span>
<span class="linecomment">;;     icicle-transform-candidates: Updated doc string.</span>
<span class="linecomment">;; 2007/01/12 dadams</span>
<span class="linecomment">;;     icicle-next-candidate: Use icicle-list-use-nth-parts.  Thx to Rubikitch.</span>
<span class="linecomment">;;     icicle-display-candidates-in-Completions: Added message when no-display-p.</span>
<span class="linecomment">;; 2007/01/07 dadams</span>
<span class="linecomment">;;     icicle-completing-read: Updated doc string for Emacs 22.</span>
<span class="linecomment">;; 2007/01/06 dadams</span>
<span class="linecomment">;;     Added: icicle-abbreviate-or-expand-file-name.</span>
<span class="linecomment">;;     icicle-fix-default-directory: Use icicle-abbreviate-or-expand-file-name.</span>
<span class="linecomment">;;     icicle-save-or-restore-input: expand-file-name -&gt; icicle-abbreviate-or-expand-file-name.</span>
<span class="linecomment">;;     icicle-completion-setup-function: Don't set default-directory to nil if minibuf empty.</span>
<span class="linecomment">;;     icicle-read-file-name: Bug fix: Don't set initial-input to icicle-initial-value if "".</span>
<span class="linecomment">;; 2007/01/05 dadams</span>
<span class="linecomment">;;     icicle-completing-read, icicle-read-file-name:</span>
<span class="linecomment">;;       Use existing string value of icicle-initial-value.  Thx to rubikitch for suggestion.</span>
<span class="linecomment">;; 2007/01/01 dadams</span>
<span class="linecomment">;;     Added assq-delete-all for Emacs 20 (moved here from icicles-mode.el).</span>
<span class="linecomment">;;     Added: icicle-assoc-delete-all.</span>
<span class="linecomment">;; 2006/12/25 dadams</span>
<span class="linecomment">;;     Added: icicle-most-recent-first-p.</span>
<span class="linecomment">;;     icicle-update-completions: Added optional no-display arg.</span>
<span class="linecomment">;;     Moved here from icicles-opt.el: icicle-historical-alphabetic-p.</span>
<span class="linecomment">;; 2006/11/10 dadams</span>
<span class="linecomment">;;     icicle-completing-read, icicle-read-file-name: Prefix prompt by + if a multi-command.</span>
<span class="linecomment">;; 2006/10/15 dadams</span>
<span class="linecomment">;;     icicle-save-or-restore-input:</span>
<span class="linecomment">;;       Change test from cmd is same as last to input is same as last.</span>
<span class="linecomment">;;     icicle-rebind-completion-maps:</span>
<span class="linecomment">;;       When turn off, bind C-M-mouse-2 and C-down-mouse-2 to nil.</span>
<span class="linecomment">;;     icicle-display-candidates-in-Completions: Accumulate (merge) highlight faces.</span>
<span class="linecomment">;;     Moved to icicles-mode.el:</span>
<span class="linecomment">;;       icicle-bind-isearch-keys, icicle-rebind-completion-maps,</span>
<span class="linecomment">;;       icicle-(redefine|restore)-standard-(commands|options),</span>
<span class="linecomment">;;       icicle-(redefine|restore)-std-completion-fns), icicle-(re|un)map,</span>
<span class="linecomment">;;       icicle-(bind|restore)-completion-keys, icicle-minibuffer-setup,</span>
<span class="linecomment">;;       icicle-cancel-*Help*-redirection, icicle-activate-mark,</span>
<span class="linecomment">;;       icicle-run-icicle-(pre|post)-command-hook, icicle-set-calling-cmd,</span>
<span class="linecomment">;;       icicle-undo-std-completion-faces, icicle-update-ignored-extensions-regexp,</span>
<span class="linecomment">;;       icicle-completing-p, icicle-restore-region-face.</span>
<span class="linecomment">;;     Removed eval-when-compile of *-face, *-var, *-mac, *-cmd.</span>
<span class="linecomment">;;     Removed some defvars for quieting byte compiler.</span>
<span class="linecomment">;; 2006/10/05 dadams</span>
<span class="linecomment">;;     icicle-display-candidates-in-Completions: Highlight candidates that are special.</span>
<span class="linecomment">;; 2006/10/03 dadams</span>
<span class="linecomment">;;     icicle-display-candidates-in-Completions:</span>
<span class="linecomment">;;       Removed predicate filtering, as the pred doesn't necessarily apply to the candidate.</span>
<span class="linecomment">;;       This has been in the code forever, so commented it out, in case it is needed ;-).</span>
<span class="linecomment">;; 2006/10/01 dadams</span>
<span class="linecomment">;;     icicle-alternative-sort -&gt; icicle-toggle-alternative-sorting.</span>
<span class="linecomment">;;     icicle-update-completions: Treat icicle-prefix-word-complete case too.</span>
<span class="linecomment">;; 2006/09/30 dadams</span>
<span class="linecomment">;;     Added: icicle-key-description.</span>
<span class="linecomment">;;     icicle-(bind|restore)-completion-keys:</span>
<span class="linecomment">;;       Bind icicle-candidate-set-(save|retrieve) to C-M-(&lt;|&gt;), not C-(&lt;|&gt;).</span>
<span class="linecomment">;;       Bind icicle-toggle-angle-brackets to C-&lt;.</span>
<span class="linecomment">;;       No longer remap help-command to icicle-completion-help.</span>
<span class="linecomment">;;       Bind icicle-completion-help to C-?.</span>
<span class="linecomment">;;       Rename [menu-bar minibuf C-h] to [menu-bar minibuf completion-help].</span>
<span class="linecomment">;;     icicle-completing-p: Bug fix: Use where-is-internal, not minibuffer-completion-table.</span>
<span class="linecomment">;; 2006/09/22 dadams</span>
<span class="linecomment">;;     icicle-minibuffer-setup:</span>
<span class="linecomment">;;       Apropos-complete, don't prefix-complete, when icicle-show-Completions-initially-flag.</span>
<span class="linecomment">;; 2006/09/17 dadams</span>
<span class="linecomment">;;     icicle-completing-p: Ensure minibuffer is active too.</span>
<span class="linecomment">;; 2006/09/16 dadams</span>
<span class="linecomment">;;     Bound icicle-insert-key-description to M-q.</span>
<span class="linecomment">;;     icicle-completing-read:</span>
<span class="linecomment">;;       Use icicle-list-join-string only to join parts of candidate (alist key).</span>
<span class="linecomment">;;       Append icicle-list-end-string instead.</span>
<span class="linecomment">;;     icicle-msg-maybe-in-minibuffer: Fixed doc string (active -&gt; inactive).</span>
<span class="linecomment">;; 2006/09/12 dadams</span>
<span class="linecomment">;;     icicle-minibuffer-setup: Set icicle-pre-minibuffer-buffer.</span>
<span class="linecomment">;;     Renamed icicle-switch-to-minibuffer to icicle-insert-completion.</span>
<span class="linecomment">;; 2006/09/03 dadams</span>
<span class="linecomment">;;     Renamed icicle-show-Completions-help to icicle-show-Completions-help-flag.</span>
<span class="linecomment">;; 2006/08/27 dadams</span>
<span class="linecomment">;;     Bind Quit in Minibuf menu to icicle-abort-minibuffer-input.</span>
<span class="linecomment">;; 2006/08/22 dadams</span>
<span class="linecomment">;;     icicle-save-or-restore-input: If icicle-last-completion-candidate is nil, don't try to restore.</span>
<span class="linecomment">;; 2006/08/18 dadams</span>
<span class="linecomment">;;     icicle-minibuffer-setup: Reset icicle-last-completion-candidate to nil.</span>
<span class="linecomment">;;     icicle-rebind-completion-maps:</span>
<span class="linecomment">;;       Added icicle-Info-goto-node to icicle-completion-help-string.</span>
<span class="linecomment">;; 2006/08/15 dadams</span>
<span class="linecomment">;;     icicle-(bind|restore)-completion-keys:</span>
<span class="linecomment">;;       Bind icicle-help-on-(previous|next)-(apropos|prefix)-candidate.</span>
<span class="linecomment">;;       Reorder bindings.  Bind C-mouse-2 to 'ignore, not nil.</span>
<span class="linecomment">;;     icicle-rebind-completion-maps: Bind icicle-help-on-* in completion-list-mode-map.</span>
<span class="linecomment">;;     Added: icicle-barf-if-outside-Completions-and-minibuffer.</span>
<span class="linecomment">;; 2006/08/13 dadams</span>
<span class="linecomment">;;     icicle-completing-read, icicle-read-file-name: Use icicle-completing*-prompt-prefix.</span>
<span class="linecomment">;; 2006/08/04 dadams</span>
<span class="linecomment">;;     icicle-call-then-update-Completions:</span>
<span class="linecomment">;;       Call icicle-last-completion-command, not just prefix or apropos (so prefix-word too).</span>
<span class="linecomment">;;     icicle-completing-read, icicle-read-file-name, icicle-next-candidate,</span>
<span class="linecomment">;;       icicle-recompute-candidates, icicle-call-then-update-Completions:</span>
<span class="linecomment">;;         Use icicle-remove-Completions-window.</span>
<span class="linecomment">;;     icicle-(bind|restore)-completion-keys: Bound icicle-pp-eval-expression to M-:.</span>
<span class="linecomment">;; 2006/08/03 dadams</span>
<span class="linecomment">;;     icicle-completion-setup-function: Removed useless highlighting code at end (Emacs 20).</span>
<span class="linecomment">;;     icicle-rebind-completion-maps: Updated icicle-completion-help-string.</span>
<span class="linecomment">;; 2006/07/30 dadams</span>
<span class="linecomment">;;     icicle-call-then-update-Completions: save match-data.</span>
<span class="linecomment">;; 2006/07/29 dadams</span>
<span class="linecomment">;;     icicle-activate-mark: Do it only if icicle-completing-p.  Thx to Le Wang.</span>
<span class="linecomment">;;     icicle-rebind-completion-maps:</span>
<span class="linecomment">;;       Updated to use icicle-dispatch-C-..</span>
<span class="linecomment">;;       Added icicle-toggle-search-cleanup to icicle-completion-help-string.</span>
<span class="linecomment">;;     icicle-bind-completion-keys:</span>
<span class="linecomment">;;       Use icicle-dispatch-C-. instead of icicle-toggle-ignored-extensions.</span>
<span class="linecomment">;; 2006/07/28 dadams</span>
<span class="linecomment">;;     icicle-longest-common-match: Treat special case of input such as "$" or "\\&gt;$".</span>
<span class="linecomment">;; 2006/07/24 dadams</span>
<span class="linecomment">;;     icicle-call-then-update-Completions: Deactivate mark at the end.  Thx to Le Wang.</span>
<span class="linecomment">;; 2006/07/23 dadams</span>
<span class="linecomment">;;     Added: icicle-transform-candidates.</span>
<span class="linecomment">;;     icicle-rebind-completion-maps, icicle-(bind|restore)-completion-keys:</span>
<span class="linecomment">;;       Added icicle-toggle-transforming.</span>
<span class="linecomment">;;     icicle-unsorted(-file-name)-*-candidates: Use icicle-transform-candidates.</span>
<span class="linecomment">;; 2006/07/20 dadams</span>
<span class="linecomment">;;     Renamed icicle-arrows-respect-* to icicle-cycling-respects-completion-mode-flag.</span>
<span class="linecomment">;; 2006/07/19 dadams</span>
<span class="linecomment">;;     Applied patch from Damien Elmes &lt;emacs@repose.cx&gt;:</span>
<span class="linecomment">;;       Added icicle-insert-help-string, icicle-start-of-completions (factored from existing).</span>
<span class="linecomment">;;       icicle-completion-setup-function: Use icicle-insert-help-string.</span>
<span class="linecomment">;;       icicle-display-candidates-in-Completions:</span>
<span class="linecomment">;;         Use icicle-start-of-completions, and adjust loop accordingly.</span>
<span class="linecomment">;;       icicle-minibuffer-setup:</span>
<span class="linecomment">;;         Reset icicle-current-completion-type.</span>
<span class="linecomment">;;         Bind (up|down) to icicle-*-context-candidate, not (previous|next)-history-element.</span>
<span class="linecomment">;;       icicle-next-candidate: Use icicle-start-of-completions.</span>
<span class="linecomment">;;       icicle-scroll-or-update-Completions: Use icicle-scroll-completions.</span>
<span class="linecomment">;;     Renamed: icicle-start-of-completions to icicle-start-of-candidates-in-Completions,</span>
<span class="linecomment">;;              icicle-insert-help-string to icicle-insert-Completions-help-string,</span>
<span class="linecomment">;;              icicle-current-completion-type to icicle-current-completion-mode,</span>
<span class="linecomment">;;              icicle-*-context-candidate to icicle-(next|previous)-candidate-per-mode,</span>
<span class="linecomment">;;              icicle-scroll-completions to icicle-scroll-Completions.</span>
<span class="linecomment">;;     icicle-minibuffer-setup:</span>
<span class="linecomment">;;       Replaced icicle-display-Completions with icicle-prefix-complete, to get initial</span>
<span class="linecomment">;;         highlight.</span>
<span class="linecomment">;; 2006/07/18 dadams</span>
<span class="linecomment">;;     icicle-call-then-update-Completions:</span>
<span class="linecomment">;;       Delete *Completions* window, depending on icicle-Completions-display-min-input-chars.</span>
<span class="linecomment">;;         Thx to Damien Elmes.</span>
<span class="linecomment">;;     icicle-rebind-completion-maps: Add icicle-toggle-case-sensitivity to help list.</span>
<span class="linecomment">;;     icicle-bind-completion-keys: Bind icicle-toggle-case-sensitivity to S-C-a (i.e. C-A).</span>
<span class="linecomment">;; 2006/07/17 dadams</span>
<span class="linecomment">;;     icicle-call-then-update-Completions: sit-for delay if no candidates.  Thx Damien Elmes.</span>
<span class="linecomment">;; 2006/07/09 dadams</span>
<span class="linecomment">;;     icicle-save-or-restore-input:</span>
<span class="linecomment">;;       Put back test: current input differs from last cycling candidate (user has edited it).</span>
<span class="linecomment">;;     icicle-next-candidate: Removed filtering with predicate (vestigial cruft).</span>
<span class="linecomment">;; 2006/07/08 dadams</span>
<span class="linecomment">;;     icicle-save-or-restore-input: Restore if currently cycling, not if not completing.</span>
<span class="linecomment">;; 2006/07/07 dadams</span>
<span class="linecomment">;;     icicle-display-candidates-in-Completions: Fixed test for historical candidate.</span>
<span class="linecomment">;;     Bound icicle-alternative-sort to M-,.  Updated icicle-completion-help-string.</span>
<span class="linecomment">;; 2006/07/05 dadams</span>
<span class="linecomment">;;     icicle-save-or-restore-input:</span>
<span class="linecomment">;;       For restoring: 1) No longer test if current input = *-last-completion-candidate.</span>
<span class="linecomment">;;                      2) No longer test if current input = icicle-initial-value.</span>
<span class="linecomment">;;       No longer save icicle-current-input as icicle-last-completion-candidate.</span>
<span class="linecomment">;;       Simplified the code.</span>
<span class="linecomment">;;     icicle-call-then-update-Completions: Do not set this-command or last-command.</span>
<span class="linecomment">;;     Renamed: icicle-current-regexp-input to icicle-current-raw-input.</span>
<span class="linecomment">;; 2006/07/04 dadams</span>
<span class="linecomment">;;     icicle-unsorted(-file-name)-prefix-candidates: Update icicle-common-match-string.</span>
<span class="linecomment">;;     icicle-unsorted-file-name-prefix-candidates:</span>
<span class="linecomment">;;       If prefix matches an empty directory, then use that directory as the sole completion.</span>
<span class="linecomment">;;     icicle-next-candidate: Use icicle-*-cycling-command properties.</span>
<span class="linecomment">;;                            Removed regexp-p arg in calls to icicle-save-or-restore-input.</span>
<span class="linecomment">;;     icicle-save-or-restore-input:</span>
<span class="linecomment">;;       Update icicle-common-*-string and icicle-current-regexp-input even if not regexp-p.</span>
<span class="linecomment">;;       Removed optional regexp-p argument.</span>
<span class="linecomment">;;       Do not update icicle-last-completion-candidate.</span>
<span class="linecomment">;;       Use icicle-*-*ing-command properties.</span>
<span class="linecomment">;;     icicle-recompute-candidates: Use icicle-*-cycling-command properties.</span>
<span class="linecomment">;; 2006/07/03 dadams</span>
<span class="linecomment">;;     Bug fixes -</span>
<span class="linecomment">;;       icicle-next-candidate:</span>
<span class="linecomment">;;         Don't reset icicle-common-match-string if this is an apropos cycling command</span>
<span class="linecomment">;;           and last command was an apropos command (cycling or completing).</span>
<span class="linecomment">;;         Do icicle-save-or-restore-input a second time, after recompute candidates,</span>
<span class="linecomment">;;           to pick up the common match.</span>
<span class="linecomment">;;         Always pass icicle-current-input to icicle-place-cursor.</span>
<span class="linecomment">;;       icicle-save-or-restore-input:</span>
<span class="linecomment">;;         Don't do anything if last command was a cycling command.</span>
<span class="linecomment">;;         Don't save input as regexp for C-l if this command is a cycling command,</span>
<span class="linecomment">;;           unless it is the first or it follows a completion command.</span>
<span class="linecomment">;; 2006/07/02 dadams</span>
<span class="linecomment">;;     icicle-place-cursor: position point & mark at least past prompt.  Thx to Peter Povinec.</span>
<span class="linecomment">;; 2006/06/09 dadams</span>
<span class="linecomment">;;     icicle(-file-name)-(apropos|prefix)-candidates: Reset icicle-candidate-nb to nil.</span>
<span class="linecomment">;;     icicle-recompute-candidates: Don't reset icicle-candidate-nb to nil.</span>
<span class="linecomment">;;     icicle-place-cursor: Prevent error on search-forward.</span>
<span class="linecomment">;; 2006/06/08 dadams</span>
<span class="linecomment">;;     icicle-save-or-restore-input: Do not restore if current command is completion.</span>
<span class="linecomment">;;     Added: icicle-expand-file-name.</span>
<span class="linecomment">;;     icicle-next-candidate: Don't pass NTH arg to icicle-display-candidates-in-Completions.</span>
<span class="linecomment">;; 2006/06/06 dadams</span>
<span class="linecomment">;;     icicle-control-reminder-prompt: condition-case, since it's on kill-emacs-hook.</span>
<span class="linecomment">;; 2006/06/01 dadams</span>
<span class="linecomment">;;     icicle-read-from-minibuffer: Emacs 22 removed the keep-all arg it had added.</span>
<span class="linecomment">;; 2006/05/31 dadams</span>
<span class="linecomment">;;     icicle-barf-if-outside*: Simplified.</span>
<span class="linecomment">;; 2006/05/30 dadams</span>
<span class="linecomment">;;     Bind icicle-erase-minibuffer-or-history to M-k also in non-completion minibuffer maps.</span>
<span class="linecomment">;; 2006/05/26 dadams</span>
<span class="linecomment">;;     Bind icicle-erase-minibuffer-or-history to M-k.</span>
<span class="linecomment">;;     Do not remap (or unmap) kill-sentence (it is on M-k in global map).</span>
<span class="linecomment">;; 2006/05/19 dadams</span>
<span class="linecomment">;;     Added: icicle-control-reminder-prompt.</span>
<span class="linecomment">;;     icicle-reminder-*-flag, icicle-read-file-name: Treat new values of icicle-reminder*.</span>
<span class="linecomment">;;     Renamed icicle-inhibit-reminder* to icicle-reminder*.</span>
<span class="linecomment">;; 2006/05/16 dadams</span>
<span class="linecomment">;;     icicle-recompute-candidates: Add new saved-last-input arg (replaces icicle-last-input).</span>
<span class="linecomment">;;     icicle-next-candidate: Pass saved old last input to icicle-recompute-candidates.</span>
<span class="linecomment">;; 2006/05/15 dadams</span>
<span class="linecomment">;;     Reverted change to icicle-unsorted(-file-name)-apropos-candidates,</span>
<span class="linecomment">;;       icicle-display-Completions: Use icicle-completion-nospace-flag, not nil.</span>
<span class="linecomment">;;     Renamed: icicle-completion-nospace-flag to icicle-ignore-space-prefix-flag.</span>
<span class="linecomment">;;     icicle-toggle-incremental-completion: C-#, icicle-toggle-ignored-space-prefix: C-^.</span>
<span class="linecomment">;; 2006/05/13 dadams</span>
<span class="linecomment">;;     icicle-unsorted(-file-name)-apropos-candidates, icicle-display-Completions:</span>
<span class="linecomment">;;       Use nil, not icicle-completion-nospace-flag.</span>
<span class="linecomment">;; 2006/05/12 dadams</span>
<span class="linecomment">;;     icicle-completion-help-string: Added faces and commands. Cleanup.</span>
<span class="linecomment">;;     Moved from icicles-cmd.el: icicle-barf-if-outside-*.</span>
<span class="linecomment">;; 2006/05/09 dadams</span>
<span class="linecomment">;;     icicle-display-*: Only issue Displaying... message when more candidates than threshold.</span>
<span class="linecomment">;; 2006/05/01 dadams</span>
<span class="linecomment">;;     icicle-save-or-restore-input: No-restore test is non-nil, not non-"", icicle-last-input.</span>
<span class="linecomment">;;     icicle-minibuffer-setup: Reset icicle-last-input to nil, not "".</span>
<span class="linecomment">;;     icicle-next-candidate: Highlight initial whitespace before underline root.</span>
<span class="linecomment">;; 2006/04/28 dadams</span>
<span class="linecomment">;;     icicle-save-or-restore-input:</span>
<span class="linecomment">;;       Restore empty input if it is not a file name.</span>
<span class="linecomment">;;       Don't expand empty common-match-string file-name input (it would lose trailing /).</span>
<span class="linecomment">;;     Added: icicle-highlight-initial-whitespace.</span>
<span class="linecomment">;;     icicle-next-candidate, icicle-call-then-update-Completions:</span>
<span class="linecomment">;;       Use icicle-highlight-initial-whitespace.</span>
<span class="linecomment">;; 2006/04/14 dadams</span>
<span class="linecomment">;;     icicle-call-then-update-Completions: Call icicle-update-input-hook.</span>
<span class="linecomment">;;     Bound icicle-insert-string-from-variable to C-=.  Update icicle-completion-help-string.</span>
<span class="linecomment">;; 2006/04/09 dadams</span>
<span class="linecomment">;;     icicle-bind-completion-keys, icicle-minibuffer-setup:</span>
<span class="linecomment">;;       Deal with icicle-arrows-respect-completion-type-flag.</span>
<span class="linecomment">;;     icicle-display-candidates-in-Completions:</span>
<span class="linecomment">;;       Bug fix: regexp-quote common match when highlighting it.</span>
<span class="linecomment">;;     icicle-clear-minibuffer: Remove interactive spec.</span>
<span class="linecomment">;;     Moved to icicles-cmd.el: icicle-customize-apropos*, icicle-repeat-complex-command.</span>
<span class="linecomment">;; 2006/04/02 dadams</span>
<span class="linecomment">;;     Bound icicle-toggle-regexp-quote.</span>
<span class="linecomment">;; 2006/03/31 dadams</span>
<span class="linecomment">;;     icicle-next-candidate:</span>
<span class="linecomment">;;       Apply icicle-place-cursor to icicle-current-regexp-input if regexp-p.</span>
<span class="linecomment">;;     icicle-save-or-restore-input:</span>
<span class="linecomment">;;       Don't set icicle-current-regexp-input if this is a next-candidate action.</span>
<span class="linecomment">;; 2006/03/27 dadams</span>
<span class="linecomment">;;     icicle-place-overlay: Made generic: added args overlay, face, buffer, properties.</span>
<span class="linecomment">;; 2006/03/25 dadams</span>
<span class="linecomment">;;     icicle-call-then-update-Completions: Corrected use of icicle-incremental-completion*.</span>
<span class="linecomment">;; 2006/03/24 dadams</span>
<span class="linecomment">;;     Renamed icicle-expand-input-to-common-match to icicle-longest-common-match.  Rewrote it.</span>
<span class="linecomment">;;     icicle-call-then-update-Completions:</span>
<span class="linecomment">;;       Use icicle-incremental-completion-delay and -threshold.</span>
<span class="linecomment">;;     Mapped icicle-delete-char.</span>
<span class="linecomment">;; 2006/03/23 dadams</span>
<span class="linecomment">;;     icicle-expand-input-to-common-match:</span>
<span class="linecomment">;;       Return the longest common match.  Don't set icicle-common-match-string here.</span>
<span class="linecomment">;;     icicle-unsorted-*apropos-candidates: Set icicle-common-match-string here explicitly.</span>
<span class="linecomment">;;     Added: icicle-maybe-sort-and-strip-candidates.  Use in icicle-candidate-set-1.</span>
<span class="linecomment">;; 2006/03/22 dadams</span>
<span class="linecomment">;;     icicle-display-candidates-in-Completions:</span>
<span class="linecomment">;;       Removed root arg (always use icicle-current-input).</span>
<span class="linecomment">;;       Always highlight normal match part.</span>
<span class="linecomment">;;       Highlight common-match part if icicle-expand-input-to-common-match-flag.</span>
<span class="linecomment">;;     icicle-save-or-restore-input:</span>
<span class="linecomment">;;       Update regexp even if not icicle-expand-input-to-common-match-flag.</span>
<span class="linecomment">;;     icicle-recompute-candidates: If no candidates, then delete *Completions* window.</span>
<span class="linecomment">;;     icicle-next-candidate: Set default-directory only if icicle-file-name-input-p.</span>
<span class="linecomment">;;     Applied renamings of icicle-match-* faces.</span>
<span class="linecomment">;; 2006/03/21 dadams</span>
<span class="linecomment">;;     icicle-expand-input-to-common-match:</span>
<span class="linecomment">;;       Bug fixes:</span>
<span class="linecomment">;;         If no overlap between first and second candidates, then no common match.</span>
<span class="linecomment">;;         If no match with another candidate, then no common match.</span>
<span class="linecomment">;;         Input must match computed common match.</span>
<span class="linecomment">;;         When checking others, check only the added (pre|suf)fix, and reduce those as needed.</span>
<span class="linecomment">;;     icicle-save-or-restore-input:</span>
<span class="linecomment">;;       Bug fixes:</span>
<span class="linecomment">;;         When icicle-expand-input-to-common-match-flag, expand using directory from the</span>
<span class="linecomment">;;           input, not the default-directory.  Thx to cacher3.ericsson.net for report.</span>
<span class="linecomment">;;         Do test for case-only difference only when case-fold-search.</span>
<span class="linecomment">;;         If input is a directory (with slash), then use it as is.</span>
<span class="linecomment">;;         Save icicle-current-regexp-input if no icicle-common-match-string too.</span>
<span class="linecomment">;;     icicle-display-candidates-in-Completions: Use icicle-common-match-highlight-Completions.</span>
<span class="linecomment">;; 2006/03/20 dadams</span>
<span class="linecomment">;;     icicle-save-or-restore-input: Set icicle-current-regexp-input too.</span>
<span class="linecomment">;;                                   Corrected letter-case test.</span>
<span class="linecomment">;; 2006/03/19 dadams</span>
<span class="linecomment">;;     Added: icicle-expand-input-to-common-match.</span>
<span class="linecomment">;;     icicle-unsorted*-apropos-candidates:</span>
<span class="linecomment">;;       Set icicle-common-match-string if icicle-expand-input-to-common-match-flag.</span>
<span class="linecomment">;;     icicle-save-or-restore-input:</span>
<span class="linecomment">;;       Added regexp-p arg.  Update input to icicle-common-match-string if appropriate.</span>
<span class="linecomment">;;     icicle-next-candidate: Reset icicle-common-match-string.</span>
<span class="linecomment">;; 2006/03/17 dadams</span>
<span class="linecomment">;;     icicle-file-(read|writ)able-p: Put non-empty string condition first.</span>
<span class="linecomment">;;     Added: icicle-delete-whitespace-from-string.</span>
<span class="linecomment">;;     icicle-files-within: Moved here from icicle-cmd.el.</span>
<span class="linecomment">;; 2006/03/14 dadams</span>
<span class="linecomment">;;     Removed: icicle-reset-icicle-completing-p.</span>
<span class="linecomment">;;     icicle-completing-read, icicle-read-file-name: Removed icicle-icicle-completing-p.</span>
<span class="linecomment">;;     icicle-display-*: Added Displaying... message.</span>
<span class="linecomment">;; 2006/03/13 dadams</span>
<span class="linecomment">;;     Added: icicle-file-(read|writ)able-p.  Bound them to C-{ and C-} in minibuffer.</span>
<span class="linecomment">;;     icicle-rebind-completion-maps, icicle-bind-completion-keys: Added the new commands.</span>
<span class="linecomment">;;     icicle-recompute-candidates: Forgot icicle-keep-only-past-inputs in other branch.</span>
<span class="linecomment">;; 2006/03/10 dadams</span>
<span class="linecomment">;;     icicle-save-or-restore-input: Bug fix (thx Toby Cubitt) - Not relative to default dir.</span>
<span class="linecomment">;;       Use directory-file-name, so don't include /.</span>
<span class="linecomment">;;       Use file-name-nondirectory, not file-relative-name if not cycling into subdirs.</span>
<span class="linecomment">;;     Renamed icicle-minibuffer-contents to icicle-minibuffer-contents-from-minibuffer.</span>
<span class="linecomment">;;     Added new icicle-minibuffer-contents, which can be called outside minibuffer.</span>
<span class="linecomment">;; 2006/03/08 dadams</span>
<span class="linecomment">;;     icicle-place-overlay: Use new face, icicle-current-candidate-highlight.</span>
<span class="linecomment">;; 2006/03/05 dadams</span>
<span class="linecomment">;;     Bound icicle-toggle-incremental-completion to C-^ in minibuffer.</span>
<span class="linecomment">;;     Updated icicle-completion-help-string with C-^ binding.</span>
<span class="linecomment">;;     icicle-display-candidates-in-Completions:</span>
<span class="linecomment">;;       Allow for on-the-fly changes to icicle-incremental-completion-flag.</span>
<span class="linecomment">;; 2006/03/01 dadams</span>
<span class="linecomment">;;     Added: icicle-clear-minibuffer.  Use in icicle-next-candidate.</span>
<span class="linecomment">;; 2006/02/27 dadams</span>
<span class="linecomment">;;     icicle-call-then-update-Completions: Set last-command to fn arg.</span>
 
<span class="linecomment">;;;(@* "CHANGE LOG FOR `icicles-mac.el'")</span>
<span class="linecomment">;;</span>
<span class="linecomment">;; ****************************************************************************************************</span>
<span class="linecomment">;; NOTE: If you byte-compile Icicles (recommended), then WHENEVER `icicles-mac.el' is updated, you</span>
<span class="linecomment">;;       must load `icicles-mac.el' (not just `icicles-mac.elc'), then compile it, then RECOMPILE *ALL*</span>
<span class="linecomment">;;       of the other Icicles source files as well.  This is normal for Lisp: code that depends on</span>
<span class="linecomment">;;       macros needs to be byte-compiled anew after loading the updated macros.</span>
<span class="linecomment">;; ****************************************************************************************************</span>
<span class="linecomment">;;</span>
<span class="linecomment">;; 2012/12/06 dadams</span>
<span class="linecomment">;;     Removed minibuffer-with-setup-hook - moved to icicles-fn.el (and removed eval-when-compile).</span>
<span class="linecomment">;; 2012/12/01 dadams</span>
<span class="linecomment">;;     Moved to icicles-opt.el: icicle-kbd, icicle-edmacro-parse-keys, icicle-read-kbd-macro.</span>
<span class="linecomment">;; 2012/10/08 dadams</span>
<span class="linecomment">;;     icicle-define-sort-command: alphabetically -&gt; alphabetical in doc string.</span>
<span class="linecomment">;; 2012/10/06 dadams</span>
<span class="linecomment">;;     Added: minibuffer-with-setup-hook for code byte-compiled using Emacs &lt; 22.</span>
<span class="linecomment">;; 2012/10/04 dadams</span>
<span class="linecomment">;;     icicle-define-file-command:</span>
<span class="linecomment">;;       When call expand-file-name, wrap i-last-input with directory-file-name, to use parent dir.</span>
<span class="linecomment">;; 2012/09/28 dadams</span>
<span class="linecomment">;;     naked-edmacro-parse-keys:</span>
<span class="linecomment">;;       Better fix for M-TAB.  Do not assume that function keys are lowercase.</span>
<span class="linecomment">;;       Handle angle brackets even if ANGLES is nil.  But keep vanilla bug #12535 if non-nil.</span>
<span class="linecomment">;; 2012/09/27 dadams</span>
<span class="linecomment">;;     icicle-edmacro-parse-keys: Fix handling of M-TAB.  Function keys are lowercase.</span>
<span class="linecomment">;;                                So M-TAB returns [134217737], but M-tab returns [M-tab].</span>
<span class="linecomment">;; 2012/09/24 dadams</span>
<span class="linecomment">;;     icicle-file-bindings: Pass non-nil NO-ERROR-P arg to icicle-describe-file.</span>
<span class="linecomment">;; 2012/09/11 dadams</span>
<span class="linecomment">;;     icicle-buffer-bindings: Remove minibuffers from icicle-bufflist.</span>
<span class="linecomment">;; 2012/09/08 dadams</span>
<span class="linecomment">;;     icicle-buffer-bindings:</span>
<span class="linecomment">;;       Bind icicle-buffer-complete-fn to internal-complete-buffer for Emacs 22+.</span>
<span class="linecomment">;;       Bind icicle-buffer-name-input-p to t.</span>
<span class="linecomment">;;       Remove bindings of icicle-ignore-space-prefix-flag and bufflist.</span>
<span class="linecomment">;;       (bufflist used icicle-ignore-space-prefix-flag to remove SPC buffers.)</span>
<span class="linecomment">;;     icicle-define-command:</span>
<span class="linecomment">;;       If icicle-buffer-name-input-p then use icicle-read-buffer (it is new), not completing-read.</span>
<span class="linecomment">;; 2012/07/24 dadams</span>
<span class="linecomment">;;     icicle-buffer-bindings: If icicle-ignore-space-prefix-flag & VANILLA then remove internal bufs.</span>
<span class="linecomment">;; 2012/07/19 dadams</span>
<span class="linecomment">;;     icicle-buffer-bindings: Positive prefix arg now includes Dired buffers, along with file bufs.</span>
<span class="linecomment">;; 2012/07/05 dadams</span>
<span class="linecomment">;;     Removed #' from lambdas.</span>
<span class="linecomment">;; 2012/04/22 dadams</span>
<span class="linecomment">;;     icicle-buffer-bindings: C-u keeps only derived-mode buffers.</span>
<span class="linecomment">;;                             Use backquote for lambda to handle free var THIS-MODE.</span>
<span class="linecomment">;; 2012/03/10 dadams</span>
<span class="linecomment">;;     icicle-define-bookmark-command-1, icicle-define-search-bookmark-command:</span>
<span class="linecomment">;;       First code, last code: When autofile, call icicle-(un)bind-file-candidate-keys.</span>
<span class="linecomment">;;       Use icicle-make-bookmark-candidate (new) to define icicle-candidates-alist.</span>
<span class="linecomment">;;       Bind icicle-full-cand-fn to icicle-make-bookmark-candidate, for icicle-autofile-action.</span>
<span class="linecomment">;; 2012/01/20 dadams</span>
<span class="linecomment">;;     icicle-define-bookmark-command-1: Added info about refreshing tags to doc string of tags cmds.</span>
<span class="linecomment">;; 2011/11/27 dadams</span>
<span class="linecomment">;;     icicle-define-bookmark-command-1:</span>
<span class="linecomment">;;       Calculate the alist first, before binding things like icicle-list-use-nth-parts, that are</span>
<span class="linecomment">;;       inappropriate for the completing-read used to define the alist (in specific-file|buffer case).</span>
<span class="linecomment">;; 2011/10/21 dadams</span>
<span class="linecomment">;;     icicle-define-sort-command: Use icicle-propertize.</span>
<span class="linecomment">;; 2011/10/12 dadams</span>
<span class="linecomment">;;     Moved the Miscellaneous stuff to icicles.el: indent & font-lock for macros etc.</span>
<span class="linecomment">;;     eval-when-compile require cl.el, even for later Emacs versions (incf).</span>
<span class="linecomment">;; 2011/10/10 dadams</span>
<span class="linecomment">;;     Removed all autoload cookies.</span>
<span class="linecomment">;;     Moved icicle(-search)-define-bookmark*-command* here from icicles-cmd2.el.</span>
<span class="linecomment">;;     icicle-byte-compile-eval-after-load-flag: Moved to icicles.el.</span>
<span class="linecomment">;;     icicle-maybe-byte-compile-after-load: Moved to icicles-face.el and icicles-cmd2.el.</span>
<span class="linecomment">;;     icicle-try-switch-buffer, select-frame-set-input-focus: Moved to icicles-fn.el.</span>
<span class="linecomment">;;     icicle-assoc-delete-all, icicle-remove-if: Copied to icicles-fn.el.</span>
<span class="linecomment">;; 2011/10/08 dadams</span>
<span class="linecomment">;;     Added: icicle-kbd</span>
<span class="linecomment">;;     Moved here from icicles-cmd2.el: icicle-read-kbd-macro, icicle-edmacro-parse-keys.</span>
<span class="linecomment">;;     icicle-read-kbd-macro: Changed NO-ANGLES to ANGLES, and made it the prefix arg.</span>
<span class="linecomment">;;     icicle-edmacro-parse-keys: Changed NO-ANGLES to ANGLES.  Updated to match Emacs 24.</span>
<span class="linecomment">;;                                Changed regexp for non-angles match to use non-whitespace.</span>
<span class="linecomment">;;                                Use characterp or char-valid-p, depending on Emacs version.</span>
<span class="linecomment">;; 2011/09/08 dadams</span>
<span class="linecomment">;;     font-lock-add-keywords - Use font-lock-keyword-face for icicle-condition-case-no-debug.</span>
<span class="linecomment">;; 2011/08/27 dadams</span>
<span class="linecomment">;;     icicle-condition-case-no-debug: Redefined so it respects debug-on-quit and keeps other handlers.</span>
<span class="linecomment">;; 2011/08/24 dadams</span>
<span class="linecomment">;;     Added top-level puts for common-lisp-indent-function.</span>
<span class="linecomment">;;     icicle-condition-case-no-debug, icicle-with-selected-window: Removed declare declaration.</span>
<span class="linecomment">;; 2011/08/22 dadams</span>
<span class="linecomment">;;     icicle-maybe-byte-compile-after-load: Require bytecomp.el.</span>
<span class="linecomment">;;     font-lock-add-keywords: Quote font-lock-function-name-face, for Emacs 20.</span>
<span class="linecomment">;; 2011/08/21 dadams</span>
<span class="linecomment">;;     Added: icicle-condition-case-no-debug.  Thx to Michael Heerdegen.</span>
<span class="linecomment">;;     icicle-define(-file)-command: Use icicle-condition-case-no-debug.</span>
<span class="linecomment">;; 2011/08/16 dadams</span>
<span class="linecomment">;;     Added: icicle-maybe-byte-compile-after-load, icicle-byte-compile-eval-after-load-flag.</span>
<span class="linecomment">;;     icicle-(buffer|file)-bindings: Use append, not backquote syntax.</span>
<span class="linecomment">;; 2011/08/12 dadams</span>
<span class="linecomment">;;     icicle-file-bindings: Removed binding of icicle-ignore-space-prefix-flag (to *-buffer-ignore-*).</span>
<span class="linecomment">;; 2011/05/22 dadams</span>
<span class="linecomment">;;     icicle-define(-file)-command: Use #',FUNCTION instead of ',FUNCTION.</span>
<span class="linecomment">;;     icicle-with-selected-window, icicle-(buffer|file)-bindings:</span>
<span class="linecomment">;;       Use #' with lambdas (not really needed).</span>
<span class="linecomment">;; 2011/05/03 dadams</span>
<span class="linecomment">;;     icicle-buffer-bindings, icicle-file-bindings:</span>
<span class="linecomment">;;       Had to revert definition for Emacs &gt; 20, but keep it for Emacs 20.  Thx to Michael Heerdegen.</span>
<span class="linecomment">;; 2011/04/29 dadams</span>
<span class="linecomment">;;     icicle-buffer-bindings, icicle-file-bindings:</span>
<span class="linecomment">;;       Do not bind icicle-sort-comparer.  Instead, set it the first time</span>
<span class="linecomment">;;         (per icicle-(buffer|file)-sort-first-time-p).</span>
<span class="linecomment">;;       No side effects to icicle-sort-orders-alist.</span>
<span class="linecomment">;;       If icicle-(buffer|file)-sort is non-nil then put it at the beginning.</span>
<span class="linecomment">;;       Use old backquote syntax for post-bindings - needed because of vanilla Emacs 20 bug.</span>
<span class="linecomment">;; 2011/04/25 dadams</span>
<span class="linecomment">;;     icicle-file-bindings: Bind icicle-candidate-help-fn to icicle-describe-file w/ curr pref arg.</span>
<span class="linecomment">;; 2011/04/12 dadams</span>
<span class="linecomment">;;     icicle-buffer-bindings, icicle-file-bindings: Added optional POST-BINDINGS arg.</span>
<span class="linecomment">;; 2011/04/02 dadams</span>
<span class="linecomment">;;     icicle-buffer-bindings: Bind (new) icicle-bufflist, not bufflist.</span>
<span class="linecomment">;; 2011/03/29 dadams</span>
<span class="linecomment">;;     Renamed: orig-(buff|window) to icicle-orig-(buff|window).</span>
<span class="linecomment">;; 2011/01/17 dadams</span>
<span class="linecomment">;;     Require cl.el at compile time for Emacs 20.</span>
<span class="linecomment">;; 2011/01/06 dadams</span>
<span class="linecomment">;;     icicle-buffer-bindings: Zero prefix arg limits candidates to buffers with same mode as current.</span>
<span class="linecomment">;; 2010/12/26 dadams</span>
<span class="linecomment">;;     Removed autoload cookies except simple ones & ones with sexp on same line.  Thx to Richard Kim.</span>
<span class="linecomment">;; 2010/12/18 dadams</span>
<span class="linecomment">;;     icicle-assoc-delete-all: Moved here from icicles-fn.el, since used here.</span>
<span class="linecomment">;;     Added autoload cookies.</span>
<span class="linecomment">;; 2010/10/25 dadams</span>
<span class="linecomment">;;     icicle-(buffer|file)-bindings:</span>
<span class="linecomment">;;       Use icicle-must-pass-after-match-predicate, not icicle-must-pass-predicate</span>
<span class="linecomment">;; 2010/10/09 dadams</span>
<span class="linecomment">;;     icicle-define(-file)-command: Update generated doc: down/up for modal, end/home for prefix.</span>
<span class="linecomment">;; 2010/06/05 dadams</span>
<span class="linecomment">;;     icicle-file-bindings: Put back non-insertion for non-ido-like case.</span>
<span class="linecomment">;; 2010/06/04 dadams</span>
<span class="linecomment">;;     icicle-(buffer|file)-bindings: Bind vars that depend on icicle-(buffers|files)-ido-like-flag.</span>
<span class="linecomment">;; 2010/03/03 dadams</span>
<span class="linecomment">;;     Applied renamings: icicle-sort-function to icicle-sort-comparer,</span>
<span class="linecomment">;;                        icicle-sort-functions-alist to icicle-sort-orders-alist.</span>
<span class="linecomment">;; 2009/12/21 dadams</span>
<span class="linecomment">;;     fset -&gt; defalias.</span>
<span class="linecomment">;; 2009/12/13 dadams</span>
<span class="linecomment">;;     icicle-define-sort-command: Add REVERSED to msg if reversed.</span>
<span class="linecomment">;; 2009/10/22 dadams</span>
<span class="linecomment">;;     icicle-define-file-command: Use icicle-file-name-directory, not file-name-directory.</span>
<span class="linecomment">;; 2009/09/17 dadams</span>
<span class="linecomment">;;     Added: icicle-file-bindings.</span>
<span class="linecomment">;; 2009/09/16 dadams</span>
<span class="linecomment">;;     Added: icicle-buffer-bindings.</span>
<span class="linecomment">;;     icicle-define(-file)-command: Macroexpand bindings, (e.g. to use icicle-buffer-bindings).</span>
<span class="linecomment">;; 2009/04/28 dadams</span>
<span class="linecomment">;;     Moved icicle-choose-action-for-type to icicles-fn.el and changed to a function.</span>
<span class="linecomment">;; 2009/04/26 dadams</span>
<span class="linecomment">;;     Added: icicle-choose-action-for-type, icicle-with-selected-window.</span>
<span class="linecomment">;; 2008/08/31 dadams</span>
<span class="linecomment">;;     icicle-define(-file)-command: Select window before call select-frame-set-input-focus.</span>
<span class="linecomment">;; 2008/08/18 dadams</span>
<span class="linecomment">;;     icicle-try-switch-buffer: Do nothing if icicle-inhibit-try-switch-buffer is non-nil.</span>
<span class="linecomment">;;     Use renaming from icicles-fn.el: icicle-complete-again-update.</span>
<span class="linecomment">;; 2008/03/29 dadams</span>
<span class="linecomment">;;     icicle-define(-file)-command: Do not call icicle-highlight-lighter.</span>
<span class="linecomment">;; 2008/03/09 dadams</span>
<span class="linecomment">;;     icicle-define(-file)-command: Call icicle-highlight-lighter.</span>
<span class="linecomment">;; 2007/11/25 dadams</span>
<span class="linecomment">;;     icicle-define(-file)-command:</span>
<span class="linecomment">;;       Bound minibuffer variables, so they are restored after action function</span>
<span class="linecomment">;;         (in case it uses minibuffer for completion).</span>
<span class="linecomment">;;       Return nil after, not before select-frame-set-input-focus.</span>
<span class="linecomment">;;       Added optional arg not-interactive-p.</span>
<span class="linecomment">;;     Quiet the byte compiler for Emacs versions before 22.</span>
<span class="linecomment">;; 2007/10/14 dadams</span>
<span class="linecomment">;;     icicle-define(-file)-command:</span>
<span class="linecomment">;;       Updated generated doc to reflect icicle-act-before-cycle-flag.</span>
<span class="linecomment">;; 2007/05/01 dadams</span>
<span class="linecomment">;;     icicle-define(-file)-command: Reset icicle-candidate-action-fn after reading input.</span>
<span class="linecomment">;; 2007/04/15 dadams</span>
<span class="linecomment">;;     icicle-define(-file)-command:</span>
<span class="linecomment">;;       Simplified action fn: Removed unwind-protect and outer condition-case,</span>
<span class="linecomment">;;       so don't return error msg now, and only set minibuf focus if succeed.</span>
<span class="linecomment">;;     icicle-define(-file)-command, icicle-try-switch-buffer: Removed "%s" from handlers.</span>
<span class="linecomment">;; 2007/02/06 dadams</span>
<span class="linecomment">;;     icicle-define(-file)-command: Mention mouse bindings in command doc strings.</span>
<span class="linecomment">;; 2007/01/15 dadams</span>
<span class="linecomment">;;     Added: icicle-define-sort-command.</span>
<span class="linecomment">;;     Updated font-lock-add-keywords.  Added lisp-indentation-hack (commented out).</span>
<span class="linecomment">;; 2007/01/06 dadams</span>
<span class="linecomment">;;     font-lock-add-keywords: 2 or 3, not 1 or 2, is index after add icicle-define-add-to-*.</span>
<span class="linecomment">;;                             Use lax matching, so no error if no match.</span>
<span class="linecomment">;; 2007/01/01 dadams</span>
<span class="linecomment">;;     Added: icicle-define-add-to-alist-command.</span>
<span class="linecomment">;;     Removed compile-time require of icicles-var.el.</span>
<span class="linecomment">;;     font-lock-add-keywords:</span>
<span class="linecomment">;;       "\\&gt;[ \t'\(]*\\(\\sw+\\)?", not "\\s-+\\(\\sw\\(\\sw\\|\\s_\\)+\\)".</span>
<span class="linecomment">;;       Added icicle-define-add-to-alist-command.</span>
<span class="linecomment">;; 2006/10/14 dadams</span>
<span class="linecomment">;;     Require icicles-var.el.</span>
<span class="linecomment">;;     Moved conditional eval-when-compile to top level.</span>
<span class="linecomment">;; 2006/09/24 dadams</span>
<span class="linecomment">;;     icicle-define(-file)-command: Corrected bindings mentioned in doc strings.</span>
<span class="linecomment">;; 2006/08/27 dadams</span>
<span class="linecomment">;;     icicle-define(-file)-command: Ensure orig-window is live before using it.</span>
<span class="linecomment">;; 2006/08/23 dadams</span>
<span class="linecomment">;;     Added: icicle-try-switch-buffer.  Use it in icicle-define(-file)-command.</span>
<span class="linecomment">;; 2006/08/03 dadams</span>
<span class="linecomment">;;     icicle-define(-file)-command:</span>
<span class="linecomment">;;       (error (error-message-string...)) -&gt; (error "%s" (error-message-string...)).</span>
<span class="linecomment">;; 2006/05/16 dadams</span>
<span class="linecomment">;;     icicle-define(-file)-command: Treat cases where user wiped out orig-buff or orig-window.</span>
<span class="linecomment">;; 2006/03/31 dadams</span>
<span class="linecomment">;;     icicle-define(-file)-command: Wrap action fn in unwind-protect to select minibuf frame.</span>
<span class="linecomment">;; 2006/03/11 dadams</span>
<span class="linecomment">;;     icicle-define-file-command: Expand file in directory of icicle-last-input.</span>
<span class="linecomment">;; 2006/03/08 dadams</span>
<span class="linecomment">;;     icicle-define(-file)-command: Bug fix (thx to TobyCubitt):</span>
<span class="linecomment">;;       Make sure icicle-candidate-action-fn runs FUNCTION in original buffer and window.</span>
<span class="linecomment">;; 2006/03/07 dadams</span>
<span class="linecomment">;;     icicle-define(-file)-command: Mention in doc string that BINDINGS are not in effect</span>
<span class="linecomment">;;       within icicle-candidate-action-fn.</span>
 
<span class="linecomment">;;;(@* "CHANGE LOG FOR `icicles-mcmd.el'")</span>
<span class="linecomment">;;</span>
<span class="linecomment">;; 2013/01/11 dadams</span>
<span class="linecomment">;;     icicle-help-string(-non)-completion: Removed M-s, M-r.</span>
<span class="linecomment">;; 2013/01/06 dadams</span>
<span class="linecomment">;;     icicle-autofile-action: Updated calls to bmkp-*, to add nil NO-UPDATE-P argument.</span>
<span class="linecomment">;; 2013/01/05 dadams</span>
<span class="linecomment">;;     Added: icicle-file-all-tags-narrow, icicle-file-all-tags-regexp-narrow,</span>
<span class="linecomment">;;            icicle-file-some-tags-narrow, icicle-file-some-tags-regexp-narrow,</span>
<span class="linecomment">;;     icicle-(un)bind-(buffer|file)-candidate-keys: Factored.</span>
<span class="linecomment">;;     icicle-(un)bind-file-candidate-keys: Added: *-file-(all|some)-tags(-regexp)-narrow.</span>
<span class="linecomment">;;     icicle-remove-cand-from-lists, icicle-narrow-candidates-with-predicate:</span>
<span class="linecomment">;;       Handle Emacs &gt; 23.1 correctly: it no longer uses read-file-name-predicate.</span>
<span class="linecomment">;; 2013/01/01 dadams</span>
<span class="linecomment">;;     icicle-change-sort-order: completion--flush-all-sorted-completions, so Icomplete+ updates order.</span>
<span class="linecomment">;; 2012/12/31 dadams</span>
<span class="linecomment">;;     icicle-successive-action, icicle-insert-completion, icicle-candidate-set-retrieve-1,</span>
<span class="linecomment">;;       icicle-keep-only-past-inputs:</span>
<span class="linecomment">;;         Set icicle-mode-line-help instead of using icicle-show-help-in-mode-line.</span>
<span class="linecomment">;;     icicle-insert-completion: Use icicle-current-completion-in-Completions and</span>
<span class="linecomment">;;                               icicle-nb-of-cand-at-Completions-pos only if in *Completions*.</span>
<span class="linecomment">;;     icicle-(prefix|apropos)-complete-1:</span>
<span class="linecomment">;;       Replace local var mode-line-help with icicle-mode-line-help.</span>
<span class="linecomment">;;       Do not call icicle-show-help-in-mode-line (using icicle-post-command-hook now).</span>
<span class="linecomment">;; 2012/12/20 dadams</span>
<span class="linecomment">;;     icicle-(prefix|apropos)-complete-1: Handle new option icicle-TAB/S-TAB-only-completes-flag.</span>
<span class="linecomment">;; 2012/12/15 dadams</span>
<span class="linecomment">;;     icicle-narrow-candidates:</span>
<span class="linecomment">;;       Rename current-candidates to icicle-cands-to-narrow (now a global var, but bound only here).</span>
<span class="linecomment">;;       Bind icicle-narrow-regexp if icicle-compute-narrowing-regexp-p.</span>
<span class="linecomment">;; 2012/12/12 dadams</span>
<span class="linecomment">;;     icicle-narrow-candidates:</span>
<span class="linecomment">;;       Use icicle-must-pass-predicate, not icicle-must-pass-after-match-predicate.</span>
<span class="linecomment">;;       Added a cond clause for function-valued minibuffer-completion-table other than file input.</span>
<span class="linecomment">;;     icicle-apropos-complete-and-widen: Updated when condition wrt *-apropos-complete-and-narrow.</span>
<span class="linecomment">;; 2012/11/28 dadams</span>
<span class="linecomment">;;     icicle-toggle-transforming: Rewrote to be more useful when both are useful functions.</span>
<span class="linecomment">;; 2012/11/08 dadams</span>
<span class="linecomment">;;     icicle-digit-argument, icicle-successive-action, icicle-(prefix|apropos)-complete-1,</span>
<span class="linecomment">;;       icicle-switch-to-Completions-buf, icicle-keep-only-past-inputs,</span>
<span class="linecomment">;;       icicle-remove-buffer-cands-for-mode:</span>
<span class="linecomment">;;         Use icicle-get-safe.</span>
<span class="linecomment">;; 2012/11/07 dadams</span>
<span class="linecomment">;;     icicle-successive-action, icicle-(prefix|apropos)-complete-1, icicle-switch-to-Completions-buf:</span>
<span class="linecomment">;;       Protect calls to get with symbolp.</span>
<span class="linecomment">;; 2012/10/27 dadams</span>
<span class="linecomment">;;     Added: icicle-toggle-annotation.</span>
<span class="linecomment">;;     icicle-help-string-completion: Added icicle-toggle-annotation.</span>
<span class="linecomment">;;     icicle-toggle-transforming: Use new variable icicle-toggle-transforming-message.</span>
<span class="linecomment">;; 2012/10/22 dadams</span>
<span class="linecomment">;;     icicle-(un)bind-buffer-candidate-keys: Remove soft-require conditions for C-x F and C-x R.</span>
<span class="linecomment">;; 2012/10/21 dadams</span>
<span class="linecomment">;;     Added: icicle-toggle-include-cached-files, icicle-toggle-include-recent-files.</span>
<span class="linecomment">;;     icicle-(un)bind-buffer-candidate-keys:</span>
<span class="linecomment">;;       Bind icicle-toggle-include-(cached|recent)-files to C-x F and C-x R.</span>
<span class="linecomment">;; 2012/10/10 dadams</span>
<span class="linecomment">;;     icicle-doremi-increment-max-candidates+:</span>
<span class="linecomment">;;       C-u sets to RESET, not nil, so icicle-maybe-sort-maybe-truncate can reset lighter.</span>
<span class="linecomment">;; 2012/10/09 dadams</span>
<span class="linecomment">;;     icicle-prefix-complete-1: When icicle-multi-completing-p and match join string, show warning.</span>
<span class="linecomment">;; 2012/10/05 dadams</span>
<span class="linecomment">;;     icicle-(prefix|apropos)-complete-(1|2), icicle(-mouse)-candidate-action-1:</span>
<span class="linecomment">;;       Removed setting of icicle-default-directory (unused).</span>
<span class="linecomment">;; 2012/10/02 dadams</span>
<span class="linecomment">;;     Added: icicle-looking-at-p, icicle-looking-back-at-p.</span>
<span class="linecomment">;;     Removed: icicle-looking(-back)-at-anychar-regexp-p.</span>
<span class="linecomment">;;     icicle(-delete)-(forward|backward)(-delete)-char(-untabify)-dots, icicle-transpose-chars-dots:</span>
<span class="linecomment">;;       Rewrote and renamed *-dots to *-magic, to handle join string too.</span>
<span class="linecomment">;; 2012/09/24 dadams</span>
<span class="linecomment">;;     Added: icicle-sort-by-last-file-access-time.</span>
<span class="linecomment">;;     icicle-describe-file: Added optional arg NO-ERROR-P.</span>
<span class="linecomment">;;     icicle-current-sort-functions: Use file comparison also if icicle-abs-file-candidates.</span>
<span class="linecomment">;;     icicle-help-on-candidate(-symbol): Pass non-nil NO-ERROR-P arg to icicle-describe-file.</span>
<span class="linecomment">;; 2012/09/17 dadams</span>
<span class="linecomment">;;     icicle(-help-on)-(next|previous)-(prefix-|apropos-)candidate(-per-mode)((-alt)-action|-help):</span>
<span class="linecomment">;;       NTH is prefix arg.  Plain C-u means use first candidate.</span>
<span class="linecomment">;;     icicle-(next|previous)-line:</span>
<span class="linecomment">;;       Move to (next|previous) line when CURR-COL is 1 (fixes bug for multi-line candidates).</span>
<span class="linecomment">;; 2012/09/08 dadams</span>
<span class="linecomment">;;     icicle-dispatch-M-_: Call icicle-toggle-ignored-space-prefix normally, not interactively.</span>
<span class="linecomment">;;     icicle-help-string-completion: *-buffer-ignore-space-prefix-flag, not *-ignore-space-prefix*.</span>
<span class="linecomment">;;     icicle-candidate-set-complement:</span>
<span class="linecomment">;;       Ensure icicle-buffer-name-input-p to pass icicle-buffer-ignore-space-prefix-flag arg.</span>
<span class="linecomment">;;     icicle-toggle-ignored-space-prefix: Removed optional arg BUFFER-INSTEAD-P.</span>
<span class="linecomment">;;       It now toggles icicle-buffer-ignore-space-prefix-flag, not icicle-ignore-space-prefix-flag.</span>
<span class="linecomment">;; 2012/09/06 dadams</span>
<span class="linecomment">;;     Use icicle-string-match-p.</span>
<span class="linecomment">;; 2012/09/03 dadams</span>
<span class="linecomment">;;     icicle-history: Let first TAB or S-TAB cycle, depending on icicle-default-cycling-mode.</span>
<span class="linecomment">;;       Put properties icicle(-prefix|-apropos)-completing-command on it.</span>
<span class="linecomment">;;       Set icicle-last-completion-command per icicle-default-cycling-mode.  Use instead of apropos.</span>
<span class="linecomment">;;       Do not set last-command to icicle-history.</span>
<span class="linecomment">;; 2012/09/02 dadams</span>
<span class="linecomment">;;     icicle-(prefix|apropos)-complete-1:</span>
<span class="linecomment">;;       Non-nil icicle-show-Completions-initially-flag means consider this is the second (S-)TAB.</span>
<span class="linecomment">;; 2012/08/27 dadams</span>
<span class="linecomment">;;     icicle-make-directory:</span>
<span class="linecomment">;;       Use (icicle-file-name-directory-w-default (icicle-input-from-minibuffer)) as default dir-name.</span>
<span class="linecomment">;; 2012/08/21 dadams</span>
<span class="linecomment">;;     icicle-resolve-file-name: Call tap-put-thing-at-point-props after load thingatpt+.el.</span>
<span class="linecomment">;; 2012/08/18 dadams</span>
<span class="linecomment">;;     icicle-resolve-file-name: Call tap-define-aliases-wo-prefix.</span>
<span class="linecomment">;;     bounds-of-thing-at-point -&gt; icicle-bounds-of-thing-at-point.</span>
<span class="linecomment">;; 2012/08/14 dadams</span>
<span class="linecomment">;;     icicle-abort-recursive-edit: Call 1on1-fit-minibuffer-frame.</span>
<span class="linecomment">;; 2012/08/06 dadams</span>
<span class="linecomment">;;     Renamed old-* to icicle-ORIG-*:</span>
<span class="linecomment">;;       icicle-ORIG-choose-completion, icicle-ORIG-exit-minibuffer,</span>
<span class="linecomment">;;       icicle-ORIG-minibuffer-complete-and-exit, icicle-ORIG-mouse-choose-completion,</span>
<span class="linecomment">;;       icicle-ORIG-next-history-element, icicle-ORIG-sit-for, icicle-ORIG-switch-to-completions.</span>
<span class="linecomment">;; 2012/08/05 dadams</span>
<span class="linecomment">;;     icicle-exit-minibuffer: If no faces to keep then remove all faces (they are Icicles faces).</span>
<span class="linecomment">;; 2012/07/24 dadams</span>
<span class="linecomment">;;     icicle-toggle-ignored-space-prefix: Added prefix arg, so you can toggle buffer option.</span>
<span class="linecomment">;; 2012/07/21 dadams</span>
<span class="linecomment">;;     icicle-help-on-candidate(-symbol): If available, use describe-buffer for buffers.</span>
<span class="linecomment">;; 2012/07/17 dadams</span>
<span class="linecomment">;;     Removed: icicle-maybe-byte-compile-after-load (macro),</span>
<span class="linecomment">;;              icicle-byte-compile-eval-after-load-flag (option).</span>
<span class="linecomment">;;     Removed all calls to icicle-maybe-byte-compile-after-load.</span>
<span class="linecomment">;; 2012/07/14 dadams</span>
<span class="linecomment">;;     icicle-mouse-candidate-action-1: Fix for Emacs 24.  Use code similar to i*-candidate-action-1:</span>
<span class="linecomment">;;       Set icicle-last-input, not icicle-last-completion-candidate, to choice.</span>
<span class="linecomment">;;       Update default-directory.  Remove candidate only if choice = icicle-last-completion-candidate.</span>
<span class="linecomment">;;     icicle-(prefix|apropos)-complete-1: Do not use icicle-transform-sole-candidate.</span>
<span class="linecomment">;; 2012/07/13 dadams</span>
<span class="linecomment">;;     Added: icicle-toggle-network-drives-as-remote.</span>
<span class="linecomment">;;     icicle-help-string-completion: Added icicle-toggle-network-drives-as-remote.</span>
<span class="linecomment">;; 2012/07/12 dadams</span>
<span class="linecomment">;;     icicle-help-string-completion: Better representation of option values.</span>
<span class="linecomment">;; 2012/07/10 dadams</span>
<span class="linecomment">;;     icicle-other-history: Updated doc - now available for any minibuffer input, not just completion.</span>
<span class="linecomment">;; 2012/07/02 dadams</span>
<span class="linecomment">;;     Moved here (since loaded first) from icicles-cmd2.el: icicle-byte-compile-eval-after-load-flag.</span>
<span class="linecomment">;; 2012/06/29 dadams</span>
<span class="linecomment">;;     icicle-current-sort-functions: Do not exclude if PRED is icicle-allowed-sort-predicate.</span>
<span class="linecomment">;;     icicle-help-on-candidate-symbol: select-frame-set-input-focus after apropos-command regexp.</span>
<span class="linecomment">;;     Removed #' from lambdas.</span>
<span class="linecomment">;; 2012/06/27 dadams</span>
<span class="linecomment">;;     icicle-retrieve-previous-input:</span>
<span class="linecomment">;;       icicle-highlight-initial-whitespace and icicle-place-cursor.</span>
<span class="linecomment">;;       Update icicle-current-raw-input unconditionally, so can continue to cycle.</span>
<span class="linecomment">;; 2012/06/25 dadams</span>
<span class="linecomment">;;     icicle-describe-file: Removed extra space in format line File Type.  Thx to Christopher Schmidt.</span>
<span class="linecomment">;; 2012/06/24 dadams</span>
<span class="linecomment">;;     icicle-previous-line: Hitting up key on 1st cand looped in vertical mode bc of extra \n at eob.</span>
<span class="linecomment">;; 2012/06/17 dadams</span>
<span class="linecomment">;;     icicle-narrow-candidates:</span>
<span class="linecomment">;;       Use read-file-name with icicle-must-pass-after-match-predicate for all Emacs Versions.</span>
<span class="linecomment">;;       Thx to Michael Heerdegen.  Use backquote+comma to eliminate free var in lambda.</span>
<span class="linecomment">;; 2012/06/09 dadams</span>
<span class="linecomment">;;     icicle-choose-completion, icicle-nb-of-cand-in-Completions-horiz, icicle-insert-dot,</span>
<span class="linecomment">;;       icicle-switch-to-Completions-buf, icicle-current-completion-in-Completions,</span>
<span class="linecomment">;;       icicle-move-to-next-completion:</span>
<span class="linecomment">;;         Use point-min if 1- point is less.</span>
<span class="linecomment">;;     icicle-move-to-next-completion:</span>
<span class="linecomment">;;       Adjust use of icicle-show-Completions-help-flag.  Wrap when bobp.  When wrap to end, back up</span>
<span class="linecomment">;;       over final space, which has no mouse-face, else previous-single-property-change DTWT.</span>
<span class="linecomment">;;     icicle-previous-line: Handle new behavior of nil icicle-show-Completions-help-flag.</span>
<span class="linecomment">;; 2012/06/08 dadams</span>
<span class="linecomment">;;     Added macro icicle-maybe-byte-compile-after-load here too (for next).</span>
<span class="linecomment">;;     icicle-yank-secondary: Use eval-after-load of second-sel.el instead of fboundp yank-secondary</span>
<span class="linecomment">;;       (for arbitrary load order).  Added icicle-maybe-byte-compile-after-load.</span>
<span class="linecomment">;; 2012/06/03 dadams</span>
<span class="linecomment">;;     icicle-(next|previous)-(prefix|apropos)-candidate-action:</span>
<span class="linecomment">;;       Put non-nil value on icicle-action-command, so M-x avoids key reminder for multi-command use.</span>
<span class="linecomment">;; 2012/05/22 dadams</span>
<span class="linecomment">;;     icicle-help-on-candidate(-symbol):</span>
<span class="linecomment">;;       Test with icicle-file-remote-p before file-exists-p, to avoid Tramp.</span>
<span class="linecomment">;; 2012/05/14 dadams</span>
<span class="linecomment">;;     icicle-help-on-candidate:</span>
<span class="linecomment">;;       Do not use transform multi-completion candidate before passiting it to *-candidate-help-fn.</span>
<span class="linecomment">;; 2012/05/13 dadams</span>
<span class="linecomment">;;     icicle-candidate-set-save-1: Use icicle-saved-completion-candidates as default variable.</span>
<span class="linecomment">;; 2012/05/11 dadams</span>
<span class="linecomment">;;     icicle-sit-for: Bind inhibit-quit to t so C-g is handled as icicle-abort-recursive-edit.</span>
<span class="linecomment">;;     icicle-(prefix|apropos)-complete-1:</span>
<span class="linecomment">;;       Set icicle-next-(prefix|apropos)-complete-cycles-p to t unconditionally (except for WORD-P).</span>
<span class="linecomment">;; 2012/04/22 dadams</span>
<span class="linecomment">;;     Added: icicle-(un)bind-buffer-candidate-keys,</span>
<span class="linecomment">;;            icicle-(remove|keep-only)-buffer-cands-for(-derived)-mode.</span>
<span class="linecomment">;; 2012/04/09 dadams</span>
<span class="linecomment">;;     Changed last-command-char to last-command-event.</span>
<span class="linecomment">;;     Fixed typos: double single-quotes in autoload cookies.</span>
<span class="linecomment">;; 2012/04/08 dadams</span>
<span class="linecomment">;;     Make autoload cookies for commands load icicles[.el] explicitly.</span>
<span class="linecomment">;; 2012/03/31 dadams</span>
<span class="linecomment">;;     Removed soft-require of pp+.el (not used directly, but used by icicles-opt.el if available).</span>
<span class="linecomment">;; 2012/03/28 dadams</span>
<span class="linecomment">;;     Changed FILE arg in autoloads by removing .el, so .elc will be loaded if available.</span>
<span class="linecomment">;; 2012/03/10 dadams</span>
<span class="linecomment">;;     icicle-autofile-action:</span>
<span class="linecomment">;;       Bind/restore completion vars around reading tags.</span>
<span class="linecomment">;;       Re-complete at end, instead of icicle-update-and-next, so can see updates.</span>
<span class="linecomment">;;     icicle-mouse-candidate-action-1:</span>
<span class="linecomment">;;       No need to call icicle-update-and-next if called icicle-remove-candidate-display-others.</span>
<span class="linecomment">;; 2012/02/28 dadams</span>
<span class="linecomment">;;     Reverted last change - it broke completion (called from *-prefix-*).</span>
<span class="linecomment">;;       Trying a thoughtless hack: If INPUT then do not recompute completions.</span>
<span class="linecomment">;; 2012/02/27 dadams</span>
<span class="linecomment">;;     icicle-input-is-a-completion-p: If icicle-last-completion-candidate is nil, compute candidates.</span>
<span class="linecomment">;;                                     Fix for bug: entering a candidate without hitting (S-)TAB.</span>
<span class="linecomment">;; 2012/02/14 dadams</span>
<span class="linecomment">;;     icicle-candidate-set-save-1:</span>
<span class="linecomment">;;       Distinguish in-minibuffer use from top-level use.  Raise error if user cancels fileset create.</span>
<span class="linecomment">;; 2012/02/13 dadams</span>
<span class="linecomment">;;     icicle-candidate-set-save-1, icicle-add-file-to-fileset:</span>
<span class="linecomment">;;       Use (list ...), not '(...), so get a new cons cell.</span>
<span class="linecomment">;; 2012/02/11 dadams</span>
<span class="linecomment">;;     Support for new values of icicle-expand-input-to-common-match (no expansion etc.).</span>
<span class="linecomment">;;       Added: icicle-cycle-expand-to-common-match.</span>
<span class="linecomment">;;       icicle-help-string-completion: Added icicle-cycle-expand-to-common-match.</span>
<span class="linecomment">;;       icicle-retrieve-last-input: Handle both prefix (3) and apropos (4) incremental expansion.</span>
<span class="linecomment">;;       icicle-(prefix|apropos)-complete-1:</span>
<span class="linecomment">;;         Handle all cases of icicle-expand-input-to-common-match: 0,1 (display only) vs 2 vs 3,4.</span>
<span class="linecomment">;;       icicle-toggle-expand-to-common-match: Swap with icicle-expand-input-to-common-match-alt (new).</span>
<span class="linecomment">;;       Doc strings: Applied renamings and key changes.</span>
<span class="linecomment">;;     icicle-widen-candidates, icicle-regexp-quote-input:</span>
<span class="linecomment">;;       Do not turn off icicle-expand-input-to-common-match.  Just bind it while apropos-complete.</span>
<span class="linecomment">;;     icicle-widen-candidates: Remove directory from raw input (bug fix).</span>
<span class="linecomment">;;     icicle-apropos-complete-and-narrow: Use function, not var, icicle-current-TAB-method (bug fix).</span>
<span class="linecomment">;;     icicle-candidate-set-save-1: Prompt to create new fileset if fileset entered does not exist.</span>
<span class="linecomment">;; 2012/02/08 dadams</span>
<span class="linecomment">;;     Renamed: icicle-add/remove-tags-and-refresh to icicle-autofile-action.</span>
<span class="linecomment">;;     icicle-autofile-action: Handle create/set case too. not just add and remove.</span>
<span class="linecomment">;;     icicle-(un)bind-file-candidate-keys: Bind C-x a a to icicle-autofile-action for create/set.</span>
<span class="linecomment">;; 2012/02/02 dadams</span>
<span class="linecomment">;;     Added aliases: cycle-icicle-(incremental-completion|sort-order|(S)-TAB-completion-method).</span>
<span class="linecomment">;;     icicle-apropos-complete-and-exit: Removed binding of icicle-expand-input-to-common-match-flag.</span>
<span class="linecomment">;;     icicle-toggle-dot: Do not call icicle-barf-if-outside-minibuffer.</span>
<span class="linecomment">;;     icicle-cycle-image-file-thumbnail, icicle-next-(S-)TAB-completion-method,</span>
<span class="linecomment">;;       icicle-change-sort-order:</span>
<span class="linecomment">;;         Minibuffer message mentions also the next (following) value.</span>
<span class="linecomment">;; 2012/01/31 dadams</span>
<span class="linecomment">;;     icicle-retrieve-previous-input:</span>
<span class="linecomment">;;       Do not invoke icicle-call-then-update-Completions when inserting.  IOW, do not re-complete.</span>
<span class="linecomment">;;     icicle-(prefix|apropos)-complete-1: Reverted change for sole-completion: Expand (complete) it.</span>
<span class="linecomment">;;     icicle-apropos-complete-1, multi-match case for file names:</span>
<span class="linecomment">;;       Do not apply icicle-file-name-directory to icicle-last-input if it is nil.</span>
<span class="linecomment">;;     icicle-remove-cand-from-lists: Fixed for Emacs 22 file names: compare CAND with just MCT-CAND.</span>
<span class="linecomment">;;                                    Fixed for Emacs 23+: use minibuffer-completion-predicate always.</span>
<span class="linecomment">;; 2012/01/27 dadams</span>
<span class="linecomment">;;     icicle-(prefix|apropos)-complete-1:</span>
<span class="linecomment">;;       Reverted part of 2012-01-20 chg, for mult matches: it picked up mult keys hit with no delay.</span>
<span class="linecomment">;; 2012/01/24 dadams</span>
<span class="linecomment">;;     Added: icicle-toggle-completions-format.</span>
<span class="linecomment">;;     icicle-help-string-completion: Updated to add icicle-toggle-completions-format.</span>
<span class="linecomment">;; 2012/01/20 dadams</span>
<span class="linecomment">;;     Renamed icicle-toggle-incremental-completion to icicle-cycle-incremental-completion.</span>
<span class="linecomment">;;     icicle-apropos-complete-and-exit:</span>
<span class="linecomment">;;       Bind icicle-expand-input-to-common-match-flag and icicle-prefix-complete-and-exit-p also.</span>
<span class="linecomment">;;       Complete based on icicle-current-completion-mode, not just apropos.</span>
<span class="linecomment">;;       Use icicle-candidates-alist if appropriate.</span>
<span class="linecomment">;;     icicle-cycle-incremental-completion: cycle among t, nil, and always, instead of toggle t & nil.</span>
<span class="linecomment">;;     icicle-retrieve-previous-input: Just use icicle-call-then-update-Completions.</span>
<span class="linecomment">;;     icicle-(prefix|apropos)-complete-1:</span>
<span class="linecomment">;;       When sole cand, icicle-edit-update-p and not icicle-expand-input-*, show cand in Completions.</span>
<span class="linecomment">;;     icicle-apropos-complete-2:</span>
<span class="linecomment">;;       Removed arg and setting it.  Return input-sans-dir needed for setting real mode-line help.</span>
<span class="linecomment">;; 2012/01/19 dadams</span>
<span class="linecomment">;;     icicle-prefix-complete-2:</span>
<span class="linecomment">;;       Removed first arg and setting it.  Return condition needed for setting real mode-line help.</span>
<span class="linecomment">;;     icicle-prefix-complete-1:</span>
<span class="linecomment">;;       Conditionally set mode-line help, using return value of icicle-prefix-complete-2.</span>
<span class="linecomment">;; 2012/01/17 dadams</span>
<span class="linecomment">;;     icicle-mouse-choose-completion, icicle-mouse-candidate-action-1, icicle-mouse-remove-candidate,</span>
<span class="linecomment">;;       icicle-current-completion-in-Completions:</span>
<span class="linecomment">;;         No longer add back a newline if property icicle-keep-newline.  Thx to Michael Heerdegen.</span>
<span class="linecomment">;; 2012/01/13 dadams</span>
<span class="linecomment">;;     icicle-(un)bind-file-candidate-keys: Corrected to handle also minibuffer-local-must-match-map.</span>
<span class="linecomment">;; 2012/01/08 dadams</span>
<span class="linecomment">;;     icicle-(prefix|apropos)-complete-1: Protect icicle-ido-like-mode with boundp for Emacs 20.</span>
<span class="linecomment">;; 2011/12/31 dadams</span>
<span class="linecomment">;;     icicle-apropos-complete-1: Remove extra icicle-edit-update-p (typo) in condition.</span>
<span class="linecomment">;; 2011/12/29 dadams</span>
<span class="linecomment">;;     Added: icicle-(prefix|apropos)-complete-2.</span>
<span class="linecomment">;;     icicle-(prefix|apropos)-complete-1:</span>
<span class="linecomment">;;       When completing initially or icicle-incremental-completion-flag is non-nil & non-t, expand</span>
<span class="linecomment">;;       input to common match.</span>
<span class="linecomment">;; 2011/12/28 dadams</span>
<span class="linecomment">;;     icicle-(prefix|apropos)-complete-1:</span>
<span class="linecomment">;;       If icicle-ido-like-mode and icicle-top-level-when-sole-completion-flag do not throw to top</span>
<span class="linecomment">;;       if sole candidate is a directory.</span>
<span class="linecomment">;; 2011/12/19 dadams</span>
<span class="linecomment">;;     icicle-(next|previous)-line: Use line-end-position, not end-of-line + point.</span>
<span class="linecomment">;; 2011/12/15 dadams</span>
<span class="linecomment">;;     icicle-keep-only-past-inputs: For file-name candidates, expand file names before comparing.</span>
<span class="linecomment">;; 2011/11/05 dadams</span>
<span class="linecomment">;;     icicle-nb-Completions-cols: Ensure return value is at least 1.  Thx to Michael Heerdegen.</span>
<span class="linecomment">;; 2011/10/21 dadams</span>
<span class="linecomment">;;     icicle-all-candidates-action-1: Bind icicle-minibuffer-message-ok-p to non-nil for LISTP.</span>
<span class="linecomment">;;     icicle-erase-minibuffer-or-history-element, icicle-(change|reverse)-sort-order,</span>
<span class="linecomment">;;       icicle-toggle-(ignoring-comments|dot|WYSIWYG-Completions|~-for-home-dir|C-for-actions),</span>
<span class="linecomment">;;       icicle-toggle-((-alternative)-sorting|angle-brackets|proxy-candidates|transforming),</span>
<span class="linecomment">;;       icicle-toggle-(incremental-completion|expand-to-common-match|remote-file-testing),</span>
<span class="linecomment">;;       icicle-toggle-(highlight-all-current|hiding-(common-match|non-matching-lines)),</span>
<span class="linecomment">;;       icicle-toggle-(show-multi-completion|ignored-space-prefix|regexp-quote|literal-replacement),</span>
<span class="linecomment">;;       icicle-toggle-(highlight-(historical|saved)-candidates|ignored-extensions),</span>
<span class="linecomment">;;       icicle-toggle-search-replace-(common-match|whole-word)),</span>
<span class="linecomment">;;       icicle-toggle-search-(cleanup|complementing-domain), icicle-toggle-case-sensitivity,</span>
<span class="linecomment">;;       icicle-cycle-image-file-thumbnail, icicle-next(-S)-TAB-completion-method:</span>
<span class="linecomment">;;         Use icicle-propertize.</span>
<span class="linecomment">;;     icicle-toggle-dot: Barf if not in minibuffer.</span>
<span class="linecomment">;; 2011/10/18 dadams</span>
<span class="linecomment">;;     icicle-(apropos|prefix)-complete-1:</span>
<span class="linecomment">;;       Simplify sole-candidate case and correct it for nil *-expand-input-to-common-*.</span>
<span class="linecomment">;;       Thx to Michael Heerdegen.</span>
<span class="linecomment">;; 2011/10/08 dadams</span>
<span class="linecomment">;;     icicle-next-TAB-completion-method, icicle-read+insert-file-name,</span>
<span class="linecomment">;;       icicle-(un)bind-file-candidate-keys:</span>
<span class="linecomment">;;         Use icicle-kbd.</span>
<span class="linecomment">;;     icicle-insert-key-description: Made it OK for Emacs 20 too.</span>
<span class="linecomment">;;     icicle-toggle-angle-brackets: Added no-op message for Emacs 20.</span>
<span class="linecomment">;;     icicle-mouse-candidate-action-1: Wrap icicle-help-on-candidate with with-current-buffer.</span>
<span class="linecomment">;;                                      For key-completion cand, use current buffer if no i*-orig-buff.</span>
<span class="linecomment">;; 2011/09/21 dadams</span>
<span class="linecomment">;;     icicle-(prefix|apropos)-complete-1: Use file-name-as-directory instead of concat with /.</span>
<span class="linecomment">;; 2011/09/09 dadams</span>
<span class="linecomment">;;     icicle-switch-to-Completions-buf:</span>
<span class="linecomment">;;       Do not set icicle-current-input to minibuffer content.  Use that content sans dir, locally.</span>
<span class="linecomment">;;       If icicle-candidate-nb is defined, use it: just call icicle-move-to-next-completion.</span>
<span class="linecomment">;;     icicle-insert-completion:</span>
<span class="linecomment">;;       Set icicle-last-completion-candidate to COMPLETION.</span>
<span class="linecomment">;;       Set icicle-candidate-nb to icicle-nb-of-cand-at-Completions-pos (point).</span>
<span class="linecomment">;;       Use icicle-insert-cand-in-minibuffer COMPLETION, not just insert of directory + COMPLETION.</span>
<span class="linecomment">;;       Set icicle-last-input to icicle-current-input.  Set icicle-cycling-p to t.</span>
<span class="linecomment">;;       Call icicle-show-help-in-mode-line.</span>
<span class="linecomment">;; 2011/09/07 dadams</span>
<span class="linecomment">;;     icicle-erase-minibuffer-or-history-element, icicle-prefix-complete-1,</span>
<span class="linecomment">;;       icicle-apropos-complete(-1|-no-display), icicle-all-candidates-action-1, icicle-describe-file,</span>
<span class="linecomment">;;       icicle-apply-to-saved-candidate, icicle-narrow-candidates(-with-predicate):</span>
<span class="linecomment">;;         Use icicle-condition-case-no-debug instead of condition-case.  Thx to Michael Heerdegen.</span>
<span class="linecomment">;; 2011/09/06 dadams</span>
<span class="linecomment">;;     Added: icicle-resolve-file-name.</span>
<span class="linecomment">;;     icicle-minibuffer-help: Call help-setup-xref, for back/forward buttons.</span>
<span class="linecomment">;; 2011/09/05 dadams</span>
<span class="linecomment">;;     Added: icicle-dispatch-C-x., icicle-toggle-hiding-non-matching-lines.</span>
<span class="linecomment">;;     icicle-help-string-completion: Added hiding no-match lines.  Use icicle-dispatch-C-x..</span>
<span class="linecomment">;; 2011/08/30 dadams</span>
<span class="linecomment">;;     icicle-backward-delete-char-untabify, icicle-delete(-backward)-char:</span>
<span class="linecomment">;;       Put delete-selection prop, so region is deleted.</span>
<span class="linecomment">;; 2011/08/26 dadams</span>
<span class="linecomment">;;     Make sure to pass format string as first arg to calls to functions error and message.</span>
<span class="linecomment">;;     icicle-candidate-set-save-1: Use %s, not %S, in error format string.</span>
<span class="linecomment">;; 2011/08/19 dadams</span>
<span class="linecomment">;;     Fix C-u in minibuffer for Emacs 24:</span>
<span class="linecomment">;;       Don't bother to define icicle-ensure-overriding-map-is-bound for Emacs 24+.</span>
<span class="linecomment">;;       icicle-(universal|digit|negative)-argument:</span>
<span class="linecomment">;;         Use save&set-overriding-map, not icicle-ensure-*, for Emacs 24.</span>
<span class="linecomment">;; 2011/08/15 dadams</span>
<span class="linecomment">;;     icicle-candidate-set-complement:</span>
<span class="linecomment">;;       Apply icicle-must-pass-after-match-predicate to correct the initial domain subtracting from.</span>
<span class="linecomment">;;       Use icicle-all-completions instead of its definition inline.</span>
<span class="linecomment">;; 2011/08/13 dadams</span>
<span class="linecomment">;;     Added: icicle-toggle-search-complementing-domain, toggle-icicle-search-complementing-domain.</span>
<span class="linecomment">;;     icicle-insert-string-from-variable: Completion candidates now include all string-valued vars.</span>
<span class="linecomment">;; 2011/08/12 dadams</span>
<span class="linecomment">;;     Added: icicle-add/remove-tags-and-refresh, icicle-(un)bind-file-candidate-keys.</span>
<span class="linecomment">;; 2011/08/07 dadams</span>
<span class="linecomment">;;     icicle-help-on-candidate: For icicle-candidate-help-fn case: icicle-transform-multi-completion.</span>
<span class="linecomment">;; 2011/07/27 dadams</span>
<span class="linecomment">;;     Use icicle-completions-format everywhere, not icicle-completions-format-internal (removed).</span>
<span class="linecomment">;; 2011/07/21 dadams</span>
<span class="linecomment">;;     Renamed: icicle-nb-of-candidate-in-Completions to icicle-nb-of-cand-at-Completions-pos.</span>
<span class="linecomment">;; 2011/07/06 dadams</span>
<span class="linecomment">;;     Applied renaming of icicle-Completions-frame-at-right-flag to icicle-move-Completions-frame.</span>
<span class="linecomment">;;     icicle-raise-Completions-frame: Handle left value of icicle-move-Completions-frame also.</span>
<span class="linecomment">;; 2011/06/26 dadams</span>
<span class="linecomment">;;     icicle-minibuffer-help: Use insert, not princ, with icicle-help-string-completion.</span>
<span class="linecomment">;;     icicle-minibuffer-help, icicle-help-string-completion:</span>
<span class="linecomment">;;       Use help-commands-to-key-buttons, not substitute-command-keys, if available.</span>
<span class="linecomment">;;     Soft-require help-fns+.el for help-commands-to-key-buttons.</span>
<span class="linecomment">;; 2011/06/03 dadams</span>
<span class="linecomment">;;     icicle-next-candidate-per-mode:</span>
<span class="linecomment">;;       Set this-command according to direction, per NTH.  If NTH is nil set it to 1.  For Icomplete+.</span>
<span class="linecomment">;;     Replace icicle-help-in-mode-line-flag by icicle-help-in-mode-line-delay everywhere.</span>
<span class="linecomment">;; 2011/05/22 dadams</span>
<span class="linecomment">;;     Added defvars for free vars to quiet byte compiler.</span>
<span class="linecomment">;; 2011/05/10 dadams</span>
<span class="linecomment">;;     icicle-toggle-ignoring-comments: Toggle also ignore-comments-flag from thing-cmds.el.</span>
<span class="linecomment">;; 2011/05/07 dadams</span>
<span class="linecomment">;;     Added: icicle-toggle-ignoring-comments.  Bound to C-M-;.</span>
<span class="linecomment">;;     Changed key for icicle-regexp-quote-input from C-M-; to M-% everywhere.</span>
<span class="linecomment">;; 2011/05/04 dadams</span>
<span class="linecomment">;;     icicle-transform-sole-candidate: Do nothing if for some reason icicle-current-input is nil.</span>
<span class="linecomment">;; 2011/05/03 dadams</span>
<span class="linecomment">;;     Added: icicle-plus-saved-sort, icicle-toggle-highlight-saved-candidates.</span>
<span class="linecomment">;;     icicle-help-string-completion: Mention icicle-toggle-highlight-saved-candidates.</span>
<span class="linecomment">;; 2011/04/29 dadams</span>
<span class="linecomment">;;     icicle-help-string-completion: Corrected current values shown for sort comparers.</span>
<span class="linecomment">;; 2011/04/25 dadams</span>
<span class="linecomment">;;     icicle-describe-file: Sync'd with help-fns+.el - include autofile bookmark info.</span>
<span class="linecomment">;;     icicle-help-on-candidate(-symbol): Add current-prefix-arg to call to icicle-describe-file.</span>
<span class="linecomment">;; 2011/04/02 dadams</span>
<span class="linecomment">;;     icicle-search-define-replacement: Use (new) icicle-scan-fn-or-regexp, not scan-fn-or-regexp.</span>
<span class="linecomment">;; 2011/03/29 dadams</span>
<span class="linecomment">;;     Added: icicle-scroll-(back|for)ward.</span>
<span class="linecomment">;;     Renamed:  icicle-scroll-Completions(-up) to icicle-scroll-Completions-(back|for)ward.</span>
<span class="linecomment">;;     orig-buf(f) -&gt; icicle-orig-buff.</span>
<span class="linecomment">;;     icicle-help-on-candidate: Removed boundp condition for icicle-completing-keys-p.</span>
<span class="linecomment">;;     Applied renaming: icicle-scroll-Completions-backward-p to icicle-scroll-Completions-reverse-p.</span>
<span class="linecomment">;; 2011/03/20 dadams</span>
<span class="linecomment">;;     icicle-help-on-candidate-symbol: Don't bind help-xref-following.  Thx to Michael Heerdegen.</span>
<span class="linecomment">;; 2011/03/17 dadams</span>
<span class="linecomment">;;     icicle-candidate-set-complement:</span>
<span class="linecomment">;;       Added condition-case: Emacs 23.2+ all-completions has no 4th arg.</span>
<span class="linecomment">;;     icicle-delete-backward-char-dots, icicle-replace-input-w-parent-dir:</span>
<span class="linecomment">;;       Use delete-char, not delete-backward-char (Emacs 23.2+ changed it to interactive only).</span>
<span class="linecomment">;;     Added soft require of filesets.el when byte-compile.</span>
<span class="linecomment">;; 2011/03/15 dadams</span>
<span class="linecomment">;;     icicle-describe-file: Added thumbnails for image files.</span>
<span class="linecomment">;; 2011/03/04 dadams</span>
<span class="linecomment">;;     icicle-remove-cand-from-lists, icicle-narrow-candidates-with-predicate:</span>
<span class="linecomment">;;       Corrected code for updating the predicate.</span>
<span class="linecomment">;;       Test using emacs version, not boundp of read-file-name-predicate (since Icicles binds it now).</span>
<span class="linecomment">;; 2011/03/02 dadams</span>
<span class="linecomment">;;     Added: icicle-all-exif-data.</span>
<span class="linecomment">;;     icicle-describe-file: Show all EXIF data, using icicle-all-exif-data.</span>
<span class="linecomment">;; 2011/02/26 dadams</span>
<span class="linecomment">;;     Added: icicle-Completions-popup-choice(-1), icicle-substitute-keymap-vars.</span>
<span class="linecomment">;;     icicle-Completions-mouse-3-menu:</span>
<span class="linecomment">;;       Rewrote to use option icicle-Completions-mouse-3-menu-entries instead of hard-coding menus.</span>
<span class="linecomment">;;     icicle-candidate-set-define (cosmetic): Use when, not if, to raise error.</span>
<span class="linecomment">;;     icicle-candidate-set-(difference|union|intersection|complement), : Added start-progress message.</span>
<span class="linecomment">;; 2011/02/23 dadams</span>
<span class="linecomment">;;     icicle-help-string-completion, icicle-Completions-mouse-3-menu:</span>
<span class="linecomment">;;       Add icicle-cycle-image-file-thumbnail.</span>
<span class="linecomment">;;     icicle-Completions-mouse-3-menu: Handle prefix args (change menu items to reflect).</span>
<span class="linecomment">;; 2011/02/22 dadams</span>
<span class="linecomment">;;     Added: icicle-cycle-image-file-thumbnail.</span>
<span class="linecomment">;;     icicle-describe-file: Show also EXIF data for an image file.</span>
<span class="linecomment">;;     icicle-remove-Completions-window:</span>
<span class="linecomment">;;       No-op if Completions is selected or minibuf is selected and Completions was last selected.</span>
<span class="linecomment">;; 2011/02/20 dadams</span>
<span class="linecomment">;;     icicle-history: If history is command-history, convert its entries to strings for completion.</span>
<span class="linecomment">;;     icicle-history, icicle-keep-only-past-inputs: Clarify doc: current completion mode is kept.</span>
<span class="linecomment">;; 2011/01/20 dadams</span>
<span class="linecomment">;;     icicle-read+insert-file-name: Bind icicle-must-pass-after-match-predicate to nil.</span>
<span class="linecomment">;;     icicle-insert-string-at-point:</span>
<span class="linecomment">;;       A numeric prefix arg when use ALTERNATIVES means evaluate grabbed sexp and insert the value.</span>
<span class="linecomment">;; 2011/01/17 dadams</span>
<span class="linecomment">;;     icicle-remove-Completions-window: Bury buffer.</span>
<span class="linecomment">;;     icicle-toggle-highlight-all-current: barf if not in minibuf or Completions.</span>
<span class="linecomment">;;     icicle-dispatch-C-^: Use icicle-searching-p.</span>
<span class="linecomment">;; 2011/01/05 dadams</span>
<span class="linecomment">;;     Added: icicle-sort-by-file-type.</span>
<span class="linecomment">;; 2010/12/26 dadams</span>
<span class="linecomment">;;     Removed autoload cookies except simple ones & ones with sexp on same line.  Thx to Richard Kim.</span>
<span class="linecomment">;; 2010/12/18 dadams</span>
<span class="linecomment">;;     Added more autoload cookies for commands.  Thx to Richard Kim.</span>
<span class="linecomment">;;       Specify command and file for commands defined by Icicles macros.</span>
<span class="linecomment">;; 2010/12/17 dadams</span>
<span class="linecomment">;;     icicle-remove-Completions-window: Added FORCE arg.  Remove if FORCE or interactive.</span>
<span class="linecomment">;;     icicle-abort-recursive-edit: Call icicle-remove-Completions-window with FORCE arg.</span>
<span class="linecomment">;; 2010/12/14 dadams</span>
<span class="linecomment">;;     icicle-retrieve-previous-input:</span>
<span class="linecomment">;;       Added optional arg ALLOW-EMPTY-P (not used yet in calls).</span>
<span class="linecomment">;;       Remove "" systematically, unless ALLOW-EMPTY-P.</span>
<span class="linecomment">;;       Non-interactively, use last-recorded if current try is "" (unless ALLOW-EMPTY-P).</span>
<span class="linecomment">;;     icicle-toggle-highlight-all-current: Turn off incremental completion while erase minibuffer.</span>
<span class="linecomment">;;     icicle-insert-input: Apply renaming: icicle-expand-file-name to icicle-expand-file-or-dir-name.</span>
<span class="linecomment">;; 2010/12/02 dadams</span>
<span class="linecomment">;;     icicle-retrieve-previous-input: Exclude "" from past-input cycling.</span>
<span class="linecomment">;; 2010/11/30 dadams</span>
<span class="linecomment">;;     icicle-mouse-save-then-kill: If soft-require of mouse3.el, then use a simpler definition.</span>
<span class="linecomment">;; 2010/11/27 dadams</span>
<span class="linecomment">;;     icicle-insert-list-join-string, icicle-pp-eval-expression-in-minibuffer:</span>
<span class="linecomment">;;       Protect with 1on1-fit-minibuffer-frame-flag and soft-require of fit-frame.el.</span>
<span class="linecomment">;;     icicle-(apropos|prefix)-complete-1: Soft-require of fit-frame.el for 1on1-fit-minibuffer-frame.</span>
<span class="linecomment">;; 2010/11/23 dadams</span>
<span class="linecomment">;;     icicle-minibuffer-help:</span>
<span class="linecomment">;;       Don't switch to minibuf window unless start in minibuf or *Completions*.  Thx to M. Heerdegen.</span>
<span class="linecomment">;; 2010/11/08 dadams</span>
<span class="linecomment">;;     icicle-next-TAB-completion-method, icicle-next-S-TAB-completion-method:</span>
<span class="linecomment">;;       Set the icicle-last-top-level-command property only when set the first temporary method.</span>
<span class="linecomment">;; 2010/11/07 dadams</span>
<span class="linecomment">;;     icicle-apply-to-saved-candidate: Do not sit-for if icicle-all-candidates-action.</span>
<span class="linecomment">;;     Applied renaming of icicle-all-candidates-action-p to icicle-all-candidates-action.</span>
<span class="linecomment">;; 2010/11/06 dadams</span>
<span class="linecomment">;;     icicle-apropos-complete-and-narrow: Do not regexp-quote if non-basic prefix completion.</span>
<span class="linecomment">;;     icicle-next-TAB-completion-method, icicle-next-S-TAB-completion-method:</span>
<span class="linecomment">;;       Prefix arg now means the new method is only for the current top-level command.</span>
<span class="linecomment">;;       Put properties on icicle-last-top-level-command to implement this.</span>
<span class="linecomment">;;     icicle-candidate-set-retrieve-1: Do icicle-apropos-complete-no-display if that was the last one.</span>
<span class="linecomment">;; 2010/11/05 dadams</span>
<span class="linecomment">;;     icicle-mouse-save-then-kill: Redefined for Emacs 24 (they changed mouse-save-then-kill).</span>
<span class="linecomment">;;     icicle-candidate-set-retrieve-1: Call icicle-apropos-complete upon minibuffer setup.</span>
<span class="linecomment">;; 2010/11/04 dadams</span>
<span class="linecomment">;;     icicle-nb-of-candidate-in-Completions: Treat nil value the same as horizontal value.</span>
<span class="linecomment">;; 2010/10/24 dadams</span>
<span class="linecomment">;;     icicle-insert-string-from-variable, icicle(-mouse)-candidate-read-fn-invoke,</span>
<span class="linecomment">;;       icicle-narrow-candidates, icicle-save-predicate-to-variable:</span>
<span class="linecomment">;;         Use icicle-must-pass-after-match-predicate, not PREDICATE arg.</span>
<span class="linecomment">;; 2010/10/09 dadams</span>
<span class="linecomment">;;     icicle-minibuffer-help, icicle-help-string-completion, icicle-help-on-candidate (doc string):</span>
<span class="linecomment">;;       Updated for change toward modal cycling.  Fix for swank bindings and M-_ toggle.</span>
<span class="linecomment">;;     Applied renaming of icicle-cycling-respects-completion-mode to icicle-default-cycling-mode.</span>
<span class="linecomment">;;     icicle-toggle-search-replace-whole: Corrected toggle binding in doc string.</span>
<span class="linecomment">;; 2010/10/08 dadams</span>
<span class="linecomment">;;     icicle-narrow-candidates: Set icicle-current-completion-mode to apropos.</span>
<span class="linecomment">;;     icicle-apropos-complete-and-narrow:</span>
<span class="linecomment">;;       Protect regexp-quote by ensuring non-nil icicle-last-input.  Removed yesterday's change.</span>
<span class="linecomment">;; 2010/10/07 dadams</span>
<span class="linecomment">;;     icicle-next-TAB-completion-method:</span>
<span class="linecomment">;;       If icicle-current-TAB-method is nil, set to first one.  member -&gt; memq.</span>
<span class="linecomment">;;     Use icicle-current-TAB-method function, not variable, everywhere else.</span>
<span class="linecomment">;;     icicle-apropos-complete-and-narrow:</span>
<span class="linecomment">;;       If completion mode is prefix, then prefix-complete first.  Thx to Michael Heerdegen.</span>
<span class="linecomment">;; 2010/10/06 dadams</span>
<span class="linecomment">;;     icicle-next-TAB-completion-method:</span>
<span class="linecomment">;;       Use car of icicle-TAB-completion-methods, not basic, as default.  Thx to Michael Heerdegen.</span>
<span class="linecomment">;; 2010/10/04 dadams</span>
<span class="linecomment">;;     directory-sep-char -&gt; ?/ (It was removed from Emacs 24.)</span>
<span class="linecomment">;; 2010/09/26 dadams</span>
<span class="linecomment">;;     icicle-regexp-quote-input:</span>
<span class="linecomment">;;       Handle no mark in minibuffer.  Use end of prompt, not point-min.  Thx to Michael Heerdegen.</span>
<span class="linecomment">;;     icicle-column-wise-cand-nb: Bound NB (missing let binding).</span>
<span class="linecomment">;; 2010/06/18 dadams</span>
<span class="linecomment">;;     icicle-nb-of-candidate-in-Completions(-horiz), icicle-move-to-next-completion:</span>
<span class="linecomment">;;       Replace icicle-completions-format by icicle-completions-format-internal.</span>
<span class="linecomment">;;     icicle-scroll-Completions: Do nothing if *Completions* is not displayed.</span>
<span class="linecomment">;; 2010/06/16 dadams</span>
<span class="linecomment">;;     Added: icicle-col-wise-cand-nb.</span>
<span class="linecomment">;;     Renamed icicle-nb-of-candidate-in-Completions to icicle-nb-of-cand-in-Completions-horiz.</span>
<span class="linecomment">;;     Rewrote icicle-nb-of-candidate-in-Completions to handle vertical format also.</span>
<span class="linecomment">;;     icicle-candidate-set-save-selected-1:</span>
<span class="linecomment">;;       After setting BEG to next face chg, if BEG &gt; END then raise error.</span>
<span class="linecomment">;;       After setting END to previous fact chg, BEG &gt; END then swap.</span>
<span class="linecomment">;;       After extending, if BEG &gt; END then swap.</span>
<span class="linecomment">;; 2010/06/14 dadams</span>
<span class="linecomment">;;     icicle-narrow-candidates: Handle Emacs 23.2+: Use completing-read with read-file-name-internal.</span>
<span class="linecomment">;;     icicle-search-define-replacement:</span>
<span class="linecomment">;;       Wrap *-remove-Completions-window in save-selected-window.  Thx to M. Heerdegen.</span>
<span class="linecomment">;;     icicle-help-on-candidate-symbol: Show combined help for fns, vars, and faces (Emacs 22+).</span>
<span class="linecomment">;; 2010/06/11 dadams</span>
<span class="linecomment">;;     Added: icicle-make-directory.</span>
<span class="linecomment">;;     icicle-read+insert-file-name: Bind icicle-make-directory to C-c +.</span>
<span class="linecomment">;; 2010/06/08 dadams</span>
<span class="linecomment">;;     icicle-doremi-increment-max-candidates+: Plain C-u resets icicle-max-candidates to nil.</span>
<span class="linecomment">;; 2010/06/07 dadams</span>
<span class="linecomment">;;     icicle-exit-minibuffer: Do not fiddle with faces if not in minibuffer.  Thx to M. Heerdegen.</span>
<span class="linecomment">;;     icicle-prefix-complete-1:</span>
<span class="linecomment">;;       Sole completion case: Move removal of *Completions* before the top-level throw.</span>
<span class="linecomment">;; 2010/06/04 dadams</span>
<span class="linecomment">;;     Added: icicle-doremi-increment-max-candidates+.</span>
<span class="linecomment">;;     Renamed by adding +: icicle-doremi-increment-swank-(timeout|prefix-length).</span>
<span class="linecomment">;;     icicle-help-string-completion: Mention missing doremi toggle keys.</span>
<span class="linecomment">;;     icicle-doremi-zoom-Completions+: Show *Completions* if not shown.</span>
<span class="linecomment">;; 2010/05/15 dadams</span>
<span class="linecomment">;;     icicle-all-candidates-action-1: Bind *-minibuffer-message-ok-p, *-help-in-mode-line-flag to nil.</span>
<span class="linecomment">;; 2010/05/09 dadams</span>
<span class="linecomment">;;     Added: icicle-dispatch-M-_.</span>
<span class="linecomment">;;     Removed: icicle-dispatch-C-comma.</span>
<span class="linecomment">;;     icicle-help-string-completion:</span>
<span class="linecomment">;;       Removed extra arg to format (icicle-key-descriptions-use-&lt;&gt;-flag).  Corrected arg order.</span>
<span class="linecomment">;;       Updated to reflect binding changes.</span>
<span class="linecomment">;;     icicle-toggle-highlight-all-current: Focus to minibuffer before show msg.</span>
<span class="linecomment">;; 2010/05/04 dadams</span>
<span class="linecomment">;;     icicle-change-sort-order: Use save-selected-window.  Thx to Michael Heerdegen.</span>
<span class="linecomment">;;     icicle-apply-to-saved-candidate:</span>
<span class="linecomment">;;       Only call sit-for if current-message.  Added TYPE arg.  Thx to Michael H.</span>
<span class="linecomment">;; 2010/05/03 dadams</span>
<span class="linecomment">;;     icicle-toggle-remote-file-testing: Updated for Emacs 23.2+  Thx to Michael Albinus.</span>
<span class="linecomment">;; 2010/04/30 dadams</span>
<span class="linecomment">;;     icicle-(apropos|prefix)-complete-1: Run icicle-no-match-hook when no candidates.</span>
<span class="linecomment">;; 2010/04/28 dadams</span>
<span class="linecomment">;;     icicle-remove-cand-from-lists: Fix pred a la icicle-mctize-all.  Thx to M. Heerdegen.</span>
<span class="linecomment">;; 2010/04/27 dadams</span>
<span class="linecomment">;;     icicle-apply-to-saved-candidate: Added sit-for for non-C-u case, to see any msg displayed.</span>
<span class="linecomment">;;     icicle-help-on-candidate: Test value, not just boundp, of icicle-completing-keys-p.</span>
<span class="linecomment">;; 2010/04/26 dadams</span>
<span class="linecomment">;;     icicle-toggle-highlight-all-current:</span>
<span class="linecomment">;;       Save/restore cand nb.  Re-complete, rehighlight.  Go to current cand only if it is defined.</span>
<span class="linecomment">;; 2010/04/21 dadams</span>
<span class="linecomment">;;     Added: icicle-sit-for (Emacs 23+), so user input interrupts sit-for after C-u in minibuffer.</span>
<span class="linecomment">;; 2010/04/20 dadams</span>
<span class="linecomment">;;     Added: icicle-sort-by-directories-first.</span>
<span class="linecomment">;;     icicle-nb-of-candidate-in-Completions:</span>
<span class="linecomment">;;       Bind icicle-completions-format to nil (for calls to *-move-to-next-*).  Thx to M. Heerdegen.</span>
<span class="linecomment">;; 2010/04/13 dadams</span>
<span class="linecomment">;;     icicle-(apropos|prefix)-complete-1: Fixed recent file-name completion bugs.</span>
<span class="linecomment">;;       When icicle-whole-candidate-as-text-prop-p is t and icicle-expand-input-to-common-match-flag</span>
<span class="linecomment">;;         is nil, expand the input, unless it is a directory.</span>
<span class="linecomment">;;       Expand file-name input to the common match for the current candidate.</span>
<span class="linecomment">;; 2010/04/11 dadams</span>
<span class="linecomment">;;     icicle-(apropos|prefix)-complete-1: Fix last fix:</span>
<span class="linecomment">;;       Put whole-cand prop on sole candidate only if not a dir, and use icicle-expanded-common-match.</span>
<span class="linecomment">;; 2010/04/09 dadams</span>
<span class="linecomment">;;     icicle-(apropos|prefix)-complete-1: When sole candidate, set icicle-current-input to it.</span>
<span class="linecomment">;;       Needed, in order to get icicle-whole-candidate property when</span>
<span class="linecomment">;;       icicle-expand-input-to-common-match-flag is nil.  Thx to Michael Heerdegen.</span>
<span class="linecomment">;; 2010/03/13 dadams</span>
<span class="linecomment">;;     Added: icicle-toggle-show-multi-completion.</span>
<span class="linecomment">;; 2010/03/03 dadams</span>
<span class="linecomment">;;     Applied renamings: icicle-sort-function to icicle-sort-comparer</span>
<span class="linecomment">;;                        icicle-sort-functions-alist to icicle-sort-orders-alist,</span>
<span class="linecomment">;;                        icicle-alternative-sort-function to icicle-alternative-sort-comparer,</span>
<span class="linecomment">;;                        icicle-last-sort-function to icicle-last-sort-comparer.</span>
<span class="linecomment">;; 2010/03/02 dadams</span>
<span class="linecomment">;;     icicle-remove-Completions-window: Do nothing unless *Completions* is shown.</span>
<span class="linecomment">;;     icicle-delete-windows-on: Do nothing unless buffer is visible.</span>
<span class="linecomment">;;                               Do not delete frame if it is the only one.</span>
<span class="linecomment">;; 2010/01/12 dadams</span>
<span class="linecomment">;;     icicle-mouse-choose-completion, icicle-insert-string-at-point,</span>
<span class="linecomment">;;       icicle-mouse-candidate-action-1, icicle-mouse-remove-candidate,</span>
<span class="linecomment">;;       icicle-mouse-candidate-read-fn-invoke, icicle-Completions-mouse-3-menu,</span>
<span class="linecomment">;;       icicle-mouse-save/unsave-candidate:</span>
<span class="linecomment">;;         set-buffer -&gt; with-current-buffer.</span>
<span class="linecomment">;;     icicle-mouse-candidate-read-fn-invoke, icicle-Completions-mouse-3-menu,</span>
<span class="linecomment">;;       icicle-mouse-save/unsave-candidate:</span>
<span class="linecomment">;;         Removed unused local var BUFFER.</span>
<span class="linecomment">;;     icicle-mouse-choose-completion: Removed unused local var ORIG-BUFFER.</span>
<span class="linecomment">;; 2009/12/21 dadams</span>
<span class="linecomment">;;     icicle-narrow-candidates:</span>
<span class="linecomment">;;       Add fn to minibuffer-setup-hook to make the reference buffer be the new minibuffer.</span>
<span class="linecomment">;;     fset -&gt; defalias.</span>
<span class="linecomment">;; 2009/12/13 dadams</span>
<span class="linecomment">;;     icicle-change-sort-order: Add REVERSED to msg when reversed.</span>
<span class="linecomment">;; 2009/11/27 dadams</span>
<span class="linecomment">;;     Added: icicle-doremi-increment-swank-(prefix-length|timeout).</span>
<span class="linecomment">;;     *-next-TAB-completion-method, *-prefix-complete-1: Handle swank completions too.</span>
<span class="linecomment">;;     *-next-TAB-completion-method: Bind icicle-doremi-increment-swank-(prefix-length|timeout).</span>
<span class="linecomment">;; 2009/11/26 dadams</span>
<span class="linecomment">;;     icicle-next-TAB-completion-method: Do not set icicle-inhibit-sort-p to t for fuzzy.</span>
<span class="linecomment">;; 2009/11/25 dadams</span>
<span class="linecomment">;;     Added: icicle-completions-format, icicle-row-wise-cand-nb.</span>
<span class="linecomment">;;     icicle-move-to-next-completion: Handle completions laid out vertically.</span>
<span class="linecomment">;; 2009/11/07 dadams</span>
<span class="linecomment">;;     Renamed Icicles doremi cmds (added +).  Applied other doremi cmd renamings (added +).</span>
<span class="linecomment">;; 2009/10/25 dadams</span>
<span class="linecomment">;;     icicle-prefix-complete-1: When sole cand, use the candidate, but without any dir.</span>
<span class="linecomment">;;     Renamed: icicle-next-apropos-match-function to icicle-next-S-TAB-completion-method,</span>
<span class="linecomment">;;              icicle-toggle-fuzzy-completion to icicle-next-TAB-completion-method (rewrote).</span>
<span class="linecomment">;;     icicle-(prefix|apropos)-complete-1: Updated no/sole msgs per new completion methods.</span>
<span class="linecomment">;;     icicle-Completions-mouse-3-menu: Updated with the new command names.</span>
<span class="linecomment">;;     Updated icicle-help-string-completion.</span>
<span class="linecomment">;; 2009/10/24 dadams</span>
<span class="linecomment">;;     icicle-(apropos|prefix)-complete-1:</span>
<span class="linecomment">;;       Removed code treating empty dir via *-any-*-p and ("").</span>
<span class="linecomment">;;       When only one candidate, set *-last-completion-candidate to:</span>
<span class="linecomment">;;         If file-name completion:</span>
<span class="linecomment">;;           If empty input, the input; if dir candidate, input + /; else the sole candidate.</span>
<span class="linecomment">;;         Else the sole candidate.</span>
<span class="linecomment">;; 2009/10/22 dadams</span>
<span class="linecomment">;;     icicle-insert-input, icicle-candidate-action-1, icicle-keep-only-past-inputs,</span>
<span class="linecomment">;;       icicle-apropos-complete-and-(narrow|widen):</span>
<span class="linecomment">;;         Use icicle-file-name-directory, not file-name-directory.</span>
<span class="linecomment">;; 2009/10/21 dadams</span>
<span class="linecomment">;;     icicle-prefix-complete-1:</span>
<span class="linecomment">;;       For empty dir we use "" as pseudo-cand.  Ensure not "" when later test for / last char.</span>
<span class="linecomment">;; 2009/10/12 dadams</span>
<span class="linecomment">;;     Added: icicle-input-is-a-completion-p.</span>
<span class="linecomment">;;     icicle-minibuffer-complete-and-exit, icicle-input-is-a-completion-p:</span>
<span class="linecomment">;;       Use icicle-input-is-a-completion-p.</span>
<span class="linecomment">;;     icicle-prefix-complete-1:</span>
<span class="linecomment">;;       For file-name input: Set, and use, current input without substituting env vars.</span>
<span class="linecomment">;;                            When sole candidate ends in /, add a / to current input also.</span>
<span class="linecomment">;; 2009/09/26 dadams</span>
<span class="linecomment">;;     icicle-narrow-candidates(-with-predicate): Bind icicle-progressive-completing-p to t.</span>
<span class="linecomment">;; 2009/09/25 dadams</span>
<span class="linecomment">;;     icicle-prefix-complete-1, icicle-transform-sole-candidate:</span>
<span class="linecomment">;;       Use icicle-current-input, not (car icicle-completion-candidates).</span>
<span class="linecomment">;;       Don't set icicle-current-input to (car icicle-completion-candidates) if no-catch.</span>
<span class="linecomment">;; 2009/09/12 dadams</span>
<span class="linecomment">;;     icicle-delete-candidate-object: Message if no candidates, in non-ALLP case also.</span>
<span class="linecomment">;;     icicle-delete-candidate-object-1: Bind icicle-completion-candidates to save & restore it.</span>
<span class="linecomment">;;     icicle-candidate-action-1, icicle-remove-candidate-display-others,</span>
<span class="linecomment">;;       icicle-delete-candidate-object, icicle-help-on-candidate,</span>
<span class="linecomment">;;       icicle-candidate-read-fn-invoke:</span>
<span class="linecomment">;;         Bind icicle-help-in-mode-line-flag to nil, to avoid help-display delay.</span>
<span class="linecomment">;;     icicle-update-and-next: Do nothing if user hit another key and there are more candidates.</span>
<span class="linecomment">;; 2009/09/05 dadams</span>
<span class="linecomment">;;     icicle-narrow-candidates: Don't raise an error if no candidates.  E.g. C-~.</span>
<span class="linecomment">;;     Use backward and forward as the values of icicle-cycling-command prop for nav commands.</span>
<span class="linecomment">;;     Apply renaming of icicle-acting-on-next/prev (removed -p).</span>
<span class="linecomment">;;     icicle-successive-action: Bind it to value of icicle-cycling-command (nav direction).</span>
<span class="linecomment">;;     icicle-all-candidates-list-alt-action: Raise error if null icicle-completion-candidates.</span>
<span class="linecomment">;;     icicle-search-define-replacement: Prevent immediate incremental completion kicking in.</span>
<span class="linecomment">;;     icicle-(widen|narrow)-candidates(-with-predicate):</span>
<span class="linecomment">;;       Use literal text for (S-)TAB in error message, to avoid S-iso-*.</span>
<span class="linecomment">;; 2009/09/02 dadams</span>
<span class="linecomment">;;     icicle-(prefix|apropos)-complete-1, icicle-narrow-candidates(-with-predicate):</span>
<span class="linecomment">;;       Impose icicle-top-level-when-sole-completion-delay when *-flag is non-nil.</span>
<span class="linecomment">;; 2009/08/27 dadams</span>
<span class="linecomment">;;     icicle-goto/kill-failed-input: Do nothing if the overlay is nowhere.</span>
<span class="linecomment">;;     icicle-mouse-yank-secondary: If yank-secondary is defined, then pass prefix arg also.</span>
<span class="linecomment">;; 2009/08/23 dadams</span>
<span class="linecomment">;;     icicle-narrow-candidates-with-predicate: Added optional arg PREDICATE.</span>
<span class="linecomment">;; 2009/08/20 dadams</span>
<span class="linecomment">;;     icicle-successive-action: Don't call icicle-show-help-in-mode-line unless string arg.</span>
<span class="linecomment">;; 2009/08/11 dadams</span>
<span class="linecomment">;;     icicle-all-candidates-action-1: Added ALTP arg.  Use in call to *-candidate-action-1.</span>
<span class="linecomment">;;     icicle-all-candidates(-list)-alt-action: Use new ALTP arg in call with *-alt-action-fn.</span>
<span class="linecomment">;;     icicle-successive-action: Bind icicle-acting-on-next/prev-p around call to action fn.</span>
<span class="linecomment">;;     icicle(-mouse)-candidate-action-1:</span>
<span class="linecomment">;;       No longer bind icicle-* to selves.  You must do it in the action fn if you need it.</span>
<span class="linecomment">;;     icicle-help-string-completion: C-| -&gt; M-| for Replace all.</span>
<span class="linecomment">;;     icicle-change-history-variable: Protect with boundp: *-populate-interactive-history-flag.</span>
<span class="linecomment">;;     Wrap require of icicles-var.el in eval-and-compile.</span>
<span class="linecomment">;; 2009/08/01 dadams</span>
<span class="linecomment">;;     icicle-change-history-variable:</span>
<span class="linecomment">;;       Add icicle-interactive-history to choices only if *-populate-interactive-history-flag.</span>
<span class="linecomment">;; 2009/07/29 dadams</span>
<span class="linecomment">;;     icicle-other-history:</span>
<span class="linecomment">;;       Call icicle-use-interactive-command-history only if Emacs 23+ and non-nil history.</span>
<span class="linecomment">;; 2009/07/27 dadams</span>
<span class="linecomment">;;     icicle-help-string-completion: Mention icicle-other-history.</span>
<span class="linecomment">;; 2009/07/26 dadams</span>
<span class="linecomment">;;     Added: icicle-change-history-variable, icicle-other-history,</span>
<span class="linecomment">;;            icicle-use-interactive-command-history.</span>
<span class="linecomment">;;     icicle-history:</span>
<span class="linecomment">;;       Use icicle-cycling-p instead of get icicle-cycling-command, to avoid completion cmds.</span>
<span class="linecomment">;; 2009/07/02 dadams</span>
<span class="linecomment">;;     icicle-candidate-set-save-1: If icicle-get-alist-candidate-function returns nil, use CAND</span>
<span class="linecomment">;; 2009/06/26 dadams</span>
<span class="linecomment">;;     icicle-doremi-zoom-Completions, icicle-doremi-candidate-width-factor:</span>
<span class="linecomment">;;       Use new key-list options, doremi-...-keys (not -key).  You will need the latest DoReMi.</span>
<span class="linecomment">;; 2009/06/18 dadams</span>
<span class="linecomment">;;     doremi-buffer-font-size: Changed increment (doremi-*-key) bindings to =, -, M-=, M-i.</span>
<span class="linecomment">;;     icicle-help-string-completion: Added icicle-doremi-zoom-Completions.</span>
<span class="linecomment">;; 2009/06/17 dadams</span>
<span class="linecomment">;;     Added: icicle-doremi-zoom-Completions.</span>
<span class="linecomment">;;     icicle-doremi-candidate-width-factor: If no candidates, show message; don't use colors.</span>
<span class="linecomment">;; 2009/06/07 dadams</span>
<span class="linecomment">;;     icicle-get-alist-candidate -&gt; funcall icicle-get-alist-candidate-function.</span>
<span class="linecomment">;; 2009/05/27 dadams</span>
<span class="linecomment">;;     icicle-minibuffer-complete-and-exit:</span>
<span class="linecomment">;;       Don't exit if any completion is done, unless icicle-require-match-p is t.</span>
<span class="linecomment">;; 2009/05/22 dadams</span>
<span class="linecomment">;;     Require icicles-mac.el if load-library doesn't find it.</span>
<span class="linecomment">;; 2009/05/18 dadams</span>
<span class="linecomment">;;     icicle-candidate-set-save-selected-1: If empty inactive region and MOREP, raise error.</span>
<span class="linecomment">;; 2009/05/17 dadams</span>
<span class="linecomment">;;     icicle-toggle-C-for-actions: Use icicle-toggle-icicle-mode-twice, not icy-mode calls.</span>
<span class="linecomment">;; 2009/05/15 dadams</span>
<span class="linecomment">;;     icicle-(prefix|apropos)-complete-1: Fit minibuffer frame after inserting current input.</span>
<span class="linecomment">;; 2009/05/11 dadams</span>
<span class="linecomment">;;     icicle-upcase-if-ignore-case, icicle-next-apropos-match-function: Use icicle-upcase.</span>
<span class="linecomment">;; 2009/05/09 dadams</span>
<span class="linecomment">;;     Added: icicle-looking(-back)-at-anychar-regexp-p, icicle-(forward|backward)-char-dots,</span>
<span class="linecomment">;;            icicle-backward-delete-char-untabify-dots, icicle-delete-backward-char-dots,</span>
<span class="linecomment">;;            icicle-delete-char-dots, icicle-transpose-chars-dots. icicle-insert-dot(-command),</span>
<span class="linecomment">;;            icicle-anychar-regexp, icicle-toggle-dot, icicle-convert-dots.</span>
<span class="linecomment">;;     icicle-backward-delete-char-untabify, icicle-delete-backward-char, icicle-delete-char,</span>
<span class="linecomment">;;       icicle-transpose-chars: Handle dots.</span>
<span class="linecomment">;;     icicle-prefix-complete: Convert dots and set icicle-dot-string-internal.</span>
<span class="linecomment">;;     icicle-goto/kill-failed-input: Use overlay.</span>
<span class="linecomment">;;     icicle-help-string-completion, icicle-Completions-mouse-3-menu:</span>
<span class="linecomment">;;       Added dot toggling.  Changed binding for icicle-toggle-hiding-common-match.</span>
<span class="linecomment">;; 2009/05/08 dadams</span>
<span class="linecomment">;;     icicle-(prefix|apropos)-complete-1: Fixed typo introduced 2009-05-05.</span>
<span class="linecomment">;; 2009/05/07 dadams</span>
<span class="linecomment">;;     icicle-retrieve-(previous|last)-input: Call icicle-place-cursor with optional second arg.</span>
<span class="linecomment">;; 2009/05/05 dadams</span>
<span class="linecomment">;;     toggle-icicle-case-sensitivity: Treat read-buffer-completion-ignore-case also (Emacs 23).</span>
<span class="linecomment">;; 2009/05/03 dadams</span>
<span class="linecomment">;;     icicle-(prefix|apropos)-complete-1:</span>
<span class="linecomment">;;       Don't stop cycling if last command was an action (treat as if it was a cycling cmd).</span>
<span class="linecomment">;;     icicle-all-candidates(-list)(-alt)-action, icicle(-mouse)-candidate(-alt)-action,</span>
<span class="linecomment">;;       icicle-delete-candidate-object, icicle(-mouse)-help-on-candidate:</span>
<span class="linecomment">;;         Put property icicle-action-command.</span>
<span class="linecomment">;; 2009/05/02 dadams</span>
<span class="linecomment">;;     icicle-candidate-alt-action: Respect icicle-alternative-actions-alist.</span>
<span class="linecomment">;;     icicle-minibuffer-help: Corrected wrt alt action-for-all keys.</span>
<span class="linecomment">;; 2009/04/30 dadams</span>
<span class="linecomment">;;     icicle-next-(prefix|apropos)-candidate, icicle-(prefix|apropos)-complete-1,</span>
<span class="linecomment">;;       icicle-successive-action:</span>
<span class="linecomment">;;         Reset icicle-next-(apropos|prefix)-complete-cycles-p to nil, as appropriate.</span>
<span class="linecomment">;;     icicle-prefix-complete-1: Show mode-line help only at very end, and even after cycling.</span>
<span class="linecomment">;; 2009/04/29 dadams</span>
<span class="linecomment">;;     icicle-apply-to-saved-candidate:</span>
<span class="linecomment">;;       Pass no-error-no-msg to icicle-get-alist-candidate function.</span>
<span class="linecomment">;;       If icicle-get-alist-candidate finds no function, get function from car of entry.</span>
<span class="linecomment">;;     icicle-apropos-complete-and-(narrow|widen): Handle icicle-apropos-complete-no-display.</span>
<span class="linecomment">;; 2009/04/27 dadams</span>
<span class="linecomment">;;     icicle-(prefix|apropos)-complete-1:</span>
<span class="linecomment">;;       Set icicle-last-completion-command to icicle-*-complete-no-display if arg NO-DISPLAY.</span>
<span class="linecomment">;;     icicle-history: If icicle-last-completion-command is nil, call icicle-apropos-complete.</span>
<span class="linecomment">;; 2009/04/26 dadams</span>
<span class="linecomment">;;     Wrap load of icicles-mac in eval-when-compile, and use load-library, not require.</span>
<span class="linecomment">;;     Require icicles-opt before icicles-var (not important).</span>
<span class="linecomment">;; 2009/04/20 dadams</span>
<span class="linecomment">;;     Added: icicle-(previous|next)-candidate-per-mode-alt-action.</span>
<span class="linecomment">;; 2009/03/19 dadams</span>
<span class="linecomment">;;     mouse-choose-completion: Don't fset unless standard function is defined.</span>
<span class="linecomment">;;     Use when/unless instead of or for fset's. (cosmetic)</span>
<span class="linecomment">;; 2009/04/15 dadams</span>
<span class="linecomment">;;     Added: icicle-(next|previous)-candidate-per-mode-help.</span>
<span class="linecomment">;;     icicle-successive-action: Set mode only if known.  Leave it alone for per-mode functions.</span>
<span class="linecomment">;;     icicle-(apropos|prefix)-complete-1:</span>
<span class="linecomment">;;       Don't show help in mode-line when icicle-top-level-when-sole-completion-flag = t.</span>
<span class="linecomment">;; 2009/04/12 dadams</span>
<span class="linecomment">;;     icicle-successive-action: Inhibit help in mode line until after action is finished.</span>
<span class="linecomment">;; 2009/04/06 dadams</span>
<span class="linecomment">;;     icicle-(prefix|apropos)-complete-1, icicle-candidate-set-retrieve-1,</span>
<span class="linecomment">;;       icicle-keep-only-past-inputs:</span>
<span class="linecomment">;;         Call icicle-show-help-in-mode-line for completed input.</span>
<span class="linecomment">;;     icicle-(prefix|apropos)-complete-1:</span>
<span class="linecomment">;;       Don't highlight complete input or show help if icicle-*-complete-and-exit-p is bound.</span>
<span class="linecomment">;; 2009/04/04 dadams</span>
<span class="linecomment">;;     Renamed: icicle-sort-by-last-use to icicle-sort-by-last-use-as-input.</span>
<span class="linecomment">;;     icicle-change-sort-order: Purge any nil entries from icicle-sort-functions-alist.</span>
<span class="linecomment">;;     icicle-current-sort-functions: Respect icicle-buffer-name-sort-predicate.</span>
<span class="linecomment">;;     icicle-reverse-sort-order: Echo icicle-current-sort-order.</span>
<span class="linecomment">;; 2009/03/16 dadams</span>
<span class="linecomment">;;     icicle-candidate-action-1: Respect icicle-use-candidates-only-once-alt-p.</span>
<span class="linecomment">;; 2009/03/10 dadams</span>
<span class="linecomment">;;     icicle-remove-Completions-window: Wrap with condition-case, to ignore "Attempt..." error.</span>
<span class="linecomment">;; 2009/03/01 dadams</span>
<span class="linecomment">;;     Added: icicle-completing-read+insert, icicle-read+insert-file-name.</span>
<span class="linecomment">;; 2009/02/28 dadams</span>
<span class="linecomment">;;     No soft require of subr-21.el now, since provide replace-regexp-in-string for Emacs 20.</span>
<span class="linecomment">;; 2009/02/23 dadams</span>
<span class="linecomment">;;     icicle-mouse-choose-completion, icicle-(prefix|apropos)-complete-1,</span>
<span class="linecomment">;;       icicle-insert-completion, icicle-mouse-candidate-action-1, icicle-update-and-next,</span>
<span class="linecomment">;;       icicle-narrow-candidates(-with-predicate), icicle-keep-only-past-inputs,</span>
<span class="linecomment">;;       icicle-insert-input:</span>
<span class="linecomment">;;         Protect dir insertion with icicle-extra-candidates-dir-insert-p.</span>
<span class="linecomment">;;     icicle-choose-completion: Use icicle-extra-candidates-dir-insert-p to reset base-size=0.</span>
<span class="linecomment">;; 2009/02/20 dadams</span>
<span class="linecomment">;;     Added: icicle-sort-extra-candidates-first.</span>
<span class="linecomment">;;     icicle-candidate-action-1: Use function icicle-require-match-p, not variable.</span>
<span class="linecomment">;; 2009/02/17 dadams</span>
<span class="linecomment">;;     icicle-exit-minibuffer: Don't put nil face property on input.  Thx to Daniel Clemente.</span>
<span class="linecomment">;; 2009/02/04 dadams</span>
<span class="linecomment">;;     icicle-(prefix|apropos)-complete-1:</span>
<span class="linecomment">;;       Do not set icicle-current-input to icicle-last-input unless also icicle-cycling-p.</span>
<span class="linecomment">;;       Do not cycle unless also was already cycling or icicle-next-*-complete-cycles-p.</span>
<span class="linecomment">;;       Set icicle-next-*-complete-cycles-p, at end, to save whether input was completed some.</span>
<span class="linecomment">;; 2009/02/01 dadams</span>
<span class="linecomment">;;     Added: icicle-up-directory, icicle-replace-input-w-parent-dir.</span>
<span class="linecomment">;; 2009/01/24 dadams</span>
<span class="linecomment">;;     icicle-narrow-candidates(-with-predicate):</span>
<span class="linecomment">;;       Bind icicle-apropos-complete-match-fn to icicle-last-apropos-complete-match-fn.</span>
<span class="linecomment">;;     icicle-next-apropos-match-function: Save new value as *-last-apropos-complete-match-fn.</span>
<span class="linecomment">;; 2009/01/18 dadams</span>
<span class="linecomment">;;     icicle-(prefix|apropos)-complete-1:</span>
<span class="linecomment">;;       Don't set icicle-current-input to icicle-last-input if icicle-edit-update-p.</span>
<span class="linecomment">;; 2009/01/17 dadams</span>
<span class="linecomment">;;     icicle-next-apropos-match-function:</span>
<span class="linecomment">;;       Add Levenshtein distance in message: (1).</span>
<span class="linecomment">;;       Don't do icicle-complete-again-update - too slow.</span>
<span class="linecomment">;; 2009/01/14 dadams</span>
<span class="linecomment">;;     icicle-remove-cand-from-lists: Treat icicle-remove-dups-if-extras also.</span>
<span class="linecomment">;; 2009/01/13 dadams</span>
<span class="linecomment">;;     icicle-delete-windows-on: Delete frame even if it has a minibuffer, if it's not active.</span>
<span class="linecomment">;; 2008/12/26 dadams</span>
<span class="linecomment">;;     Added: icicle-widen-candidates, icicle-apropos-complete-and-widen.</span>
<span class="linecomment">;;       Added icicle-widen-candidates to icicle-Completions-mouse-3-menu.</span>
<span class="linecomment">;; 2008/12/25 dadams</span>
<span class="linecomment">;;     icicle-retrieve-previous-input: Corrected logic following cycling.</span>
<span class="linecomment">;;       Remember whether repeated C-l calls follow cycling: local var was-cycling-p.</span>
<span class="linecomment">;;       If so, then use current raw input for second C-l.  Otherwise use previous raw input.</span>
<span class="linecomment">;;       Use icicle-cycling-p instead of testing if this command is a cycling command.</span>
<span class="linecomment">;;       Handle case of "" raw input, which is never in list of saved raw inputs.</span>
<span class="linecomment">;;       Restore current raw input after re-completing.</span>
<span class="linecomment">;;     icicle-(prefix|apropos)-complete-1: Reset icicle-cycling-p (new var) to nil.</span>
<span class="linecomment">;;     icicle-regexp-quote-input: Reset icicle-expand-input-to-common-match-flag to nil.</span>
<span class="linecomment">;; 2008/12/22 dadams</span>
<span class="linecomment">;;     Added: icicle-regexp-quote-input.</span>
<span class="linecomment">;;       Added it to icicle-help-string-completion, icicle-Completions-mouse-3-menu.</span>
<span class="linecomment">;; 2008/12/21 dadams</span>
<span class="linecomment">;;     icicle-minibuffer-complete-and-exit:</span>
<span class="linecomment">;;       Rewrote to fit new Emacs 23 behavior.  Thx to Daniel Clemente.</span>
<span class="linecomment">;;         Test minibuffer-completion-confirm first, before we auto-complete.</span>
<span class="linecomment">;;         icicle-last-input -&gt; icicle-current-input (bug fix bc of call to *-no-display).</span>
<span class="linecomment">;;     icicle-prefix-complete-1: Bind free var word-complete-input.</span>
<span class="linecomment">;;     icicle-(apropos|prefix)-complete-1: No messages if NO-DISPLAY-P is 'no-msg.</span>
<span class="linecomment">;; 2008/12/20 dadams</span>
<span class="linecomment">;;     icicle-(apropos|prefix)-complete-1, icicle-narrow-candidates(-with-predicate):</span>
<span class="linecomment">;;       Expand file-name choice if thrown to icicle-read-top.</span>
<span class="linecomment">;; 2008/12/10 dadams</span>
<span class="linecomment">;;     icicle-(apropos|prefix)-complete-1: Don't pick up icicle-last-input unless also:</span>
<span class="linecomment">;;         (1) same completion mode, (2) icicle-completion-candidates is not nil.</span>
<span class="linecomment">;;     icicle-prefix-complete-1: If WORD-P, don't pick up icicle-last-input unless same command.</span>
<span class="linecomment">;;       Bind minibuffer-message-timeout to 0 during minibuffer-complete-word.</span>
<span class="linecomment">;;     icicle-apropos-complete-1:</span>
<span class="linecomment">;;       Typo in last cond clause: prefix -&gt; apropos, in i-apropos-completing-command.</span>
<span class="linecomment">;; 2008/12/06 dadams</span>
<span class="linecomment">;;     icicle-prefix-complete-1: Fixes for word completion.</span>
<span class="linecomment">;;       Don't initialize *-current-input to *-last-input if word-p and icicle-edit-update-p.</span>
<span class="linecomment">;;       Recompute candidates after word complete also if editing or didn't repeat last command.</span>
<span class="linecomment">;;       Cycle if last command was not a prefix completion and input doesn't end in `-'.</span>
<span class="linecomment">;; 2008/12/05 dadams</span>
<span class="linecomment">;;     Let repeated completion commands cycle.  Thx to Andrey Zhdanov for the suggestion.</span>
<span class="linecomment">;;       icicle-(apropos| prefix)-complete-1:</span>
<span class="linecomment">;;         Call icicle-next-candidate, not scroll, when repeated.  Special treatment for word.</span>
<span class="linecomment">;;       icicle-(apropos|prefix)-complete*:</span>
<span class="linecomment">;;         Put icicle(-apropos|-prefix)-cycling-command property on command symbols.</span>
<span class="linecomment">;; 2008/12/02 dadams</span>
<span class="linecomment">;;     icicle-minibuffer-complete-and-exit:</span>
<span class="linecomment">;;       Updated for Emacs 23's minibuffer-confirm-exit-commands.</span>
<span class="linecomment">;; 2008/11/29 dadams</span>
<span class="linecomment">;;     icicle-prefix-word-complete:</span>
<span class="linecomment">;;       Redefined to use (new) icicle-prefix-complete-1.</span>
<span class="linecomment">;;       Put property icicle-completing-command.</span>
<span class="linecomment">;;     icicle-prefix-complete-1:</span>
<span class="linecomment">;;       Useful now also for icicle-prefix-word-complete.  Added arg word-p.</span>
<span class="linecomment">;;     icicle-(prefix|apropos)-complete-1, icicle-switch-to-Completions-buf:</span>
<span class="linecomment">;;       Test property icicle-prefix-completing-command, not eq cmds.</span>
<span class="linecomment">;;     icicle-(prefix|apropos)(-word)-complete(-no-display):</span>
<span class="linecomment">;;       Put property icicle-(prefix|apropos)-completing-command.</span>
<span class="linecomment">;;     icicle-next-candidate-per-mode: Use case, not cond.</span>
<span class="linecomment">;;     icicle-end-of-line+: Bind inhibit-field-text-motion, call end-of-line to get past prompt.</span>
<span class="linecomment">;; 2008/11/18 dadams</span>
<span class="linecomment">;;     icicle-minibuffer-complete-and-exit: Allow exit if input matches a current candidate.</span>
<span class="linecomment">;;     icicle-exit-minibuffer: Remove all Icicles minibuffer faces, but only those.</span>
<span class="linecomment">;; 2008/11/14 dadams</span>
<span class="linecomment">;;     Added: icicle-toggle-hiding-common-match.</span>
<span class="linecomment">;;     icicle-help-string-completion, icicle-Completions-mouse-3-menu: Mention it.</span>
<span class="linecomment">;; 2008/11/10 dadams</span>
<span class="linecomment">;;     icicle-minibuffer-complete-and-exit:</span>
<span class="linecomment">;;       Use icicle-exit-minibuffer, not old-exit-minibuffer, so remove *Completions*.</span>
<span class="linecomment">;; 2008/11/09 dadams</span>
<span class="linecomment">;;     icicle-maybe-multi-completion-completing-p, icicle-transform-sole-candidate:</span>
<span class="linecomment">;;       Don't test icicle-list-join-string (always non-nil).</span>
<span class="linecomment">;; 2008/11/03 dadams</span>
<span class="linecomment">;;     icicle-(apropos|prefix)-complete-1: Added message Computing completion candidates...</span>
<span class="linecomment">;; 2008/11/02 dadams</span>
<span class="linecomment">;;     icicle-upcase-if-ignore-case: condition-case, to prevent error on bad chars (Emacs 20).</span>
<span class="linecomment">;; 2008/10/27 dadams</span>
<span class="linecomment">;;     Added: icicle-upcase-if-ignore-case.</span>
<span class="linecomment">;;     icicle-minibuffer-complete-and-exit, icicle-(prefix|apropos)-complete-1:</span>
<span class="linecomment">;;       Use icicle-upcase-if-ignore-case.</span>
<span class="linecomment">;; 2008/10/24 dadams</span>
<span class="linecomment">;;     icicle-minibuffer-complete-and-exit: If icicle-candidates-alist, then just filter it.</span>
<span class="linecomment">;; 2008/10/18 dadams</span>
<span class="linecomment">;;     Replaced customize-save-variable by funcall icicle-customize-save-variable-function.</span>
<span class="linecomment">;; 2008/10/14 dadams</span>
<span class="linecomment">;;     Added: icicle-help-string(-non)-completion.</span>
<span class="linecomment">;;     icicle-help-string-completion:</span>
<span class="linecomment">;;       Renamed from icicle-update-help-string in icicles-mode.el.</span>
<span class="linecomment">;;       Moved common part to icicles-var.el as icicle-general-help-string.</span>
<span class="linecomment">;;     Renamed: icicle-completion-help to icicle-minibuffer-help.</span>
<span class="linecomment">;;     icicle-minibuffer-help: If not completing, use icicle-help-string-non-completion.</span>
<span class="linecomment">;;                             Move Send an Icicles bug report to the bottom.</span>
<span class="linecomment">;; 2008/10/11 dadams</span>
<span class="linecomment">;;     icicle-(next|previous)-line: Fixed so it highlights also candidates in first column.</span>
<span class="linecomment">;;     icicle-kill-failed-input: Made it two-stage.  Renamed to icicle-goto/kill-failed-input.</span>
<span class="linecomment">;; 2008/10/10 dadams</span>
<span class="linecomment">;;     Added: icicle-(next|previous)-candidate-per-mode-action.</span>
<span class="linecomment">;; 2008/10/09 dadams</span>
<span class="linecomment">;;     Updated icicle-Completions-mouse-3-menu for C-&lt;.</span>
<span class="linecomment">;; 2008/10/08 dadams</span>
<span class="linecomment">;;     Added: icicle-candidate-set-retrieve-more, icicle-candidate-set-retrieve-1.</span>
<span class="linecomment">;;     icicle-candidate-set-retrieve: Use icicle-candidate-set-retrieve-1.</span>
<span class="linecomment">;;     icicle-insert-string-at-point:</span>
<span class="linecomment">;;       Use icicle-pre-minibuffer-buffer, not (cadr (buffer-list)).  Thx to Andrey Zhdanov.</span>
<span class="linecomment">;;     icicle-beginning-of-line+: Don't move into prompt.  Thx to Andrey Zhdanov.</span>
<span class="linecomment">;; 2008/10/06 dadams</span>
<span class="linecomment">;;     icicle-self-insert: Do self-insert-command if executing-kbd-macro.  Thx to Tomer Levin.</span>
<span class="linecomment">;; 2008/10/01 dadams</span>
<span class="linecomment">;;     icicle-completion-help: Use icicle-update-help-string, not icicle-completion-help-string.</span>
<span class="linecomment">;; 2008/09/30 dadams</span>
<span class="linecomment">;;     Renamed icicle-isearch-complete-1 to icicle-isearch-complete-past-string and moved it</span>
<span class="linecomment">;;       to icicles-fn.el.</span>
<span class="linecomment">;; 2008/09/20 dadams</span>
<span class="linecomment">;;     icicle-toggle-ignored-extensions: Append $ to each extension.</span>
<span class="linecomment">;;     icicle-dispatch-C-.: Use icicle-searching-p as the condition, not *-file-name-input-p.</span>
<span class="linecomment">;; 2008/09/14 dadams</span>
<span class="linecomment">;;     icicle-(minibuffer|apropos)-complete-and-exit: Set icicle-last-input to current input.</span>
<span class="linecomment">;;     icicle-minibuffer-complete-and-exit: Use apropos completion if that's the current mode.</span>
<span class="linecomment">;; 2008/09/13 dadams</span>
<span class="linecomment">;;     icicle-candidate-set-save-1: Save to fileset if zero prefix arg.</span>
<span class="linecomment">;;     icicle-candidate-set-retrieve: Retrieve also from a fileset.</span>
<span class="linecomment">;;                                    No default value for completing-read.</span>
<span class="linecomment">;;     Added: icicle-add-file-to-fileset.</span>
<span class="linecomment">;;     Renamed:</span>
<span class="linecomment">;;       icicle-candidate-set-save-to-cache-file to icicle-candidate-set-save-persistently,</span>
<span class="linecomment">;;       icicle-candidate-set-retrieve-from-cache-file to *-candidate-set-retrieve-persistent.</span>
<span class="linecomment">;;     icicle-candidate-set-save-persistently: Added arg FILESETP.</span>
<span class="linecomment">;;     icicle-add/update-saved-completion-set: No default value for completing-read.</span>
<span class="linecomment">;;     icicle-retrieve-candidates-from-set:</span>
<span class="linecomment">;;       Factored out code as icicle-get-candidates-from-saved-set - use it.  Don't return name.</span>
<span class="linecomment">;;     Moved to icicles-fn.el: icicle-readable-to-markers.</span>
<span class="linecomment">;; 2008/09/09 dadams</span>
<span class="linecomment">;;     icicle-candidate-set-save(-selected-1): Added NO-ERROR-P arg.</span>
<span class="linecomment">;;     icicle-candidate-set-save-selected: Call *-save-selected-1 with NO-ERROR-P arg.</span>
<span class="linecomment">;;     icicle-candidate-set-save-1: Raise error if set to save is empty and not NO-ERROR-P.</span>
<span class="linecomment">;; 2008/09/08 dadams</span>
<span class="linecomment">;;     icicle-apropos-complete-and-narrow:</span>
<span class="linecomment">;;       If currently prefix completing, escape current input before apropos completing.</span>
<span class="linecomment">;; 2008/09/07 dadams</span>
<span class="linecomment">;;     icicle-minibuffer-complete-and-exit:</span>
<span class="linecomment">;;       Use *-prefix-complete-no-display and *-display-candidates-in-Completions when needed.</span>
<span class="linecomment">;; 2008/09/06 dadams</span>
<span class="linecomment">;;     icicle-minibuffer-complete-and-exit: Rewrote, based on icicle-apropos-complete-and-exit.</span>
<span class="linecomment">;;     icicle-prefix-complete-1:</span>
<span class="linecomment">;;       Wrap most of single-candidate case in (boundp 'icicle-prefix-complete-and-exit-p).</span>
<span class="linecomment">;; 2008/09/04 dadams</span>
<span class="linecomment">;;     icicle-minibuffer-complete-and-exit: Temporary bug workaround.</span>
<span class="linecomment">;; 2008/08/31 dadams</span>
<span class="linecomment">;;     icicle-completion-help, icicle-pp-eval-expression-in-minibuffer,</span>
<span class="linecomment">;;       icicle-delete-candidate-object-1, icicle-apply-to-saved-candidate,</span>
<span class="linecomment">;;       icicle-toggle-highlight-all-current:</span>
<span class="linecomment">;;         Select window before call select-frame-set-input-focus.</span>
<span class="linecomment">;; 2008/08/29 dadams</span>
<span class="linecomment">;;     icicle-minibuffer-complete-and-exit: Update icicle-last-input to minibuffer contents.</span>
<span class="linecomment">;; 2008/08/28 dadams</span>
<span class="linecomment">;;     icicle-(apropos|prefix)-complete-1, icicle-narrow-candidates(-with-predicate):</span>
<span class="linecomment">;;       Update minibuffer-history-variable before throw result.</span>
<span class="linecomment">;;     icicle-help-on-candidate: Renamed alacarte-menu-items-alist to lacarte-menu-items-alist.</span>
<span class="linecomment">;; 2008/08/27 dadams</span>
<span class="linecomment">;;     icicle-kill-failed-input: Reverted mistaken change to use start of *Completions* (duh).</span>
<span class="linecomment">;; 2008/08/25 dadams</span>
<span class="linecomment">;;     icicle-minibuffer-complete-and-exit: Call icicle-prefix-complete-no-display with no-msg</span>
<span class="linecomment">;;       arg, instead of binding minibuffer-message-timeout to 0.</span>
<span class="linecomment">;;     icicle-(apropos|prefix)-complete-no-display: Added optional NO-MSG-P arg.</span>
<span class="linecomment">;; 2008/08/24 dadams</span>
<span class="linecomment">;;     icicle-minibuffer-complete-and-exit: Rewrote to not call original Emacs version.</span>
<span class="linecomment">;;     Use today's renamings from icicles-fn.el.</span>
<span class="linecomment">;;     icicle-raise-Completions-frame: Don't do anything unless one-window-p and option = t.</span>
<span class="linecomment">;;     icicle-choose-completion, *-kill-failed-input, *-current-completion-in-Completions:</span>
<span class="linecomment">;;       Check point wrt candidates start position, not bobp.</span>
<span class="linecomment">;;     icicle-current-completion-in-Completions:</span>
<span class="linecomment">;;       "No completion here" error after, not before, we set beg wrt mouse-face change.</span>
<span class="linecomment">;;     icicle-mouse-candidate-action-1: Call icicle-update-and-next if there are still cands.</span>
<span class="linecomment">;; 2008/08/21 dadams</span>
<span class="linecomment">;;     icicle-candidate-set-retrieve: If completing files, remove directory from candidates.</span>
<span class="linecomment">;; 2008/08/20 dadams</span>
<span class="linecomment">;;     icicle-mouse-candidate-action-1: Remove mouse-face property from choice.</span>
<span class="linecomment">;; 2008/08/19 dadams</span>
<span class="linecomment">;;     icicle-mouse-remove-candidate:</span>
<span class="linecomment">;;       Set icicle-last-completion-candidate.  Needed for *-remove-candidate-display-others.</span>
<span class="linecomment">;;     icicle-mouse-candidate-action-1: Removed unused vars: buffer, base-size.</span>
<span class="linecomment">;;     Added: icicle-delete-candidate-object-1, with explicit CAND arg and NO-DISPLAY-P option.</span>
<span class="linecomment">;;     icicle-delete-candidate-object: Added optional ALLP arg.</span>
<span class="linecomment">;;     icicle-delete-current-candidate-object: Added optional CAND arg.</span>
<span class="linecomment">;;     icicle-update-and-next: Don't try to move to cand in *Completions* if number not known.</span>
<span class="linecomment">;; 2008/08/18 dadams</span>
<span class="linecomment">;;     Added: icicle-remove-cand-from-lists, icicle-update-and-next.</span>
<span class="linecomment">;;     icicle-narrow-candidates-with-predicate: Update predicate correctly, with lexical-let.</span>
<span class="linecomment">;;     icicle-remove-candidate, icicle-delete(-current)-candidate-object:</span>
<span class="linecomment">;;       Removed stuff from doc string about removing all that match.</span>
<span class="linecomment">;;     icicle-delete-candidate-object, icicle-remove-candidate-display-others:</span>
<span class="linecomment">;;       Use icicle-remove-cand-from-lists (with mctized candidate) and icicle-update-and-next.</span>
<span class="linecomment">;;     icicle-delete-current-candidate-object: Changed first condition:</span>
<span class="linecomment">;;       (and icicle-candidates-alist (consp (car val))) to</span>
<span class="linecomment">;;       (or icicle-whole-candidate-as-text-prop-p icicle-candidates-alist)</span>
<span class="linecomment">;;     icicle-remove-candidate-display-others:</span>
<span class="linecomment">;;       Added optional ALLP arg.</span>
<span class="linecomment">;;       Reinitialize icicle-last-completion-candidate properly (as elsewhere).</span>
<span class="linecomment">;;     icicle(-mouse)-candidate-action-1: Use ALLP arg for *-remove-candidate-display-others.</span>
<span class="linecomment">;;     icicle-history: Don't set minibuffer-completion-predicate if it is nil.</span>
<span class="linecomment">;;     Use renamings from icicles-fn.el:</span>
<span class="linecomment">;;       icicle-complete-again-update, icicle-remove-if, icicle-put-whole-cand-prop.</span>
<span class="linecomment">;;     icicle-narrow-candidates: Do not bind icicle-whole-candidate-as-text-prop-p to nil.</span>
<span class="linecomment">;;     icicle-Completions-mouse-3-menu: Removed icicle-scroll-Completions from menu.</span>
<span class="linecomment">;; 2008/08/17 dadams</span>
<span class="linecomment">;;     icicle-narrow-candidates-with-predicate:</span>
<span class="linecomment">;;       (read-file-name|minibuffer-completion)-predicate: Removed `, in front.</span>
<span class="linecomment">;;     icicle-scroll-Completions: Added optional arg (for mouse wheel reversal).</span>
<span class="linecomment">;;     Added: icicle-scroll-Completions-up.</span>
<span class="linecomment">;; 2008/08/03 dadams</span>
<span class="linecomment">;;     Added: icicle-all-candidates-list(-alt)-action.</span>
<span class="linecomment">;;     icicle-all-candidates(-alt)-action:</span>
<span class="linecomment">;;       Act on saved candidates, if any.  Use list function, if normal is nil.</span>
<span class="linecomment">;;     icicle-all-candidates-action-1:</span>
<span class="linecomment">;;       Use icicle-candidate-action-1 (with cand arg (new)), not funcall, to apply fn-var.</span>
<span class="linecomment">;;       Act on saved candidates, if any.</span>
<span class="linecomment">;;       Do not call icicle-abort-recursive-edit at the end.</span>
<span class="linecomment">;;     icicle-candidate-action-1:</span>
<span class="linecomment">;;       Added optional CAND arg.</span>
<span class="linecomment">;;       Save stuff before funcall, in case FN-VAR does its own completion.</span>
<span class="linecomment">;;     icicle-mouse-candidate-action-1: Save stuff before funcall, in case FN-VAR completes.</span>
<span class="linecomment">;;     icicle-remove-candidate-display-others:</span>
<span class="linecomment">;;       When no candidates left, just call icicle-abort-recursive-edit.</span>
<span class="linecomment">;;     icicle-help-on-candidate: Added optional CAND arg.</span>
<span class="linecomment">;;     Renamed: icicle-candidate-alternative-action-fn to icicle-candidate-alt-action-fn.</span>
<span class="linecomment">;; 2008/07/27 dadams</span>
<span class="linecomment">;;     Added: icicle-sort-by-2nd-parts-alphabetically, icicle-maybe-multi-completion-*.</span>
<span class="linecomment">;;     icicle-current-sort-functions: Treat icicle-multi-completion-sort-predicate property.</span>
<span class="linecomment">;;     icicle-dispatch-C-comma: Call icicle-change-sort-order interactively (bug fix).</span>
<span class="linecomment">;;     icicle-reverse-sort-order: Display candidates, possibly in reverse order (bug fix).</span>
<span class="linecomment">;;     Moved from here to icicles-fn.el: icicle-transform-multi-completion.</span>
<span class="linecomment">;; 2008/07/16 dadams</span>
<span class="linecomment">;;     icicle-mouse-choose-completion: No error if minibuffer is not active.</span>
<span class="linecomment">;;     icicle-completion-help and top-level: Don't require help-mode.el unless Emacs 22+.</span>
<span class="linecomment">;;     eval-when-compile require's of fit-frame.el, linkd.el.</span>
<span class="linecomment">;; 2008/06/24 dadams</span>
<span class="linecomment">;;     icicle-narrow-candidates: Emacs &lt; 22: Set minibuffer-completing-file-name to nil.</span>
<span class="linecomment">;; 2008/06/21 dadams</span>
<span class="linecomment">;;     icicle(-mouse)-choose-completion, icicle-current-completion-in-Completions,</span>
<span class="linecomment">;;       icicle-mouse-candidate-action-1:</span>
<span class="linecomment">;;         buffer-substring-no-properties -&gt; buffer-substring.</span>
<span class="linecomment">;;         *NOTE*: THIS REVERSES A FIX made on 2008/02/03.  Dunno why that fix was made.</span>
<span class="linecomment">;; 2008/06/03 dadams</span>
<span class="linecomment">;;     Added: icicle-toggle-C-for-actions.</span>
<span class="linecomment">;;     icicle-Completions-mouse-3-menu: Added icicle-toggle-C-for-actions.</span>
<span class="linecomment">;; 2008/06/01 dadams</span>
<span class="linecomment">;;     Added: icicle-current-sort-functions.  Predicate tests various contexts using properties.</span>
<span class="linecomment">;;     icicle-change-sort-order: Use icicle-current-sort-functions.</span>
<span class="linecomment">;;     Added new sort order, defining function icicle-sort-special-candidates-first.</span>
<span class="linecomment">;; 2008/05/27 dadams</span>
<span class="linecomment">;;     icicle-isearch-complete-1: Use ring symbols, not their values.</span>
<span class="linecomment">;; 2008/05/25 dadams</span>
<span class="linecomment">;;     icicle-isearch-complete: Rewrote.  Handle minibuffer search.</span>
<span class="linecomment">;;     Added: icicle-isearch-complete-1, from stuff in icicle-isearch-complete.</span>
<span class="linecomment">;;            Treat string case. Allow recursive minibuffers.  Don't use icicle-isearch-resume.</span>
<span class="linecomment">;;     Removed: icicle-isearch-resume.</span>
<span class="linecomment">;; 2008/05/22 dadams</span>
<span class="linecomment">;;     icicle-toggle-case-sensitivity: Added prefix arg and update lighter.</span>
<span class="linecomment">;; 2008/05/03 dadams</span>
<span class="linecomment">;;     icicle-history: Bind minibuffer-completing-file-name to nil.</span>
<span class="linecomment">;; 2008/05/02 dadams</span>
<span class="linecomment">;;     (put 'icicle(-mouse)-yank-secondary 'delete-selection 'yank)</span>
<span class="linecomment">;; 2008/04/25 dadams</span>
<span class="linecomment">;;     Added: icicle-toggle-remote-file-testing.</span>
<span class="linecomment">;;     icicle-Completions-mouse-3-menu:</span>
<span class="linecomment">;;       Added icicle-toggle-remote-file-testing (C-^).</span>
<span class="linecomment">;;       icicle-toggle-ignored-space-prefix is now bound to M-_, not C-^.</span>
<span class="linecomment">;;     icicle-dispatch-C-^:</span>
<span class="linecomment">;;       icicle-toggle-remote-file-testing, not icicle-toggle-ignored-space-prefix.</span>
<span class="linecomment">;; 2008/04/18 dadams</span>
<span class="linecomment">;;     Renamed icicle-init-value-flag to icicle-default-value.</span>
<span class="linecomment">;; 2008/04/13 dadams</span>
<span class="linecomment">;;     icicle-pp-eval-expression-in-minibuffer: Treat prefix arg (added optional arg).</span>
<span class="linecomment">;;     icicle-apply-to-saved-candidate: Use icicle-pp-eval-expression, not pp-eval-expression.</span>
<span class="linecomment">;; 2008/04/02 dadams</span>
<span class="linecomment">;;     icicle-apropos-complete-and-narrow: No longer bind icicle-top-level-when-*-flag to t.</span>
<span class="linecomment">;; 2008/03/31 dadams</span>
<span class="linecomment">;;     icicle-apropos-complete-1: Allow for no completion type, for No completion msg.</span>
<span class="linecomment">;; 2008/03/29 dadams</span>
<span class="linecomment">;;     icicle-pp-eval-expression-in-minibuffer, icicle-narrow-candidates(-with-predicate):</span>
<span class="linecomment">;;       Removed binding of icicle-reminder-prompt-flag.</span>
<span class="linecomment">;; 2008/03/25 dadams</span>
<span class="linecomment">;;     icicle-(apropos|prefix)-complete-1:</span>
<span class="linecomment">;;       When not regexp-matching, use substitute-in-file-name on input, to convert \ to /.</span>
<span class="linecomment">;; 2008/03/23 dadams</span>
<span class="linecomment">;;     icicle-scroll-Completions: Respect and update icicle-scroll-Completions-backward-p.</span>
<span class="linecomment">;; 2008/03/19 dadams</span>
<span class="linecomment">;;     Added: icicle-insert-newline-in-minibuffer.</span>
<span class="linecomment">;;     Renamed i*-pp-eval-expression to *-in-minibuffer.  Calls new icicle-pp-eval-expression.</span>
<span class="linecomment">;; 2008/03/12 dadams</span>
<span class="linecomment">;;     icicle-completion-help: Add buttons for Commentary (icicles-doc*.el).</span>
<span class="linecomment">;; 2008/03/11 dadams</span>
<span class="linecomment">;;     icicle-add/update-saved-completion-set: Clarify error msg for unwritable file.</span>
<span class="linecomment">;; 2008/03/07 dadams</span>
<span class="linecomment">;;     Renamed icicle-abort-minibuffer-input to icicle-abort-recursive-edit.</span>
<span class="linecomment">;; 2008/03/02 dadams</span>
<span class="linecomment">;;     icicle-describe-file:</span>
<span class="linecomment">;;       Use default dir if arg is nil.  Error if no readable file. Removed save-excursion.</span>
<span class="linecomment">;; 2008/02/24 dadams</span>
<span class="linecomment">;;     icicle-apropos-complete-1: Use icicle-apropos-match-fns-alist lookup for message.</span>
<span class="linecomment">;;     icicle-Completions-mouse-3-menu: Added item for icicle-next-apropos-match-function.</span>
<span class="linecomment">;;     Added: icicle-next-apropos-match-function.</span>
<span class="linecomment">;; 2008/02/22 dadams</span>
<span class="linecomment">;;     icicle-retrieve-candidates-from-set:</span>
<span class="linecomment">;;       Like logic for alist in icicle-completing-read:</span>
<span class="linecomment">;;         Do icicle-readable-to-markers, then copy car and replace cdr with whole candidate.</span>
<span class="linecomment">;;       Removed RAW arg from call to find-file-noselect.</span>
<span class="linecomment">;;       Wrap Lisp read in condition-case.</span>
<span class="linecomment">;;     Renamed, added un: icicle(-mouse)-save-candidate to icicle(-mouse)-save/unsave-candidate.</span>
<span class="linecomment">;;     icicle-add/update-saved-completion-set: Changed default name to just add .icy.</span>
<span class="linecomment">;;     icicle-candidate-set-save-1, icicle-retrieve-candidates-from-set:</span>
<span class="linecomment">;;       Wrap write/read to/from cache file in condition-case.</span>
<span class="linecomment">;; 2008/02/16 dadams</span>
<span class="linecomment">;;     icicle-retrieve-candidates-from-set:</span>
<span class="linecomment">;;       Convert alist cands to propertized strings, using i*-put-alist-* and i*-readable-to-*.</span>
<span class="linecomment">;;       Set icicle-candidates-alist to reconstituted retrieved candidates.</span>
<span class="linecomment">;;     icicle-candidate-set-save-1:</span>
<span class="linecomment">;;       Convert to readable alist from propertized text, using i*-markers-to-*, i*-get-alist-*.</span>
<span class="linecomment">;;     Added: icicle-readable-to-markers, icicle-markers-to-readable.</span>
<span class="linecomment">;; 2008/02/15 dadams</span>
<span class="linecomment">;;     icicle-delete-windows-on:</span>
<span class="linecomment">;;       Enable recursive minibuffers for interactive use.  Thx to Simon Marshall.</span>
<span class="linecomment">;; 2008/02/14 dadams</span>
<span class="linecomment">;;     icicle-add/update-saved-completion-set: Remove properties from completion-set string.</span>
<span class="linecomment">;;     icicle-change-sort-order, icicle-retrieve-previous-input,</span>
<span class="linecomment">;;       icicle-insert-string-from-variable, icicle(-mouse)-candidate-read-fn-invoke,</span>
<span class="linecomment">;;       icicle-narrow-candidates, icicle-save-predicate-to-variable,</span>
<span class="linecomment">;;       icicle-candidate-set-retrieve, icicle-candidate-set-save-1,</span>
<span class="linecomment">;;       icicle-add/update-saved-completion-set, icicle-isearch-complete:</span>
<span class="linecomment">;;         Bind icicle-whole-candidate-as-text-prop-p to nil.</span>
<span class="linecomment">;; 2008/02/07 dadams</span>
<span class="linecomment">;;     icicle-delete-windows-on:</span>
<span class="linecomment">;;       Delete frame if one-window-p and not a standalone minibuffer.  Thx to Simon Marshall.</span>
<span class="linecomment">;; 2008/02/03 dadams</span>
<span class="linecomment">;;     icicle-mouse-choose-completion:</span>
<span class="linecomment">;;       Use absolute file name for choice and prepend dir in minibuffer.  Set base-size to 0.</span>
<span class="linecomment">;;       Don't remove *Completions* window.</span>
<span class="linecomment">;;     icicle-mouse-candidate-action-1: Use absolute file name for choice.</span>
<span class="linecomment">;;     icicle-mouse-choose-completion, icicle-mouse-candidate-action-1,</span>
<span class="linecomment">;;       icicle-current-completion-in-Completions: buffer-substring -&gt; *-no-properties.</span>
<span class="linecomment">;;     icicle-nb-of-candidate-in-Completions: Update last-nb before the test, in loop.</span>
<span class="linecomment">;;     icicle-prefix-complete-1: If input matches empty dir, use that dir as sole completion.</span>
<span class="linecomment">;;                               Don't remove *Completions* window until after minibuffer msg.</span>
<span class="linecomment">;;     icicle-move-to-next-completion: Use icicle-show-Completions-help-flag, not hard-coded 3.</span>
<span class="linecomment">;;     icicle-candidate-action-1: For require-match case also, remove cand and display others.</span>
<span class="linecomment">;;     Added: icicle-choose-completion.</span>
<span class="linecomment">;; 2008/01/30 dadams</span>
<span class="linecomment">;;     Added: icicle-yank-secondary, icicle-mouse-yank-secondary.</span>
<span class="linecomment">;; 2008/01/29 dadams</span>
<span class="linecomment">;;     icicle-(apropos|prefix)-complete-1:</span>
<span class="linecomment">;;       If icicle-incremental-completion-flag is explicit*, treat like incremental completion.</span>
<span class="linecomment">;;     icicle-apropos-complete-1:</span>
<span class="linecomment">;;       Distinguish non-existent dir from empty dir: icicle-apropos-any-file-name-candidates-p.</span>
<span class="linecomment">;;     icicle-highlight-input-noncompletion takes no args now.</span>
<span class="linecomment">;; 2008/01/13 dadams</span>
<span class="linecomment">;;     icicle-mouse-choose-completion, icicle-insert-completion,</span>
<span class="linecomment">;;       icicle-mouse-candidate-action-1, icicle-mouse-save-candidate:</span>
<span class="linecomment">;;         Do not use icicle-transform-multi-completion.</span>
<span class="linecomment">;;     icicle-retrieve-last-input, icicle-(apropos|prefix)-complete-1:</span>
<span class="linecomment">;;       Do not treat handle-switch-frame.</span>
<span class="linecomment">;;     icicle-mouse-candidate-action-1: Add back \n only if it has property icicle-keep-newline.</span>
<span class="linecomment">;;     icicle-mouse-remove-candidate: Removed cruft.</span>
<span class="linecomment">;;     icicle-remove-candidate-display-others: save-selected-window around Completions display.</span>
<span class="linecomment">;;     icicle-help-on-candidate: Rewrote.</span>
<span class="linecomment">;;       Do not use icicle-transform-multi-completion except where appropriate.</span>
<span class="linecomment">;;       Always use icicle-candidate-help-fn as first priority, if defined.</span>
<span class="linecomment">;;       Give help for prefix keys too during key completion.</span>
<span class="linecomment">;;     icicle-help-on-candidate-symbol: No call to icicle-candidate-help-fn here.</span>
<span class="linecomment">;; 2008/01/04 dadams</span>
<span class="linecomment">;;     icicle-mouse-choose-completion, icicle-current-completion-in-Completions:</span>
<span class="linecomment">;;       Add candidate's final \n only if it has property icicle-keep-newline.</span>
<span class="linecomment">;; 2007/01/01 dadams</span>
<span class="linecomment">;;     icicle-narrow-candidates: For Emacs &lt; 22, don't tack dir onto file name if absolute.</span>
<span class="linecomment">;;     icicle-candidate-set-save-1: Only redisplay candidates if *Completions* was displayed.</span>
<span class="linecomment">;; 2007/12/31 dadams</span>
<span class="linecomment">;;     icicle-mouse-choose-completion, icicle-mouse-candidate-action-1:</span>
<span class="linecomment">;;       Add back candidate's final \n that is missing mouse-face.</span>
<span class="linecomment">;;       Return icicle-candidate-nb, as doc string says.</span>
<span class="linecomment">;;     icicle-mouse-candidate-action-1: Delete current input from minibuffer before acting.</span>
<span class="linecomment">;;     Added: icicle-insert-list-join-string.</span>
<span class="linecomment">;;     Don't mention that C-o is bound to icicle-candidate-action.</span>
<span class="linecomment">;; 2007/12/26 dadams</span>
<span class="linecomment">;;     icicle-transform-multi-completion: Empty input after join string means empty part.</span>
<span class="linecomment">;;     icicle-help-on-candidate: Don't call icicle-raise-Completions-frame.</span>
<span class="linecomment">;; 2007/12/11 dadams</span>
<span class="linecomment">;;     icicle-change-sort-order:</span>
<span class="linecomment">;;       Don't include icicle-proxy-candidate-first-p unless icicle-add-proxy-candidates-flag.</span>
<span class="linecomment">;; 2007/12/10 dadams</span>
<span class="linecomment">;;     icicle-exit-minibuffer, icicle-kill-failed-input:</span>
<span class="linecomment">;;       Face icicle-input-completion-fail-lax also.</span>
<span class="linecomment">;; 2007/12/09 dadams</span>
<span class="linecomment">;;     icicle-exit-minibuffer: Remove icicle-input-completion-fail face from input.</span>
<span class="linecomment">;;     icicle-kill-failed-input: Rehighlight after deleting highlighted part.</span>
<span class="linecomment">;; 2007/12/08 dadams</span>
<span class="linecomment">;;     icicle-(next|previous)-line: Rewrote for variable number of columns.</span>
<span class="linecomment">;;     Added: , icicle-(beginning|end)-of-line+.</span>
<span class="linecomment">;; 2007/12/03 dadams</span>
<span class="linecomment">;;     Renamed longest common match (lcm) to expanded common match (ecm).</span>
<span class="linecomment">;; 2007/11/30 dadams</span>
<span class="linecomment">;;     icicle-help-on-candidate-symbol:</span>
<span class="linecomment">;;       Use fboundp, not functionp, to get describe-function for macros too.</span>
<span class="linecomment">;; 2007/11/28 dadams</span>
<span class="linecomment">;;     Renamed describe-bindings-in-map to describe-keymap.</span>
<span class="linecomment">;;     icicle-toggle-proxy-candidates: Swap values for saved and unsaved.</span>
<span class="linecomment">;; 2007/11/25 dadams</span>
<span class="linecomment">;;     Added: icicle-sort-by-abbrev-frequency.</span>
<span class="linecomment">;;     icicle-help-on-candidate-symbol: Treat command abbrevs via apropos for their commands.</span>
<span class="linecomment">;; 2007/11/24 dadams</span>
<span class="linecomment">;;     Added: icicle-sort-proxy-candidates-first.</span>
<span class="linecomment">;; 2007/11/22 dadams</span>
<span class="linecomment">;;     icicle-help-on-candidate-symbol: Use describe-bindings-in-map for a keymap.</span>
<span class="linecomment">;; 2007/11/17 dadams</span>
<span class="linecomment">;;     Added: icicle-toggle-proxy-candidates.  Added to icicle-Completions-mouse-3-menu also.</span>
<span class="linecomment">;; 2007/11/04 dadams</span>
<span class="linecomment">;;     Require subr-21 if replace-regexp-in-string is not defined.</span>
<span class="linecomment">;;     Require icicles-mac (don't wrap in eval-when-compile).</span>
<span class="linecomment">;;     icicle-Completions-mouse-3-menu: Added the latest toggle commands.</span>
<span class="linecomment">;; 2007/10/28 dadams</span>
<span class="linecomment">;;     Added: icicle-toggle-expand-to-common-match, icicle-toggle-search-replace-common-match.</span>
<span class="linecomment">;;     icicle-retrieve-last-input:</span>
<span class="linecomment">;;       Treat prefix completion like non-nil expand-input-to-common-match-flag.</span>
<span class="linecomment">;;     icicle-search-define-replacement: Bind icicle-update-input-hook to nil.</span>
<span class="linecomment">;;     icicle-toggle-highlight-all-current:</span>
<span class="linecomment">;;       Save icicle-candidate-nb around rehighlighting.</span>
<span class="linecomment">;;       Call icicle-search-action to get back to current candidate and highlight it.</span>
<span class="linecomment">;; 2007/10/27 dadams</span>
<span class="linecomment">;;     icicle-search-define-replacement:</span>
<span class="linecomment">;;       Bind candidates, input, and cand #, to restore after read replacement string.</span>
<span class="linecomment">;; 2007/10/26 dadams</span>
<span class="linecomment">;;     icicle-toggle-highlight-all-current: select-frame-set-input-focus to minibuffer.</span>
<span class="linecomment">;; 2007/10/22 dadams</span>
<span class="linecomment">;;     icicle-doremi-*: Use 4 arrows - one command hands off to the other.</span>
<span class="linecomment">;; 2007/10/21 dadams</span>
<span class="linecomment">;;     Added: icicle-doremi-inter-candidates-min-spaces, icicle-doremi-candidate-width-factor.</span>
<span class="linecomment">;; 2007/10/14 dadams</span>
<span class="linecomment">;;     Updated doc strings to reflect icicle-act-before-cycle-flag.</span>
<span class="linecomment">;; 2007/10/13 dadams</span>
<span class="linecomment">;;     icicle-candidate-action-1:</span>
<span class="linecomment">;;       Don't set icicle-last-completion-candidate if string.  Used for repeated C-next.</span>
<span class="linecomment">;;     icicle-remove-candidate-display-others, icicle-history:</span>
<span class="linecomment">;;       Treat also the case where cand is a string, not a consp.</span>
<span class="linecomment">;; 2007/10/07 dadams</span>
<span class="linecomment">;;     icicle-delete-candidate-object: Respect icicle-deletion-action-flag.</span>
<span class="linecomment">;; 2007/10/02 dadams</span>
<span class="linecomment">;;     icicle-(apropos|prefix)-complete-1:</span>
<span class="linecomment">;;       Apply abbreviate-file-name to file-name input.  Thx to Joonhwan Lee.</span>
<span class="linecomment">;;     icicle-toggle-fuzzy-completion: Removed soft require of fuzzy-match+.el.</span>
<span class="linecomment">;; 2007/09/29 dadams</span>
<span class="linecomment">;;     Added: icicle-toggle-fuzzy-completion.</span>
<span class="linecomment">;;     icicle-Completions-mouse-3-menu: Added icicle-toggle-fuzzy-completion.</span>
<span class="linecomment">;;     icicle-prefix-complete-1: Adjust feedback messages for fuzzy completion.</span>
<span class="linecomment">;;     icicle-(apropos|prefix)-complete-1:</span>
<span class="linecomment">;;       Only set icicle-default-directory if (icicle-file-name-input-p).</span>
<span class="linecomment">;; 2007/09/25 dadams</span>
<span class="linecomment">;;     icicle-narrow-candidates: Treat icicle-whole-candidate-as-text-prop-p case.</span>
<span class="linecomment">;;     icicle-kill-failed-input: Rewrote.</span>
<span class="linecomment">;; 2007/09/21 dadams</span>
<span class="linecomment">;;     icicle-narrow-candidates:</span>
<span class="linecomment">;;       Emacs&lt;22, file-name completion: Append directory to each candidate.  Thx Ian Perryman.</span>
<span class="linecomment">;; 2007/09/14 dadams</span>
<span class="linecomment">;;     icicle-(apropos|prefix)-complete-1, icicle-prefix-word-complete:</span>
<span class="linecomment">;;       Wrapped condition-case around candidates computation.</span>
<span class="linecomment">;; 2007/08/25 dadams</span>
<span class="linecomment">;;     icicle-mouse-candidate-action-1: Use buffer-substring, not buffer-*-no-properties.</span>
<span class="linecomment">;; 2007/08/21 dadams</span>
<span class="linecomment">;;     icicle-(apropos|prefix)-complete-1:</span>
<span class="linecomment">;;       Reset icicle-input-fail-pos.  Call icicle-highlight-input-noncompletion when no match.</span>
<span class="linecomment">;; 2007/08/19 dadams</span>
<span class="linecomment">;;     Added: icicle-kill-failed-input.</span>
<span class="linecomment">;; 2007/08/18 dadams</span>
<span class="linecomment">;;     icicle-previous-apropos-candidate-alt-action: Fixed typo.  Thx to Hadron Quark.</span>
<span class="linecomment">;; 2007/07/29 dadams</span>
<span class="linecomment">;;     icicle-apply-to-saved-candidate:</span>
<span class="linecomment">;;       Added use-icicle-candidates-alist-p arg.  Use icicle-get-alist-candidate.</span>
<span class="linecomment">;;       Report original error message also.</span>
<span class="linecomment">;;     icicle-candidate-action-1: Do nothing if icicle-last-completion-candidate not a string.</span>
<span class="linecomment">;; 2007/07/27 dadams</span>
<span class="linecomment">;;     icicle-successive-action:</span>
<span class="linecomment">;;       icicle-act-first-then-navigate-p -&gt; icicle-act-before-cycle-flag.</span>
<span class="linecomment">;; 2007/07/08 dadams</span>
<span class="linecomment">;;     icicle-all-candidates(-alt)-action:</span>
<span class="linecomment">;;       Use icicle-all-candidates(-alternative)-action-fn if defined.</span>
<span class="linecomment">;;     icicle-all-candidates-action-1: Added listp arg.</span>
<span class="linecomment">;;     icicle-mouse-save-candidate:</span>
<span class="linecomment">;;       Deactivate mark and redisplay completions, to show save highlight.</span>
<span class="linecomment">;; 2007/07/07 dadams</span>
<span class="linecomment">;;     Added: icicle-candidate-set-save(-more)-selected(-1),</span>
<span class="linecomment">;;            icicle-mouse-candidate-set-save(-more), icicle-mouse-save-then-kill.</span>
<span class="linecomment">;;     icicle-insert-completion: If no current completion, return to minibuffer anyway.</span>
<span class="linecomment">;;                               Update icicle-current-input with inserted candidate.</span>
<span class="linecomment">;;     icicle-Completions-mouse-3-menu:</span>
<span class="linecomment">;;       Added icicle-candidate-set-save-(more(-selected)|-selected).</span>
<span class="linecomment">;;     icicle-save-candidate: If no defined icicle-candidate-nb, then just display message.</span>
<span class="linecomment">;;     icicle-candidate-set-save(-more):</span>
<span class="linecomment">;;       Use icicle-candidate-set-save-1: Intern variable in standard obarray also.  Redisplay</span>
<span class="linecomment">;;       candidates and reselect minibuffer after reading file/var name.  Put eof error in</span>
<span class="linecomment">;;       minibuf.  Deactivate mark and redisplay completions.  Separate msg if reset.</span>
<span class="linecomment">;;     icicle-candidate-set-retrieve: If nothing to restore, don't restore nothing.</span>
<span class="linecomment">;;                                    If single candidate to restore, no *Completions* display.</span>
<span class="linecomment">;;                                    Else, update candidate display.</span>
<span class="linecomment">;; 2007/07/04 dadams</span>
<span class="linecomment">;;     icicle-Completions-mouse-3-menu: Added icicle-retrieve-(next|\previous)-input.</span>
<span class="linecomment">;; 2007/07/03 dadams</span>
<span class="linecomment">;;     Added: icicle-insert-history-element, icicle-retrieve-(next|previous)-input.</span>
<span class="linecomment">;;     icicle-history, icicle-keep-only-past-inputs:</span>
<span class="linecomment">;;       Don't retrieve last input unless following a cycling command.</span>
<span class="linecomment">;;     icicle-history:</span>
<span class="linecomment">;;       Do an initial icicle-apropos-complete unless icicle-last-completion-command.</span>
<span class="linecomment">;;       If not following a cycling command, call icicle-last-completion-command (don't set it</span>
<span class="linecomment">;;         to empty string) and reset icicle-last-input to nil.</span>
<span class="linecomment">;;     icicle-Completions-mouse-3-menu:</span>
<span class="linecomment">;;       icicle-retrieve-(next|previous)-input, not icicle-retrieve-last-input.</span>
<span class="linecomment">;;     Redefined next-history-element, instead of using defadvice.</span>
<span class="linecomment">;; 2007/06/23 dadams</span>
<span class="linecomment">;;     icicle-search-define-replacement: Use icicle-completing-read-history, not read-string.</span>
<span class="linecomment">;;                                       Use icicle-search-replacement-history.</span>
<span class="linecomment">;; 2007/06/17 dadams</span>
<span class="linecomment">;;     Added: icicle-toggle-WYSIWYG-Completions.</span>
<span class="linecomment">;;     icicle-switch-to-Completions-buf, icicle-move-to-next-completion:</span>
<span class="linecomment">;;       Added priority in call to icicle-place-overlay.</span>
<span class="linecomment">;; 2007/06/13 dadams</span>
<span class="linecomment">;;     Added: icicle-candidate-set-save-more.</span>
<span class="linecomment">;;     icicle-candidate-set-save: Unify messages.</span>
<span class="linecomment">;; 2007/06/12 dadams</span>
<span class="linecomment">;;     Added: icicle(-mouse)-save-candidate.</span>
<span class="linecomment">;;     icicle-candidate-set-retrieve: Insert candidate if there is only one retrieved.</span>
<span class="linecomment">;;     icicle-insert-completion: Added optional completion arg for non-interactive insertion.</span>
<span class="linecomment">;; 2007/06/10 dadams</span>
<span class="linecomment">;;     icicle-candidate-action-1: Treat icicle-require-match-p.</span>
<span class="linecomment">;; 2007/06/09 dadams</span>
<span class="linecomment">;;     icicle-candidate-action-1, icicle-mouse-candidate-action-1:</span>
<span class="linecomment">;;       Remove candidate if icicle-use-candidates-only-once-flag.</span>
<span class="linecomment">;;     icicle-candidate-action-1:</span>
<span class="linecomment">;;       Let users act on non-candidate too (arbitrary input).</span>
<span class="linecomment">;; 2007/06/07 dadams</span>
<span class="linecomment">;;     Renamed: icicle-function-history to icicle-function-name-history,</span>
<span class="linecomment">;;              icicle-variable-history to  icicle-variable-name-history.</span>
<span class="linecomment">;;     Use standard history variable if bound, else use Icicles history variable:</span>
<span class="linecomment">;;       function-name-history, variable-name-history</span>
<span class="linecomment">;; 2007/06/01 dadams</span>
<span class="linecomment">;;     icicle-erase-minibuffer-or-history-element, icicle-history:</span>
<span class="linecomment">;;       Ensure value of minibuffer-history-variable is bound.</span>
<span class="linecomment">;;     icicle-keep-only-past-inputs: If value of minibuffer-history-variable unbound, set nil.</span>
<span class="linecomment">;;     icicle-keep-only-past-inputs, icicle-history:</span>
<span class="linecomment">;;       Assume value of minibuffer-history-variable is a symbol - don't test that.</span>
<span class="linecomment">;; 2007/05/29 dadams</span>
<span class="linecomment">;;     icicle-insert-thing: Added optional arg no-replace-p.  Make sure end points are defined.</span>
<span class="linecomment">;;     icicle-insert-string-from-variable: Call icicle-insert-thing with no-replace-p arg.</span>
<span class="linecomment">;;     icicle-minibuffer-complete-and-exit: Set window-point to end of minibuffer.</span>
<span class="linecomment">;; 2007/05/15 dadams</span>
<span class="linecomment">;;     icicle-completion-help and top level:</span>
<span class="linecomment">;;       Soft require help-mode, not (featurep 'help-mode) and (fboundp 'define-button-type).</span>
<span class="linecomment">;; 2007/05/08 dadams</span>
<span class="linecomment">;;     Added: icicle-save-predicate-to-variable.</span>
<span class="linecomment">;;     icicle-Completions-mouse-3-menu: Added icicle-save-predicate-to-variable to menu.</span>
<span class="linecomment">;;     icicle-narrow-candidates-with-predicate: Quoted the predicate that is read.</span>
<span class="linecomment">;; 2007/05/07 dadams</span>
<span class="linecomment">;;     Added: icicle-narrow-candidates-with-predicate.</span>
<span class="linecomment">;;     icicle-Completions-mouse-3-menu: Added icicle-narrow-candidates-with-predicate (M-&).</span>
<span class="linecomment">;; 2007/05/06 dadams</span>
<span class="linecomment">;;     icicle-completion-help: Updated text at top of help buffer.</span>
<span class="linecomment">;;     icicle-customize-button: Capitalized group Icicles.</span>
<span class="linecomment">;;     Changed S-C- to C-S- and M-C- to C-M- in doc.</span>
<span class="linecomment">;; 2007/05/04 dadams</span>
<span class="linecomment">;;     icicle-candidate-read-fn-invoke, icicle-keep-only-*-inputs, icicle-retrieve-last-input,</span>
<span class="linecomment">;;     icicle-candidate-set-(retrieve|save|swap|difference|union|intersection|complement),</span>
<span class="linecomment">;;     icicle-all-candidates(-alt)-action, icicle-pp-eval-expression,</span>
<span class="linecomment">;;     icicle-insert-string-from-variable:</span>
<span class="linecomment">;;       Can call from *Completions* too, so can choose from mouse-3 menu during multi-command.</span>
<span class="linecomment">;;     icicle-candidate-set-save, icicle-retrieve-last-input, icicle-insert-*-from-variable:</span>
<span class="linecomment">;;       Select minibuffer window.</span>
<span class="linecomment">;;     icicle-toggle-case-sensitivity: Use setq-default for case-fold-search.</span>
<span class="linecomment">;;     icicle-switch-to-Completions-buf:</span>
<span class="linecomment">;;       Use read-file-name-completion-ignore-case, if completing file name.</span>
<span class="linecomment">;;     Added empty defvars for Emacs 22 standard vars, to quiet byte compiler.</span>
<span class="linecomment">;; 2007/05/02 dadams</span>
<span class="linecomment">;;     Added: icicle-dispatch-M-q, icicle-toggle-search-whole-word.</span>
<span class="linecomment">;;     Removed: icicle-dispatch-C-backquote.</span>
<span class="linecomment">;; 2007/04/29 dadams</span>
<span class="linecomment">;;     Added: icicle-sort-by-last-file-modification-time (sort order).</span>
<span class="linecomment">;; 2007/04/19 dadams</span>
<span class="linecomment">;;     icicle-successive-action: No longer interactive.  Moved barfing to calling commands.</span>
<span class="linecomment">;; 2007/04/17 dadams</span>
<span class="linecomment">;;     Added: icicle-dispatch-M-comma, icicle-search-define-replacement,</span>
<span class="linecomment">;;            icicle-dispatch-C-backquote, icicle-toggle-literal-replacement.</span>
<span class="linecomment">;; 2007/04/08 dadams</span>
<span class="linecomment">;;     Added: icicle-all-candidates-alt-action, icicle-all-candidates-action-1.</span>
<span class="linecomment">;;     icicle-candidate-action-1, icicle-delete-candidate-object, icicle-help-on-candidate,</span>
<span class="linecomment">;;     icicle-candidate-read-fn-invoke:</span>
<span class="linecomment">;;       Use negative test for prefix mode, not positive test for apropos.</span>
<span class="linecomment">;; 2007/04/07 dadams</span>
<span class="linecomment">;;     Added: icicle-successive-action, icicle-toggle-search-replace-whole,</span>
<span class="linecomment">;;            icicle-dispatch-C-comma.</span>
<span class="linecomment">;;     Defined navigating action and help functions using icicle-successive-action.</span>
<span class="linecomment">;; 2007/03/31 dadams</span>
<span class="linecomment">;;     icicle-(apropos|prefix)-complete-1:</span>
<span class="linecomment">;;       Accept sole completion if icicle-top-level-when-sole-completion-flag.</span>
<span class="linecomment">;;     icicle-narrow-candidates:</span>
<span class="linecomment">;;       Use read-file-name only for Emacs 22 or later.</span>
<span class="linecomment">;;       Accept sole completion only if icicle-top-level-when-sole-completion-flag.</span>
<span class="linecomment">;;     icicle-apropos-complete-and-narrow: Bind icicle-top-level-when-*-flag to t.</span>
<span class="linecomment">;; 2007/03/30 dadams</span>
<span class="linecomment">;;     icicle-narrow-candidates: Suppress sole-completion minibuffer-message.</span>
<span class="linecomment">;; 2007/03/23 dadams</span>
<span class="linecomment">;;     Added: icicle-apropos-complete-and-narrow.  Thx to Marian Schubert for the suggestion.</span>
<span class="linecomment">;;     icicle-narrow-candidates: Use icicle-require-match-p as REQUIRE-MATCH arg.</span>
<span class="linecomment">;; 2007/03/09 dadams</span>
<span class="linecomment">;;     Changed require to eval-when-compile require for icicles-mac.el.</span>
<span class="linecomment">;; 2007/03/08 dadams</span>
<span class="linecomment">;;     icicle-delete-current-candidate-object: Rewrote.</span>
<span class="linecomment">;;       Value of var can be an arbitrary alist, a list of strings, or a list of symbols.</span>
<span class="linecomment">;;     icicle-remove-candidate-display-others: Rewrote.</span>
<span class="linecomment">;;       Set icicle-last-completion-candidate based on icicle-candidate-nb or 0.</span>
<span class="linecomment">;;       Delete icicle-last-completion-candidate completely from icicle-completion-candidates.</span>
<span class="linecomment">;;       Update minibuffer-completion-predicate or read-file-name-predicate to remove for</span>
<span class="linecomment">;;         completion.</span>
<span class="linecomment">;;       Use with-current-buffer, not save-window-excursion, to visit *Completions*.</span>
<span class="linecomment">;;     icicle-remove-candidate:</span>
<span class="linecomment">;;       Updated doc string to mention Emacs &lt; 22 limitation for file-name candidates.</span>
<span class="linecomment">;;     icicle-retrieve-last-input: Don't reset icicle-last-completion-command if interactive.</span>
<span class="linecomment">;; 2007/03/07 dadams</span>
<span class="linecomment">;;     icicle-switch-to-Completions-buf, icicle-remove-candidate-display-others,</span>
<span class="linecomment">;;     icicle-help-on-candidate, icicle-delete-windows-on:</span>
<span class="linecomment">;;       Use 0, not t, as frame arg to get-buffer-window.</span>
<span class="linecomment">;; 2007/03/06 dadams</span>
<span class="linecomment">;;     icicle-remove-candidate: Don't reset to first cand matching input if no last cand.</span>
<span class="linecomment">;;     icicle-change(alternative)-sort-order, icicle-reverse-sort-order,</span>
<span class="linecomment">;;       icicle-keep-only-past-inputs, icicle-toggle-sorting: Respect icicle-inhibit-sort-p.</span>
<span class="linecomment">;;     Renamed icicle-get-current-candidate to icicle-get-alist-candidate.</span>
<span class="linecomment">;; 2007/03/04 dadams</span>
<span class="linecomment">;;     icicle-remove-candidate-display-others:</span>
<span class="linecomment">;;       Use local var for cand-nb, because icicle-candidate-nb can change.</span>
<span class="linecomment">;;       If no last candidate, reset to first candidate matching input.</span>
<span class="linecomment">;;       Allow for icicle-candidate-nb not being defined here:</span>
<span class="linecomment">;;         Use icicle-get-current-candidate.  Move to next completion only if cand-nb defined.</span>
<span class="linecomment">;;       Use mapconcat only when delete multi-completion.</span>
<span class="linecomment">;;       Move to next completion in *Completions* only if icicle-candidate-nb was defined.</span>
<span class="linecomment">;;       Insert default-directory too, if icicle-file-name-input-p.</span>
<span class="linecomment">;;     icicle-insert-completion: Insert default-directory too, if icicle-file-name-input-p.</span>
<span class="linecomment">;;     icicle-(apropos|prefix)-complete-1, icicle-keep-only-past-inputs:</span>
<span class="linecomment">;;       Don't include directory when set icicle-last-completion-candidate.</span>
<span class="linecomment">;;     icicle-(apropos|prefix)-complete-1:</span>
<span class="linecomment">;;       Don't include directory when testing input membership in icicle-completion-candidates.</span>
<span class="linecomment">;; 2007/03/02 dadams</span>
<span class="linecomment">;;     icicle-delete-candidate-object:</span>
<span class="linecomment">;;       Corrected message target (object).  Added sit-for.</span>
<span class="linecomment">;;       Use local var for cand-nb, because icicle-candidate-nb can change.</span>
<span class="linecomment">;; 2007/02/27 dadams</span>
<span class="linecomment">;;     icicle-delete-candidate-object: Added message.</span>
<span class="linecomment">;;     icicle-delete-current-candidate-object: Don't erase minibuffer or update completions.</span>
<span class="linecomment">;; 2007/02/24 dadams</span>
<span class="linecomment">;;     Added: icicle(-mouse)-candidate-alt-action, icicle(-mouse)-candidate-action-1,</span>
<span class="linecomment">;;            icicle-(previous|next)-(apropos|prefix)-candidate-alt-action,</span>
<span class="linecomment">;;            icicle(-mouse)-remove-candidate, icicle-remove-candidate-display-others,</span>
<span class="linecomment">;;            icicle-delete-candidate-object, icicle-delete-current-candidate-object.</span>
<span class="linecomment">;;     icicle-insert-completion:</span>
<span class="linecomment">;;       Invoke icicle-transform-multi-completion.  Use with-current-buffer (window-buffer).</span>
<span class="linecomment">;;     icicle(-mouse)-candidate-action: Use icicle(-mouse)-candidate-action-1.</span>
<span class="linecomment">;; 2007/02/06 dadams</span>
<span class="linecomment">;;     icicle-completion-help: Added extra help if completing and if multi-command.</span>
<span class="linecomment">;; 2007/02/03 dadams</span>
<span class="linecomment">;;     Renamed icicle-icompleting-p to icicle-edit-update-p.</span>
<span class="linecomment">;; 2007/02/02 dadams</span>
<span class="linecomment">;;     Updated doc strings of toggle commands to mention the minibuffer bindings.</span>
<span class="linecomment">;; 2007/01/29 dadams</span>
<span class="linecomment">;;     icicle-change-sort-order: Don't sort icicle-sort-functions-alist entries for use.</span>
<span class="linecomment">;;     Define alphabetical sort order using icicle-case-string-less-p, not string-lessp.</span>
<span class="linecomment">;; 2007/01/23 dadams</span>
<span class="linecomment">;;     Added: icicle-toggle-highlight-historical-candidates.</span>
<span class="linecomment">;;     icicle-Completions-mouse-3-menu: Updated wrt toggles.</span>
<span class="linecomment">;; 2007/01/21 dadams</span>
<span class="linecomment">;;     icicle-narrow-candidates:</span>
<span class="linecomment">;;       Use minibuffer-history-variable, not regexp-history.  Thx to Jost for bug report.</span>
<span class="linecomment">;; 2007/01/20 dadams</span>
<span class="linecomment">;;     icicle-mouse-(choose-completion|candidate-action):</span>
<span class="linecomment">;;       Use icicle-transform-multi-completion.</span>
<span class="linecomment">;; 2007/01/15 dadams</span>
<span class="linecomment">;;     Added: icicle-change(-alternative)-sort-order, icicle-reverse-sort-order,</span>
<span class="linecomment">;;            icicle-current-sort-order, icicle-sort-*.</span>
<span class="linecomment">;;     icicle-transform-sole-candidate: Set icicle-last-*-candidate to transformed cand.</span>
<span class="linecomment">;;     icicle-help-on-candidate: Use icicle-transform-multi-completion.</span>
<span class="linecomment">;;     icicle-Completions-mouse-3-menu: Updated with new sort-order bindings.</span>
<span class="linecomment">;;     icicle-toggle-alternative-sorting: Better message.</span>
<span class="linecomment">;;     Require icicles-mac.el.</span>
<span class="linecomment">;; 2007/01/14 dadams</span>
<span class="linecomment">;;     Added: icicle-transform-multi-completion, icicle-transform-sole-candidate.</span>
<span class="linecomment">;;     icicle-(apropos|prefix)-complete-1: Use icicle-transform-sole-candidate.  Thx Rubikitch.</span>
<span class="linecomment">;;     icicle-help-on-candidate(-symbol):</span>
<span class="linecomment">;;       Use with-current-buffer to describe mode in Emacs 20 also.</span>
<span class="linecomment">;; 2007/01/13 dadams</span>
<span class="linecomment">;;     Added: icicle-describe-file, icicle-help-on-candidate-symbol.</span>
<span class="linecomment">;;     icicle-help-on-candidate:</span>
<span class="linecomment">;;       If existing symbol, describe it.  Else if buffer or file, describe it.  Else, convert</span>
<span class="linecomment">;;         string to symbol and describe it.  Use icicle-help-on-candidate-symbol.</span>
<span class="linecomment">;; 2007/01/10 dadams</span>
<span class="linecomment">;;     icicle-switch-to/from-minibuffer: Error message if minibuffer is not active.</span>
<span class="linecomment">;; 2007/01/06 dadams</span>
<span class="linecomment">;;     icicle-(apropos|prefix)-complete-1:</span>
<span class="linecomment">;;       expand-file-name -&gt; icicle-abbreviate-or-expand-file-name.</span>
<span class="linecomment">;;     Added: icicle-toggle-~-for-home-dir.</span>
<span class="linecomment">;;     icicle-prefix-complete-1:</span>
<span class="linecomment">;;       Set icicle-default-directory only if also icicle-file-name-input-p.</span>
<span class="linecomment">;; 2007/01/01 dadams</span>
<span class="linecomment">;;     icicle-add/update-saved-completion-set: Use icicle-assoc-delete-all, not delete of assoc.</span>
<span class="linecomment">;;     Runtime, not compile-time, require of icicles-var.el, icicles-opt.el.</span>
<span class="linecomment">;; 2006/12/29 dadams</span>
<span class="linecomment">;;     icicle-insert-string-at-point:</span>
<span class="linecomment">;;       Treat nil return of alternative text-grabbing function.</span>
<span class="linecomment">;;       Echo the text-grabbing function when icicle-default-thing-insertion = alternatives.</span>
<span class="linecomment">;;     icicle-ensure-overriding-map-is-bound: Separate treatment for diff Emacs versions.</span>
<span class="linecomment">;; 2006/12/25 dadams</span>
<span class="linecomment">;;     icicle-keep-only-past-inputs:</span>
<span class="linecomment">;;       Added optional recent-first arg: Use icicle-most-recent-first-p as sort function.</span>
<span class="linecomment">;;       Update cands list if repeat.  Do not scroll Completions; update it unconditionally.</span>
<span class="linecomment">;;     Added: icicle-candidate-set-truncate.</span>
<span class="linecomment">;;     Uncommented describe-mode code, since RMS fixed Emacs bug that caused infinite recursion.</span>
<span class="linecomment">;; 2006/12/24 dadams</span>
<span class="linecomment">;;     Added: icicle-Completions-mouse-3-menu.</span>
<span class="linecomment">;; 2006/12/23 dadams</span>
<span class="linecomment">;;     icicle-narrow-candidates: Bug fix: Treat file-name completion with read-file-name.</span>
<span class="linecomment">;;     icicle-help-on-candidate: Call non-nil icicle-candidate-help-fn on candidate.</span>
<span class="linecomment">;; 2006/12/18 dadams</span>
<span class="linecomment">;;     icicle-apply-to-saved-candidate: Remove print arg and use current-prefix-arg instead.</span>
<span class="linecomment">;;     icicle-ensure-overriding-map-is-bound: Protect overriding-map-is-bound with boundp.</span>
<span class="linecomment">;;     Bug fix for Emacs 21: protect help-xref with get type button-category-symbol.</span>
<span class="linecomment">;; 2006/12/17 dadams</span>
<span class="linecomment">;;     Added: icicle(-mouse)-candidate-read-fn-invoke, icicle-apply-to-saved-candidate.</span>
<span class="linecomment">;; 2006/12/10 dadams</span>
<span class="linecomment">;;     Created from minibuffer and *Completions* commands in icicles-cmd.el.</span>
 
<span class="linecomment">;;;(@* "CHANGE LOG FOR `icicles-mode.el'")</span>
<span class="linecomment">;;</span>
<span class="linecomment">;; 2013/01/04 dadams</span>
<span class="linecomment">;;     icicle-define-minibuffer-maps: Undefine/restore M-s, M-r for minibuffer-local(-ns|-isearch)-map.</span>
<span class="linecomment">;; 2012/12/31 dadams</span>
<span class="linecomment">;;     Added: icicle-show-current-help-in-mode-line.</span>
<span class="linecomment">;;     icicle-mode: Add/remove icicle-show-current-help-in-mode-line to/from icicle-post-command-hook.</span>
<span class="linecomment">;;     icicle-minibuffer-setup: Initialize icicle-mode-line-help to nil.</span>
<span class="linecomment">;; 2012/12/02 dadams</span>
<span class="linecomment">;;     icicle-(redefine|restore)-std-completion-fns: Added icicle(-ORIG)-read-file-name-default.</span>
<span class="linecomment">;; 2012/12/01 dadams</span>
<span class="linecomment">;;     Added: icicle-bind-custom-completion-keys, icicle-restore-custom-completion-keys (factored out).</span>
<span class="linecomment">;;     Removed load of icicles-mac.el (icicle-kbd is now a function in icicles-opt.el).</span>
<span class="linecomment">;;     icicle-(bind|restore)-completion-keys: Use icicle-(bind|restore)-custom-completion-keys.</span>
<span class="linecomment">;;     Escape semicolon (;) in icicle-kbd string args (just for Emacs 20 M-; in Lisp code).</span>
<span class="linecomment">;; 2012/11/27 dadams</span>
<span class="linecomment">;;     icicle-define-icicle-maps: Added icicle-apropos-value to icicle-apropos-menu-map.</span>
<span class="linecomment">;; 2012/11/20 dadams</span>
<span class="linecomment">;;     icicle-bind-completion-keys: Fixed typos for M-; and C-M-; introduced by M-; or C-M-q, Emacs 20.</span>
<span class="linecomment">;; 2012/10/27 dadams</span>
<span class="linecomment">;;     Handle new BBDB version also.</span>
<span class="linecomment">;;     icicle-define-icicle-maps: Added icicle-toggle-annotation.</span>
<span class="linecomment">;;     icicle-(bind|restore)-completion-keys: Bind icicle-toggle-annotation to C-x C-a.</span>
<span class="linecomment">;;     icicle-mode: Added icicle-toggle-annotation to doc string.</span>
<span class="linecomment">;; 2012/10/05 dadams</span>
<span class="linecomment">;;     icicle-minibuffer-setup: Removed binding of icicle-default-directory (unused).</span>
<span class="linecomment">;; 2012/10/01 dadams</span>
<span class="linecomment">;;     icicle-define-icicle-maps: Protect dired-get-marked-files with condition-case.</span>
<span class="linecomment">;; 2012/09/15 dadams</span>
<span class="linecomment">;;     icicle-define-icicle-maps, icicle-(bind|restore)-other-keymap-keys:</span>
<span class="linecomment">;;       Added icicle-visit-marked-file-of-content(-other-window).</span>
<span class="linecomment">;; 2012/09/08 dadams</span>
<span class="linecomment">;;     icicle-define-icicle-maps: *-buffer-ignore-space-prefix-flag, not *-ignore-space-prefix-flag.</span>
<span class="linecomment">;;     icicle-(redefine|restore)-std-completion-fns: Added icicle(-ORIG)-read-buffer.</span>
<span class="linecomment">;; 2012/08/06 dadams</span>
<span class="linecomment">;;     Renamed old-* to icicle-ORIG-*:</span>
<span class="linecomment">;;       icicle-ORIG-bbdb-complete-name, icicle-ORIG-comint-dynamic-complete,</span>
<span class="linecomment">;;       icicle-ORIG-comint-dynamic-complete-filename,</span>
<span class="linecomment">;;       icicle-ORIG-comint-replace-by-expanded-filename,</span>
<span class="linecomment">;;       icicle-ORIG-dired-read-shell-command, icicle-ORIG-ess-complete-object-name,</span>
<span class="linecomment">;;       icicle-ORIG-gud-gdb-complete-command, icicle-ORIG-read-file-name,</span>
<span class="linecomment">;;       icicle-ORIG-read-shell-command, icicle-ORIG-crm-local-completion-map,</span>
<span class="linecomment">;;       icicle-ORIG-crm-local-must-match-map.</span>
<span class="linecomment">;;     icicle-(redefine|restore)-standard-(functions|widgets|completion-fns):</span>
<span class="linecomment">;;       Use new prefix, icicle-ORIG-, not old-.</span>
<span class="linecomment">;;     icicle-(redefine|restore)-std-completion-fns:</span>
<span class="linecomment">;;       Applied renaming to new: icicle-orig-read-file-name-fn.</span>
<span class="linecomment">;;     Top level aliasing to save originals: Use new prefix, icicle-ORIG-, not old-.</span>
<span class="linecomment">;; 2012/08/03 dadams</span>
<span class="linecomment">;;     icicle-(un)bind-key-completion-keys-(for-map-var|in-keymaps-from): Added optional arg KEYS.</span>
<span class="linecomment">;;     icicle-(bind|restore)-other-keymap-keys:</span>
<span class="linecomment">;;       (Un-)bind icicle-key-complete-keys-for-minibuffer in minibuffer-local-map, for key completion.</span>
<span class="linecomment">;; 2012/07/31 dadams</span>
<span class="linecomment">;;     Added: icicle-(redefine|restore)-standard-widgets.</span>
<span class="linecomment">;;     icicle-mode: Added call to icicle-(redefine|restore)-standard-widgets.</span>
<span class="linecomment">;; 2012/07/13 dadams</span>
<span class="linecomment">;;     icicle-(bind|restore)-completion-keys: Bind icicle-toggle-network-drives-as-remote to C-x :.</span>
<span class="linecomment">;; 2012/07/10 dadams</span>
<span class="linecomment">;;     icicle-define-minibuffer-maps, icicle-(bind|restore)-completion-keys:</span>
<span class="linecomment">;;       Bind C-M-pause in all minibuffer maps, not just completion maps.</span>
<span class="linecomment">;; 2012/07/08 dadams</span>
<span class="linecomment">;;     Defalias old-comint-completion-at-point for Emacs 24+. Thx to Christopher Schmidt, M. Heerdegen.</span>
<span class="linecomment">;; 2012/06/08 dadams</span>
<span class="linecomment">;;     icicle-define-minibuffer-maps: fboundp of icicle-yank-secondary, not yank-secondary.</span>
<span class="linecomment">;; 2012/05/25 dadams</span>
<span class="linecomment">;;     Added icicle-dired-insert-as-subdir to menu icicle-dired-dir-menu-map.</span>
<span class="linecomment">;; 2012/05/15 dadams</span>
<span class="linecomment">;;     Added to and reorg'd Search, Go To menus.  Added submenus Bookmarks & Definitions.</span>
<span class="linecomment">;;       Added to menus: icicle-search-define-replacement, icicle-search-w-isearch-string,</span>
<span class="linecomment">;;         icicle-search-(overlay|char), icicle-imenu-*, icicle-search-THINGs, icicle-search-*-marked,</span>
<span class="linecomment">;;         icicle-search-*-bookmark.</span>
<span class="linecomment">;;     icicle-dired-multiple-menu-map: Added icicle-dired-save-marked-to-variable.</span>
<span class="linecomment">;; 2012/05/13 dadams</span>
<span class="linecomment">;;     Added: icicle-dired-recursive-marked-menu-map.  Put *-recursive commands on it.</span>
<span class="linecomment">;;     Bind *recursive commands to same keys as non-recursive, but on M-+ prefix key.</span>
<span class="linecomment">;; 2012/05/10 dadams</span>
<span class="linecomment">;;     Corrected guard condition for diredp-menu-bar-recursive-marked-menu.</span>
<span class="linecomment">;; 2012/05/07 dadams</span>
<span class="linecomment">;;     Applied renaming of icicle-search-dired-marked to icicle-search-dired-marked-recursive.</span>
<span class="linecomment">;; 2012/05/06 dadams</span>
<span class="linecomment">;;     Put icicle-search-dired-marked also on diredp-menu-bar-recursive-marked-menu, if available.</span>
<span class="linecomment">;; 2012/04/23 dadams</span>
<span class="linecomment">;;     Enable icicle-search-dired-marked in icicle-dired-multiple-menu-map only if Dired+ is loaded.</span>
<span class="linecomment">;;     Bind icicle-search-dired-marked in dired-mode-map only if Dired+ is loaded.</span>
<span class="linecomment">;;     Removed :enable conditions for icicle-bookmark+-menu-map - it is always in bookmark-bmenu-mode.</span>
<span class="linecomment">;; 2012/04/21 dadams</span>
<span class="linecomment">;;     (put 'icicle-mode 'custom-mode-group 'Icicles), so `C-u customize-mode icicle-mode' works.</span>
<span class="linecomment">;;     icicle-mode: Change :group to Icicles from Icicles-Miscellaneous.</span>
<span class="linecomment">;;                  Updated list of top-level commands in doc string, and moved it to the end.</span>
<span class="linecomment">;; 2012/04/09 dadams</span>
<span class="linecomment">;;     Fixed typo: double single-quotes in autoload cookie.</span>
<span class="linecomment">;; 2012/04/08 dadams</span>
<span class="linecomment">;;     Make autoload cookies for commands load icicles[.el] explicitly.</span>
<span class="linecomment">;;     Removed autoload cookie from icicle-bind-isearch-keys (non-interactive).</span>
<span class="linecomment">;; 2012/04/06 dadams</span>
<span class="linecomment">;;     Replaced C-? with M-? as the binding for icicle-minibuffer-help (works for terminals also).</span>
<span class="linecomment">;; 2012/04/04 dadams</span>
<span class="linecomment">;;     Added to menus: *-w-*-satisfying, icicle-apropos-options-of-type.  Changed item names a bit.</span>
<span class="linecomment">;; 2012/04/02 dadams</span>
<span class="linecomment">;;     icicle-mode: Propertize ON / OFF.</span>
<span class="linecomment">;; 2012/03/01 dadams</span>
<span class="linecomment">;;     icicle-unbind-key-completion-keys-in-keymaps-from: Corrected last fix: follow symbol first.</span>
<span class="linecomment">;; 2012/02/29 dadams</span>
<span class="linecomment">;;     icicle-unbind-key-completion-keys-in-keymaps-from: Skip autoload keymaps.</span>
<span class="linecomment">;; 2012/02/28 dadams</span>
<span class="linecomment">;;     icicle-unbind-key-completion-keys-in-keymaps-from: Handle symbol keymaps: follow until a list.</span>
<span class="linecomment">;; 2012/02/26 dadams</span>
<span class="linecomment">;;     Update to reflect Bookmark+ changes (bindings etc.).</span>
<span class="linecomment">;;       icicle-bookmark-menu-map: Major changes.</span>
<span class="linecomment">;;         Added items:</span>
<span class="linecomment">;;          *-bookmark-(file-this-dir|autofile)-(all|some)-tags(-regexp),</span>
<span class="linecomment">;;          *-bookmark-(temporary|autofile), *-bookmark(-autonamed)(-this-buffer),</span>
<span class="linecomment">;;          *-bookmark-specific-(files|buffers), *-bookmark-(image|bookmark-file).</span>
<span class="linecomment">;;         For icicle-touche-pas-aux-menus-flag case also: put bookmarks items on a submenu now.</span>
<span class="linecomment">;;         Share the submenus - write only once.</span>
<span class="linecomment">;;         Reuse (copy of) bmkp-* menu items, so Icicles cmds replace similar Bookmark+ cmds, in place.</span>
<span class="linecomment">;;     icicle-define-icicle-maps: Reordered.</span>
<span class="linecomment">;; 2012/02/11 dadams</span>
<span class="linecomment">;;     Bind icicle-toggle-expand-to-common-match to C-", not C-;.</span>
<span class="linecomment">;;     Bind icicle-cycle-expand-to-common-match (new) to C-M-".</span>
<span class="linecomment">;;     Doc strings: Applied renamings and key changes.</span>
<span class="linecomment">;; 2012/01/31 dadams</span>
<span class="linecomment">;;     icicle-define-icicle-maps: Added: icicle-cycle-image-file-thumbnail.</span>
<span class="linecomment">;;                                Corrected typo for icicle-toggle-completions-format.</span>
<span class="linecomment">;; 2012/01/24 dadams</span>
<span class="linecomment">;;     icicle-mode doc string: Added icicle-toggle-completions-format.</span>
<span class="linecomment">;;     icicle-define-icicle-maps: Add icicle-toggle-completions-format to menus.</span>
<span class="linecomment">;;     icicle-(bind|restore)-completion-keys: Bind icicle-toggle-completions-format to C-M-^.</span>
<span class="linecomment">;; 2012/01/20 dadams</span>
<span class="linecomment">;;     Bind icicle-apropos-complete-and-exit in all completion maps, not just must-match map.</span>
<span class="linecomment">;;     Apply renaming of icicle-toggle-incremental-completion to *-cycle-*.</span>
<span class="linecomment">;; 2011/10/21 dadams</span>
<span class="linecomment">;;     icicle-(bind|restore)-completion-keys: Typo: M-g -&gt; M-q, for icicle-dispatch-M-q.</span>
<span class="linecomment">;; 2011/10/08 dadams</span>
<span class="linecomment">;;     eval-when-compile icicles-mac.el.</span>
<span class="linecomment">;;     icicle-define-minibuffer-maps: Use new option icicle-candidate-help-keys.</span>
<span class="linecomment">;;     icicle-(bind|restore)-completion-keys: Use new options icicle-candidate-(action|help)-keys.</span>
<span class="linecomment">;;     icicle-bind-other-keymap-keys, icicle-(un)bind-isearch-keys, icicle-restore-other-keymap-keys,</span>
<span class="linecomment">;;       icicle-define-minibuffer-maps, icicle-(bind|restore)-completion-keys:</span>
<span class="linecomment">;;         Use icicle-kbd (and do not use kbd).</span>
<span class="linecomment">;;     icicle-define-icicle-maps: Do not include icicle-toggle-angle-brackets for Emacs 20.</span>
<span class="linecomment">;; 2011/10/04 dadams</span>
<span class="linecomment">;;     icicle-define-icicle-maps: Put all search commands on icicle-search-key-prefix.</span>
<span class="linecomment">;;     icicle-(bind|restore)-other-keymap-keys: Mode-specific search cmds are on M-s M-s m, not M-s i.</span>
<span class="linecomment">;; 2011/09/08 dadams</span>
<span class="linecomment">;;     icicle-bind-isearch-keys: Replace lambda with icicle-search-w-isearch-string.</span>
<span class="linecomment">;; 2011/09/06 dadams</span>
<span class="linecomment">;;     icicle-define-minibuffer-maps, icicle-(bind|restore)-completion-keys:</span>
<span class="linecomment">;;       Bind icicle-resolve-file-name to C-x C-f.</span>
<span class="linecomment">;; 2011/09/05 dadams</span>
<span class="linecomment">;;     icicle-mode: Update doc string: icicle-toggle-hiding-non-matching-lines.</span>
<span class="linecomment">;;     icicle-define-icicle-maps: Added icicle-toggle-hiding-non-matching-lines to menus.</span>
<span class="linecomment">;;     icicle-bind-completion-keys: Bind C-x . to icicle-dispatch-C-x. (new).</span>
<span class="linecomment">;; 2011/09/02 dadams</span>
<span class="linecomment">;;     icicle-(bind|restore)-other-keymap-keys:</span>
<span class="linecomment">;;       Test fn memq in icicle-functions-to-redefine, not just non-nil icicle-functions-to-redefine.</span>
<span class="linecomment">;;       Removed remap/unmap of Info commands.</span>
<span class="linecomment">;;       Restore completion-at-point, not comint-dynamic-complete, for Emacs 24.</span>
<span class="linecomment">;;     At end: defalias old-Info commands (instead of remapping in icicle-(bind|restore)-*-keys).</span>
<span class="linecomment">;; 2011/08/13 dadams</span>
<span class="linecomment">;;     Bound icicle-toggle-search-complementing-domain to C-M-~ and added to menus.</span>
<span class="linecomment">;; 2011/08/12 dadams</span>
<span class="linecomment">;;     icicle-define-minibuffer-maps: Removed code that binds C-x m, C-backspace, C-c +.</span>
<span class="linecomment">;;       Do that in icicle-bind-file-candidate-keys now.</span>
<span class="linecomment">;; 2011/08/07 dadams</span>
<span class="linecomment">;;     icicle-mode: Updated doc string for bookmark commands.</span>
<span class="linecomment">;; 2011/05/22 dadams</span>
<span class="linecomment">;;     Added defvars for free vars to quiet byte compiler.</span>
<span class="linecomment">;; 2011/05/07 dadams</span>
<span class="linecomment">;;     Changed key for icicle-regexp-quote-input from C-M-; to M-% everywhere.</span>
<span class="linecomment">;;     Bound icicle-toggle-ignoring-comments to C-M-;.</span>
<span class="linecomment">;;     icicle-mode doc string, icicle(-options)-menu-map: Added icicle-toggle-ignoring-comments.</span>
<span class="linecomment">;; 2011/05/03 dadams</span>
<span class="linecomment">;;     icicle-define-icicle-maps: Add icicle-toggle-highlight-saved-candidates to menus.</span>
<span class="linecomment">;;     icicle-(bind|restore)-completion-keys: Bind icicle-plus-saved-sort to C-M-+.</span>
<span class="linecomment">;;                                            Bind icicle-toggle-highlight-saved-candidates to S-pause.</span>
<span class="linecomment">;;     icicle-mode doc string: Mention icicle-toggle-highlight-saved-candidates.</span>
<span class="linecomment">;; 2011/04/12 dadams</span>
<span class="linecomment">;;     icicle-define-icicle-maps: Added Icicles submenu for Bookmark+ menu.</span>
<span class="linecomment">;;     icicle-(bind|restore)-other-keymap-keys:</span>
<span class="linecomment">;;       Bound icicle-bookmark-save-marked-files(-as-project|-more) in bookmark-bmenu-mode-map.</span>
<span class="linecomment">;; 2011/03/29 dadams</span>
<span class="linecomment">;;     icicle-define-minibuffer-maps, icicle-bind-completion-keys:</span>
<span class="linecomment">;;       Bound C-M-(v|V) to icicle-scroll-(forward|backward).</span>
<span class="linecomment">;;     Applied renaming: icicle-scroll-Completions(-up) to icicle-scroll-Completions-(back|for)ward.</span>
<span class="linecomment">;; 2011/03/26 dadams</span>
<span class="linecomment">;;     icicle-define-icicle-maps: Added tags commands.</span>
<span class="linecomment">;; 2011/03/06 dadams</span>
<span class="linecomment">;;     icicle-define-icicle-maps:</span>
<span class="linecomment">;;       Added to Options (sub)menu: icicle-toggle-search-whole-word.</span>
<span class="linecomment">;;       Removed from Options: icicle-toggle-highlight-all-current, icicle-regexp-quote-input.</span>
<span class="linecomment">;;       Removed redundant :visible icicle-mode's for icicle-menu-map.</span>
<span class="linecomment">;;       Added :help entries.</span>
<span class="linecomment">;;       Corrected: icicle-bookmark-bookmark-list, icicle-bookmark-desktop: not other-window.</span>
<span class="linecomment">;;     icicle-define-minibuffer-maps, icicle-(bind|restore)-completion-keys:</span>
<span class="linecomment">;;       Added: icicle-toggle-highlight-all-current, icicle-regexp-quote-input,</span>
<span class="linecomment">;;              icicle-erase-minibuffer-or-history-element (2), icicle-insert-list-join-string,</span>
<span class="linecomment">;;              icicle-insert-key-description, icicle-insert-string-from-variable (2),</span>
<span class="linecomment">;;              icicle-insert-string-at-point.</span>
<span class="linecomment">;; 2011/02/22 dadams</span>
<span class="linecomment">;;     icicle-(bind|restore)-completion-keys: Bind C-x t to icicle-cycle-image-file-thumbnail.</span>
<span class="linecomment">;;     icicle-mode: Do not add icicle-fit-completions-window to temp-buffer-show-hook.</span>
<span class="linecomment">;;                  Do it explicitly in icicle-display-candidates-in-Completions now.</span>
<span class="linecomment">;;     Renamed: icicle-*-standard-commands to icicle-(redefine|restore)-standard-functions.</span>
<span class="linecomment">;;              And rewrote them to just use new option icicle-functions-to-redefine.</span>
<span class="linecomment">;;     Replaced: icicle-redefine-standard-commands-flag with icicle-functions-to-redefine everywhere.</span>
<span class="linecomment">;;     Added: old-comint-dynamic-complete-filename.</span>
<span class="linecomment">;; 2011/02/17 dadams</span>
<span class="linecomment">;;     icicle-(redefine|restore)-standard-commands: Use icicle-read-color for read-color.</span>
<span class="linecomment">;; 2011/01/20 dadams</span>
<span class="linecomment">;;     icicle-define-minibuffer-maps, icicle-(bind|restore)-completion-keys:</span>
<span class="linecomment">;;       Bind/restore keys C-M-S-[cf] (*-completing-read+insert-keys, *-read+insert-file-name-keys).</span>
<span class="linecomment">;; 2011/01/18 dadams</span>
<span class="linecomment">;;     Require advice.el.</span>
<span class="linecomment">;; 2011/01/01 dadams</span>
<span class="linecomment">;;     icicle-define-icicle-maps: Typo: icicle-search-tags-menu-map -&gt; icicle-menu-map.  Thx Le Wang.</span>
<span class="linecomment">;; 2010/12/26 dadams</span>
<span class="linecomment">;;     Added autoload cookies to load icicles.el when command icicle-mode is invoked.</span>
<span class="linecomment">;;     Removed autoload cookies except simple ones & ones with sexp on same line.  Thx to Richard Kim.</span>
<span class="linecomment">;; 2010/12/18 dadams</span>
<span class="linecomment">;;     Added more autoload cookies for commands.  Thx to Richard Kim.</span>
<span class="linecomment">;; 2010/11/23 dadams</span>
<span class="linecomment">;;     icicle-define-icicle-maps: Added "in minibuf" to :key for C-?.  Thx to Michael Heerdegen.</span>
<span class="linecomment">;; 2010/11/21 dadams</span>
<span class="linecomment">;;     icicle-(redefine|restore)-standard-commands:</span>
<span class="linecomment">;;       defalias lisp-complete-symbol unconditionally (it's still needed in some places for Emacs 23).</span>
<span class="linecomment">;; 2010/11/20 dadams</span>
<span class="linecomment">;;     For eval-after-load's:</span>
<span class="linecomment">;;       Protect eval of icicle-mode with boundp.</span>
<span class="linecomment">;;       If the library is already loaded, then add the eval-after-load to icicles-mode.el instead.</span>
<span class="linecomment">;;       Uncommented the code for simple.el for Emacs 23+.</span>
<span class="linecomment">;;     dolist eval-after-load at end: Removed test for icicles-mode feature.</span>
<span class="linecomment">;; 2010/11/10 dadams</span>
<span class="linecomment">;;     Define lisp-completion-at-point to return Icicles fn (don't defalias).  Thx to M. Heerdegen.</span>
<span class="linecomment">;; 2010/11/06 dadams</span>
<span class="linecomment">;;     icicle-top-level-prep: Reset current TAB and S-TAB methods, if temporary.</span>
<span class="linecomment">;; 2010/11/03 dadams</span>
<span class="linecomment">;;     icicle-(redefine|restore)-standard-commands:</span>
<span class="linecomment">;;       Updated for Emacs 23.2+: defalias lisp-completion-at-point instead.  Thx to Michael Heerdegen.</span>
<span class="linecomment">;; 2010/10/21 dadams</span>
<span class="linecomment">;;     icicle-minibuffer-setup:: Revert last change: this must NOT be local.</span>
<span class="linecomment">;; 2010/10/19 dadams</span>
<span class="linecomment">;;     icicle-minibuffer-setup: Use non-nil LOCAL arg to add-hook for icicle-top-level-prep.</span>
<span class="linecomment">;; 2010/10/09 dadams</span>
<span class="linecomment">;;     icicle-define-cycling-keys:</span>
<span class="linecomment">;;       Define modal keys uncondiationally (no icicle-cycling-respects-completion-mode).</span>
<span class="linecomment">;;       Define modal keys first, then non-modal.  Remove no bindings (make no bindings to nil).</span>
<span class="linecomment">;;       Removed hard-coded bindings for mouse wheel - handled by vars now, as before.</span>
<span class="linecomment">;;     icicle-define-minibuffer-maps:</span>
<span class="linecomment">;;       Hard-code down/up in completion-list-mode-map - do not reuse prefix completion keys.</span>
<span class="linecomment">;;     Applied renaming of icicle-cycling-respects-completion-mode to icicle-default-cycling-mode.</span>
<span class="linecomment">;; 2010/10/08 dadams</span>
<span class="linecomment">;;     icicle-minibuffer-setup: Don't set icicle-current-completion-mode in recursive minibuffer.</span>
<span class="linecomment">;;     icicle-define-cycling-keys: Unconditionally define mouse wheel for modal cycling.</span>
<span class="linecomment">;; 2010/10/07 dadams</span>
<span class="linecomment">;;     Use icicle-current-TAB-method function, not variable, everywhere.</span>
<span class="linecomment">;; 2010/10/06 dadams</span>
<span class="linecomment">;;     icicle-define-cycling-keys:  Let all non-conflicting non-modal keys remain: modal just</span>
<span class="linecomment">;;                                  overwrites the conflicting non-modal.  Thx to Michael Heerdegen.</span>
<span class="linecomment">;; 2010/07/17 dadams</span>
<span class="linecomment">;;     w3m - &gt; url.  Add URL jump bindings.  Replace w3m by url otherwise.</span>
<span class="linecomment">;; 2010/06/11 dadams</span>
<span class="linecomment">;;     icicle-define-minibuffer-maps: Bind/restore C-c + to icicle-make-directory in file-name maps.</span>
<span class="linecomment">;; 2010/06/04 dadams</span>
<span class="linecomment">;;     icicle-mode doc string: Mention missing doremi commands.</span>
<span class="linecomment">;;     icicle-define-icicle-maps: Added Swank items and Max # of Completions, :visible for separator.</span>
<span class="linecomment">;;     icicle-(bind|restore)-completion-keys: Bind icicle-doremi-increment-max-candidates+ to C-x #.</span>
<span class="linecomment">;;     Apply renamings of icicle-doremi* (added +).</span>
<span class="linecomment">;; 2010/05/26 dadams</span>
<span class="linecomment">;;     Add to command-history only if an interned symbol.  Thx to Michael Heerdegen.</span>
<span class="linecomment">;; 2010/05/22 dadams</span>
<span class="linecomment">;;     icicle-(bind|restore)-completion-keys: Bind icicle-candidate-read-fn-invoke to ESC C-m also.</span>
<span class="linecomment">;; 2010/05/17 dadams</span>
<span class="linecomment">;;     icicle-define-icicle-maps: Changed :enable conditions for *-goto*-marker.  Thx to M. Heerdegen.</span>
<span class="linecomment">;; 2010/05/15 dadams</span>
<span class="linecomment">;;     icicle-mode: Updated doc string for bookmark commands.</span>
<span class="linecomment">;; 2010/05/09 dadams</span>
<span class="linecomment">;;     Key-binding changes: icicle-change-sort-order is C-, icicle-dispatch-M-_ is M-_.</span>
<span class="linecomment">;; 2010/04/21 dadams</span>
<span class="linecomment">;;     icicle-(redefine|restore)-std-completion-fns: Added icicle-sit-for for Emacs 23.</span>
<span class="linecomment">;; 2010/04/02 dadams</span>
<span class="linecomment">;;     icicle-mode: Updated doc string: list of commands.</span>
<span class="linecomment">;; 2010/04/02 dadams</span>
<span class="linecomment">;;     icicle-mode: Update doc string for change from regions to bookmarks.</span>
<span class="linecomment">;;     icicle-define-icicle-maps:</span>
<span class="linecomment">;;       Remove Icicles region stuff from menus.</span>
<span class="linecomment">;;       Added to menus: icicle-search-bookmarks-together, icicle-search-bookmark,</span>
<span class="linecomment">;;                       icicle-select-bookmarked-region.</span>
<span class="linecomment">;; 2010/03/28 dadams</span>
<span class="linecomment">;;     Applied renaming: icicle-search-all-regions to icicle-search-region.</span>
<span class="linecomment">;;     Use icicle-search-region-bookmark in menus.</span>
<span class="linecomment">;; 2010/03/14 dadams</span>
<span class="linecomment">;;     icicle-define-minibuffer-maps: Use featurep, not soft-require, for bookmark+.el.</span>
<span class="linecomment">;;     Added bookmark+ to final dolist for eval-after-load.</span>
<span class="linecomment">;; 2010/03/13 dadams</span>
<span class="linecomment">;;     icicle-define-icicle-maps:</span>
<span class="linecomment">;;       Bound icicle-toggle-show-multi-completion to M-m in minibuffer, and added to menus.</span>
<span class="linecomment">;;     Applied renaming of icicle-add-buffer-name-flag to icicle-show-multi-completion-flag.</span>
<span class="linecomment">;; 2010/02/17 dadams</span>
<span class="linecomment">;;     Applied rename of icicl-redefined-functions to icicle-inhibit-advice-functions.</span>
<span class="linecomment">;; 2010/02/13 dadams</span>
<span class="linecomment">;;     icicle-mode:</span>
<span class="linecomment">;;       Fill icicle-advice-info-list from advised fns among icicle-redefined-functions.</span>
<span class="linecomment">;;       Reactivate advised fns (in icicle-advice-info-list) when turn mode off.</span>
<span class="linecomment">;;       Added to doc string: icicle-bookmark-(dired|desktop|bookmark-list|man)-other-window.</span>
<span class="linecomment">;;     icicle-define-icicle-maps: Use (featurep 'recentf) instead of soft-requiring it.</span>
<span class="linecomment">;;     icicle(-bookmark)-menu-map: Added type-specific bookmark jump commands.</span>
<span class="linecomment">;;     eval-after-load's: Add (when (featurep 'icicles-mode)...) to ensure this file was loaded.</span>
<span class="linecomment">;; 2010/01/28 dadams</span>
<span class="linecomment">;;     icicle-define-minibuffer-maps, icicle-restore-completion-keys:</span>
<span class="linecomment">;;       Restore C-g correctly if delete-selection-mode.</span>
<span class="linecomment">;; 2009/12/25 dadams</span>
<span class="linecomment">;;     icicle-mode: Call completion-ignored-build-disable to disable the advice.</span>
<span class="linecomment">;; 2009/12/21 dadams</span>
<span class="linecomment">;;     Final dolist: Move loaded-library test outside of eval-after-load.</span>
<span class="linecomment">;;                   Update the test for Emacs 22+ (not just assoc).  Thx to Kevin Ryde.</span>
<span class="linecomment">;;     Combine eval-after-load's for dired-x.  Remove eval-after-load for simple.el (preloaded).</span>
<span class="linecomment">;;     fset -&gt; defalias.</span>
<span class="linecomment">;; 2009/12/13 dadams</span>
<span class="linecomment">;;     icicle-define-minibuffer-maps:</span>
<span class="linecomment">;;       Bind C-x m to icicle-bookmark-file-other-window in file-name completion maps.</span>
<span class="linecomment">;; 2009/11/29 dadams</span>
<span class="linecomment">;;     Don't reference minibuffer-local-must-match-filename-map unless bound (obsolete in 23.2).</span>
<span class="linecomment">;; 2009/11/27 dadams</span>
<span class="linecomment">;;     icicle-(bind|restore)-completion-keys: Bind/restore C-x 1, C-x 2.</span>
<span class="linecomment">;; 2009/11/07 dadams</span>
<span class="linecomment">;;     Applied doremi cmd renamings (added +).</span>
<span class="linecomment">;; 2009/10/25 dadams</span>
<span class="linecomment">;;     icicle-mode, icicle-define-icicle-maps, icicle-bind-completion-keys:</span>
<span class="linecomment">;;       Updated doc string, menus, keys for completion-method command renamings.</span>
<span class="linecomment">;; 2009/09/26 dadams</span>
<span class="linecomment">;;     icicle-minibuffer-setup: Don't complete if icicle-progressive-completing-p.</span>
<span class="linecomment">;; 2009/09/16 dadams</span>
<span class="linecomment">;;     icy-mode: Add icicle-insert-buffer to doc string.</span>
<span class="linecomment">;;     icicle-define-icicle-maps: Added icicle-insert-buffer to icicle-menu-map.</span>
<span class="linecomment">;; 2009/09/10 dadams</span>
<span class="linecomment">;;     icicle-bind-key-completion-keys-in-keymaps-from: Don't exclude menu maps.</span>
<span class="linecomment">;; 2009/09/03 dadams</span>
<span class="linecomment">;;     icicle-add-menu-item-to-cmd-history: Wrap in condition-case, since on pre-command-hook.</span>
<span class="linecomment">;; 2009/08/18 dadams</span>
<span class="linecomment">;;     icicle-add-menu-item-to-cmd-history:</span>
<span class="linecomment">;;       Ensure this-command-keys-vector is not empty.  Thx to Kai Tetzlaff and Lennart Borgman.</span>
<span class="linecomment">;; 2009/08/09 dadams</span>
<span class="linecomment">;;     icicle-minibuffer-setup: Set region background for recursive minibuffers too.</span>
<span class="linecomment">;;     icicle-restore-region-face: Don't restore unless going back to top level.</span>
<span class="linecomment">;; 2009/08/01 dadams</span>
<span class="linecomment">;;     Added: icicle-add-menu-item-to-cmd-history.  Thx to Lennart Borgman.</span>
<span class="linecomment">;;     icy-mode: add/remove pre-command-hook, respecting icicle-menu-items-to-history-flag.</span>
<span class="linecomment">;;     call-interactively defadvice: Do not save let savehist save icicle-interactive-history.</span>
<span class="linecomment">;; 2009/07/29 dadams</span>
<span class="linecomment">;;     Change advice for call-interactively:</span>
<span class="linecomment">;;       Use it only for Emacs 23+.  Disable it to begin with.</span>
<span class="linecomment">;;       Add only (non-mouse command) symbols to history.</span>
<span class="linecomment">;;     icy-mode (Emacs 23+):</span>
<span class="linecomment">;;       Enable/disable advice icicle-save-to-history when mode is turned on/off.</span>
<span class="linecomment">;;       Enable the advics only if non-nil icicle-populate-interactive-history-flag.</span>
<span class="linecomment">;;     icy-mode (Emacs 20-21): Remove advice icicle-save-to-history.</span>
<span class="linecomment">;; 2009/07/26 dadams</span>
<span class="linecomment">;;     Advise call-interactively to save command to icicle-interactive-history.</span>
<span class="linecomment">;;     icicle-(bind|restore)-completion-keys: Bind/restore C-M-pause as icicle-other-history.</span>
<span class="linecomment">;; 2009/07/13 dadams</span>
<span class="linecomment">;;     Emacs 22+:</span>
<span class="linecomment">;;       Added describe-face defadvice (icicle-respect-WYSIWYG).  icicle-mode: (de)activate it.</span>
<span class="linecomment">;; 2009/06/18 dadams</span>
<span class="linecomment">;;     icicle-mode: Added icicle-doremi-zoom-Completions to doc string.</span>
<span class="linecomment">;; 2009/06/17 dadams</span>
<span class="linecomment">;;     icicle-(bind|restore)-completion-keys: Bind icicle-doremi-zoom-Completions to C-x -.</span>
<span class="linecomment">;;     icicle-define-icicle-maps:</span>
<span class="linecomment">;;       Add icicle-doremi-zoom-Completions to Options menu.</span>
<span class="linecomment">;;       Change visible condition for all doremi stuff to ensure *Completions* is showing.</span>
<span class="linecomment">;; 2009/05/27 dadams</span>
<span class="linecomment">;;     icicle-retrieve-(next|previous)-input: Removed unused (always nil) arg DONT-COMPLETE-P.</span>
<span class="linecomment">;; 2009/05/22 dadams</span>
<span class="linecomment">;;     icicle-define-icicle-maps: Added icicle-Info-virtual-book to menu.</span>
<span class="linecomment">;;     Require icicles-cmd[12].el.</span>
<span class="linecomment">;; 2009/05/17 dadams</span>
<span class="linecomment">;;     dolist eval-after-load at end: Use icicle-toggle-icicle-mode-twice, not icy-mode calls.</span>
<span class="linecomment">;; 2009/05/09 dadams</span>
<span class="linecomment">;;     icicle-define-icicle-maps: Added icicle-toggle-dot to options menu.  Updated C-x . key.</span>
<span class="linecomment">;;     icicle-(bind|restore)-completion-keys:</span>
<span class="linecomment">;;       Bind *-toggle-dot to C-M-., *-toggle-hiding-common-match to C-x .,</span>
<span class="linecomment">;;            *-insert-dot-command to ..</span>
<span class="linecomment">;;     icy-mode: Mention icicle-toggle-dot in doc string.</span>
<span class="linecomment">;; 2009/05/02 dadams</span>
<span class="linecomment">;;     icicle-minibuffer-setup: Set icicle-cmd-reading-input to this-command.</span>
<span class="linecomment">;; 2009/04/30 dadams</span>
<span class="linecomment">;;     icicle-minibuffer-setup: Reset icicle-next-(prefix|apropos)-complete-cycles-p to nil.</span>
<span class="linecomment">;; 2009/04/20 dadams</span>
<span class="linecomment">;;     icicle-bind-completion-keys: Don't bind C-S-(up|down|next|prior) explicitly.</span>
<span class="linecomment">;;     icicle-restore-completion-keys:</span>
<span class="linecomment">;;       Restore: icicle-(prefix|apropos)-cycle-(previous|next)-alt-action-keys,</span>
<span class="linecomment">;;                icicle-modal-cycle-(up|down)-alt-action-keys.</span>
<span class="linecomment">;;       Don't restore C-S-(up|down|next|prior) explicitly.</span>
<span class="linecomment">;;     icicle-define-cycling-keys:</span>
<span class="linecomment">;;       Bind/Restore: icicle-(prefix|apropos)-cycle-(previous|next)-alt-action-keys,</span>
<span class="linecomment">;;                     icicle-modal-cycle-(up|down)-alt-action-keys.</span>
<span class="linecomment">;; 2009/04/19 dadams</span>
<span class="linecomment">;;     icicle-redefine-standard-commands: Added defalias for customize-apropos-options-of-type.</span>
<span class="linecomment">;;     eval-after-loads: Use when/unless instead of and/or for fset's. (cosmetic)</span>
<span class="linecomment">;; 2009/04/18 dadams</span>
<span class="linecomment">;;     icicle-mode: Mention in doc string: you might want to customize keys if no window mgr.</span>
<span class="linecomment">;; 2009/04/16 dadams</span>
<span class="linecomment">;;     icicle-restore-completion-keys, icicle-define-cycling-keys:</span>
<span class="linecomment">;;       Use icicle-(prefix|apropos)-cycle-(previous|next)-help-keys.</span>
<span class="linecomment">;; 2009/04/15 dadams</span>
<span class="linecomment">;;     icicle-bind-completion-keys: Removed bindings for C-M-(up|down|prior|next).</span>
<span class="linecomment">;;     icicle-restore-completion-keys: Unbind icicle-modal-cycle-(up|down)-help-keys.</span>
<span class="linecomment">;;     icicle-define-cycling-keys: Bind/unbind all help keys (including modal ones).</span>
<span class="linecomment">;; 2009/03/27 dadams</span>
<span class="linecomment">;;     icicle-(redefine|restore)-standard-commands:</span>
<span class="linecomment">;;       Added icicle-minibuffer-default-add-completions.</span>
<span class="linecomment">;; 2009/03/16 dadams</span>
<span class="linecomment">;;     icicle-define-icicle-maps: Use :visible for Icicle submenus themselves.</span>
<span class="linecomment">;;     icicle-(redefine|restore)-standard-commands: Added icicle-recentf-make-menu-items.</span>
<span class="linecomment">;;     Added eval-after load for recentf.el.</span>
<span class="linecomment">;; 2009/03/15 dadams</span>
<span class="linecomment">;;     icicle-mode: Added to doc string: icicle-recompute-shell-command-candidates,</span>
<span class="linecomment">;;                                       icicle-remove-file-from-recentf-list.</span>
<span class="linecomment">;;     icicle-define-icicle-maps: Added icicle-remove-file-from-recentf-list to menus.</span>
<span class="linecomment">;; 2009/03/10 dadams</span>
<span class="linecomment">;;     icicle-mode: Don't reset icicle-shell-*-cache if icicle-guess-commands-in-path is load.</span>
<span class="linecomment">;;     Applied renaming: icicle-shell-command-candidates to *-cache</span>
<span class="linecomment">;; 2009/03/01 dadams</span>
<span class="linecomment">;;     icicle-define-minibuffer-maps:</span>
<span class="linecomment">;;       Bind icicle-completing-read+insert, icicle-read+insert-file-name.  Add to Minibuf menu.</span>
<span class="linecomment">;; 2009/02/28 dadams</span>
<span class="linecomment">;;     fset old-dired-smart-shell-command after load Dired-X.</span>
<span class="linecomment">;; 2009/02/20 dadams</span>
<span class="linecomment">;;     icicle-mode: Reset icicle-shell-command-candidates to nil.</span>
<span class="linecomment">;;     icicle-minibuffer-setup:</span>
<span class="linecomment">;;       Use function icicle-require-match-p, not var.</span>
<span class="linecomment">;;       Do not reset icicle-completing-p to nil (reset by icicle-require-match-p).</span>
<span class="linecomment">;;     icicle-(redefine|restore)-standard-commands:</span>
<span class="linecomment">;;       Redefine dired-read-shell-command, not dired-guess-shell-command.</span>
<span class="linecomment">;;       Redefine: dired-smart-shell-command, shell-command(-on-region).</span>
<span class="linecomment">;;     Added eval-after load for dired-read-shell-command for dired-aux.el (and for dired-x.el).</span>
<span class="linecomment">;;     eval-after-load for read-shell-command: Don't do it only when mailcap can be loaded.</span>
<span class="linecomment">;; 2009/02/01 dadams</span>
<span class="linecomment">;;     icicle-define-minibuffer-maps: Bind C-backspace to icicle-up-directory.</span>
<span class="linecomment">;; 2009/01/25 dadams</span>
<span class="linecomment">;;     icicle-(redefine|restore)-standard-commands:</span>
<span class="linecomment">;;       Aliases for dired-guess-shell-command, read-shell-command.  Also eval-after-load's.</span>
<span class="linecomment">;; 2009/01/23 dadams</span>
<span class="linecomment">;;     icicle-(bind|restore)-other-keymap-keys:</span>
<span class="linecomment">;;       For sh-mode-map, remap comint-dynamic-complete, don't (un)bind TAB.  Thx to Seb Luque.</span>
<span class="linecomment">;; 2009/01/18 dadams</span>
<span class="linecomment">;;     Renamed Open Dired for Saved Completion Candidates to Open Dired for Chosen Files.</span>
<span class="linecomment">;; 2009/01/06 dadams</span>
<span class="linecomment">;;     Added to dolist of eval-after-load's: net-utils, rlogin, idlw-shell.</span>
<span class="linecomment">;; 2009/01/05 dadams</span>
<span class="linecomment">;;     icicle-(bind|restore)-other-keymap-keys: Treat keys for Shell Script, Ielm, Tcl, and GUD.</span>
<span class="linecomment">;;     icicle-(redefine|restore)-standard-commands:</span>
<span class="linecomment">;;       Handle: comint-dynamic-complete-filename, gud-gdb-complete-command.</span>
<span class="linecomment">;;     Added eval-after-load for gud.</span>
<span class="linecomment">;;     Added to dolist of eval-after-load's: ielm, gud, sh-script, tcl.</span>
<span class="linecomment">;; 2009/01/04 dadams</span>
<span class="linecomment">;;     Added ESS support:</span>
<span class="linecomment">;;       icicle-(redefine|restore)-standard-commands:</span>
<span class="linecomment">;;         Added: (icicle|old)-comint-replace-by-expanded-filename,</span>
<span class="linecomment">;;                (icicle|old)-ess-complete-object-name.</span>
<span class="linecomment">;;       Added eval-after-load for ess-site and for old-comint-replace-by-expanded-filename.</span>
<span class="linecomment">;;       Thx to Sebastian Luque.</span>
<span class="linecomment">;; 2008/12/30 dadams</span>
<span class="linecomment">;;     icicle-mode: Don't add/remove hook icicle-shell-hook-fn.</span>
<span class="linecomment">;;                  Don't call icicle-(un)bind-isearch-keys.</span>
<span class="linecomment">;;     Renamed: icicle-rebind-other-keymap-keys to icicle-bind-other-keymap-keys.</span>
<span class="linecomment">;;     icicle-(bind|restore)-other-keymap-keys:</span>
<span class="linecomment">;;       Call icicle-(un)bind-isearch-keys here.</span>
<span class="linecomment">;;       Bind/restore icicle-comint-command here.</span>
<span class="linecomment">;;       Don't use eval-after-load.  Instead, define keys if the maps are defined.</span>
<span class="linecomment">;;       Bind/restore shell keys only if icicle-redefine-standard-commands-flag is true.</span>
<span class="linecomment">;;     icicle-minibuffer-setup:</span>
<span class="linecomment">;;       Remove redundant code that calls icicle-define-cycling-keys for each minibuffer map.</span>
<span class="linecomment">;;     icicle-define-minibuffer-maps:</span>
<span class="linecomment">;;       Restore C-g to abort-recursive-edit in minibuffer-local-must-match-map.</span>
<span class="linecomment">;;     icicle-(redefine|restore)-standard-commands:</span>
<span class="linecomment">;;       Test fboundp of old-*, not *, for bbdb and comint.</span>
<span class="linecomment">;;       Do not defalias comint-dynamic-complete-filename or shell-dynamic-complete-*.</span>
<span class="linecomment">;;     icicle-remap: Moved to icicles-opt.el.</span>
<span class="linecomment">;;     At end of file:</span>
<span class="linecomment">;;       eval-after-load comint and bbdb: Turn off icy-mode before fset old-*.</span>
<span class="linecomment">;;       eval-after-load each of the other keymap libraries: Toggle icy-mode.</span>
<span class="linecomment">;; 2008/12/26 dadams</span>
<span class="linecomment">;;     Bind icicle-widen-candidates to M-+, and add it to Minibuf menu.</span>
<span class="linecomment">;;     Bind icicle-apropos-complete-and-widen to S-backspace.</span>
<span class="linecomment">;; 2008/12/22 dadams</span>
<span class="linecomment">;;     Forgot to add/remove icicle-shell-hook-fn to shell-mode-hook for Emacs 20.</span>
<span class="linecomment">;;     icicle-bind-completion-keys, icicle-define-icicle-maps: Added icicle-regexp-quote-input.</span>
<span class="linecomment">;; 2008/12/21 dadams</span>
<span class="linecomment">;;     icicle-(redefine|restore)-standard-commands: Added comint-*, shell-*.</span>
<span class="linecomment">;;     Renamed *-(rebind|restore)-non-completion-keys to *-(rebind|restore)-other-keymap-keys.</span>
<span class="linecomment">;;     icy-mode: Add/remove icicle-shell-hook-fn to shell-mode-hook.</span>
<span class="linecomment">;;     icicle--(rebind|restore)-other-keymap-keys:</span>
<span class="linecomment">;;       Don't rebind Info keys unless icicle-redefine-standard-commands-flag.</span>
<span class="linecomment">;;       Wrap Dired key bindings in eval-after-load.</span>
<span class="linecomment">;;     icicle-restore-other-keymap-keys: Corrected (updated) Dired keys.</span>
<span class="linecomment">;; 2008/12/07 dadams</span>
<span class="linecomment">;;     icicle-minibuffer-setup:</span>
<span class="linecomment">;;       Add completing prompt prefix here, using icicle-completion-prompt-overlay.</span>
<span class="linecomment">;;       Removed icicle-prompt.</span>
<span class="linecomment">;; 2008/12/05 dadams</span>
<span class="linecomment">;;     icicle-(bind|restore)-completion-keys: Bind C-v, M-v to scroll *Completions* window.</span>
<span class="linecomment">;; 2008/11/14 dadams</span>
<span class="linecomment">;;     icicle-toggle-hiding-common-match:</span>
<span class="linecomment">;;       icy-mode: Mention it in doc string, icicle-define-icicle-maps: Add it to menus.</span>
<span class="linecomment">;;       icicle-bind-completion-keys: Bind it to C-M-.</span>
<span class="linecomment">;;     icicle-minibuffer-setup:</span>
<span class="linecomment">;;       Use (cadr (buffer-list)), not other-buffer, for icicle-pre-minibuffer-buffer</span>
<span class="linecomment">;; 2008/11/04 dadams</span>
<span class="linecomment">;;     icicle-define-icicle-maps: No longer bind icicle-generic-S-tab keys (obsolete).</span>
<span class="linecomment">;;     Renamed:</span>
<span class="linecomment">;;       *-(un)bind-S-TAB-in-keymaps-from to *-(un)bind-key-completion-keys-in-keymaps-from,</span>
<span class="linecomment">;;       *-(un)bind-S-TAB-for-map-variable to *-(un)bind-key-completion-keys-for-map-var.</span>
<span class="linecomment">;;     icicle-(un)bind-key-completion-keys-in-keymaps-from:</span>
<span class="linecomment">;;       icicle-generic-S-tab-keys -&gt; icicle-key-complete-keys.</span>
<span class="linecomment">;;       Respect icicle-complete-key-anyway-flag.</span>
<span class="linecomment">;;     icicle-define-minibuffer-maps: *-generic-S-tab-keys -&gt; *-previous-candidate-keys.</span>
<span class="linecomment">;;     icicle-(bind|restore)-completion-keys: *-generic-S-tab-keys -&gt; *-apropos-complete-keys.</span>
<span class="linecomment">;;     icicle-(un)bind-isearch-keys: *-generic-S-tab-keys -&gt; *-search-from-isearch-keys.</span>
<span class="linecomment">;; 2008/11/03 dadams</span>
<span class="linecomment">;;     Applied renamings from icicles-cmd.el.</span>
<span class="linecomment">;; 2008/11/01 dadams</span>
<span class="linecomment">;;     Require cl.el at compile time for all Emacs versions, not just 20.</span>
<span class="linecomment">;; 2008/10/14 dadams</span>
<span class="linecomment">;;     icy-mode: No longer call icicle-update-help-string.</span>
<span class="linecomment">;;     Renamed: *-update-help-string to *-help-string-completion and moved to icicles-mcmd.el.</span>
<span class="linecomment">;;     Renamed: icicle-rebind-completion-maps to icicle-define-minibuffer-maps.</span>
<span class="linecomment">;;     Applied renaming from icicles-mcmd.el: icicle-completion-help to icicle-minibuffer-help.</span>
<span class="linecomment">;;     icicle-define-minibuffer-maps:</span>
<span class="linecomment">;;       Bound icicle-minibuffer-help also in non-completion minibuffer maps and *Completions*.</span>
<span class="linecomment">;;       Bound icicle-yank-secondary in minibuffer-local-isearch-map also.</span>
<span class="linecomment">;;     icicle-(bind|restore)-completion-keys: Only bind icicle-minibuffer-help if not inherited.</span>
<span class="linecomment">;; 2008/10/12 dadams</span>
<span class="linecomment">;;     icicle-rebind-non-completion-keys (and undo in icicle-restore-non-completion-keys):</span>
<span class="linecomment">;;       Ibuffer mode: Bind M-s i to icicle-search-ibuffer-marked and add to Operate menu.</span>
<span class="linecomment">;;       Buffer Menu mode: Bind M-s i to icicle-search-buff-menu-marked.</span>
<span class="linecomment">;;       Dired mode: Change binding of icicle-search-dired-marked from M-s to M-s i.</span>
<span class="linecomment">;;                   Removed vestigial binding to C-M-r.</span>
<span class="linecomment">;;       Make eval-after-load for "info" unconditional.</span>
<span class="linecomment">;; 2008/10/11 dadams</span>
<span class="linecomment">;;     icicle-update-help-string, icicle-(bind|restore)-completion-keys:</span>
<span class="linecomment">;;       icicle-kill-failed-input -&gt; icicle-goto/kill-failed-input.</span>
<span class="linecomment">;;     icicle-define-cycling-keys: Typo: icicle-apropos-cycle-previous-keys -&gt; *-action*.</span>
<span class="linecomment">;; 2008/10/10 dadams</span>
<span class="linecomment">;;     icicle-minibuffer-setup:</span>
<span class="linecomment">;;       Make icicle-current-completion-mode respect *-cycling-respects-completion-mode-flag.</span>
<span class="linecomment">;;       Initial *Completions* display respects icicle-cycling-respects-completion-mode-flag.</span>
<span class="linecomment">;;     icicle-minibuffer-setup, icicle-bind-completion-keys: Use icicle-define-cycling-keys.</span>
<span class="linecomment">;;     icicle-restore-completion-keys: Restore (C-)up, (C-)down, (C-)next, (C-)prior.</span>
<span class="linecomment">;;     Added: icicle-define-cycling-keys.</span>
<span class="linecomment">;; 2008/10/08 dadams</span>
<span class="linecomment">;;     icicle-bind-completion-keys:</span>
<span class="linecomment">;;       Bind icicle-candidate-set-retrieve-more to C-&lt;.  Add to Minibuf menu.</span>
<span class="linecomment">;;     icicle-define-icicle-maps, icicle-update-help-string: Remove C-&lt; for angle brackets.</span>
<span class="linecomment">;;     icicle-minibuffer-setup:</span>
<span class="linecomment">;;       Set icicle-pre-minibuffer-buffer to (other-buffer nil t), not (cadr (buffer-list).</span>
<span class="linecomment">;; 2008/10/04 dadams</span>
<span class="linecomment">;;     icicle-(redefine|restore)-std-completion-fns:</span>
<span class="linecomment">;;       Substitute Icicles version of completing-read-multiple and maps.  Thx to Per Nordlow.</span>
<span class="linecomment">;;     icy-mode doc string: Typo - thx to Richard Kim.</span>
<span class="linecomment">;; 2008/10/01 dadams</span>
<span class="linecomment">;;     icicle-update-help-string: Added current values for toggles.  Moved toggles near top.</span>
<span class="linecomment">;;     Added: icicle-S-iso-lefttab-to-S-TAB.</span>
<span class="linecomment">;; 2008/09/30 dadams</span>
<span class="linecomment">;;     icicle-bind-isearch-keys: For icicle-generic-S-tab-keys, read the search string using</span>
<span class="linecomment">;;       icicle-isearch-complete-past-string.</span>
<span class="linecomment">;; 2008/09/13 dadams</span>
<span class="linecomment">;;     Use renamings from icicles-mcmd.el:</span>
<span class="linecomment">;;       icicle-candidate-set-save-to-cache-file to icicle-candidate-set-save-persistently,</span>
<span class="linecomment">;;       icicle-candidate-set-retrieve-from-cache-file to *-candidate-set-retrieve-persistent.</span>
<span class="linecomment">;; 2008/09/11 dadams</span>
<span class="linecomment">;;     icicle-define-icicle-maps: Added icicle-grep-saved-file-candidates to menus.</span>
<span class="linecomment">;; 2008/09/09 dadams</span>
<span class="linecomment">;;     Use renamings from icicles-cmd.el:</span>
<span class="linecomment">;;       icicle-candidate-set-dired-marked-save-* to icicle-dired-save-marked-*.</span>
<span class="linecomment">;;     Bind: icicle-dired-save-marked-* to C(-M)-&gt;, not C(-M)-),</span>
<span class="linecomment">;;           icicle-dired-saved-file-candidates-other-window to C-M-&lt;, not C-M-r,</span>
<span class="linecomment">;;           icicle-dired-save-marked-(to-variable|as-project) to C-M-}, C-},</span>
<span class="linecomment">;;           icicle-dired-project-other-window to C-{.</span>
<span class="linecomment">;;     Add to Dired &gt; Multiple (or Operate) &gt; Icicles menu: icicle-dired-save-marked-as-project.</span>
<span class="linecomment">;;     Add to Dired &gt; Dir and File &gt; Icicles menus: icicle-dired-project-other-window.</span>
<span class="linecomment">;;     Removed from File &gt; Icicles menu: icicle-dired-saved-file-candidates.</span>
<span class="linecomment">;; 2008/08/22 dadams</span>
<span class="linecomment">;;     icicle-update-help-string: Removed mention of icicle-Completions-window-default-width.</span>
<span class="linecomment">;; 2008/08/21 dadams</span>
<span class="linecomment">;;     icicle-define-icicle-maps: Replace icicle-find-file(-*) with icicle-file.</span>
<span class="linecomment">;;     icicle-mode doc string, icicle-update-help-string: Updated for new cmds icicle-file etc.</span>
<span class="linecomment">;;     Define BBDB aliase only if BBDB is loaded.</span>
<span class="linecomment">;; 2008/08/17 dadams</span>
<span class="linecomment">;;     icicle-rebind-completion-maps: Bind mouse wheel for completion-list-mode-map.</span>
<span class="linecomment">;; 2008/08/12 dadams</span>
<span class="linecomment">;;     icicle-define-icicle-maps: Add :keys for icicle-goto(-global)-marker.</span>
<span class="linecomment">;; 2008/08/08 dadams</span>
<span class="linecomment">;;     icicle-define-icicle-maps:</span>
<span class="linecomment">;;       Added icicle-goto(-global)-marker to icicle-(bookmark|search)-menu-map.</span>
<span class="linecomment">;;     Soft require of menu-bar+.el, instead of just eval-when-compile.</span>
<span class="linecomment">;; 2008/08/07 dadams</span>
<span class="linecomment">;;     icicle-(redefine|restore)-*: Don't use symbol-function for target of defalias.</span>
<span class="linecomment">;; 2008/08/04 dadams</span>
<span class="linecomment">;;     Use condition-case when require mb-depth+.el.</span>
<span class="linecomment">;;     icicle-(rebind|restore)-completion-maps, icicle-bind-completion-keys:</span>
<span class="linecomment">;;       Updated Minibuf menu to add icicle-clear-current-history.</span>
<span class="linecomment">;;     icicle-restore-completion-keys:</span>
<span class="linecomment">;;       Added: (alt-)action(-list)-all, icicle-save-predicate-to-variable.</span>
<span class="linecomment">;; 2008/08/03 dadams</span>
<span class="linecomment">;;     icicle-mode: Updated doc string.</span>
<span class="linecomment">;;     icicle-update-help-string: Added clear-history stuff and changed bindings.</span>
<span class="linecomment">;;     icicle-rebind-completion-maps: Added binding: icicle-clear-current-history (M-i).</span>
<span class="linecomment">;;     icicle-bind-completion-keys:</span>
<span class="linecomment">;;       Added to Minibuf menu: icicle-all-candidates(-list)(-alt)-action.</span>
<span class="linecomment">;;       Added bindings: icicle-all-candidates-list-action (M-!),</span>
<span class="linecomment">;;                       icicle-all-candidates-list-alt-action (M-|),</span>
<span class="linecomment">;;                       icicle-clear-current-history (M-i).</span>
<span class="linecomment">;;       Changed bindings:</span>
<span class="linecomment">;;         icicle-all-candidates-alt-action (C-S-insert to C-|)</span>
<span class="linecomment">;;         icicle-toggle-expand-to-common-match (C-| to C-;),</span>
<span class="linecomment">;;         icicle-toggle-search-replace-common-match (C-M-| to M-;),</span>
<span class="linecomment">;;</span>
<span class="linecomment">;; 2008/08/01 dadams</span>
<span class="linecomment">;;     icicle-mode: Std mb-depth.el renamed *-indicate-depth-mode  to *-depth-indicate-mode.</span>
<span class="linecomment">;; 2008/07/30 dadams</span>
<span class="linecomment">;;     icicle-update-help-string: Make C-M-) more obvious for clearing saved candidates.</span>
<span class="linecomment">;; 2008/07/23 dadams</span>
<span class="linecomment">;;     Renamed: icicle-map to icicle-apply.</span>
<span class="linecomment">;; 2008/07/21 dadams</span>
<span class="linecomment">;;     icicle-(redefine|restore)-standard-commands: Added icicle-bbdb-complete.</span>
<span class="linecomment">;; 2008/06/03 dadams</span>
<span class="linecomment">;;     icy-mode: Added icicle-toggle-C-for-actions to doc string.</span>
<span class="linecomment">;;     icicle-define-icicle-maps: Added icicle-toggle-C-for-actions to menus.</span>
<span class="linecomment">;;     icicle-update-help-string:</span>
<span class="linecomment">;;       Mention icicle-insert-history-element, icicle-toggle-C-for-actions.</span>
<span class="linecomment">;;     icicle-bind-completion-keys: Bindings according to icicle-use-C-for-actions-flag.</span>
<span class="linecomment">;;     icicle-(bind|restore)-completion-keys: Bind/unbind M-g.</span>
<span class="linecomment">;; 2008/05/27 dadams</span>
<span class="linecomment">;;     Renamed: icicle-(un)bind-isearch-completion-keys to icicle-(un)bind-isearch-keys.</span>
<span class="linecomment">;;     icicle-bind-isearch-keys: Bind S-TAB to icicle-search, C-o to isearch-(m)occur.</span>
<span class="linecomment">;;                               Likewise, icicle-unbind-isearch-keys.</span>
<span class="linecomment">;; 2008/05/25 dadams</span>
<span class="linecomment">;;     Renamed: icicle-bind-isearch-keys to icicle-bind-isearch-completion-keys.</span>
<span class="linecomment">;;     Added: icicle-unbind-isearch-completion-keys.</span>
<span class="linecomment">;;     icy-mode: icicle-(un)bind-isearch-completion-keys instead of updating isearch-mode-hook.</span>
<span class="linecomment">;;     icicle-bind-isearch-completion-keys:</span>
<span class="linecomment">;;       Don't bind anything in minibuffer-local-isearch-map (overridden by icicle-mode-map).</span>
<span class="linecomment">;; 2008/05/22 dadams</span>
<span class="linecomment">;;     icicle-update-help-string: Mention C-u for read-file-name-completion-ignore-case.</span>
<span class="linecomment">;; 2008/05/11 dadams</span>
<span class="linecomment">;;     Moved icicle-bind-top-level-commands to icicles-opt.el (and added optional arg).</span>
<span class="linecomment">;;     Renamed icicle-fit-Completions-window to icicle-fit-completions-window.</span>
<span class="linecomment">;; 2008/05/10 dadams</span>
<span class="linecomment">;;     Renamed: icicle-bind-top-level-commands-alist to icicle-top-level-key-bindings.</span>
<span class="linecomment">;;     icicle-bind-top-level-commands: Don't eval the key (binding).</span>
<span class="linecomment">;; 2008/05/07 dadams</span>
<span class="linecomment">;;     icicle-define-icicle-maps: Use icicle-bind-top-level-commands instead of hard-coding.</span>
<span class="linecomment">;;     icicle-update-help-string: icicle-bind-*-flag -&gt; icicle-bind-*-alist.</span>
<span class="linecomment">;; 2008/04/25 dadams</span>
<span class="linecomment">;;     icicle-(redefine|restore)-std-completion-fns:</span>
<span class="linecomment">;;       Never set icicle-old-read-file-name-fn to icicle-read-file-name.</span>
<span class="linecomment">;;         Thx to Alexey Romanov and Per Nordlow.</span>
<span class="linecomment">;;     icicle-define-icicle-maps, icicle-(bind|restore)-completion-keys:</span>
<span class="linecomment">;;       Bound icicle-toggle-remote-file-testing (C-^).</span>
<span class="linecomment">;;       icicle-toggle-ignored-space-prefix is now bound to M-_, not C-^.</span>
<span class="linecomment">;;     icicle-update-help-string: Updated bindings accordingly.</span>
<span class="linecomment">;; 2008/04/18 dadams</span>
<span class="linecomment">;;     Renamed icicle-init-value-flag to icicle-default-value.</span>
<span class="linecomment">;; 2008/03/30 dadams</span>
<span class="linecomment">;;     icicle-(redefine|restore)-std-completion-fns:</span>
<span class="linecomment">;;       Set and swap read-file-name-function and icicle-old-read-file-name-fn for Emacs 22+.</span>
<span class="linecomment">;;     Top-level:</span>
<span class="linecomment">;;       Moved fset old-read-file-name here, renamed it orig-read-file-name.  Not for Emacs 22.</span>
<span class="linecomment">;; 2008/03/29 dadams</span>
<span class="linecomment">;;     icicle-mode: No longer use icicle-control-reminder-prompt on kill-emacs-hook.</span>
<span class="linecomment">;;     icicle-update-help-string:</span>
<span class="linecomment">;;       Removed: icicle-completing(-mustmatch)-prompt-prefix, icicle-reminder-prompt-flag.</span>
<span class="linecomment">;;     icicle-rebind-completion-maps: Remove code setting icicle-prompt-suffix (removed).</span>
<span class="linecomment">;; 2008/03/26 dadams</span>
<span class="linecomment">;;     Added icicle-Info-menu to icicle-mode doc string and icicle-update-help-string.</span>
<span class="linecomment">;;     icicle-define-icicle-maps: Added icicle-Info-menu to menus.</span>
<span class="linecomment">;;     icicle-(rebind|restore)-non-completion-keys: Bind/restore icicle-Info-menu-cmd.</span>
<span class="linecomment">;; 2008/03/23 dadams</span>
<span class="linecomment">;;     Added: icicle-handle-switch-frame.</span>
<span class="linecomment">;;     icicle-(rebind|restore)-non-completion-keys:</span>
<span class="linecomment">;;       Bind switch-frame to icicle-handle-switch-frame globally, and restore.</span>
<span class="linecomment">;; 2008/03/19 dadams</span>
<span class="linecomment">;;     Remap (pp-)eval-expression to new icicle-pp-eval-expression.</span>
<span class="linecomment">;;     Replace lambdas by icicle-pp-eval-expression-in-minibuffer.</span>
<span class="linecomment">;;     Use icicle-pp-eval-expression-in-minibuffer (new) in help string.</span>
<span class="linecomment">;;     icicle-rebind-completion-maps: Bind M-: to icicle-pp-eval-expression-in-minibuffer.</span>
<span class="linecomment">;;       Bind icicle-insert-newline-in-minibuffer in all minibuffer maps (likewise, non-icy).</span>
<span class="linecomment">;;       Bind C-g in minibuffer-local-must-match-map, even if inherit.</span>
<span class="linecomment">;;     icicle-bind-completion-keys: Don't bind in must-match if it inherits:</span>
<span class="linecomment">;;       C-a, C-e, C-=, M-k, M-o, M-., M-:, C-M-y, M-S-(backspace|delete)</span>
<span class="linecomment">;; 2008/03/09 dadams</span>
<span class="linecomment">;;     icicle-mode: Add icicle-unhighlight-lighter to minibuffer-exit-hook.</span>
<span class="linecomment">;; 2008/03/07 dadams</span>
<span class="linecomment">;;     icicle-abort-minibuffer-input:  Thx to Damon Permezel.</span>
<span class="linecomment">;;       Make it always call abort-recursive-edit.  Renamed to icicle-abort-recursive-edit.</span>
<span class="linecomment">;; 2008/02/28 dadams</span>
<span class="linecomment">;;     icicle-define-icicle-maps: Don't bind pop-tag-mark (M-*) in icicle-mode-map for Emacs 21.</span>
<span class="linecomment">;; 2008/02/26 dadams</span>
<span class="linecomment">;;     Remapped where-is to icicle-where-is.</span>
<span class="linecomment">;;     Added to Describe &gt; Icicles menu: icicle-describe-option-of-type, icicle-where-is.</span>
<span class="linecomment">;;     Bound icicle-select-frame to C-x 5 o in Icicle mode.</span>
<span class="linecomment">;; 2008/02/24 dadams</span>
<span class="linecomment">;;     icicle-define-icicle-maps: Bound icicle-next-apropos-match-function to M-(.</span>
<span class="linecomment">;;     Add icicle-next-apropos-match-function to icicle-update-help-string and mode doc string.</span>
<span class="linecomment">;; 2008/02/23 dadams</span>
<span class="linecomment">;;     Renamed: icicle-search-tag to icicle-find-tag,</span>
<span class="linecomment">;;              icicle-find-tag(-other-window) to icicle-find-first-tag(-other-window).</span>
<span class="linecomment">;;     icicle-define-icicle-maps: Added icicle-tags-search to Tags menu and Search menu.</span>
<span class="linecomment">;; 2008/02/22 dadams</span>
<span class="linecomment">;;     Renamed: icicle(-mouse)-save-candidate to icicle(-mouse)-save/unsave-candidate.</span>
<span class="linecomment">;; 2008/02/13 dadams</span>
<span class="linecomment">;;     Remapped: find-tag (M-.) to icicle-search-tag, instead of icicle-find-tag</span>
<span class="linecomment">;;               pop-tag-mark (M-*) to icicle-pop-tag-mark.</span>
<span class="linecomment">;;     icicle-define-icicle-maps:</span>
<span class="linecomment">;;       Added icicle-search-tag and icicle-pop-tag-mark to menus.</span>
<span class="linecomment">;;       Removed icicle-find-tag from menu.  Renamed icicle-find-tag-other-window menu item.</span>
<span class="linecomment">;; 2008/02/07 dadams</span>
<span class="linecomment">;;     icicle-(redefine|restore)-std-completion-fns: Protect read-number with fboundp.</span>
<span class="linecomment">;; 2008/02/03 dadams</span>
<span class="linecomment">;;     icicle-(redefine|restore)-std-completion-fns: Added (icicle|old)-choose-completion.</span>
<span class="linecomment">;; 2008/01/30 dadams</span>
<span class="linecomment">;;     Bound icicle-yank-secondary and icicle-mouse-yank-secondary.</span>
<span class="linecomment">;; 2008/01/15 dadams</span>
<span class="linecomment">;;     Require dired.el.  Soft-require dired+.el. Thx to Fabrice Knevez.</span>
<span class="linecomment">;; 2008/01/13 dadams</span>
<span class="linecomment">;;     icicle-(rebind|restore)-non-completion-keys:</span>
<span class="linecomment">;;       Bound [handle-switch-frame] to icicle-skip-this-command globally.</span>
<span class="linecomment">;;     Added: icicle-skip-this-command.</span>
<span class="linecomment">;; 2008/01/02 dadams</span>
<span class="linecomment">;;     icicle-(rebind|restore)-non-completion-keys: Bound icicle-search-dired-marked to M-s.</span>
<span class="linecomment">;;     icicle-define-icicle-maps: Added icicle-search-dired-marked to Dired&gt;Multiple&gt;Icicles.</span>
<span class="linecomment">;; 2008/01/01 dadams</span>
<span class="linecomment">;;     icicle-*-non-completion-keys: Bound icicle-candidate-set-dired-marked-save(-more).</span>
<span class="linecomment">;;     icicle-define-icicle-maps: Added Icicles submenu for Dired &gt; Multiple (Operate) menu.</span>
<span class="linecomment">;; 2007/12/31 dadams</span>
<span class="linecomment">;;     Bound icicle-insert-list-join-string to C-M-j.  Update icicle-update-help-string.</span>
<span class="linecomment">;; 2007/12/24 dadams</span>
<span class="linecomment">;;     icicle-rebind-completion-maps: Bound C-j to also refit the minibuffer frame.</span>
<span class="linecomment">;; 2007/12/20 dadams</span>
<span class="linecomment">;;     Bound icicle-dired-saved-file-candidates-other-window in Dired to C-M-r.</span>
<span class="linecomment">;;     Bound icicle-describe-option-of-type to C-h C-o, not C-h M-o.</span>
<span class="linecomment">;; 2007/12/18 dadams</span>
<span class="linecomment">;;     icicle-define-icicle-maps: Bind icicle-describe-option-of-type to C-h M-o.</span>
<span class="linecomment">;; 2007/12/14 dadams</span>
<span class="linecomment">;;     icicle-mode: Only add to kill-emacs-hook if icicle-customize-save-flag is non-nil.</span>
<span class="linecomment">;; 2007/12/13 dadams</span>
<span class="linecomment">;;     icicle-update-help-string: spell out options, don't abbreviate using *.</span>
<span class="linecomment">;; 2007/12/08 dadams</span>
<span class="linecomment">;;     Bound icicle-(beginning|end)-of-line+.</span>
<span class="linecomment">;; 2007/12/07 dadams</span>
<span class="linecomment">;;     icicle-rebind-completion-maps: Removed obsolete stuff from doc string.</span>
<span class="linecomment">;; 2007/12/03 dadams</span>
<span class="linecomment">;;     Renamed longest common match (lcm) to expanded common match (ecm).</span>
<span class="linecomment">;; 2007/11/29 dadams</span>
<span class="linecomment">;;     icicle-minibuffer-setup: If icicle-add-proxy-candidates-flag is nil, swap candidate sets.</span>
<span class="linecomment">;;                              Reset icicle-saved-proxy-candidates to nil.</span>
<span class="linecomment">;; 2007/11/27 dadams</span>
<span class="linecomment">;;     icicle-(redefine|restore)-std-completion-fns: Added read-number.</span>
<span class="linecomment">;; 2007/11/25 dadams</span>
<span class="linecomment">;;     icicle-define-icicle-maps: Bound icicle-command-abbrev to C-x SPC.</span>
<span class="linecomment">;;     icicle-mode: Use icicle-command-abbrev-save on kill-emacs-hook.</span>
<span class="linecomment">;;     Changed binding of icicle-doremi-inter-candidates-min-spaces from C-x SPC to C-x |.</span>
<span class="linecomment">;; 2007/11/23 dadams</span>
<span class="linecomment">;;     icicle-rebind-completion-maps:</span>
<span class="linecomment">;;       Use icicle-prefix-cycle-(next|previous)-keys, instead of hardcoding.</span>
<span class="linecomment">;;     icicle-(bind|restore)-completion-keys:</span>
<span class="linecomment">;;       Use icicle-(apropos|prefix)-cycle-(next|previous)-keys, instead of hardcoding.</span>
<span class="linecomment">;;       Restore explicit vanilla bindings last.</span>
<span class="linecomment">;; 2007/11/22 dadams</span>
<span class="linecomment">;;     icicle-(bind|restore)-completion-keys:</span>
<span class="linecomment">;;       Explicitly bind/restore (C-)up, (C-)down, (C-)next, (C-)(C-)prior, instead of</span>
<span class="linecomment">;;         remapping next-line etc.</span>
<span class="linecomment">;; 2007/11/21 dadams</span>
<span class="linecomment">;;     icicle-rebind-completion-maps: Explicitly bind C-j to icicle-self-insert.</span>
<span class="linecomment">;;     icicle-(bind|restore)-completion-keys, icicle-update-help-string:</span>
<span class="linecomment">;;       Removed C-o binding for icicle-candidate-action.</span>
<span class="linecomment">;; 2007/11/17 dadams</span>
<span class="linecomment">;;     Added doc, menus, bindings (C-M-_): icicle-toggle--proxy-candidates.</span>
<span class="linecomment">;; 2007/11/05 dadams</span>
<span class="linecomment">;;     icicle-define-icicle-maps: Moved [Icy] items to Icicles submenus.</span>
<span class="linecomment">;;     Added: icicle-(bookmark|custom|describe|edit|file|frames|info|search(-tags))-menu-map.</span>
<span class="linecomment">;; 2007/11/03 dadams</span>
<span class="linecomment">;;     icicle-define-icicle-maps, icicle-bind-S-TAB-in-keymaps-from,</span>
<span class="linecomment">;;       icicle-unbind-S-TAB-in-keymaps-from, icicle-rebind-completion-maps,</span>
<span class="linecomment">;;       icicle-bind-completion-keys:</span>
<span class="linecomment">;;         Bind icicle-generic-S-tab-keys instead of hard-coded S-(iso-left)tab.</span>
<span class="linecomment">;;     icicle-(bind|restore)-completion-keys:</span>
<span class="linecomment">;;       Bind/restore icicle-prefix-complete-keys,</span>
<span class="linecomment">;;         icicle-(apropos|prefix)-complete-keys-no-display, not hard-coded keys.</span>
<span class="linecomment">;;     icicle-bind-isearch-keys: Bind icicle-isearch-complete-keys, not hard-coded.</span>
<span class="linecomment">;;     Renamed icicle-modal-cycle-(up|down)-key to icicle-modal-cycle-(up|down)-keys,</span>
<span class="linecomment">;;             icicle-word-completion-key to icicle-word-completion-keys.</span>
<span class="linecomment">;; 2007/10/31 dadams</span>
<span class="linecomment">;;     icicle-define-icicle-maps:</span>
<span class="linecomment">;;       Moved options to new Icicles submenu of Options menu, and removed [Icy].  Added :keys.</span>
<span class="linecomment">;;     Added: icicle-options-menu-map.</span>
<span class="linecomment">;; 2007/10/28 dadams</span>
<span class="linecomment">;;     Added doc, menus, bindings (C-|, C-M-|):</span>
<span class="linecomment">;;       icicle-toggle-(expand-to-common-match|search-replace-common-match).</span>
<span class="linecomment">;; 2007/10/21 dadams</span>
<span class="linecomment">;;     icicle-(bind|restore)-completion-keys: Bind C-x w and C-x SPC.</span>
<span class="linecomment">;;     icicle-define-icicle-maps: Add Do Re Mi items.</span>
<span class="linecomment">;;     icicle-mode, icicle-update-help-string: Mention C-x w and C-x SPC.</span>
<span class="linecomment">;; 2007/09/29 dadams</span>
<span class="linecomment">;;     icicle-mode, icicle-define-icicle-maps, icicle-update-help-string:</span>
<span class="linecomment">;;       Added icicle-toggle-fuzzy-completion (and icicle-fuzzy-completion-flag to help string).</span>
<span class="linecomment">;;     icicle-(bind|restore)-completion-keys: Bind/unbind icicle-toggle-fuzzy-completion to C-(.</span>
<span class="linecomment">;; 2007/09/20 dadams</span>
<span class="linecomment">;;     icicle-(bind|restore)-completion-keys: Bind C-j to icicle-self-insert / exit-minibuffer.</span>
<span class="linecomment">;; 2007/09/18 dadams</span>
<span class="linecomment">;;     Added: icicle-update-help-string.  Use in icy-mode, not in icicle-rebind-completion-maps.</span>
<span class="linecomment">;;            Removed icicle-toggle-WYSIWYG-Completions (it has no minibuffer binding).</span>
<span class="linecomment">;; 2007/08/25 dadams</span>
<span class="linecomment">;;     icy-mode, icicle-completion-help-string:</span>
<span class="linecomment">;;       icicle-clear-option -&gt; clear-option.  Added toggle alias.</span>
<span class="linecomment">;; 2007/08/21 dadams</span>
<span class="linecomment">;;     icicle-completion-help-string: Mention C-M-l.</span>
<span class="linecomment">;; 2007/08/19 dadams</span>
<span class="linecomment">;;     icicle-minibuffer-setup: Reset icicle-input-fail-pos.</span>
<span class="linecomment">;;     icicle-(bind|restore)-completion-keys:</span>
<span class="linecomment">;;       (Re|un)map reposition-window to icicle-kill-failed-input.</span>
<span class="linecomment">;; 2007/08/03 dadams</span>
<span class="linecomment">;;     icicle-mode: Remove icicle* hooks from local, not global, hooks.</span>
<span class="linecomment">;; 2007/07/22 dadams</span>
<span class="linecomment">;;     icicle-(redefine|restore)-standard-commands: Added customize-face(-other-window).</span>
<span class="linecomment">;;     Moved icicle-completing-p to icicles-fn.el.</span>
<span class="linecomment">;;     Require icicles-cmd.el.</span>
<span class="linecomment">;; 2007/07/06 dadams</span>
<span class="linecomment">;;     icicle-rebind-completion-maps:</span>
<span class="linecomment">;;       Moved icicle-Completions-mouse-3-menu to C-mouse-3.</span>
<span class="linecomment">;;       Added icicle(-mouse)-candidate-set-save(-more)-selected, icicle-candidate-set-retrieve,</span>
<span class="linecomment">;;             icicle-retrieve-previous-input.</span>
<span class="linecomment">;;     icicle-completion-help-string: Added icicle-candidate-set-save(-more)-selected.</span>
<span class="linecomment">;;     icicle-bind-completion-maps:</span>
<span class="linecomment">;;       Removed icicle-insert-history-element (inherited).</span>
<span class="linecomment">;;       Added: icicle-candidate-set-save-more(-selected), icicle-mouse-save-then-kill.</span>
<span class="linecomment">;; 2007/07/04 dadams</span>
<span class="linecomment">;;     icicle-rebind-completion-maps, icicle-(bind|restore)-completion-keys:</span>
<span class="linecomment">;;       Added icicle-insert-history-element to Minibuf menu.</span>
<span class="linecomment">;;     icicle-(bind|restore)-completion-keys:</span>
<span class="linecomment">;;       Added icicle-retrieve-(next|previous)-input to Minibuf menu.</span>
<span class="linecomment">;; 2007/07/03 dadams</span>
<span class="linecomment">;;     icicle-rebind-completion-maps, icicle-bind-completion-keys:</span>
<span class="linecomment">;;       Bind icicle-insert-history-element to M-o in all minibuffer maps.</span>
<span class="linecomment">;;     icicle-bind-completion-keys, icicle-completion-help-string:</span>
<span class="linecomment">;;       icicle-retrieve-(next|previous)-input, not icicle-retrieve-last-input.</span>
<span class="linecomment">;;     icicle-(redefine|restore)-std-completion-fns:</span>
<span class="linecomment">;;       defalias next-history-element to icicle-next-history-element.</span>
<span class="linecomment">;;     Removed defadvice for next-history-element.  Redefine in icicles-mcmd.el instead.</span>
<span class="linecomment">;; 2007/06/22 dadams</span>
<span class="linecomment">;;     Bound icicle-search-keywords and added to menus and help strings.</span>
<span class="linecomment">;; 2007/06/20 dadams</span>
<span class="linecomment">;;     Removed M-o binding for icicle-toggle-WYSIWYG-Completions.</span>
<span class="linecomment">;; 2007/06/19 dadams</span>
<span class="linecomment">;;     icicle-bind-completion-keys: Add icicle-save-predicate-to-variable to menus.</span>
<span class="linecomment">;;     icicle-completion-help-string:</span>
<span class="linecomment">;;       Mention icicle-save-predicate-to-variable and icicle-insert-string-from-variable.</span>
<span class="linecomment">;; 2007/06/18 dadams</span>
<span class="linecomment">;;     icy-mode doc string, icicle-completion-help-string: Added icicle-customize-face.</span>
<span class="linecomment">;;     icicle-define-icicle-maps: Added icicle-customize-face to menus.</span>
<span class="linecomment">;; 2007/06/17 dadams</span>
<span class="linecomment">;;     Bound icicle-toggle-WYSIWYG-Completions to M-o.</span>
<span class="linecomment">;;     icicle-minibuffer-setup: Reinitialize icicle-saved-candidate-overlays.</span>
<span class="linecomment">;; 2007/06/16 dadams</span>
<span class="linecomment">;;     icicle-(bind|restore)-completion-keys: Bound C-M-(help|f1).</span>
<span class="linecomment">;; 2007/06/15 dadams</span>
<span class="linecomment">;;     icicle-completion-help-string: Added and cleaned up set stuff.</span>
<span class="linecomment">;;     icicle-(bind|restore)-completion-keys: Cleanup.  Added menu items.</span>
<span class="linecomment">;; 2007/06/14 dadams</span>
<span class="linecomment">;;     Swap bindings for C-insert and insert.</span>
<span class="linecomment">;; 2007/06/13 dadams</span>
<span class="linecomment">;;     Bound C-insert and C-&gt; to icicle-save-candidate and icicle-candidate-set-save-more.</span>
<span class="linecomment">;; 2007/06/12 dadams</span>
<span class="linecomment">;;     icicle-rebind-completion-maps: Bound icicle-mouse-save-candidate to M-S-mouse-2.</span>
<span class="linecomment">;; 2007/06/10 dadams</span>
<span class="linecomment">;;     icicle-mode: comint-mode-hook, compilation(-minor)-mode-hook, temp-buffer-show-hook.</span>
<span class="linecomment">;; 2007/06/08 dadams</span>
<span class="linecomment">;;     icy-mode: Added icicle-find-tag* to doc string.</span>
<span class="linecomment">;;     icicle-define-icicle-maps:</span>
<span class="linecomment">;;       Added icicle-find-tag*.  Remap find-tag* to icicle-find-tag*.</span>
<span class="linecomment">;;       Corrected Info menu.</span>
<span class="linecomment">;;     icicle-completion-help-string: Added icicle-find-tag*.</span>
<span class="linecomment">;; 2007/05/28 dadams</span>
<span class="linecomment">;;     icicle-restore-non-completion-keys: Unbind S-tab.</span>
<span class="linecomment">;;     Added: icicle-unbind-S-TAB-for-map-variable, icicle-unbind-S-TAB-in-keymaps-from.</span>
<span class="linecomment">;;     icicle-bind-S-TAB-in-keymaps-from: Treat S-tab and S-iso-lefftab separately.</span>
<span class="linecomment">;;     icicle-define-icicle-maps: Added icicle-imenu-* to Icicles/Search menus.</span>
<span class="linecomment">;; 2007/05/22 dadams</span>
<span class="linecomment">;;     Make [Icy] menu items invisible when not in Icicle mode.  Add :keys where appropriate.</span>
<span class="linecomment">;;     icicle-define-icicle-maps, icicle-rebind-completion-maps,</span>
<span class="linecomment">;;     icicle-(bind|restore)-completion-keys:</span>
<span class="linecomment">;;       icicle-menu-item-any-version -&gt; menu-item.  Explicit put of enable property -&gt; :enable.</span>
<span class="linecomment">;;     Don't require icicles-mac.el.</span>
<span class="linecomment">;;     icicle-bind-completion-keys: Added icicle-narrow-candidates, and corrected :enable forms.</span>
<span class="linecomment">;; 2007/05/21 dadams</span>
<span class="linecomment">;;     icicle-define-icicle-maps:</span>
<span class="linecomment">;;       Remap minibuffer-keyboard-quit to icicle-abort-minibuffer-input.  Needed, even though</span>
<span class="linecomment">;;         local-must-match inherits from local-completion in Emacs 22, because delsel.el binds</span>
<span class="linecomment">;;         C-g to minibuffer-keyboard-quit in minibuffer maps.</span>
<span class="linecomment">;;     menu-item-any-version -&gt; icicle-menu-item-any-version.</span>
<span class="linecomment">;;     Added Icicles/Search menu items:</span>
<span class="linecomment">;;       Search (Buffer|File|Saved Region|All Saved Regions|Definition|Text Property).</span>
<span class="linecomment">;;     Renamed: Search a Region -&gt; Search Saved Region, Choose a Region -&gt; Choose Saved Region,</span>
<span class="linecomment">;;              Add Current Region to List -&gt; Save Current Region.</span>
<span class="linecomment">;; 2007/05/20 dadams</span>
<span class="linecomment">;;     Enable menu-bar Minibuf:</span>
<span class="linecomment">;;       icicle-rebind-completion-maps:</span>
<span class="linecomment">;;         Use menu-item-any-version.</span>
<span class="linecomment">;;         Don't define menu for maps if it is defined by parent map.</span>
<span class="linecomment">;;         Add Enter and Help items for *-local-map.</span>
<span class="linecomment">;;         Add Enter, Help and Quit items for *-local-(ns|isearch)-map.</span>
<span class="linecomment">;;       icicle-bind-completion-keys:</span>
<span class="linecomment">;;         Use menu-item-any-version.</span>
<span class="linecomment">;;         Add Enter item for *-local-completion-map, unless defined by parent map.</span>
<span class="linecomment">;;       icicle-restore-completion-keys:</span>
<span class="linecomment">;;         Use menu-item-any-version.</span>
<span class="linecomment">;;         Add Enter and Quit items for *-local-completion-map, unless defined by parent map.</span>
<span class="linecomment">;;         Do not unmap kill-region(-wimpy).</span>
<span class="linecomment">;;         Bind [(control pause)] to nil.</span>
<span class="linecomment">;; 2007/05/13 dadams</span>
<span class="linecomment">;;     icicle-restore-completion-keys: Restore some forgotten minibuf menu items.</span>
<span class="linecomment">;; 2007/05/08 dadams</span>
<span class="linecomment">;;     Bound icicle-save-predicate-to-variable to C-M-&.</span>
<span class="linecomment">;; 2007/05/06 dadams</span>
<span class="linecomment">;;     icicle-rebind-completion-maps: Updated icicle-completion-help-string.</span>
<span class="linecomment">;;     Added defvars to quiet byte compiler.</span>
<span class="linecomment">;;     Changed S-C- to C-S- and M-C- to C-M- in doc.</span>
<span class="linecomment">;; 2007/05/03 dadams</span>
<span class="linecomment">;;     Remap icicle-yank-function, not yank.</span>
<span class="linecomment">;;     icicle-define-icicle-maps: Bind icicle-search-word.</span>
<span class="linecomment">;;     icicle-mode, icicle-completion-help-string: Add icicle-search-word to doc.</span>
<span class="linecomment">;; 2007/05/02 dadams</span>
<span class="linecomment">;;     Bound M-q to icicle-dispatch-M-q, not to icicle-insert-key-description.</span>
<span class="linecomment">;;     Bound C-` to icicle-toggle-regexp-quote, not to icicle-dispatch-C-backquote.</span>
<span class="linecomment">;;     Bound C-M-` to icicle-toggle-literal-replacement.</span>
<span class="linecomment">;;     Update icicle-completion-help-string.</span>
<span class="linecomment">;; 2007/04/20 dadams</span>
<span class="linecomment">;;     icicle-minibuffer-setup: Don't reset icicle-search-context-level here.</span>
<span class="linecomment">;; 2007/04/17 dadams</span>
<span class="linecomment">;;     Bound M-, to icicle-dispatch-M-comma, not to icicle-change-alternative-sort-order.</span>
<span class="linecomment">;;     Bound C-` to icicle-dispatch-C-backquote, not to icicle-toggle-regexp-quote.</span>
<span class="linecomment">;; 2007/04/10 dadams</span>
<span class="linecomment">;;     icicle-minibuffer-setup: Initialize icicle-search-context-level.</span>
<span class="linecomment">;; 2007/04/09 dadams</span>
<span class="linecomment">;;     Bound icicle-imenu to C-c =.</span>
<span class="linecomment">;; 2007/04/08 dadams</span>
<span class="linecomment">;;     Bound icicle-all-candidates-alt-action to C-S-insert.</span>
<span class="linecomment">;; 2007/04/07 dadams</span>
<span class="linecomment">;;     icicle-completion-help-string: Updated.</span>
<span class="linecomment">;;     Bound icicle-dispatch-C-comma to C-,.</span>
<span class="linecomment">;;     Bound in menu: icicle-toggle-search-replace-whole.</span>
<span class="linecomment">;;     Bound icicle-(next|previous)-(apropos|prefix)-candidate-alt-action (forgot).</span>
<span class="linecomment">;; 2007/04/02 dadams</span>
<span class="linecomment">;;     Bound icicle-search-text-property to C-c ".  Added it to icicle-completion-help-string.</span>
<span class="linecomment">;; 2007/03/23 dadams</span>
<span class="linecomment">;;     Bound icicle-apropos-complete-and-narrow to S-SPC.  Mention in *-completion-help-string.</span>
<span class="linecomment">;; 2007/03/14 dadams</span>
<span class="linecomment">;;     Added: icicle-top-level-prep.</span>
<span class="linecomment">;;     Removed: icicle-reset-candidates-alist.</span>
<span class="linecomment">;;     Do top-level stuff in icicle-minibuffer-setup, not in icicle-mode.</span>
<span class="linecomment">;;     icicle-minibuffer-setup: Add icicle-top-level-prep to pre-command-hook.</span>
<span class="linecomment">;;     icicle-mode: Remove icicle-top-level-prep from pre-command-hook.</span>
<span class="linecomment">;; 2007/03/07 dadams</span>
<span class="linecomment">;;     icicle-cancel-Help-redirection: Use 0, not t, as frame arg to get-buffer-window.</span>
<span class="linecomment">;; 2007/03/02 dadams</span>
<span class="linecomment">;;     icicle-bind-S-TAB-in-keymaps-from: Bound S-iso-lefttab also.</span>
<span class="linecomment">;; 2007/03/02 dadams</span>
<span class="linecomment">;;     icicle-define-icicle-maps:</span>
<span class="linecomment">;;       Bound S-iso-lefttab also to icicle-generic-S-tab.  Thx to Shreevatsa R.</span>
<span class="linecomment">;; 2007/02/28 dadams</span>
<span class="linecomment">;;     Added: icicle-reset-candidates-alist.</span>
<span class="linecomment">;;     icicle-mode: Use icicle-reset-candidates-alist.</span>
<span class="linecomment">;; 2007/02/27 dadams</span>
<span class="linecomment">;;     icicle-minibuffer-setup: Wait icicle-incremental-completion-delay before initial display.</span>
<span class="linecomment">;; 2007/02/24 dadams</span>
<span class="linecomment">;;     Bound: delete, S-mouse-2 to icicle(-mouse)-remove-candidate,</span>
<span class="linecomment">;;            C-S-RET, C-S-mouse-2 to icicle(-mouse)-candidate-alt-action,</span>
<span class="linecomment">;;            S-delete to icicle-delete-candidate-object.</span>
<span class="linecomment">;;     Don't remap icicle-kill-region(-wimpy) to delete key.</span>
<span class="linecomment">;; 2007/02/17 dadams</span>
<span class="linecomment">;;     Added: icicle-bind-S-TAB-in-keymaps-from, icicle-bind-S-TAB-for-map-variable.</span>
<span class="linecomment">;;     icicle-rebind-non-completion-keys:</span>
<span class="linecomment">;;       Bind S-TAB to keymaps in icicle-keymaps-for-key-completion.</span>
<span class="linecomment">;; 2007/02/02 dadams</span>
<span class="linecomment">;;     icicle-completing-p: Cache the value in variable icicle-completing-p.</span>
<span class="linecomment">;;     icicle-minibuffer-setup: Reset icicle-completing-p to nil.</span>
<span class="linecomment">;;     icicle-activate-mark: Use var, not function, icicle-completing-p, but after minibuf test.</span>
<span class="linecomment">;; 2007/01/23 dadams</span>
<span class="linecomment">;;     icicle-(redefine|restore)-std-completion-fns:</span>
<span class="linecomment">;;       Added icicle-read-face-name, icicle-face-valid-attribute-values.</span>
<span class="linecomment">;;     icicle-define-icicle-maps, icicle-rebind-completion-maps:</span>
<span class="linecomment">;;       Updated wrt toggles.  Added icicle*-highlight-historical-candidates*.</span>
<span class="linecomment">;;     icicle-bind-completion-keys: Added icicle-toggle-highlight-historical-candidates.</span>
<span class="linecomment">;; 2007/01/22 dadams</span>
<span class="linecomment">;;     Renamed icicle-regions to icicle-region-alist (forgot occurrences here).</span>
<span class="linecomment">;; 2007/01/20 dadams</span>
<span class="linecomment">;;     icicle-(redefine|restore)-std-completion-fns: Added icicle-display-completion-list.</span>
<span class="linecomment">;; 2007/01/15 dadams</span>
<span class="linecomment">;;     Moved C-, binding from icicle-toggle-sorting to icicle-change-sort-order.</span>
<span class="linecomment">;;     Moved icicle-toggle-alternative-sorting from M-, to C-M-,.</span>
<span class="linecomment">;;     Bound icicle-change-alternative-sort-order to M-,.</span>
<span class="linecomment">;;     Updated list of options in icicle-completion-help-string.</span>
<span class="linecomment">;; 2007/01/12 dadams</span>
<span class="linecomment">;;     Removed: icicle-override-maps-w-minibuffer-map, icicle-restore-overriding-local-map.</span>
<span class="linecomment">;;              Not used in minibuffer hooks.</span>
<span class="linecomment">;;     Removed [pause] bindings from minibuffer maps.</span>
<span class="linecomment">;;     Removed remap of yank in minibuffer maps.</span>
<span class="linecomment">;;     No longer bind icicle-remove-Completions-window in minibuffer maps.</span>
<span class="linecomment">;; 2007/01/11 dadams</span>
<span class="linecomment">;;     Renamed: icicle-define-icicle-mode-map to icicle-define-icicle-maps.</span>
<span class="linecomment">;;     icicle-define-icicle-maps: Use icicle-menu-map.  Don't recreate it.</span>
<span class="linecomment">;;     Bound [pause] to icicle-switch-to/from-minibuffer in all minibuffer maps.</span>
<span class="linecomment">;; 2007/01/10 dadams</span>
<span class="linecomment">;;     Added: icicle-override-maps-w-minibuffer-map, icicle-restore-overriding-local-map,</span>
<span class="linecomment">;;            icicle-(rebind|restore)-non-completion-keys.</span>
<span class="linecomment">;;     Added: icicle-rebind-global: This used to be called icicle-remap.</span>
<span class="linecomment">;;     icicle-(remap|unmap): Different purpose and use now.  Redefined to use remapping when</span>
<span class="linecomment">;;        available (as was done before for self-insert-command).</span>
<span class="linecomment">;;     icicle-mode:</span>
<span class="linecomment">;;       Add, remove as minibuffer setup and exit hooks: icicle-override-maps-w-minibuffer-map,</span>
<span class="linecomment">;;                                                       icicle-restore-overriding-local-map.</span>
<span class="linecomment">;;       Call icicle-(rebind|restore)-non-completion-keys.</span>
<span class="linecomment">;;     icicle-define-icicle-mode-map:</span>
<span class="linecomment">;;       Use icicle-remap where previously used substitute-key-definition for top-level cmds.</span>
<span class="linecomment">;;       Moved to icicle-(rebind|restore)-non-completion-keys:</span>
<span class="linecomment">;;         binding of Info commands in Info map and S-tab in all keymaps (to *-rebind-* only).</span>
<span class="linecomment">;;     icicle-(bind|restore)-completion-keys: Use new icicle-(remap|unmap) where possible.</span>
<span class="linecomment">;;       Use icicle-rebind-global and substitute-key-definition for keys defined in vanilla</span>
<span class="linecomment">;;         completion maps.</span>
<span class="linecomment">;; 2007/01/06 dadams</span>
<span class="linecomment">;;     icicle-mode: Update doc and bind icicle-toggle-~-for-home-dir to M-~.</span>
<span class="linecomment">;; 2007/01/01 dadams</span>
<span class="linecomment">;;     Moved assq-delete-all to icicles-fn.el.</span>
<span class="linecomment">;;     Require at runtime, not compile-time: icicles-var.el, icicles-fn.el.</span>
<span class="linecomment">;; 2006-12-31 dadams</span>
<span class="linecomment">;;     icicle-define-icicle-mode-map: Delete icicle-mode entry from minor-mode-map-alist.</span>
<span class="linecomment">;;     icicle-mode: Unbind icicle-mode-map when the mode is turned off.</span>
<span class="linecomment">;;     Added assq-delete-all for Emacs 20.</span>
<span class="linecomment">;;     Use current-global-map function, not global-map variable.</span>
<span class="linecomment">;; 2006/12/25 dadams</span>
<span class="linecomment">;;     Bound icicle-candidate-set-truncate to M-$.</span>
<span class="linecomment">;; 2006/12/24 dadams</span>
<span class="linecomment">;;     icicle-bind-completion-keys: transpose-yank(-pop) -&gt; yank(-pop): typo.</span>
<span class="linecomment">;;     Bound mouse-3 to icicle-Completions-mouse-3-menu in completion-list-mode-map.</span>
<span class="linecomment">;; 2006/12/22 dadams</span>
<span class="linecomment">;;     Bound icicle-exchange-point-and-mark.</span>
<span class="linecomment">;;     :group 'icicles -&gt; :group 'Icicles-Miscellaneous.</span>
<span class="linecomment">;; 2006/12/17 dadams</span>
<span class="linecomment">;;     Bound icicle(-mouse)-candidate-read-fn-invoke.</span>
<span class="linecomment">;; 2006/12/16 dadams</span>
<span class="linecomment">;;     icicle-define-icicle-mode-map: Protect icicle-kmacro with fboundp.</span>
<span class="linecomment">;; 2006/12/12 dadams</span>
<span class="linecomment">;;     Added icicle-customize-*-group, icicle-kill-buffer, icicle-delete-windows to I. menu.</span>
<span class="linecomment">;;     Added + to multi-command menu items.</span>
<span class="linecomment">;; 2006/12/11 dadams</span>
<span class="linecomment">;;     Added icicle-customize-apropos* and icicle-Info-* to menu-bar menus.</span>
<span class="linecomment">;; 2006/12/10 dadams</span>
<span class="linecomment">;;     Updated user options list in icicle-completion-help-string.</span>
<span class="linecomment">;;     Updated list of icicle-opt stuff used here.</span>
<span class="linecomment">;; 2006/12/06</span>
<span class="linecomment">;;     icicle-select-minibuffer-contents:</span>
<span class="linecomment">;;       Use icicle-minibuffer-prompt-end, not point-min.  Thx to Erik Postma.</span>
<span class="linecomment">;; 2006/11/26 dadams</span>
<span class="linecomment">;;     Added icicle-regions stuff.</span>
<span class="linecomment">;; 2006/11/24 dadams</span>
<span class="linecomment">;;     icicle-redefine-standard-options: Treat icicle-kmacro-ring-max.</span>
<span class="linecomment">;;     Bind icicle-kmacro to f5</span>
<span class="linecomment">;;     Replaced icicle-select-window-or-frame by icicle-other-window-or-frame.</span>
<span class="linecomment">;;     Removed binding of icicle-select-frame.</span>
<span class="linecomment">;;     Do not require mb-depth+.el for Emacs 21 (do it only for Emacs 22).</span>
<span class="linecomment">;; 2006/11/23 dadams</span>
<span class="linecomment">;;     Bound icicle-execute-named-keyboard-macro to C-x M-e.</span>
<span class="linecomment">;; 2006/11/18 dadams</span>
<span class="linecomment">;;     Soft require mb-depth+.el instead of minibuf-depth.el.</span>
<span class="linecomment">;; 2006/11/17 dadams</span>
<span class="linecomment">;;     Bind icicle-select-window-or-frame to whatever other-window(-or-frame) is bound to.</span>
<span class="linecomment">;;     Bind icicle-select-frame to whatever other-frame is bound to.</span>
<span class="linecomment">;; 2006/11/09 dadams</span>
<span class="linecomment">;;     Bind icicle-dispatch-C-^, not icicle-toggle-ignored-space-prefix, to C-^.</span>
<span class="linecomment">;;     icicle-rebind-completion-maps: Updated doc string for icicle-dispatch-C-^.</span>
<span class="linecomment">;; 2006/11/05 dadams</span>
<span class="linecomment">;;     Bound icicle-occur to C-c '.  Added it to menu-bar menus.</span>
<span class="linecomment">;; 2006/10/18 dadams</span>
<span class="linecomment">;;     icy-mode: Invoke icicle-define-icicle-mode-map unconditionally, not just first time.</span>
<span class="linecomment">;; 2006/10/16 dadams</span>
<span class="linecomment">;;     icicle-define-icicle-mode-map: Try to avoid binding S-TAB to menu maps.</span>
<span class="linecomment">;; 2006/10/15 dadams</span>
<span class="linecomment">;;     icicle-define-icicle-mode-map: Simplified, corrected binding of S-TAB for key completion.</span>
<span class="linecomment">;;                                    Use a separate map for the menu bar.</span>
<span class="linecomment">;;     Moved here from icicles-fn.el:</span>
<span class="linecomment">;;       icicle-bind-isearch-keys, icicle-rebind-completion-maps,</span>
<span class="linecomment">;;       icicle-(redefine|restore)-standard-(commands|options),</span>
<span class="linecomment">;;       icicle-(redefine|restore)-std-completion-fns, icicle-(re|un)map,</span>
<span class="linecomment">;;       icicle-(bind|restore)-completion-keys, icicle-minibuffer-setup,</span>
<span class="linecomment">;;       icicle-cancel-*Help*-redirection, icicle-activate-mark,</span>
<span class="linecomment">;;       icicle-run-icicle-(pre|post)-command-hook, icicle-set-calling-cmd,</span>
<span class="linecomment">;;       icicle-undo-std-completion-faces icicle-update-ignored-extensions-regexp,</span>
<span class="linecomment">;;       icicle-completing-p, icicle-restore-region-face.</span>
<span class="linecomment">;;     Renamed: icicle-cancel-*Help*-redirection to icicle-cancel-Help-redirection.</span>
<span class="linecomment">;;     Moved here from icicles-cmd.el: icicle-select-minibuffer-contents, next-history-element.</span>
<span class="linecomment">;;     Moved to icicles-cmd.el: icicle-generic-S-tab.</span>
<span class="linecomment">;;     Require icicles-opt.el.</span>
<span class="linecomment">;;     Added eval-when-compile's and defvars to quite byte compiler.</span>
<span class="linecomment">;; 2006/09/23 dadams</span>
<span class="linecomment">;;     icicle-define-icicle-mode-map: Corrected binding of icicle-yank-insert.</span>
<span class="linecomment">;; 2006/09/22 dadams</span>
<span class="linecomment">;;     icicle-minibuffer-setup: Set this-command and last-command, for scrolling *Completions*.</span>
<span class="linecomment">;; 2006/09/18 dadams</span>
<span class="linecomment">;;     icicle-mode: Picked up all global prefixes for S-TAB.</span>
<span class="linecomment">;; 2006/09/17 dadams</span>
<span class="linecomment">;;     Added: icicle-generic-S-tab.  Bound to S-TAB.</span>
<span class="linecomment">;;     icicle-mode:</span>
<span class="linecomment">;;       Bound icicle-complete-keys to prefix keys followed by S-TAB.</span>
<span class="linecomment">;;       Added run-hooks for Emacs 22 version.</span>
<span class="linecomment">;; 2006/09/12 dadams</span>
<span class="linecomment">;;     Bound icicle-switch-to/from-minibuffer to [pause].</span>
<span class="linecomment">;; 2006/08/27 dadams</span>
<span class="linecomment">;;     Bound icicle-abort-minibuffer-input to what abort-recursive-edit is normally bound to.</span>
<span class="linecomment">;;       And add it to Icicle menu.</span>
<span class="linecomment">;; 2006/08/23 dadams</span>
<span class="linecomment">;;     Bound icicle-delete-window to what delete-window and delete-windows-for are normally</span>
<span class="linecomment">;;       bound to.</span>
<span class="linecomment">;;     Put use of Info-mode-map inside an eval-after-load.</span>
<span class="linecomment">;; 2006/08/18 dadams</span>
<span class="linecomment">;;     Added icicle-Info-goto-node-cmd to icicle-mode doc string.</span>
<span class="linecomment">;;       Substitute it for Info-goto-node binding.</span>
<span class="linecomment">;; 2006/08/13 dadams</span>
<span class="linecomment">;;     Added icicle-Info-index-cmd to icicle-mode doc string.</span>
<span class="linecomment">;;       Substitute it for Info-index binding.</span>
<span class="linecomment">;; 2006/08/04 dadams</span>
<span class="linecomment">;;     Added icicle-plist to menus.</span>
<span class="linecomment">;;     icicle-doc treats faces too now.</span>
<span class="linecomment">;; 2006/08/03 dadams</span>
<span class="linecomment">;;     Bound icicle-insert-yank to what yank is normally bound to.</span>
<span class="linecomment">;;     icicle-mode: Updated doc string.</span>
<span class="linecomment">;; 2006/07/29 dadams</span>
<span class="linecomment">;;     icy-mode, icicle-define-icicle-mode-map: Added missing toggle commands.</span>
<span class="linecomment">;; 2006/07/22 dadams</span>
<span class="linecomment">;;     Changed binding of C-c C-s for icicle-search to C-c ` for icicle-search-generic.</span>
<span class="linecomment">;;     Removed: add-hooks for icicle-compilation-search - see icicles-cmd.el.</span>
<span class="linecomment">;; 2006/06/08 dadams</span>
<span class="linecomment">;;     Converted global bindings in icicles-keys.el to icicle-mode-map bindings here.</span>
<span class="linecomment">;;     Added f10 binding for icicle-execute-menu-command.</span>
<span class="linecomment">;; 2006/05/19 dadams</span>
<span class="linecomment">;;     icicle-mode: (add-hook 'kill-emacs-hook 'icicle-control-reminder-prompt).</span>
<span class="linecomment">;; 2006/05/18 dadams</span>
<span class="linecomment">;;     Change :init-value to nil, per new Emacs convention.</span>
<span class="linecomment">;; 2006/05/13 dadams</span>
<span class="linecomment">;;     icicle-mode: Updated doc string.</span>
<span class="linecomment">;; 2006/05/10 dadams</span>
<span class="linecomment">;;     icicle-define-icicle-mode-map: Added menu item Send Bug Report.</span>
<span class="linecomment">;; 2006/04/03 dadams</span>
<span class="linecomment">;;     icicle-define-icicle-mode-map: Added icicle-toggle-(regexp-quote|incremental-completion).</span>
<span class="linecomment">;; 2006/03/16 dadams</span>
<span class="linecomment">;;     icicle-mode: Turn on minibuffer-indicate-depth-mode (Emacs 22 only).</span>
<span class="linecomment">;;     Added soft require of minibuf-depth.el for Emacs 22.</span>
<span class="linecomment">;; 2006/03/14 dadams</span>
<span class="linecomment">;;     Do not use icicle-reset-icicle-completing-p as minibuffer-exit-hook.</span>
<span class="linecomment">;; 2006/03/07 dadams</span>
<span class="linecomment">;;     Corrected menu items for icicle-doc (no name regexp input, just doc regexp).</span>
<span class="linecomment">;; 2006/03/05 dadams</span>
<span class="linecomment">;;     Moved here from icicle-opt.el: icicle-mode, icicle-mode-hook.</span>
<span class="linecomment">;;     Moved here from icicle-fn.el: icicle-mode-map.</span>
<span class="linecomment">;;     Added: icicle-define-icicle-mode-map.</span>
 
<span class="linecomment">;;;(@* "CHANGE LOG FOR `icicles-opt.el'")</span>
<span class="linecomment">;;</span>
<span class="linecomment">;; 2013/01/18 dadams</span>
<span class="linecomment">;;     No longer require icicles-face.el, since now need only hexrgb.el (see next).</span>
<span class="linecomment">;;     icicle-region-background: Use hexrgb-increment*, not icicle-increment-*.</span>
<span class="linecomment">;; 2012/12/21 dadams</span>
<span class="linecomment">;;     Added: icicle-buffer-skip-hook, icicle-find-file-of-content-skip-hook.  Thx to C. Schmidt.</span>
<span class="linecomment">;; 2012/12/20 dadams</span>
<span class="linecomment">;;     Added: icicle-TAB/S-TAB-only-completes-flag.</span>
<span class="linecomment">;; 2012/12/02 dadams</span>
<span class="linecomment">;;     Removed autoload cookie from icicle-completion-key-bindings.</span>
<span class="linecomment">;; 2012/12/01 dadams</span>
<span class="linecomment">;;     Added: icicle-completion-key-bindings.</span>
<span class="linecomment">;;     Moved here from icicles-mac.el: icicle-kbd, icicle-edmacro-parse-keys, icicle-read-kbd-macro.</span>
<span class="linecomment">;;     icicle-kbd: Now a function, not a macro.</span>
<span class="linecomment">;; 2012/11/28 dadams</span>
<span class="linecomment">;;     Removed: icicle-transform-function - moved to icicles-var.el.</span>
<span class="linecomment">;; 2012/11/27 dadams</span>
<span class="linecomment">;;     icicle-default-in-prompt-format-function:</span>
<span class="linecomment">;;       Removed ": " from default value.  Prepend instead of replace, now.</span>
<span class="linecomment">;;     icicle-top-level-key-bindings: Added icicle-apropos-value.</span>
<span class="linecomment">;; 2012/11/26 dadams</span>
<span class="linecomment">;;     Added: icicle-default-in-prompt-format-function.</span>
<span class="linecomment">;; 2012/11/21 dadams</span>
<span class="linecomment">;;     icicle-image-files-in-Completions:</span>
<span class="linecomment">;;       Do not test, here, whether display is graphic (for Emacs daemon).  Thx to Christopher Schmidt.</span>
<span class="linecomment">;; 2012/11/18 dadams</span>
<span class="linecomment">;;     icicle-default-value: Updated doc string to reflect adding def to prompt for value t.</span>
<span class="linecomment">;; 2012/11/08 dadams</span>
<span class="linecomment">;;     icicle-widgets-to-redefine: Predicate makes sure it is also a symbol.</span>
<span class="linecomment">;; 2012/11/03 dadams</span>
<span class="linecomment">;;     icicle-widgets-to-redefine: Fix to not include nil.</span>
<span class="linecomment">;; 2012/11/02 dadams</span>
<span class="linecomment">;;     icicle-widgets-to-redefine: Include color widget only if can load wid-edit+.el.</span>
<span class="linecomment">;;     icicle-functions-to-redefine: Added bbdb-complete-mail.</span>
<span class="linecomment">;; 2012/10/27 dadams</span>
<span class="linecomment">;;     Added: icicle-show-annotations-flag.</span>
<span class="linecomment">;; 2012/10/26 dadams</span>
<span class="linecomment">;;     icicle-search-replace-whole-candidate-flag: Correct key in doc string: M-_, not C-,.</span>
<span class="linecomment">;; 2012/10/21 dadams</span>
<span class="linecomment">;;     Added: icicle-buffer-include-cached-files-nflag, icicle-buffer-include-recent-files-nflag.</span>
<span class="linecomment">;; 2012/10/10 dadams</span>
<span class="linecomment">;;     icicle-shell-command-candidates-cache:</span>
<span class="linecomment">;;       Removed autoload cookie due to default value dependency.  Thx to Michael Heerdegen.</span>
<span class="linecomment">;; 2012/10/05 dadams</span>
<span class="linecomment">;;     Added: icicle-kill-visited-buffers-flag.</span>
<span class="linecomment">;; 2012/10/02 dadams</span>
<span class="linecomment">;;     icicle-list-join-string:</span>
<span class="linecomment">;;       Make display prop cover whole string and display \n rather than just hide ^G part.</span>
<span class="linecomment">;;       Important for cursor movement: join string acts like one char.</span>
<span class="linecomment">;; 2012/09/08 dadams</span>
<span class="linecomment">;;     Removed: icicle-ignore-space-prefix-flag.</span>
<span class="linecomment">;;     icicle-buffer-ignore-space-prefix-flag: Updated doc to be self-contained.</span>
<span class="linecomment">;; 2012/08/26 dadams</span>
<span class="linecomment">;;     icicle-thing-at-point:</span>
<span class="linecomment">;;       If SYNTAX-TABLE is nil, then do not use with-syntax-table.  Removed SYNTAX-TABLE args.</span>
<span class="linecomment">;; 2012/08/21 dadams</span>
<span class="linecomment">;;     Call tap-put-thing-at-point-props after load thingatpt+.el.</span>
<span class="linecomment">;; 2012/08/18 dadams</span>
<span class="linecomment">;;     Added: icicle-thing-at-point.</span>
<span class="linecomment">;;     Invoke tap-define-aliases-wo-prefix if thingatpt+.el is loaded.</span>
<span class="linecomment">;;     thing-at-point -&gt; icicle-thing-at-point.</span>
<span class="linecomment">;; 2012/08/06 dadams</span>
<span class="linecomment">;;     icicle-functions-to-redefine: Updated doc string for new name prefix icicle-ORIG-.</span>
<span class="linecomment">;; 2012/08/05 dadams</span>
<span class="linecomment">;;     icicle-widgets-to-redefine: Added color to the default value.</span>
<span class="linecomment">;; 2012/08/03 dadams</span>
<span class="linecomment">;;     Added: icicle-key-complete-keys-for-minibuffer.</span>
<span class="linecomment">;;     icicle-key-complete-keys: Updated default value, since Emacs bug #1281 was fixed.</span>
<span class="linecomment">;; 2012/07/31 dadams</span>
<span class="linecomment">;;     Added: icicle-widgets-to-redefine, icicle-widgetp.</span>
<span class="linecomment">;; 2012/07/24 dadams</span>
<span class="linecomment">;;     icicle-TAB-completion-methods-per-command: Fix bug when delete entries: set them to nil first.</span>
<span class="linecomment">;;     icicle-buffer-ignore-space-prefix-flag: Updated doc string - C-u M-_ now toggles this.</span>
<span class="linecomment">;; 2012/07/21 dadams</span>
<span class="linecomment">;;     icicle-comint-dynamic-complete-replacements:</span>
<span class="linecomment">;;       Added entry for pcomplete and comint/shell file-name completion.  Thx to C. Schmidt.</span>
<span class="linecomment">;; 2012/07/16 dadams</span>
<span class="linecomment">;;     icicle-comint-dynamic-complete-replacements:</span>
<span class="linecomment">;;       Added (shell-command-completion 'icicle-shell-dynamic-complete-command).</span>
<span class="linecomment">;; 2012/07/13 dadams</span>
<span class="linecomment">;;     icicle-network-drive-means-remote-flag: Update doc string for toggle, C-x :.</span>
<span class="linecomment">;; 2012/07/08 dadams</span>
<span class="linecomment">;;     icicle-functions-to-redefine: Updated comint stuff for Emacs 24: comint-completion-at-point.</span>
<span class="linecomment">;;       Thx to Christopher Schmidt and Michael Heerdegen.</span>
<span class="linecomment">;; 2012/07/07 dadams</span>
<span class="linecomment">;;     Added: icicle-Info-visited-max-candidates.</span>
<span class="linecomment">;;     Added reminder about icicle-(increment|toggle)-option to doc strings for boolean|integer|number.</span>
<span class="linecomment">;; 2012/07/05 dadams</span>
<span class="linecomment">;;     Removed #' from lambdas.</span>
<span class="linecomment">;; 2012/06/29 dadams</span>
<span class="linecomment">;;     icicle-inhibit-advice-functions: Exclude commands that are not redefined in certain releases.</span>
<span class="linecomment">;;     icicle-command-abbrev-alist: Added :tag strings.</span>
<span class="linecomment">;; 2012/06/09 dadams</span>
<span class="linecomment">;;     icicle-show-Completions-help-flag: Do not defvaralias it to completion-show-help.  Updated doc.</span>
<span class="linecomment">;; 2012/05/07 dadams</span>
<span class="linecomment">;;     Applied renaming of icicle-search-dired-marked to icicle-search-dired-marked-recursive.</span>
<span class="linecomment">;; 2012/04/03 dadams</span>
<span class="linecomment">;;     icicle-top-level-key-bindings: Protect icicle-complete-thesaurus-entry binding with fboundp.</span>
<span class="linecomment">;;     icicle-top-level-when-sole-completion-delay: Increased default value from 0.7 to 1.0.</span>
<span class="linecomment">;; 2012/04/01 dadams</span>
<span class="linecomment">;;     Moved to icicle-top-level-key-bindings from icicle-functions-to-redefine:</span>
<span class="linecomment">;;       customize-*, dabbrev-completion, repeat-complex-command.</span>
<span class="linecomment">;;     icicle-top-level-key-bindings: Added replacements for apropos* commands.</span>
<span class="linecomment">;; 2012/02/28 dadams</span>
<span class="linecomment">;;     for Emacs 20: Use eval-when-compile, not eval-and-compile, to require cl.el.</span>
<span class="linecomment">;; 2012/02/26 dadams</span>
<span class="linecomment">;;     icicle-top-level-key-bindings: Update to reflect Bookmark+ changes (bindings).</span>
<span class="linecomment">;;     icicle-touche-pas-aux-menus-flag: Clarify doc string.</span>
<span class="linecomment">;; 2012/02/11 dadams</span>
<span class="linecomment">;;     ** NOTE ** Incompatible renamings and value changes.  Update any corresponding customizations.</span>
<span class="linecomment">;;     Renamed: icicle-expand-input-to-common-match-flag to icicle-expand-input-to-common-match,</span>
<span class="linecomment">;;              icicle-incremental-completion-flag to icicle-incremental-completion.</span>
<span class="linecomment">;;     Added: icicle-expand-input-to-common-match-alt.</span>
<span class="linecomment">;;     icicle-expand-input-to-common-match: Values are now 0 to 4 (split prefix and sole-match).</span>
<span class="linecomment">;;     Doc strings: applied renamings and key changes.</span>
<span class="linecomment">;; 2012/01/31 dadams</span>
<span class="linecomment">;;     Added: icicle-doremi-submenu.  Added it to icicle-Completions-mouse-3-menu-entries.</span>
<span class="linecomment">;;     icicle-Completions-toggle-submenu:</span>
<span class="linecomment">;;       Added: remote-file-testing, ignoring-(space-prefix|comments), completions-format,</span>
<span class="linecomment">;;              multi-completions, search-complementing-domain.  Rearranged.</span>
<span class="linecomment">;;     icicle-*-submenu: Added some missing key shortcuts.</span>
<span class="linecomment">;; 2012/01/17 dadams</span>
<span class="linecomment">;;     Added: icicle-network-drive-means-remote-flag.</span>
<span class="linecomment">;; 2012/01/14 dadams</span>
<span class="linecomment">;;     Added: icicle-zap-to-char-candidates.</span>
<span class="linecomment">;;     icicle-top-level-key-bindings: Added entry for icicle-zap-to-char (M-z).</span>
<span class="linecomment">;; 2012/01/13 dadams</span>
<span class="linecomment">;;     icicle-prefix-complete-keys: Added [?\t].</span>
<span class="linecomment">;; 2012/01/08 dadams</span>
<span class="linecomment">;;     icicle-top-level-key-bindings: Added remappings to icicle-yank-pop-commands.</span>
<span class="linecomment">;;                                    Typo: bmkp-autonamed-this-buffer-jump (name).</span>
<span class="linecomment">;;     icicle-files-ido-like-flag: Mention in doc string that it has no effect for Emacs 20.</span>
<span class="linecomment">;; 2012/01/02 dadams</span>
<span class="linecomment">;;     icicle-bind-top-level-commands:</span>
<span class="linecomment">;;       Must be in Icicle mode, so icicle-mode-map is defined.  Otherwise you cannot customize</span>
<span class="linecomment">;;         icicle-top-level-key-bindings outside Icicle mode.</span>
<span class="linecomment">;; 2011/12/28 dadams</span>
<span class="linecomment">;;     Removed obsolete option icicle-cycle-into-subdirs-flag and all mention of it.</span>
<span class="linecomment">;; 2011/12/24 dadams</span>
<span class="linecomment">;;     Added: icicle-Completions-max-columns.</span>
<span class="linecomment">;;     icicle-recenter: Changed the :value setting to -4 from nil.</span>
<span class="linecomment">;; 2011/12/14 dadams</span>
<span class="linecomment">;;     icicle-top-level-key-bindings: Added icicle-bookmark-image(-other-window).</span>
<span class="linecomment">;; 2011/12/06 dadams</span>
<span class="linecomment">;;     icicle-default-value: Updated doc wrt new behavior for icicle-read-from-minibuffer.</span>
<span class="linecomment">;; 2011/11/01 dadams</span>
<span class="linecomment">;;     icicle-top-level-key-bindings: Added: icicle-bookmark-(autonamed(-this-buffer)|autofile|</span>
<span class="linecomment">;;                                                            bookmark-file|temporary)(-other-window).</span>
<span class="linecomment">;; 2011/10/10 dadams</span>
<span class="linecomment">;;     Removed use of icicle-kbd in option values, because byte-compile of defcustom does not eval.</span>
<span class="linecomment">;;     Removed eval-when-compile to load icicles-mac.</span>
<span class="linecomment">;; 2011/10/08 dadams</span>
<span class="linecomment">;;     Added: icicle-candidate-(action|help)-keys.</span>
<span class="linecomment">;;     eval-when-compile icicles-mac.el.</span>
<span class="linecomment">;;     icicle-(apropos|prefix)-complete(-no-display)-keys, icicle-key-complete-keys,</span>
<span class="linecomment">;;       icicle-apropos-cycle-(next|previous)((-alt)-action|help)-keys, icicle-isearch-complete-keys,</span>
<span class="linecomment">;;       icicle-modal-cycle-(down|up)((-alt)-action|help)-keys, icicle-completing-read+insert-keys</span>
<span class="linecomment">;;       icicle-previous-candidate-keys, icicle-read+insert-file-name-keys,</span>
<span class="linecomment">;;       icicle-search-from-isearch-keys, icicle-top-level-key-bindings, icicle-word-completion-keys:</span>
<span class="linecomment">;;         Use icicle-kbd (and do not use kbd).</span>
<span class="linecomment">;; 2011/10/04 dadams</span>
<span class="linecomment">;;     Added: icicle-search-key-prefix.</span>
<span class="linecomment">;; 2011/10/02 dadams</span>
<span class="linecomment">;;     icicle-functions-to-redefine: Added read-char-by-name to default value.</span>
<span class="linecomment">;; 2011/09/18 dadams</span>
<span class="linecomment">;;     icicle-search-highlight-threshold: Added possibility of a t value.</span>
<span class="linecomment">;;     icicle-image-files-in-Completions: Removed quote for image-only value.</span>
<span class="linecomment">;; 2011/09/05 dadams</span>
<span class="linecomment">;;     Added: icicle-hide-non-matching-lines-flag.</span>
<span class="linecomment">;;     icicle-Completions-toggle-submenu: Added icicle-toggle-hiding-non-matching-lines to menu.</span>
<span class="linecomment">;;     icicle-hide-common-match-in-Completions-flag: Updated doc string (new toggle key).</span>
<span class="linecomment">;; 2011/09/04 dadams</span>
<span class="linecomment">;;     Renamed: icicle-complete-keys-self-insert-flag to icicle-complete-keys-self-insert-ranges.</span>
<span class="linecomment">;;       Define it only for Emacs 22+.</span>
<span class="linecomment">;;       Made it an alist of char ranges, for Emacs 23+.</span>
<span class="linecomment">;; 2011/09/02 dadams</span>
<span class="linecomment">;;     icicle-functions-to-redefine: Added: Info-goto-node, Info-index, Info-menu.</span>
<span class="linecomment">;; 2011/08/30 dadams</span>
<span class="linecomment">;;     icicle-thing-at-point-functions:</span>
<span class="linecomment">;;       symbol-name-nearest-point -&gt; icicle-thing-at-point-functions</span>
<span class="linecomment">;;       region-or-word-nearest-point -&gt; word-nearest-point</span>
<span class="linecomment">;; 2011/08/13 dadams</span>
<span class="linecomment">;;     icicle-top-level-key-bindings: Map bmkp-autofile-set to icicle-bookmark-a-file.</span>
<span class="linecomment">;; 2011/08/07 dadams</span>
<span class="linecomment">;;     icicle-top-level-key-bindings: Bind icicle-find-file-tagged(-other-window) to C-x j t a a.</span>
<span class="linecomment">;; 2011/07/30 dadams</span>
<span class="linecomment">;;     Moved icicle-increment-color-value to icicles-face.el.</span>
<span class="linecomment">;;     Require icicles-face.el only if hexrgb.el has been loaded.</span>
<span class="linecomment">;; 2011/07/27 dadams</span>
<span class="linecomment">;;     icicle-completions-format, icicle-search-whole-word-flag: Updated doc string.</span>
<span class="linecomment">;; 2011/07/26 dadams</span>
<span class="linecomment">;;     Removed: icicle-list-end-string (no longer needed).  Thx to Michael Heerdegen.</span>
<span class="linecomment">;; 2011/07/06 dadams</span>
<span class="linecomment">;;     Renamed icicle-Completions-frame-at-right-flag to icicle-move-Completions-frame.</span>
<span class="linecomment">;;     icicle-move-Completions-frame: Allow for moving frame to the left also.</span>
<span class="linecomment">;; 2011/06/03 dadams</span>
<span class="linecomment">;;     Renamed icicle-help-in-mode-line-flag to icicle-help-in-mode-line-delay and changed to 5 secs.</span>
<span class="linecomment">;; 2011/05/24 dadams</span>
<span class="linecomment">;;     icicle-functions-to-redefine: Removed (dired-)read-shell-command - turned off by default now.</span>
<span class="linecomment">;; 2011/05/22 dadams</span>
<span class="linecomment">;;     icicle-init-value-flag/icicle-default-value: Added 3rd arg for make-obsolete-variable.</span>
<span class="linecomment">;; 2011/05/14 dadams</span>
<span class="linecomment">;;     Removed: icicle-thing-types.  Better to get the list dynamically.</span>
<span class="linecomment">;; 2011/05/13 dadams</span>
<span class="linecomment">;;     Added: icicle-thing-types.</span>
<span class="linecomment">;; 2011/05/07 dadams</span>
<span class="linecomment">;;     Added: icicle-ignore-comments-flag.</span>
<span class="linecomment">;; 2011/05/03 dadams</span>
<span class="linecomment">;;     Added: icicle-highlight-saved-candidates-flag.</span>
<span class="linecomment">;;     icicle-Completions-toggle-submenu: Added icicle-toggle-highlight-saved-candidates to menu.</span>
<span class="linecomment">;; 2011/04/26 dadams</span>
<span class="linecomment">;;     icicle-top-level-key-bindings:</span>
<span class="linecomment">;;       Added icicle-(un)tag-a-file, icicle-find-file-(all|some)-tags-*.</span>
<span class="linecomment">;;       If you have customized it, re-customize it from scratch or you will miss the new bindings.</span>
<span class="linecomment">;; 2011/04/02 dadams</span>
<span class="linecomment">;;     NOTE: IF you customized icicle-top-level-key-bindings and you use Bookmark+, then you will want</span>
<span class="linecomment">;;           to REMOVE THAT CUSTOMIZATION AND CUSTOMIZE AGAIN.  Otherwise, you will miss Icicles</span>
<span class="linecomment">;;           multi-command versions of the new Bookmark+ commands.</span>
<span class="linecomment">;;     icicle-top-level-key-bindings:</span>
<span class="linecomment">;;       Added icicle-bookmark-file-this-dir-((all|some)-tags(-regexp))(-other-window).</span>
<span class="linecomment">;; 2011/03/31 dadams</span>
<span class="linecomment">;;     Renamed icicle-target-window-recenter-amount to icicle-recenter & moved from icicles-var.el.</span>
<span class="linecomment">;; 2011/03/26 dadams</span>
<span class="linecomment">;;     icicle-top-level-key-bindings:</span>
<span class="linecomment">;;       Added: bmkp-file-(all|some)-tags(-regexp)-jump(-other-window).</span>
<span class="linecomment">;;       Fixed typos: bmkp-(all|some)-tags-regexp-jump (forgot -regexp).  Use fboundp, not featurep.</span>
<span class="linecomment">;; 2011/03/22 dadams</span>
<span class="linecomment">;;     Added autoload cookies for defconsts.</span>
<span class="linecomment">;; 2011/02/26 dadams</span>
<span class="linecomment">;;     Added: icicle-Completions-(misc|save/retrieve|sets|sorting|this-candidate|toggle)-submenu,</span>
<span class="linecomment">;;            icicle-Completions-mouse-3-menu-entries.</span>
<span class="linecomment">;; 2011/02/22 dadams</span>
<span class="linecomment">;;     Added: icicle-image-files-in-Completions, icicle-functions-to-redefine.</span>
<span class="linecomment">;;     Removed: icicle-redefine-standard-commands-flag.</span>
<span class="linecomment">;; 2011/01/17 dadams</span>
<span class="linecomment">;;     Added runtime require of cl.el for Emacs 20.  (Emacs 20 does not handle defcustom well.)</span>
<span class="linecomment">;; 2011/01/12 dadams</span>
<span class="linecomment">;;     Changed default value of icicle-Completions-text-scale-decrease from 0.66 to 0.75.</span>
<span class="linecomment">;; 2011/01/02 dadams</span>
<span class="linecomment">;;     icicle-region-background:</span>
<span class="linecomment">;;       Use frame param background-mode, not frame-background-mode.  Thx to Le Wang.</span>
<span class="linecomment">;; 2010/12/26 dadams</span>
<span class="linecomment">;;     Removed autoload cookies except simple ones & ones with sexp on same line.  Thx to Richard Kim.</span>
<span class="linecomment">;; 2010/12/18 dadams</span>
<span class="linecomment">;;     Added some missing autoload cookies.</span>
<span class="linecomment">;; 2010/12/17 dadams</span>
<span class="linecomment">;;     icicle-thing-at-point-functions: Added to default: list-nearest-point-as-string (1,2,3).</span>
<span class="linecomment">;; 2010/11/12 dadams</span>
<span class="linecomment">;;     Added: icicle-(S-)TAB-completion-methods-per-command.</span>
<span class="linecomment">;; 2010/11/10 dadams</span>
<span class="linecomment">;;     icicle-top-level-key-bindings: In :set, protect icicle-mode-map with boundp.</span>
<span class="linecomment">;; 2010/10/25 dadams</span>
<span class="linecomment">;;     Removed: icicle-search-context-match-predicate (was not used).</span>
<span class="linecomment">;;     icicle-(buffer|file)-predicate: Mention that they (now) apply after matching.</span>
<span class="linecomment">;; 2010/10/24 dadams</span>
<span class="linecomment">;;     icicle-S-TAB-completion-methods-alist: Added ("Jaro-Winkler" . fuzzy-match).</span>
<span class="linecomment">;; 2010/10/09 dadams</span>
<span class="linecomment">;;     Corrections per move to emphasize modal cycling:</span>
<span class="linecomment">;;      Renamed: icicle-cycling-respects-completion-mode to icicle-default-cycling-mode.</span>
<span class="linecomment">;;      icicle-default-cycling-mode: Default value is prefix, not nil.  New value descriptions and doc.</span>
<span class="linecomment">;;      icicle-modal-cycle-*-keys: Put back wheel keys.  Removed mention of *-cycling-respects-*-mode.</span>
<span class="linecomment">;;      icicle-prefix-cycle-*-keys: Use end/home, not down/up as default values.</span>
<span class="linecomment">;;                                  No mention of being used also for *Completions*.</span>
<span class="linecomment">;;      icicle-act-before-cycle-flag: Updated doc string.</span>
<span class="linecomment">;; 2010/10/08 dadams</span>
<span class="linecomment">;;     icicle-modal-cycle-*-keys: Removed mouse-wheel keys - they are added systematically now.</span>
<span class="linecomment">;; 2010/10/07 dadams</span>
<span class="linecomment">;;     icicle-TAB-completion-methods: Removed :set, :initialize (handle it differently now).</span>
<span class="linecomment">;; 2010/10/06 dadams</span>
<span class="linecomment">;;     icicle-TAB-completion-methods: Added :set and :initialize.  Thx to Michael Heerdegen.</span>
<span class="linecomment">;;     icicle-modal-cycle-(up|down)((-alt)-action|-help)-keys: Bound mouse wheel also (Emacs 22+).</span>
<span class="linecomment">;; 2010/07/17 dadams</span>
<span class="linecomment">;;     icicle-top-level-key-bindings: Added *url-jump(-other-window).</span>
<span class="linecomment">;; 2010/06/18 dadams</span>
<span class="linecomment">;;     Renamed: bookmarkp-* to bmkp-*.</span>
<span class="linecomment">;; 2010/06/09 dadams</span>
<span class="linecomment">;;     icicle-isearch-complete-keys:</span>
<span class="linecomment">;;       Added [escape tab] to default binding (isearch bizarrie).  Added C-M-TAB for all platforms.</span>
<span class="linecomment">;; 2010/06/08 dadams</span>
<span class="linecomment">;;     icicle-bookmark-refresh-cache-flag: Changed the default value to t to avoid confusion.</span>
<span class="linecomment">;; 2010/06/05 dadams</span>
<span class="linecomment">;;     Set icicle-top-level-when-sole-completion-delay to 0.7 from 0.0.</span>
<span class="linecomment">;; 2010/06/04 dadams</span>
<span class="linecomment">;;     Added: icicle-(buffers|files)-ido-like-flag, icicle-max-candidates.</span>
<span class="linecomment">;;     icicle-ignored-directories: Protect default value with boundp.</span>
<span class="linecomment">;;     icicle-type-actions-alist: Added (maximize|restore|toggle-max)-frame(-horizontally|-vertically).</span>
<span class="linecomment">;; 2010/05/30 dadams</span>
<span class="linecomment">;;     Added: icicle-ignored-directories.</span>
<span class="linecomment">;; 2010/05/15 dadams</span>
<span class="linecomment">;;     icicle-top-level-key-bindings: Updated Icicles versions of bookmark jump commands.</span>
<span class="linecomment">;;     icicle-keymaps-for-key-completion: Added bookmarkp-jump-map bookmarkp-jump-other-window-map.</span>
<span class="linecomment">;; 2010/04/30 dadams</span>
<span class="linecomment">;;     Added: icicle-no-match-hook.</span>
<span class="linecomment">;; 2010/04/09 dadams</span>
<span class="linecomment">;;     Remap find-file-read-only(-other-window) to icicle-find-file-read-only(-other-window).</span>
<span class="linecomment">;; 2010/04/02 dadams</span>
<span class="linecomment">;;     Removed: icicle-region-alist, icicle-region-auto-open-files-flag,</span>
<span class="linecomment">;;              icicle-region-bookmarks-flag, icicle-regions-name-length-max.</span>
<span class="linecomment">;;     icicle-top-level-key-bindings: Removed bookmarkp-bookmark-list-jump-other-window.</span>
<span class="linecomment">;;       bookmarkp*: Use condition (featurep 'bookmark+).</span>
<span class="linecomment">;; 2010/03/31 dadams</span>
<span class="linecomment">;;     Removed extra code redefining some bookmark commands.</span>
<span class="linecomment">;; 2010/03/28 dadams</span>
<span class="linecomment">;;     Removed: icicle-region-alist, icicle-region-auto-open-files-flag,</span>
<span class="linecomment">;;              icicle-region-bookmarks-flag, icicle-regions-name-length-max.</span>
<span class="linecomment">;; 2010/03/14 dadams</span>
<span class="linecomment">;;     Added: icicle-bookmark-refresh-cache-flag.</span>
<span class="linecomment">;; 2010/03/13 dadams</span>
<span class="linecomment">;;     Renamed icicle-add-buffer-name-flag to icicle-show-multi-completion-flag.  Doc string.</span>
<span class="linecomment">;; 2010/03/09 dadams</span>
<span class="linecomment">;;     icicle-color-themes: Initialize to ().  Do real init in cmd icicle-color-theme.</span>
<span class="linecomment">;; 2010/03/03 dadams</span>
<span class="linecomment">;;     Renamed: icicle-sort-function to icicle-sort-comparer,</span>
<span class="linecomment">;;              icicle-sort-functions-alist to icicle-sort-orders-alist</span>
<span class="linecomment">;;              icicle-alternative-sort-function to icicle-alternative-sort-comparer.</span>
<span class="linecomment">;;     Redefined to allow multi-sorting: icicle-sort-comparer, icicle-sort-orders-alist.</span>
<span class="linecomment">;; 2010/02/17 dadams</span>
<span class="linecomment">;;     Moved icicle-redefined-functions here from icicles-var.el</span>
<span class="linecomment">;;       and renamed to icicle-inhibit-advice-functions.</span>
<span class="linecomment">;;     Moved to icicles-face.el: icicle-increment-color-(hue|saturation).</span>
<span class="linecomment">;;     So now require icicles-face.el.</span>
<span class="linecomment">;;     Corrected alphabetical order.</span>
<span class="linecomment">;; 2010/02/13 dadams</span>
<span class="linecomment">;;     icicle-top-level-key-bindings: Bound icicle-bookmark-*-jump-other-window.</span>
<span class="linecomment">;; 2010/01/24 dadams</span>
<span class="linecomment">;;     icicle-thing-at-point-functions:</span>
<span class="linecomment">;;       Use region-or-word-nearest-point, not word-nearest-point.  Change order.</span>
<span class="linecomment">;; 2010/01/17 dadams</span>
<span class="linecomment">;;     icicle-top-level-key-bindings: Added Icicles remappings for bookmarkp-*-jump-other-*.</span>
<span class="linecomment">;; 2009/12/25 dadams</span>
<span class="linecomment">;;     icicle-top-level-key-bindings: Bind ESC-M-x to lacarte-execute-command.</span>
<span class="linecomment">;; 2009/12/13 dadams</span>
<span class="linecomment">;;     icicle-top-level-key-bindings: Map dired(-other-window) to icicle-dired(-other-window).</span>
<span class="linecomment">;; 2009/12/07 dadams</span>
<span class="linecomment">;;     icicle-guess-commands-in-path: Changed default value to nil.</span>
<span class="linecomment">;; 2009/11/27 dadams</span>
<span class="linecomment">;;     Added: icicle-swank-prefix-length, icicle-swank-timeout.</span>
<span class="linecomment">;;     icicle-TAB-completion-methods: Treat swank method also.</span>
<span class="linecomment">;; 2009/11/24 dadams</span>
<span class="linecomment">;;     Added: icicle-completions-format.</span>
<span class="linecomment">;;     icicle-color-themes: Fix: delete singleton list with string, not symbol bury-buffer.</span>
<span class="linecomment">;; 2009/11/22 dadams</span>
<span class="linecomment">;;     icicle-color-themes: Use color-theme-initialize instead of load-library, to load themes.</span>
<span class="linecomment">;; 2009/11/21 dadams</span>
<span class="linecomment">;;     icicle-color-themes: (load-library "color-theme-library"), for color theme version 6.6.0.</span>
<span class="linecomment">;; 2009/10/25 dadams</span>
<span class="linecomment">;;     Added: icicle-TAB-completion-methods.</span>
<span class="linecomment">;;     Removed: icicle-fuzzy-completion-flag, icicle-prefix-completion-is-basic-flag.</span>
<span class="linecomment">;;     Renamed: icicle-apropos-match-fns-alist to icicle-S-TAB-completion-methods-alist.</span>
<span class="linecomment">;; 2009/10/12 dadams</span>
<span class="linecomment">;;     icicle-top-level-key-bindings: Added bindings for icicle-bookmark(-other-window).</span>
<span class="linecomment">;;     icicle-prefix-completion-is-basic-flag: Make it a constant for pre-Emacs 23.</span>
<span class="linecomment">;; 2009/10/06 dadams</span>
<span class="linecomment">;;     icicle-keymaps-for-key-completion: Added bookmark-bmenu-mode-map to default value.</span>
<span class="linecomment">;;     icicle-sort-functions-alist: Use a separate defcustom for Emacs 20, since no :type alist.</span>
<span class="linecomment">;; 2009/09/25 dadams</span>
<span class="linecomment">;;     Added: icicle-prefix-completion-is-basic-flag.</span>
<span class="linecomment">;;     Changed default value of:</span>
<span class="linecomment">;;       icicle-candidate-width-factor          from 70  to 80</span>
<span class="linecomment">;;       icicle-Completions-text-scale-decrease from 0.8 to 0.66.</span>
<span class="linecomment">;; 2009/09/16 dadams</span>
<span class="linecomment">;;     icicle-top-level-key-bindings: Added remap for icicle-insert-buffer.</span>
<span class="linecomment">;; 2009/09/05 dadams</span>
<span class="linecomment">;;     icicle-keymaps-for-key-completion: Added facemenu-keymap.</span>
<span class="linecomment">;;     icicle-search-replace-common-match-flag: Fixed doc string: C-M-| -&gt; M-;.</span>
<span class="linecomment">;;     icicle-expand-input-to-common-match-flag: Fixed doc string: C-| -&gt; C-;.</span>
<span class="linecomment">;; 2009/09/02 dadams</span>
<span class="linecomment">;;     Added: icicle-region-bookmarks-flag, icicle-top-level-when-sole-completion-delay.</span>
<span class="linecomment">;;     icicle-region-alist: Updated doc string. Added :group Icicles-Searching.</span>
<span class="linecomment">;; 2009/08/19 dadams</span>
<span class="linecomment">;;     icicle-bookmark-name-length-max:</span>
<span class="linecomment">;;       Changed default value from 40 to 70.  It is now the total name length.  Updated doc.</span>
<span class="linecomment">;; 2009/08/01 dadams</span>
<span class="linecomment">;;     Added: icicle-menu-items-to-history-flag.</span>
<span class="linecomment">;; 2009/07/29 dadams</span>
<span class="linecomment">;;     Added: icicle-populate-interactive-history-flag.</span>
<span class="linecomment">;; 2009/06/17 dadams</span>
<span class="linecomment">;;     Added: icicle-Completions-text-scale-decrease.</span>
<span class="linecomment">;; 2009/05/20 dadams</span>
<span class="linecomment">;;     icicle-keymaps-for-key-completion: Added prefix-key maps senator-mode-map,</span>
<span class="linecomment">;;       srecode-mode-map, jde-mode-map, jde-jdb-mode-map.  Thx to Daniel Clemente.</span>
<span class="linecomment">;; 2009/05/17 dadams</span>
<span class="linecomment">;;     icicle-type-actions-alist: Updated to reflect thumb-frm.el name changes.</span>
<span class="linecomment">;; 2009/05/10 dadams</span>
<span class="linecomment">;;     icicle-list-join-string: Don't set display property for Emacs 21 (Emacs bug).</span>
<span class="linecomment">;; 2009/05/09 dadams</span>
<span class="linecomment">;;     Added: icicle-dot-string, icicle-dot-show-regexp-flag, icicle-anychar-regexp,</span>
<span class="linecomment">;; 2009/05/07 dadams</span>
<span class="linecomment">;;     icicle-list-join-string: Use copy-sequence in default value, so users see original sexp.</span>
<span class="linecomment">;; 2009/05/02 dadams</span>
<span class="linecomment">;;     Added: icicle-alternative-actions-alist.</span>
<span class="linecomment">;; 2009/05/01 dadams</span>
<span class="linecomment">;;     Added function to icicle-type-actions-alist: icicle-shell-command-on-file.</span>
<span class="linecomment">;; 2009/04/26 dadams</span>
<span class="linecomment">;;     Added: icicle-type-actions-alist, icicle-use-anything-candidates-flag.</span>
<span class="linecomment">;; 2009/04/20 dadams</span>
<span class="linecomment">;;     Added: icicle-(prefix|apropos)-cycle-(next|previous)-alt-action-keys,</span>
<span class="linecomment">;;            icicle-modal-cycle-(down|up)-alt-action-keys.</span>
<span class="linecomment">;; 2009/04/18 dadams</span>
<span class="linecomment">;;     Soft-require hexrgb.el unconditionally, not just when there is a window-system.</span>
<span class="linecomment">;;     icicle-region-background: If frame background is unspecified, consider it white.</span>
<span class="linecomment">;;                               Don't use frame background unless it is a valid color name.</span>
<span class="linecomment">;;                               Use region background if cannot compute saturation.</span>
<span class="linecomment">;; 2009/04/16 dadams</span>
<span class="linecomment">;;     Added: icicle-(prefix|apropos)-cycle-(next|previous)-help-keys.</span>
<span class="linecomment">;; 2009/04/15 dadams</span>
<span class="linecomment">;;     Added: icicle-modal-cycle-(up|down)-help-keys.</span>
<span class="linecomment">;; 2009/04/05 dadams</span>
<span class="linecomment">;;     Added: icicle-help-in-mode-line-flag.</span>
<span class="linecomment">;; 2009/03/10 dadams</span>
<span class="linecomment">;;     Moved here from icicles-fn.el: icicle-shell-command-candidates.</span>
<span class="linecomment">;;     Moved here from icicles-var.el: icicle-shell-command-candidates.</span>
<span class="linecomment">;;     Renamed: icicle-shell-command-candidates (fn) to icicle-compute-shell-command-candidates,</span>
<span class="linecomment">;;              icicle-shell-command-candidates (var) to icicle-shell-command-candidates-cache,</span>
<span class="linecomment">;;              icicle-guess-cmds-in-path-flag to icicle-guess-commands-in-path.</span>
<span class="linecomment">;;     icicle-guess-commands-in-path: Boolean -&gt; choice.  Default is now first-use.</span>
<span class="linecomment">;;     icicle-compute-shell-command-candidates: Don't update cache variable here.</span>
<span class="linecomment">;;     icicle-shell-command-candidates-cache: Initialize per icicle-guess-commands-in-path.</span>
<span class="linecomment">;; 2009/03/08 dadams</span>
<span class="linecomment">;;     Added: icicle-quote-shell-file-name-flag.</span>
<span class="linecomment">;; 2009/03/01 dadams</span>
<span class="linecomment">;;     Added: icicle-completing-read+insert-keys, icicle-read+insert-file-name-keys.</span>
<span class="linecomment">;;     Removed: icicle-complete-on-demand-keys.</span>
<span class="linecomment">;; 2009/02/20 dadams</span>
<span class="linecomment">;;     Added: icicle-complete-on-demand-keys (not yet used).</span>
<span class="linecomment">;;     Renamed: icicle-dired-guess-all-shell-cmds-flag to icicle-guess-cmds-in-path-flag.</span>
<span class="linecomment">;; 2009/01/25 dadams</span>
<span class="linecomment">;;     Added: icicle-dired-guess-all-shell-cmds-flag.</span>
<span class="linecomment">;; 2009/01/17 dadams</span>
<span class="linecomment">;;     Added: icicle-levenshtein-distance.</span>
<span class="linecomment">;;     icicle-apropos-match-fns-alist: Added icicle-levenshtein(-strict)-match.</span>
<span class="linecomment">;; 2009/01/05 dadams</span>
<span class="linecomment">;;     Added ess-complete-* to icicle-comint-dynamic-complete-replacements.</span>
<span class="linecomment">;; 2009/01/01 dadams</span>
<span class="linecomment">;;     Added: icicle-comint-dynamic-complete-replacements.</span>
<span class="linecomment">;; 2008/12/30 dadams</span>
<span class="linecomment">;;     Moved icicle-remap here from icicles-mode.el.</span>
<span class="linecomment">;; 2008/12/06 dadams</span>
<span class="linecomment">;;     icicle-incremental-completion-flag: Changed :type to choice from boolean.</span>
<span class="linecomment">;; 2008/12/02 dadams</span>
<span class="linecomment">;;     Removed: icicle-file-ignore-space-prefix-flag.</span>
<span class="linecomment">;; 2008/11/28 dadams</span>
<span class="linecomment">;;     Moved here from icicles-var.el: icicle-apropos-match-fns-alist.</span>
<span class="linecomment">;; 2008/11/14 dadams</span>
<span class="linecomment">;;     Added: icicle-hide-common-match-in-Completions-flag.</span>
<span class="linecomment">;; 2008/11/04 dadams</span>
<span class="linecomment">;;     Removed: icicle-generic-S-tab-keys.</span>
<span class="linecomment">;;     Added (split icicle-generic-S-tab-keys in 4):</span>
<span class="linecomment">;;       icicle-apropos-complete-keys, icicle-key-complete-keys, icicle-previous-candidate-keys,</span>
<span class="linecomment">;;       icicle-search-from-isearch-keys.</span>
<span class="linecomment">;;     Added: icicle-complete-key-anyway-flag.</span>
<span class="linecomment">;; 2008/11/03 dadams</span>
<span class="linecomment">;;     Applied renamings from icicles-cmd.el.</span>
<span class="linecomment">;; 2008/10/26 dadams</span>
<span class="linecomment">;;     Added: icicle-file-*.</span>
<span class="linecomment">;; 2008/10/18 dadams</span>
<span class="linecomment">;;     Added: icicle-customize-save-variable-function.</span>
<span class="linecomment">;; 2008/10/17 dadams</span>
<span class="linecomment">;;     Added: icicle-bookmark-name-length-max.</span>
<span class="linecomment">;;     icicle-top-level-key-bindings: Remapped bookmark-set to icicle-bookmark-cmd.</span>
<span class="linecomment">;; 2008/10/11 dadams</span>
<span class="linecomment">;;     icicle-highlight-input-completion-failure: Updated doc string.</span>
<span class="linecomment">;; 2008/10/10 dadams</span>
<span class="linecomment">;;     Added: icicle-(apropos|prefix)-cycle-(next|previous)-action-keys,</span>
<span class="linecomment">;;            icicle-modal-cycle-(down|up)-action-keys.</span>
<span class="linecomment">;;     icicle-cycling-respects-completion-mode-flag:</span>
<span class="linecomment">;;       Renamed to icicle-cycling-respects-completion-mode.</span>
<span class="linecomment">;;       It's now a choice of nil, t, apropos, prefix.  Thx to Andrey Zhdanov.</span>
<span class="linecomment">;; 2008/09/30 dadams</span>
<span class="linecomment">;;     icicle-highlight-input-completion-failure: Changed default value to implicit-strict.</span>
<span class="linecomment">;; 2008/09/13 dadams</span>
<span class="linecomment">;;     Added: icicle-filesets-as-saved-completion-sets-flag.</span>
<span class="linecomment">;; 2008/08/28 dadams</span>
<span class="linecomment">;;     icicle-top-level-key-bindings:</span>
<span class="linecomment">;;       Renamed alacarte-execute-menu-command to lacarte-execute-menu-command.</span>
<span class="linecomment">;; 2008/08/22 dadams</span>
<span class="linecomment">;;     Removed: icicle-Completions-window-default-width (obsolete).</span>
<span class="linecomment">;; 2008/08/21 dadams</span>
<span class="linecomment">;;     icicle-top-level-key-bindings:</span>
<span class="linecomment">;;       Replace icicle-find-file(-other-window) with icicle-file(-other-window).</span>
<span class="linecomment">;;     icicle-generic-S-tab-keys: Mention bug workaround in doc string.  Thx to Kevin Rodgers.</span>
<span class="linecomment">;; 2008/08/20 dadams</span>
<span class="linecomment">;;     Added: icicle-inhibit-ding-flag.</span>
<span class="linecomment">;; 2008/08/12 dadams</span>
<span class="linecomment">;;     icicle-top-level-key-bindings:</span>
<span class="linecomment">;;       Remap set-mark-command (C-SPC) and pop-global-mark (C-x C-SPC).</span>
<span class="linecomment">;; 2008/08/11 dadams</span>
<span class="linecomment">;;     icicle-key-definition, icicle-top-level-key-bindings:</span>
<span class="linecomment">;;       Change :match-alternatives to (symbolp) from (commandp).</span>
<span class="linecomment">;;     icicle-top-level-key-bindings: Added condition for minibuffer-keyboard-quit.</span>
<span class="linecomment">;; 2008/08/06 dadams</span>
<span class="linecomment">;;     Bind icicle-kmacro to S-f4, not f5.  Thx to Andrew Hyatt.</span>
<span class="linecomment">;; 2008/06/22 dadams</span>
<span class="linecomment">;;     Added: icicle-unpropertize-completion-result-flag.</span>
<span class="linecomment">;; 2008/06/03 dadams</span>
<span class="linecomment">;;     Added: icicle-use-C-for-actions-flag.</span>
<span class="linecomment">;; 2008/05/27 dadams</span>
<span class="linecomment">;;     icicle-isearch-complete-keys: Removed S-TAB, added M-o.</span>
<span class="linecomment">;; 2008/05/25 dadams</span>
<span class="linecomment">;;     icicle-isearch-complete-keys: Added M-TAB and C-M-TAB (if Windows).</span>
<span class="linecomment">;;     Change [] notation to `' notation for keys in doc strings.</span>
<span class="linecomment">;; 2008/05/24 dadams</span>
<span class="linecomment">;;     icicle-isearch-complete-keys: Use explicit ([S-tab] [S-iso-lefttab]) for Emacs &lt; 22.</span>
<span class="linecomment">;; 2008/05/19 dadams</span>
<span class="linecomment">;;     icicle-generic-S-tab-keys: Use explicit ([S-tab] [S-iso-lefttab]) for Emacs &lt; 22.</span>
<span class="linecomment">;; 2008/05/11 dadams</span>
<span class="linecomment">;;     icicle-top-level-key-bindings: Added :set and :initialize.</span>
<span class="linecomment">;;     Moved icicle-bind-top-level-commands here from icicles-mode.el, and added optional arg.</span>
<span class="linecomment">;; 2008/05/10 dadams</span>
<span class="linecomment">;;     Added widget icicle-key-definition (new custom type).</span>
<span class="linecomment">;;     Renamed: icicle-bind-top-level-commands-alist to icicle-top-level-key-bindings.</span>
<span class="linecomment">;;     icicle-top-level-key-bindings:</span>
<span class="linecomment">;;       Redefined:  New :type, using icicle-key-definition or choice of restricted-sexp.</span>
<span class="linecomment">;;         Changed order of entry elements.  Use kbd.  No eval for command to be remapped.</span>
<span class="linecomment">;;         Don't bind f5 unless have kmacro.</span>
<span class="linecomment">;;     Moved icicle-yank-function before icicle-top-level-key-bindings (needed by it).</span>
<span class="linecomment">;; 2008/05/07 dadams</span>
<span class="linecomment">;;     icicle-region-alist, icicle-sort-functions-alist:</span>
<span class="linecomment">;;       Removed Emacs 20 version (alist works for Emacs 20 also).</span>
<span class="linecomment">;;     Replaced icicle-bind-top-level-commands-flag with icicle-bind-top-level-commands-alist.</span>
<span class="linecomment">;;     icicle-isearch-complete-keys:</span>
<span class="linecomment">;;       Changed default value from ([S-tab] [S-iso-lefttab]) to ([backtab]).</span>
<span class="linecomment">;; 2008/05/05 dadams</span>
<span class="linecomment">;;     icicle-generic-S-tab-keys:</span>
<span class="linecomment">;;       Changed default value from ([S-tab] [S-iso-lefttab]) to ([backtab]).</span>
<span class="linecomment">;; 2008/04/26 dadams</span>
<span class="linecomment">;;     Added: icicle-test-for-remote-files-flag.  Updated C-^ to M-_</span>
<span class="linecomment">;;     icicle-ignore-space-prefix-flag: Update doc string: M-_, not C-^.</span>
<span class="linecomment">;; 2008/04/18 dadams</span>
<span class="linecomment">;;     Renamed icicle-init-value-flag to icicle-default-value.</span>
<span class="linecomment">;;     icicle-default-value: Updated to reflect t value.</span>
<span class="linecomment">;; 2008/04/13 dadams</span>
<span class="linecomment">;;     Added: icicle-pp-eval-expression-print-(length|level).</span>
<span class="linecomment">;; 2008/03/30 dadams</span>
<span class="linecomment">;;     Added: icicle-highlight-lighter-flag.</span>
<span class="linecomment">;; 2008/03/29 dadams</span>
<span class="linecomment">;;     Removed: icicle-completing(-mustmatch)-prompt-prefix, icicle-reminder-prompt-flag.</span>
<span class="linecomment">;;     Updated doc string of icicle-customize-save-flag.</span>
<span class="linecomment">;; 2008/03/21 dadams</span>
<span class="linecomment">;;     icicle-reminder-prompt-flag: Changed default value to nil.</span>
<span class="linecomment">;; 2008/02/23 dadams</span>
<span class="linecomment">;;     icicle-init-value-flag: Added insert-start value.  Renamed insert value to insert-end.</span>
<span class="linecomment">;; 2008/02/06 dadams</span>
<span class="linecomment">;;     Added: icicle-highlight-input-completion-failure-(delay|threshold).</span>
<span class="linecomment">;; 2008/01/29 dadams</span>
<span class="linecomment">;;     Removed: icicle-max-chars-noncompletion-highlight.</span>
<span class="linecomment">;;     Renamed: icicle-*-input-completion-failure-flag to icicle-*-input-completion-failure.</span>
<span class="linecomment">;;     icicle-*-input-completion-failure: Added values (implicit*, always) and renamed others.</span>
<span class="linecomment">;; 2007/12/31 dadams</span>
<span class="linecomment">;;     icicle-list-join-string: Add display property to hide the ^G.</span>
<span class="linecomment">;; 2007/12/26 dadams</span>
<span class="linecomment">;;     icicle-region-background:</span>
<span class="linecomment">;;       Put initialization back inside defcustom.</span>
<span class="linecomment">;;       Change test for color from Emacs version to widget test.</span>
<span class="linecomment">;; 2007/12/24 dadams</span>
<span class="linecomment">;;     Added: icicle-option-type-prefix-arg-list.</span>
<span class="linecomment">;; 2007/12/14 dadams</span>
<span class="linecomment">;;     Added: icicle-customize-save-flag.</span>
<span class="linecomment">;; 2007/12/09 dadams</span>
<span class="linecomment">;;     Added: icicle-max-chars-noncompletion-highlight.</span>
<span class="linecomment">;; 2007/12/03 dadams</span>
<span class="linecomment">;;     Renamed longest common match (lcm) to expanded common match (ecm).</span>
<span class="linecomment">;; 2007/11/25 dadams</span>
<span class="linecomment">;;     Added: icicle-command-abbrev-(alist|match-all-parts-flag|priority-flag).</span>
<span class="linecomment">;; 2007/11/23 dadams</span>
<span class="linecomment">;;     Added: icicle-(apropos|prefix)-cycle-(next|previous)-keys.</span>
<span class="linecomment">;; 2007/11/17 dadams</span>
<span class="linecomment">;;     Added: icicle-add-proxy-candidates-flag.</span>
<span class="linecomment">;; 2007/11/02 dadams</span>
<span class="linecomment">;;     Added: icicle-generic-S-tab-keys, icicle-prefix-complete-keys,</span>
<span class="linecomment">;;            icicle-(apropos|prefix)-complete-no-display-keys, icicle-isearch-complete-keys.</span>
<span class="linecomment">;;     Renamed icicle-modal-cycle-(up|down)-key to icicle-modal-cycle-(up|down)-keys,</span>
<span class="linecomment">;;             icicle-word-completion-key to icicle-word-completion-keys.</span>
<span class="linecomment">;; 2007/10/29 dadams</span>
<span class="linecomment">;;     icicle-define-alias-commands-flag, icicle-deletion-action-flag,</span>
<span class="linecomment">;;       icicle-list-nth-parts-join-string: Added type and group.</span>
<span class="linecomment">;; 2007/10/28 dadams</span>
<span class="linecomment">;;     Added: icicle-search-replace-common-match-flag.</span>
<span class="linecomment">;; 2007/10/23 dadams</span>
<span class="linecomment">;;     icicle-highlight-input-initial-whitespace-flag:</span>
<span class="linecomment">;;       Mention icicle-highlight-input-completion-failure-flag in doc string.</span>
<span class="linecomment">;; 2007/10/21 dadams</span>
<span class="linecomment">;;     icicle-candidate-width-factor, icicle-inter-candidates-min-spaces: Mention Do Re Mi.</span>
<span class="linecomment">;; 2007/10/14 dadams</span>
<span class="linecomment">;;     icicle-act-before-cycle-flag: Default value is now nil.</span>
<span class="linecomment">;; 2007/10/07 dadams</span>
<span class="linecomment">;;     Added: icicle-deletion-action-flag.</span>
<span class="linecomment">;; 2007/09/28 dadams</span>
<span class="linecomment">;;     Added: icicle-fuzzy-completion-flag.</span>
<span class="linecomment">;; 2007/08/25 dadams</span>
<span class="linecomment">;;     Added: icicle-anything-transform-candidates-flag, icicle-define-alias-commands-flag.</span>
<span class="linecomment">;; 2007/08/19 dadams</span>
<span class="linecomment">;;     Added: icicle-highlight-input-completion-failure-flag.</span>
<span class="linecomment">;; 2007/08/16 dadams</span>
<span class="linecomment">;;     icicle-region-alist, icicle-sort-functions-alist: Use alist as :type for recent Emacs.</span>
<span class="linecomment">;; 2007/07/27 dadams</span>
<span class="linecomment">;;     Added: Moved icicle-act-first-then-navigate-p here from icicles-var.el, as option *-flag.</span>
<span class="linecomment">;;            Thx to Juri Linkov for suggestion.</span>
<span class="linecomment">;; 2007/07/03 dadams</span>
<span class="linecomment">;;     Added: icicle-completion-history-max-length, icicle-C-l-uses-completion-flag.</span>
<span class="linecomment">;;     icicle-expand-input-to-common-match-flag: Updated doc string accordingly.</span>
<span class="linecomment">;; 2007/06/20 dadams</span>
<span class="linecomment">;;     icicle-WYSIWYG-Completions-flag: Use string value, not whole number, for sample text.</span>
<span class="linecomment">;; 2007/06/19 dadams</span>
<span class="linecomment">;;     icicle-WYSIWYG-Completions-flag: Allow also a whole-number value, for separate swatch.</span>
<span class="linecomment">;; 2007/06/17 dadams</span>
<span class="linecomment">;;     Added: icicle-WYSIWYG-Completions-flag.</span>
<span class="linecomment">;; 2007/06/12 dadams</span>
<span class="linecomment">;;     icicle-region-background: Use different value for dark-background frames.</span>
<span class="linecomment">;; 2007/06/09 dadams</span>
<span class="linecomment">;;     Added: icicle-use-candidates-only-once-flag.</span>
<span class="linecomment">;; 2007/06/05 dadams</span>
<span class="linecomment">;;     Don't require hexrgb.el if no window system.</span>
<span class="linecomment">;;     icicle-increment-color-*: Protected with featurep hexrgb and error message.</span>
<span class="linecomment">;; 2007/05/06 dadams</span>
<span class="linecomment">;;     Added: icicle-search-context-match-predicate.</span>
<span class="linecomment">;; 2007/05/02 dadams</span>
<span class="linecomment">;;     Added: icicle-search-whole-word-flag, icicle-yank-function.</span>
<span class="linecomment">;;     icicle-regexp-quote-flag: Updated doc string to mention search.</span>
<span class="linecomment">;; 2007/04/20 dadams</span>
<span class="linecomment">;;     Added: icicle-search-highlight-context-levels-flag, icicle-increment-color-saturation.</span>
<span class="linecomment">;; 2007/04/17 dadams</span>
<span class="linecomment">;;     Added: icicle-search-replace-literally-flag.</span>
<span class="linecomment">;; 2007/04/15 dadams</span>
<span class="linecomment">;;     icicle-search-replace-whole-candidate-flag: Changed default value to t.</span>
<span class="linecomment">;; 2007/04/07 dadams</span>
<span class="linecomment">;;     Added: icicle-search-replace-whole-candidate-flag.</span>
<span class="linecomment">;; 2007/03/31 dadams</span>
<span class="linecomment">;;     Added: icicle-top-level-when-sole-completion-flag.</span>
<span class="linecomment">;;     icicle(-regexp)-search-ring-max: Default is 1/10th what it was.</span>
<span class="linecomment">;; 2007/03/30 dadams</span>
<span class="linecomment">;;     Added: icicle-candidate-width-factor, icicle-inter-candidates-min-spaces.</span>
<span class="linecomment">;; 2007/03/12 dadams</span>
<span class="linecomment">;;     Added: icicle-Completions-window-max-height.</span>
<span class="linecomment">;;     icicle-show-Completions-help-flag: defvaralias it to completion-show-help (if bound).</span>
<span class="linecomment">;; 2007/03/10 dadams</span>
<span class="linecomment">;;     Added: icicle-Completions-window-default-width.</span>
<span class="linecomment">;; 2007/02/27 dadams</span>
<span class="linecomment">;;     Changed default value of icicle-incremental-completion-delay to 0.7.</span>
<span class="linecomment">;; 2007/02/22 dadams</span>
<span class="linecomment">;;     icicle-buffer-sort: Use icicle-buffer-sort-*...*-last, not nil, as default value.</span>
<span class="linecomment">;; 2007/02/20 dadams</span>
<span class="linecomment">;;     Changed icicle-region-auto-open-files-flag default value to nil.</span>
<span class="linecomment">;; 2007/02/19 dadams</span>
<span class="linecomment">;;     icicle-region-alist: Added buffer's file to alist entry.</span>
<span class="linecomment">;;     Added: icicle-region-auto-open-files-flag.</span>
<span class="linecomment">;; 2007/02/17 dadams</span>
<span class="linecomment">;;     Added: icicle-keymaps-for-key-completion.</span>
<span class="linecomment">;; 2007/02/06 dadams</span>
<span class="linecomment">;;     Added: icicle-add-buffer-name-flag.</span>
<span class="linecomment">;; 2007/01/29 dadams</span>
<span class="linecomment">;;     icicle-sort-function: Use icicle-case-string-less-p as value, not string-lessp.</span>
<span class="linecomment">;; 2007/01/23 dadams</span>
<span class="linecomment">;;     Added: icicle-highlight-historical-candidates-flag.</span>
<span class="linecomment">;;     Updated doc strings of *-flag to mention toggles.</span>
<span class="linecomment">;; 2007/01/18 dadams</span>
<span class="linecomment">;;     Renamed: icicle-regions to icicle-region-alist.</span>
<span class="linecomment">;; 2007/01/15 dadams</span>
<span class="linecomment">;;     Added: icicle-change-sort-order-completion-flag, icicle-sort-functions-alist.</span>
<span class="linecomment">;;     icicle-cycle-into-subdirs-flag, icicle-sort-function: Updated doc string.</span>
<span class="linecomment">;; 2007/01/14 dadams</span>
<span class="linecomment">;;     Added: icicle-list-nth-parts-join-string.</span>
<span class="linecomment">;; 2007/01/08 dadams</span>
<span class="linecomment">;;     icicle-reminder-prompt-flag: Reduced default value from 20 to 7 Emacs sessions.</span>
<span class="linecomment">;; 2007/01/06 dadams</span>
<span class="linecomment">;;     Added: icicle-use-~-for-home-dir-flag.  Thanks to Timothy Stotts for the suggestion.</span>
<span class="linecomment">;; 2006/12/29 dadams</span>
<span class="linecomment">;;     icicle-thing-at-point-functions: Added ffap-guesser as first alternative text grabber.</span>
<span class="linecomment">;;     icicle-default-thing-insertion: Changed default value to icicle-default-thing-insertion.</span>
<span class="linecomment">;; 2006/12/25 dadams</span>
<span class="linecomment">;;     Moved to icicles-fn.el: icicle-historical-alphabetic-p.</span>
<span class="linecomment">;; 2006/12/22 dadams</span>
<span class="linecomment">;;     Assigned Icicles subgroups, instead of group Icicles.</span>
<span class="linecomment">;; 2006/12/10 dadams</span>
<span class="linecomment">;;     icicle-regions: Corrected (forgot repeat).</span>
<span class="linecomment">;; 2006/11/26 dadams</span>
<span class="linecomment">;;     Added: icicle-regions(-name-length-max).</span>
<span class="linecomment">;; 2006/11/24 dadams</span>
<span class="linecomment">;;     Added: icicle-kmacro-ring-max.</span>
<span class="linecomment">;; 2006/11/23 dadams</span>
<span class="linecomment">;;     Added: icicle-TAB-shows-candidates-flag.  Thx to Tamas Patrovics for the suggestion.</span>
<span class="linecomment">;; 2006/11/09 dadams</span>
<span class="linecomment">;;     icicle-search-highlight-all-flag -&gt; icicle-search-highlight-threshold.</span>
<span class="linecomment">;;     Added: icicle-search-highlight-all-current-flag.</span>
<span class="linecomment">;; 2006/10/28 dadams</span>
<span class="linecomment">;;     icicle-region-background: Changed :type to 'color for Emacs 21+.</span>
<span class="linecomment">;;     icicle(-alternative)-sort-function, icicle-buffer-sort, icicle-transform-function:</span>
<span class="linecomment">;;       function -&gt; choice of nil or function.</span>
<span class="linecomment">;;     icicle-buffer-configs: Added :tag's.</span>
<span class="linecomment">;;     icicle-saved-completion-sets: Corrected doc string.</span>
<span class="linecomment">;; 2006/10/21 dadams</span>
<span class="linecomment">;;     Added: icicle-complete-keys-self-insert-flag.</span>
<span class="linecomment">;; 2006/10/14 dadams</span>
<span class="linecomment">;;     icicle-list-end-string: Added :type and :group.</span>
<span class="linecomment">;;     Moved conditional eval-when-compile to top level.</span>
<span class="linecomment">;; 2006/10/04 dadams</span>
<span class="linecomment">;;     Added: icicle-special-candidate-regexp.</span>
<span class="linecomment">;; 2006/10/03 dadams</span>
<span class="linecomment">;;     icicle-list-join-string: Replaced ^G^J by \007\012, to be able to upload to Emacs Wiki.</span>
<span class="linecomment">;; 2006/10/01 dadams</span>
<span class="linecomment">;;     icicle-alternative-sort-function: Updated doc string - it's now a general toggle.</span>
<span class="linecomment">;; 2006/09/30 dadams</span>
<span class="linecomment">;;     Added: icicle-key-descriptions-use-*-flag.</span>
<span class="linecomment">;; 2006/09/16 dadams</span>
<span class="linecomment">;;     Added: icicle-list-end-string.</span>
<span class="linecomment">;; 2006/09/03 dadams</span>
<span class="linecomment">;;     Renamed icicle-show-Completions-help to icicle-show-Completions-help-flag.</span>
<span class="linecomment">;; 2006/08/13 dadams</span>
<span class="linecomment">;;     Added: icicle-completing(-mustmatch)-prompt-prefix.</span>
<span class="linecomment">;; 2006/07/28 dadams</span>
<span class="linecomment">;;     icicle-change-region-background-flag:</span>
<span class="linecomment">;;       Default value takes no account of delete-selection mode.  Improved doc string.</span>
<span class="linecomment">;;     icicle-region-background:</span>
<span class="linecomment">;;       Don't make region invisible if hexrgb.el was not loaded.</span>
<span class="linecomment">;;       Change value, not hue, if grayscale frame background.  Improved doc string.</span>
<span class="linecomment">;; 2006/07/23 dadams</span>
<span class="linecomment">;;     Added: icicle-transform-function.</span>
<span class="linecomment">;;     icicle-sort-function: Added Note to doc string.</span>
<span class="linecomment">;; 2006/07/20 dadams</span>
<span class="linecomment">;;     Added: icicle-modal-cycle-(up|down)-key.</span>
<span class="linecomment">;;     Renamed icicle-arrows-respect-* to icicle-cycling-respects-completion-mode-flag.</span>
<span class="linecomment">;; 2006/07/19 dadams</span>
<span class="linecomment">;;     Applied patch from Damien Elmes &lt;emacs@repose.cx&gt;:</span>
<span class="linecomment">;;       Added: icicle-show-completions-help.  Renamed it to icicle-show-Completions-help.</span>
<span class="linecomment">;; 2006/07/18 dadams</span>
<span class="linecomment">;;     Added: icicle-Completions-display-min-input-chars.  Thx to Damien Elmes.</span>
<span class="linecomment">;; 2006/07/10 dadams</span>
<span class="linecomment">;;     icicle-historical-alphabetic-p: Fallback directory if no previous input.</span>
<span class="linecomment">;; 2006/07/07 dadams</span>
<span class="linecomment">;;     Added: icicle-alternative-sort-function, icicle-historical-alphabetic-p.</span>
<span class="linecomment">;; 2006/07/04 dadams</span>
<span class="linecomment">;;     icicle-expand-input-to-common-match-flag: Updated doc string.</span>
<span class="linecomment">;; 2006/06/09 dadams</span>
<span class="linecomment">;;     icicle-region-background: Use nil in defcustom.  Initialize separately.</span>
<span class="linecomment">;; 2006/06/08 dadams</span>
<span class="linecomment">;;     icicle-bind-top-level-commands-flag: Updated doc string.</span>
<span class="linecomment">;; 2006/05/19 dadams</span>
<span class="linecomment">;;     Renamed icicle-inhibit-reminder* to icicle-reminder*.</span>
<span class="linecomment">;;       Changed its functionality to use a countdown.</span>
<span class="linecomment">;; 2006/05/16 dadams</span>
<span class="linecomment">;;     Added: icicle-bind-top-level-commands-flag.</span>
<span class="linecomment">;; 2006/05/15 dadams</span>
<span class="linecomment">;;     Renamed: icicle-completion-nospace-flag to icicle-ignore-space-prefix-flag.</span>
<span class="linecomment">;;     Added: icicle-buffer-ignore-space-prefix-flag.</span>
<span class="linecomment">;;     icicle-ignore-space-prefix-flag: Changed default value to nil.</span>
<span class="linecomment">;; 2006/05/09 dadams</span>
<span class="linecomment">;;     icicle-incremental-completion-threshold: Updated doc string (msg "Displaying...").</span>
<span class="linecomment">;; 2006/04/28 dadams</span>
<span class="linecomment">;;     Added: icicle-highlight-input-initial-whitespace-flag.</span>
<span class="linecomment">;; 2006/04/14 dadams</span>
<span class="linecomment">;;     Added: icicle-input-string, icicle-search-cleanup-flag, icicle-update-input-hook.</span>
<span class="linecomment">;;     icicle-list-join-string: Added :type and :group.</span>
<span class="linecomment">;; 2006/04/09 dadams</span>
<span class="linecomment">;;     Added: icicle-arrows-respect-completion-type-flag.</span>
<span class="linecomment">;; 2006/04/07 dadams</span>
<span class="linecomment">;;     Added: icicle-search-highlight-all-flag.</span>
<span class="linecomment">;; 2006/04/02 dadams</span>
<span class="linecomment">;;     Added: icicle-regexp-quote-flag.</span>
<span class="linecomment">;; 2006/03/24 dadams</span>
<span class="linecomment">;;     Added: icicle-incremental-completion-(delay|threshold).</span>
<span class="linecomment">;; 2006/03/20 dadams</span>
<span class="linecomment">;;     icicle-expand-input-to-common-match-flag: Changed default value to t.</span>
<span class="linecomment">;; 2006/03/19 dadams</span>
<span class="linecomment">;;     Added: icicle-expand-input-to-common-match-flag.</span>
<span class="linecomment">;; 2006/03/17 dadams</span>
<span class="linecomment">;;     Removed: icicle-cache-file.</span>
<span class="linecomment">;;     Added: icicle-saved-completion-sets.</span>
<span class="linecomment">;; 2006/03/13 dadams</span>
<span class="linecomment">;;     Added: icicle-cache-file.</span>
<span class="linecomment">;; 2006/03/08 dadams</span>
<span class="linecomment">;;     icicle-default-thing-insertion: Use substitute-command-keys in :tag.</span>
<span class="linecomment">;; 2006/03/05 dadams</span>
<span class="linecomment">;;     Moved from here to icicle-mode.el: icicle-mode, icicle-mode-hook.</span>
<span class="linecomment">;;     Added: icicle-touche-pas-aux-menus-flag.</span>
<span class="linecomment">;; 2006/03/03 dadams</span>
<span class="linecomment">;;     icicle-list-join-string: Changed value to ^G^J.  Clarified doc string.</span>
 
<span class="linecomment">;;;(@* "CHANGE LOG FOR `icicles-var.el'")</span>
<span class="linecomment">;;</span>
<span class="linecomment">;; 2012/12/31 dadams</span>
<span class="linecomment">;;     Added: icicle-mode-line-help.</span>
<span class="linecomment">;; 2012/12/15 dadams</span>
<span class="linecomment">;;     Added: icicle-cands-to-narrow, icicle-compute-narrowing-regexp-p, icicle-narrow-regexp.</span>
<span class="linecomment">;; 2012/12/02 dadams</span>
<span class="linecomment">;;     Added: icicle-read-file-name-internal-fn.</span>
<span class="linecomment">;; 2012/12/01 dadams</span>
<span class="linecomment">;;     Removed load of icicles-mac.el (icicle-kbd is now a function in icicles-opt.el).</span>
<span class="linecomment">;; 2012/11/28 dadams</span>
<span class="linecomment">;;     Added: icicle-transform-function - moved here from icicles-opt.el.</span>
<span class="linecomment">;;     Removed: icicle-vardoc-last-initial-option-cand-set.</span>
<span class="linecomment">;; 2012/11/26 dadams</span>
<span class="linecomment">;;     Added: icicle-apropos-value-last-initial-cand-set.</span>
<span class="linecomment">;; 2012/10/27 dadams</span>
<span class="linecomment">;;     Added: icicle-toggle-transforming-message.  Updated icicle-general-help-string.</span>
<span class="linecomment">;; 2012/10/22 dadams</span>
<span class="linecomment">;;     Added: icicle-Info-index-cache.</span>
<span class="linecomment">;; 2012/10/18 dadams</span>
<span class="linecomment">;;     Added: icicle-path-variables.</span>
<span class="linecomment">;;     Added: icicle-exclude-default-proxies.  (Used by *-directory-list to exclude non-file proxies.)</span>
<span class="linecomment">;; 2012/10/09 dadams</span>
<span class="linecomment">;;     Added: icicle-multi-completing-p.</span>
<span class="linecomment">;; 2012/10/05 dadams</span>
<span class="linecomment">;;     Removed: icicle-default-directory (unused).</span>
<span class="linecomment">;; 2012/09/08 dadams</span>
<span class="linecomment">;;     Added: icicle-buffer-name-input-p, icicle-buffer-complete-fn.</span>
<span class="linecomment">;;     icicle-general-help-string: Removed reference to icicle-ignore-space-prefix-flag.</span>
<span class="linecomment">;; 2012/08/06 dadams</span>
<span class="linecomment">;;     Renamed: icicle-old-read-file-name-fn to icicle-orig-read-file-name-fn.</span>
<span class="linecomment">;; 2012/07/07 dadams</span>
<span class="linecomment">;;     Added: icicle-file-name-completion-table.  Thx to Michael Heerdegen.</span>
<span class="linecomment">;; 2012/06/29 dadams</span>
<span class="linecomment">;;     Added: icicle-allowed-sort-predicate.</span>
<span class="linecomment">;; 2012/06/28 dadams</span>
<span class="linecomment">;;     icicle-search-map: Bound icicle-grep-saved-file-candidates (M-s M-s g).</span>
<span class="linecomment">;; 2012/05/14 dadams</span>
<span class="linecomment">;;     icicle-candidate-help-fn: Updated doc string to mention transforming multi-completion cands.</span>
<span class="linecomment">;; 2012/05/07 dadams</span>
<span class="linecomment">;;     Applied renaming of icicle-search-dired-marked to icicle-search-dired-marked-recursive.</span>
<span class="linecomment">;; 2012/04/23 dadams</span>
<span class="linecomment">;;     icicle-search-modes: Treat dired-mode like bookmark-bmenu-mode: error if no Dired+.</span>
<span class="linecomment">;; 2012/04/13 dadams</span>
<span class="linecomment">;;     icicle-search-modes: For Dired, use icicle-search-dired-get-files, not dired-get-marked-files.</span>
<span class="linecomment">;;     icicle-re-no-dot: Made it a defconst.</span>
<span class="linecomment">;; 2012/02/11 dadams</span>
<span class="linecomment">;;     icicle-current-raw-input, icicle-general-help-string, icicle-incremental-completion-p:</span>
<span class="linecomment">;;       Doc updates for input-expansion changes, including option name change (no -flag).</span>
<span class="linecomment">;; 2012/01/14 dadams</span>
<span class="linecomment">;;     Added: icicle-read-char-history.</span>
<span class="linecomment">;; 2011/12/28 dadams</span>
<span class="linecomment">;;     Removed mention of obsolete option icicle-cycle-into-subdirs-flag.</span>
<span class="linecomment">;; 2011/12/14 dadams</span>
<span class="linecomment">;;     Added: icicle-bookmark-list-names-only-p.</span>
<span class="linecomment">;; 2011/10/14 dadams</span>
<span class="linecomment">;;     icicle-search-map: Bound x and X to the XML-element search commands.</span>
<span class="linecomment">;; 2011/10/08 dadams</span>
<span class="linecomment">;;     eval-when-compile icicles-mac.el.</span>
<span class="linecomment">;;     icicle-read-expression-map, icicle-search-map, icicle-universal-argument-map: Use icicle-kbd.</span>
<span class="linecomment">;; 2011/10/04 dadams</span>
<span class="linecomment">;;     Added: icicle-search-map.</span>
<span class="linecomment">;; 2011/09/27 dadams</span>
<span class="linecomment">;;     Added: icicle-search-modes (var).</span>
<span class="linecomment">;; 2011/09/14 dadams</span>
<span class="linecomment">;;     Added: icicle-hist-var.</span>
<span class="linecomment">;;     icicle-prompt: Changed default value to nil from "".</span>
<span class="linecomment">;; 2011/09/05 dadams</span>
<span class="linecomment">;;     icicle-general-help-string: Added icicle-hide-non-matching-lines-flag.</span>
<span class="linecomment">;;                                 Removed -other-window from *-bookmark-(bookmark-list|desktop).</span>
<span class="linecomment">;; 2011/08/13 dadams</span>
<span class="linecomment">;;     Added: icicle-search-complement-domain-p.</span>
<span class="linecomment">;; 2011/08/12 dadams</span>
<span class="linecomment">;;     Added: icicle-full-cand-fn.</span>
<span class="linecomment">;; 2011/08/07 dadams</span>
<span class="linecomment">;;     icicle-abs-file-candidates: Update doc string: now an alist (for COLLECTION arg).</span>
<span class="linecomment">;; 2011/07/27 dadams</span>
<span class="linecomment">;;     Removed icicle-completions-format-internal.</span>
<span class="linecomment">;; 2011/07/26 dadams</span>
<span class="linecomment">;;     Removed: icicle-list-end-string (no longer needed).  Thx to Michael Heerdegen.</span>
<span class="linecomment">;; 2011/07/24 dadams</span>
<span class="linecomment">;;     Updated icicle-general-help-string for new commands.</span>
<span class="linecomment">;; 2011/07/06 dadams</span>
<span class="linecomment">;;     Applied renaming of icicle-Completions-frame-at-right-flag to icicle-move-Completions-frame.</span>
<span class="linecomment">;; 2011/05/03 dadams</span>
<span class="linecomment">;;     icicle-general-help-string: Mention icicle-toggle-highlight-saved-candidates.</span>
<span class="linecomment">;; 2011/04/29 dadams</span>
<span class="linecomment">;;     Added: icicle-buffer-sort-first-time-p, icicle-file-sort-first-time-p, icicle-new-last-cmd,</span>
<span class="linecomment">;;              icicle-orig-must-pass-after-match-pred.</span>
<span class="linecomment">;; 2011/04/02 dadams</span>
<span class="linecomment">;;     Added: icicle-bufflist, icicle-pref-arg, icicle-scan-fn-or-regexp.</span>
<span class="linecomment">;;     Moved to icicles-cmd2.el:</span>
<span class="linecomment">;;       icicle-orig-(buff|win)-key-complete, icicle-orig-extra-cands, icicle-orig-menu-bar,</span>
<span class="linecomment">;;       icicle-orig-(font|frame|pixelsize|pointsize), icicle-orig-show-initially-flag,</span>
<span class="linecomment">;;       icicle-orig-sort-orders-alist, icicle-this-cmd-keys.</span>
<span class="linecomment">;; 2011/03/31 dadams</span>
<span class="linecomment">;;     Renamed icicle-target-window-recenter-amount to icicle-recenter & moved to icicles-opt.el.</span>
<span class="linecomment">;; 2011/03/29 dadams</span>
<span class="linecomment">;;     Added: icicle-key-prefix-description, icicle-orig-(buff|window|font|frame|pixelsize|pointsize),</span>
<span class="linecomment">;;            icicle-orig-(buff|win)-key-complete, icicle-completing-keys-p, icicle-prompt,</span>
<span class="linecomment">;;            icicle-orig-(pt|win)-explore, icicle-orig-show-initially-flag, icicle-orig-extra-cands,</span>
<span class="linecomment">;;            icicle-other-window, icicle-target-window-recenter-amount, icicle-this-cmd-keys.</span>
<span class="linecomment">;;     Renamed: icicle-scroll-Completions-backward-p to icicle-scroll-Completions-reverse-p.</span>
<span class="linecomment">;;     icicle-complete-keys-alist: Removed conditional definition (just don't use it before Emacs 22).</span>
<span class="linecomment">;; 2011/01/17 dadams</span>
<span class="linecomment">;;     Removed compile-time require of cl.el.</span>
<span class="linecomment">;; 2010/12/26 dadams</span>
<span class="linecomment">;;     Removed autoload cookies except simple ones & ones with sexp on same line.  Thx to Richard Kim.</span>
<span class="linecomment">;; 2010/11/07 dadams</span>
<span class="linecomment">;;     Renamed: icicle-all-candidates-action-p to icicle-all-candidates-action.  Now can cache action.</span>
<span class="linecomment">;; 2010/10/25 dadams</span>
<span class="linecomment">;;     Removed mention of icicle-search-context-match-predicate (no longer exists).</span>
<span class="linecomment">;; 2010/10/24 adams</span>
<span class="linecomment">;;     Added: icicle-must-pass-after-match-predicate.</span>
<span class="linecomment">;;     icicle-must-pass-predicate: Clarified doc string.</span>
<span class="linecomment">;; 2010/10/09 dadams</span>
<span class="linecomment">;;     icicle-general-help-string:</span>
<span class="linecomment">;;       Applied renaming of icicle-cycling-respects-completion-mode to icicle-default-cycling-mode.</span>
<span class="linecomment">;; 2010/10/07 dadams</span>
<span class="linecomment">;;     icicle-current-TAB-method: Use nil, not basic, as default value.</span>
<span class="linecomment">;; 2010/06/18 dadams</span>
<span class="linecomment">;;     Added: icicle-completions-format-internal.</span>
<span class="linecomment">;; 2010/06/08 dadams</span>
<span class="linecomment">;;     Added: icicle-nb-candidates-before-truncation.</span>
<span class="linecomment">;; 2010/06/04 dadams</span>
<span class="linecomment">;;     Added: icicle-lighter-truncation.</span>
<span class="linecomment">;;     icicle-general-help-string: Mention missing doremi commands.</span>
<span class="linecomment">;; 2010/04/29 dadams</span>
<span class="linecomment">;;     Added: icicle-remove-icicles-props-p.</span>
<span class="linecomment">;; 2010/04/02 dadams</span>
<span class="linecomment">;;     icicle-general-help-string: Updated.</span>
<span class="linecomment">;; 2010/04/02 dadams</span>
<span class="linecomment">;;     Added: icicle-bookmark-types.</span>
<span class="linecomment">;;     icicle-general-help-string: Updated to reflect move from saved regions to bookmarks.</span>
<span class="linecomment">;; 2010/03/13 dadams</span>
<span class="linecomment">;;     Added: icicle-transform-before-sort-p.</span>
<span class="linecomment">;;     Removed: icicle-sorted-bookmark-alist.</span>
<span class="linecomment">;;     Applied renaming of icicle-add-buffer-name-flag to icicle-show-multi-completion-flag.</span>
<span class="linecomment">;; 2010/03/03 dadams</span>
<span class="linecomment">;;     Added: icicle-sorted-bookmark-alist, icicle-reverse-multi-sort-p.</span>
<span class="linecomment">;;     Renamed: icicle-last-sort-function to icicle-last-sort-comparer.</span>
<span class="linecomment">;;     icicle-general-help-string: Applied renaming to icicle-sort-orders-alist.</span>
<span class="linecomment">;;     Applied renamings: icicle-sort-function to icicle-sort-comparer,</span>
<span class="linecomment">;;                        icicle-sort-functions-alist to icicle-sort-orders-alist,</span>
<span class="linecomment">;;                        icicle-alternative-sort-function to icicle-alternative-sort-comparer.</span>
<span class="linecomment">;; 2010/02/17 dadams</span>
<span class="linecomment">;;     Moved icicle-redefined-functions to icicles-opt.el</span>
<span class="linecomment">;;       and renamed to icicle-inhibit-advice-functions</span>
<span class="linecomment">;; 2010/02/14 dadams</span>
<span class="linecomment">;;     Added: icicle-advice-info-list, icicle-redefined-functions.</span>
<span class="linecomment">;; 2009/11/07 dadams</span>
<span class="linecomment">;;     Applied doremi cmd renamings (added +) to help text.</span>
<span class="linecomment">;; 2009/10/25 dadams</span>
<span class="linecomment">;;     Added: icicle-current-TAB-method.</span>
<span class="linecomment">;;     Updated icicle-general-help-string with new command names.</span>
<span class="linecomment">;; 2009/09/26 dadams</span>
<span class="linecomment">;;     Added: icicle-progressive-completing-p.</span>
<span class="linecomment">;; 2009/09/25 dadams</span>
<span class="linecomment">;;     Removed: icicle-respect-completion-styles-p.  See option *-TAB-respects-*-styles-flag.</span>
<span class="linecomment">;; 2009/09/05 dadams</span>
<span class="linecomment">;;     Added: icicle-minibuffer-message-ok-p.</span>
<span class="linecomment">;;     Renamed icicle-acting-on-next/prev-p to icicle-acting-on-next/prev.</span>
<span class="linecomment">;; 2009/07/26 dadams</span>
<span class="linecomment">;;     Added: icicle-command-abbrev-history (belated), icicle-interactive-history.</span>
<span class="linecomment">;; 2009/05/17 dadams</span>
<span class="linecomment">;;     icicle-predicate-types-alist: Updated to reflect thumb-frm.el name changes.</span>
<span class="linecomment">;; 2009/05/11 dadams</span>
<span class="linecomment">;;     Added: icicle-hist-cands-no-highlight.</span>
<span class="linecomment">;; 2009/05/09 dadams</span>
<span class="linecomment">;;     Added: *-input-completion-fail-overlay, *-anychar-regexp, *-dot-string-internal.</span>
<span class="linecomment">;; 2009/05/02 dadams</span>
<span class="linecomment">;;     Added: icicle-cmd-reading-input.</span>
<span class="linecomment">;; 2009/04/28 dadams</span>
<span class="linecomment">;;     Renamed: icicle-object-predicate-types to icicle-predicate-types-alist.</span>
<span class="linecomment">;;     icicle-predicate-types-alist:</span>
<span class="linecomment">;;       Converted to alist, with cdr's from icicle-type-actions-alist.  Added more entries.</span>
<span class="linecomment">;;     Removed: icicle-object-named-types.</span>
<span class="linecomment">;; 2009/04/03 dadams</span>
<span class="linecomment">;;     Added: icicle-filtered-default-value.</span>
<span class="linecomment">;; 2009-03/16 dadams</span>
<span class="linecomment">;;     Added: icicle-use-candidates-only-once-alt-p.</span>
<span class="linecomment">;; 2009/03/15 dadams</span>
<span class="linecomment">;;     icicle-general-help-string: Added: icicle-recompute-shell-command-candidates,</span>
<span class="linecomment">;;                                        icicle-remove-file-from-recentf-list.</span>
<span class="linecomment">;; 2009/03/10 dadams</span>
<span class="linecomment">;;     Moved icicle-shell-command-candidates to icicles-opt.el and renamed: *-cache.</span>
<span class="linecomment">;; 2009/03/01 dadams</span>
<span class="linecomment">;;     Added: icicle-completing-read+insert-candidates.</span>
<span class="linecomment">;;     Removed: icicle-complete-on-demand-cmd.</span>
<span class="linecomment">;; 2009/02/23 dadams</span>
<span class="linecomment">;;     Added: icicle-extra-candidates-dir-insert-p.</span>
<span class="linecomment">;; 2009/02/20 dadams</span>
<span class="linecomment">;;     Added: icicle-shell-command-candidates, icicle-complete-on-demand-cmd.</span>
<span class="linecomment">;; 2009/02/04 dadams</span>
<span class="linecomment">;;     Added: icicle-next-prefix-complete-cycles-p, icicle-next-apropos-complete-cycles-p.</span>
<span class="linecomment">;; 2009/01/24 dadams</span>
<span class="linecomment">;;     Added: icicle-last-apropos-complete-match-fn.</span>
<span class="linecomment">;; 2009/01/13 dadams</span>
<span class="linecomment">;;     Added: icicle-respect-completion-styles-p (internal var, for now).</span>
<span class="linecomment">;; 2008/12/25 dadams</span>
<span class="linecomment">;;     Added: icicle-cycling-p.</span>
<span class="linecomment">;; 2008/12/07 dadams</span>
<span class="linecomment">;;     Added: icicle-completion-prompt-overlay.  Removed: icicle-prompt.</span>
<span class="linecomment">;; 2008/12/02 dadams</span>
<span class="linecomment">;;     Added: icicle-confirm-exit-commands.</span>
<span class="linecomment">;; 2008/11/28 dadams</span>
<span class="linecomment">;;     Moved to icicles-opt.el: icicle-apropos-match-fns-alist.</span>
<span class="linecomment">;; 2008/11/22 dadams</span>
<span class="linecomment">;;     Added: icicle-fancy-candidates-p, icicle-fancy-cands-internal-p.</span>
<span class="linecomment">;; 2008/11/03 dadams</span>
<span class="linecomment">;;     Applied renamings from icicles-cmd.el.</span>
<span class="linecomment">;; 2008/11/02 dadams</span>
<span class="linecomment">;;     Added: icicle-(doc|vardoc|fundoc|plist)-last-initial(-option)-cand-set.</span>
<span class="linecomment">;; 2008/10/14 dadams</span>
<span class="linecomment">;;     Added: icicle-general-help-string.</span>
<span class="linecomment">;;     Removed: icicle-completion-help-string.</span>
<span class="linecomment">;; 2008/10/06 dadams</span>
<span class="linecomment">;;     icicle-ms-windows-drive-hash: Set it to nil if make-hash-table is undefined.</span>
<span class="linecomment">;; 2008/09/30 dadams</span>
<span class="linecomment">;;     Added: icicle-ms-windows-drive-hash.</span>
<span class="linecomment">;; 2008/09/20 dadams</span>
<span class="linecomment">;;     icicle-ignored-extensions-regexp: Append $ to each extension.</span>
<span class="linecomment">;;     Added: icicle-abs-file-candidates.</span>
<span class="linecomment">;; 2008/08/28 dadams</span>
<span class="linecomment">;;     Renamed: alacarte-menu-items-alist to lacarte-menu-items-alist.</span>
<span class="linecomment">;; 2008/08/18 dadams</span>
<span class="linecomment">;;     Added: icicle-inhibit-try-switch-buffer.</span>
<span class="linecomment">;; 2008/08/12 dadams</span>
<span class="linecomment">;;     Added: icicle-apply-nomsg.</span>
<span class="linecomment">;; 2008/08/10 dadams</span>
<span class="linecomment">;;     Added: icicle-explore-final-choice, icicle-explore-final-choice-full.</span>
<span class="linecomment">;; 2008/08/03 dadams</span>
<span class="linecomment">;;     Added: icicle-all-candidates-list-alt-action-fn.</span>
<span class="linecomment">;;     Renamed: icicle-all-candidates-action-fn to icicle-all-candidates-list-action-fn,</span>
<span class="linecomment">;;              icicle-candidate-alternative-action-fn to icicle-candidate-alt-action-fn.</span>
<span class="linecomment">;; 2008/03/30 dadams</span>
<span class="linecomment">;;     Added: icicle-old-read-file-name-fn.</span>
<span class="linecomment">;; 2008/03/29 dadams</span>
<span class="linecomment">;;     Removed: icicle-prompt-suffix.</span>
<span class="linecomment">;; 2008/03/23 dadams</span>
<span class="linecomment">;;     Added: icicle-scroll-Completions-backward-p.</span>
<span class="linecomment">;; 2008/03/19 dadams</span>
<span class="linecomment">;;     Added: icicle-read-expression-map.</span>
<span class="linecomment">;; 2008/03/10 dadams</span>
<span class="linecomment">;;     Added: icicle-frame-alist.</span>
<span class="linecomment">;; 2008/02/24 dadams</span>
<span class="linecomment">;;     Added: icicle-apropos-match-fns-alist.</span>
<span class="linecomment">;; 2008/02/21 dadams</span>
<span class="linecomment">;;     Added: icicle-Info-only-rest-of-book-p.</span>
<span class="linecomment">;; 2008/02/03 dadams</span>
<span class="linecomment">;;     Added: icicle-comp-base-is-default-dir-p, icicle-dir-candidate-can-exit-p.</span>
<span class="linecomment">;; 2008/01/18 dadams</span>
<span class="linecomment">;;     Moved icicle-complete-keys-alist here from icicles-cmd.el</span>
<span class="linecomment">;; 2008/01/04 dadams</span>
<span class="linecomment">;;     Added: icicle-doc-history.</span>
<span class="linecomment">;; 2007/12/27 dadams</span>
<span class="linecomment">;;     Added: icicle-apropos-complete-match-fn.</span>
<span class="linecomment">;; 2007/12/05 dadams</span>
<span class="linecomment">;;     icicle-proxy-candidate-regexp: Removed * doc-string prefix.</span>
<span class="linecomment">;; 2007/11/25 dadams</span>
<span class="linecomment">;;     Added: icicle-commands-for-abbrev.</span>
<span class="linecomment">;; 2007/11/17 dadams</span>
<span class="linecomment">;;     Added: icicle(saved)-proxy-candidates, icicle-proxy-candidate-regexp.</span>
<span class="linecomment">;; 2007/10/06 dadams</span>
<span class="linecomment">;;     icicle-object-named-types: Added file type.</span>
<span class="linecomment">;; 2007/08/19 dadams</span>
<span class="linecomment">;;     Added: icicle-input-fail-pos.</span>
<span class="linecomment">;; 2007/08/18 dadams</span>
<span class="linecomment">;;     Added: icicle-whole-candidate-as-text-prop-p.</span>
<span class="linecomment">;; 2007/07/29 dadams</span>
<span class="linecomment">;;     Added: icicle-object-named-types, icicle-object-predicate-types.</span>
<span class="linecomment">;; 2007/07/27 dadams</span>
<span class="linecomment">;;     Moved icicle-act-first-then-navigate-p to icicles-opt.el as icicle-act-before-cycle-flag.</span>
<span class="linecomment">;; 2007/07/08 dadams</span>
<span class="linecomment">;;     Added: icicle-all-candidates(-alternative)-action-fn.</span>
<span class="linecomment">;; 2007/07/03 dadams</span>
<span class="linecomment">;;     Added: icicle-previous-raw(-non)-file-name-inputs.</span>
<span class="linecomment">;; 2007/06/23 dadams</span>
<span class="linecomment">;;     Added: icicle-search-replacement-history.</span>
<span class="linecomment">;; 2007/06/17 dadams</span>
<span class="linecomment">;;     Added: icicle-saved-candidate-overlays.</span>
<span class="linecomment">;; 2007/06/07 dadams</span>
<span class="linecomment">;;     Added: icicle-face-name-history.</span>
<span class="linecomment">;;     Renamed: frame-name-history to icicle-frame-name-history,</span>
<span class="linecomment">;;              icicle-font-history to icicle-font-name-history,</span>
<span class="linecomment">;;              icicle-function-history to icicle-function-name-history,</span>
<span class="linecomment">;;              icicle-variable-history to icicle-variable-name-history.</span>
<span class="linecomment">;; 2007/05/29 dadams</span>
<span class="linecomment">;;     icicle-insert-string-at-pt-*: Initialize to nil, not 0.</span>
<span class="linecomment">;; 2007/05/25 dadams</span>
<span class="linecomment">;;     Added: icicle-char-property-value-history.</span>
<span class="linecomment">;; 2007/05/06 dadams</span>
<span class="linecomment">;;     Added defvars to quiet byte compiler.</span>
<span class="linecomment">;; 2007/04/28 dadams</span>
<span class="linecomment">;;     Added: icicle-search-in-context-fn.</span>
<span class="linecomment">;; 2007/04/20 dadams</span>
<span class="linecomment">;;     Added: icicle-search-level-overlays.</span>
<span class="linecomment">;; 2007/04/15 dadams</span>
<span class="linecomment">;;     Added: icicle-search-context-regexp.</span>
<span class="linecomment">;; 2007/04/10 dadams</span>
<span class="linecomment">;;     Added: icicle-search-context-level.</span>
<span class="linecomment">;; 2007/04/08 dadams</span>
<span class="linecomment">;;     Added: icicle-all-candidates-action-p.</span>
<span class="linecomment">;;     icicle-candidate-action-fn: Corrected doc string: reversed success and failure values.</span>
<span class="linecomment">;; 2007/04/07 dadams</span>
<span class="linecomment">;;     Added: icicle-search-replacement, icicle-searching-p, icicle-act-first-then-navigate-p.</span>
<span class="linecomment">;; 2007/04/02 dadams</span>
<span class="linecomment">;;     Added: icicle-text-property-value-history.</span>
<span class="linecomment">;;     Added: icicle-text-properties-alist (commented out).</span>
<span class="linecomment">;; 2007/03/23 dadams</span>
<span class="linecomment">;;     Added: icicle-require-match-p.</span>
<span class="linecomment">;; 2007/03/14 dadams</span>
<span class="linecomment">;;     Added: icicle-last-top-level-command.</span>
<span class="linecomment">;; 2007/03/06 dadams</span>
<span class="linecomment">;;     Added: icicle-inhibit-sort-p.</span>
<span class="linecomment">;;     icicle-candidates-alist: Improved doc string.</span>
<span class="linecomment">;; 2007/02/20 dadams</span>
<span class="linecomment">;;     Added: icicle-delete-candidate-object, icicle-candidate-alternative-action-fn.</span>
<span class="linecomment">;; 2007/02/03 dadams</span>
<span class="linecomment">;;     Renamed icicle-icompleting-p to icicle-edit-update-p.</span>
<span class="linecomment">;; 2007/02/02 dadams</span>
<span class="linecomment">;;     Added: icicle-completing-p.</span>
<span class="linecomment">;; 2007/01/29 dadams</span>
<span class="linecomment">;;     icicle-last-sort-function: Use icicle-case-string-less-p, not string-lessp.</span>
<span class="linecomment">;; 2007/01/19 dadams</span>
<span class="linecomment">;;     Added: icicle-candidate-properties-alist.</span>
<span class="linecomment">;; 2007/01/15 dadams</span>
<span class="linecomment">;;     Added: icicle-reverse-sort-p.</span>
<span class="linecomment">;; 2007/01/14 dadams</span>
<span class="linecomment">;;     icicle-list-use-nth-parts: Updated doc string for new icicle-list-nth-parts-join-string.</span>
<span class="linecomment">;; 2007/01/12 dadams</span>
<span class="linecomment">;;     Added: icicle-list-use-nth-parts.</span>
<span class="linecomment">;;     Removed icicle-saved-overriding-local-map.</span>
<span class="linecomment">;; 2007/01/11 dadams</span>
<span class="linecomment">;;     Added: icicle-menu-map, icicle-minor-mode-map-entry.</span>
<span class="linecomment">;; 2007/01/10 dadams</span>
<span class="linecomment">;;     Added: icicle-saved-overriding-local-map.</span>
<span class="linecomment">;; 2007/01/05 dadams</span>
<span class="linecomment">;;     icicle-initial-value: Updated doc string to mention you can bind it.</span>
<span class="linecomment">;; 2006/12/25 dadams</span>
<span class="linecomment">;;     Added: icicle-saved-completion-candidates-internal.</span>
<span class="linecomment">;; 2006/12/23 dadams</span>
<span class="linecomment">;;     Added: icicle-candidate-help-fn.</span>
<span class="linecomment">;; 2006/12/17 dadams</span>
<span class="linecomment">;;     Added: icicle-saved-completion-candidate.</span>
<span class="linecomment">;; 2006/11/24 dadams</span>
<span class="linecomment">;;     Added: icicle-universal-argument-map, icicle-kmacro-alist, icicle-saved-kmacro-ring-max,</span>
<span class="linecomment">;;            icicle-kmacro-history.</span>
<span class="linecomment">;; 2006/11/18 dadams</span>
<span class="linecomment">;;     Added: frame-name-history, icicle-bookmark-history, icicle-buffer-config-history,</span>
<span class="linecomment">;;            icicle-color-history, icicle-color-theme-history, icicle-completion-set-history,</span>
<span class="linecomment">;;            icicle-dictionary-history, icicle-font-history, icicle-function-history,</span>
<span class="linecomment">;;            icicle-kill-history, icicle-search-history, icicle-variable-history,</span>
<span class="linecomment">;; 2006/11/09 dadams</span>
<span class="linecomment">;;     icicle-search-refined-overlays: Updated doc string: icicle-search-highlight-threshold.</span>
<span class="linecomment">;; 2006/10/14 dadams</span>
<span class="linecomment">;;     Moved conditional eval-when-compile to top level.</span>
<span class="linecomment">;; 2006/09/24 dadams</span>
<span class="linecomment">;;     icicle-last-transform-function: Corrected default value.</span>
<span class="linecomment">;; 2006/09/12 dadams</span>
<span class="linecomment">;;     Added: icicle-pre-minibuffer-buffer.</span>
<span class="linecomment">;; 2006/08/20 dadams</span>
<span class="linecomment">;;     icicle-current-completion-mode: Updated doc string.</span>
<span class="linecomment">;; 2006/08/04 dadams</span>
<span class="linecomment">;;     Removed icicle-apropos-completing-p (not used).</span>
<span class="linecomment">;; 2006/07/23 dadams</span>
<span class="linecomment">;;     Added: icicle-last-transform-function.</span>
<span class="linecomment">;; 2006/07/22 dadams</span>
<span class="linecomment">;;     Added: icicle-search-command, icicle-search-final-choice.</span>
<span class="linecomment">;; 2006/07/20 dadams</span>
<span class="linecomment">;;     Renamed icicle-arrows-respect-* to icicle-cycling-respects-completion-mode-flag.</span>
<span class="linecomment">;; 2006/07/19 dadams</span>
<span class="linecomment">;;     Applied patch from Damien Elmes &lt;emacs@repose.cx&gt;: Added: icicle-current-completion-type.</span>
<span class="linecomment">;;     Renamed: icicle-current-completion-type to icicle-current-completion-mode.</span>
<span class="linecomment">;; 2006/07/05 dadams</span>
<span class="linecomment">;;     Renamed: icicle-current-regexp-input to icicle-current-raw-input.</span>
<span class="linecomment">;; 2006/06/18 dadams</span>
<span class="linecomment">;;     Added: icicle-apropos-completing-p.</span>
<span class="linecomment">;; 2006/04/30 dadams</span>
<span class="linecomment">;;     Added: icicle-candidate-entry-fn.</span>
<span class="linecomment">;;     Renamed: icicle-search-candidates to icicle-candidates-alist.</span>
<span class="linecomment">;; 2006/04/14 dadams</span>
<span class="linecomment">;;     Renamed icicle-search-refined-overlay to icicle-search-refined-overlays.</span>
<span class="linecomment">;;     Added: icicle-search-candidates.</span>
<span class="linecomment">;; 2006/04/07 dadams</span>
<span class="linecomment">;;     Added: icicle-search-overlays.</span>
<span class="linecomment">;;     Renamed icicle-search-overlay to icicle-search-current-overlay.</span>
<span class="linecomment">;; 2006/03/27 dadams</span>
<span class="linecomment">;;     Added: icicle-search-refined-overlay.</span>
<span class="linecomment">;; 2006/03/26 dadams</span>
<span class="linecomment">;;     Added: icicle-search-overlay.</span>
<span class="linecomment">;; 2006/03/25 dadams</span>
<span class="linecomment">;;     Added: icicle-saved-candidates-variables-obarray.</span>
<span class="linecomment">;; 2006/03/20 dadams</span>
<span class="linecomment">;;     Added: icicle-common-match-string, icicle-current-regexp-input.</span>
<span class="linecomment">;; 2006/03/14 dadams</span>
<span class="linecomment">;;     Removed: icicle-icicle-completing-p.</span>
<span class="linecomment">;; 2006/03/13 dadams</span>
<span class="linecomment">;;     Added: icicle-re-no-dot.</span>
<span class="linecomment">;; 2006/03/05 dadams</span>
<span class="linecomment">;;     Moved to icicles-mode.el: icicle-mode-map.</span>
<span class="linecomment">;; 2006/03/04 dadams</span>
<span class="linecomment">;;     Moved options stuff to Options menu, when available.</span>
<span class="linecomment">;;     Moved apropos stuff to Apropos menu, when available.</span>
<span class="linecomment">;;     Moved describe stuff to Describe menu, when available.</span>
<span class="linecomment">;; 2006/03/03 dadams</span>
<span class="linecomment">;;     Added to Icicles menu: icicle-complete-thesaurus-entry, icicle-apropos*,</span>
<span class="linecomment">;;       option-setting cmds, buffer-config cmds icicle-(var|fun)doc.</span>
<span class="linecomment">;;     Require apropos-fn+var.el.</span>
 
<span class="linecomment">;;;(@* "CHANGE LOG FOR `icicles.el'")</span>
<span class="linecomment">;;</span>
<span class="linecomment">;; 2012/08/06 dadams</span>
<span class="linecomment">;;     Renamed old-* to icicle-ORIG-*:</span>
<span class="linecomment">;;       icicle-ORIG-bbdb-complete-name, icicle-ORIG-choose-completion,</span>
<span class="linecomment">;;       icicle-ORIG-choose-completion-string, icicle-ORIG-color, icicle-ORIG-comint-dynamic-complete,</span>
<span class="linecomment">;;       icicle-ORIG-comint-dynamic-complete-filename, icicle-ORIG-comint-replace-by-expanded-filename,</span>
<span class="linecomment">;;       icicle-ORIG-completing-read, icicle-ORIG-completing-read-multiple,</span>
<span class="linecomment">;;       icicle-ORIG-completion-setup-function, icicle-ORIG-crm-local-completion-map,</span>
<span class="linecomment">;;       icicle-ORIG-crm-local-must-match-map, icicle-ORIG-dired-read-shell-command,</span>
<span class="linecomment">;;       icicle-ORIG-dired-smart-shell-command, icicle-ORIG-display-completion-list,</span>
<span class="linecomment">;;       icicle-ORIG-ess-complete-object-name, icicle-ORIG-exit-minibuffer,</span>
<span class="linecomment">;;       icicle-ORIG-face-valid-attribute-values, icicle-ORIG-file,</span>
<span class="linecomment">;;       icicle-ORIG-gud-gdb-complete-command, icicle-ORIG-minibuffer-complete-and-exit,</span>
<span class="linecomment">;;       icicle-ORIG-minibuffer-default-add-completions, icicle-ORIG-mouse-choose-completion,</span>
<span class="linecomment">;;       icicle-ORIG-next-history-element, icicle-ORIG-read-char-by-name, icicle-ORIG-read-color,</span>
<span class="linecomment">;;       icicle-ORIG-read-face-name, icicle-ORIG-read-file-name, icicle-orig-read-file-name-fn,</span>
<span class="linecomment">;;       icicle-ORIG-read-from-minibuffer, icicle-ORIG-read-number, icicle-ORIG-shell-command,</span>
<span class="linecomment">;;       icicle-ORIG-read-shell-command, icicle-ORIG-read-string, icicle-ORIG-shell-command-on-region,</span>
<span class="linecomment">;;       icicle-ORIG-sit-for, icicle-ORIG-switch-to-completions, icicle-ORIG-widget-color-complete.</span>
<span class="linecomment">;; 2012/07/17 dadams</span>
<span class="linecomment">;;     Removed: icicle-byte-compile-eval-after-load-flag.</span>
<span class="linecomment">;; 2012/02/28 dadams</span>
<span class="linecomment">;;     Removed eval-when-compile for Emacs &lt; 20.</span>
<span class="linecomment">;; 2011/12/11 dadams</span>
<span class="linecomment">;;     Ensure icicles-mac is loaded if icicles.el is not byte-compiled, and is loaded when compiled.</span>
<span class="linecomment">;; 2011/10/12 dadams</span>
<span class="linecomment">;;     Moved the Miscellaneous stuff here from icicles-mac.el: indent & font-lock for macros etc.</span>
<span class="linecomment">;; 2011/10/10 dadams</span>
<span class="linecomment">;;     Moved here from icicles-mac.el: icicle-byte-compile-eval-after-load-flag.</span>
<span class="linecomment">;;     Removed require of icicles-mac.el.</span>
<span class="linecomment">;; 2011/06-24 dadams</span>
<span class="linecomment">;;     Updated load order: mac, face, opt, var, fn, mcmd, cmd1, cmd2, mode.</span>
<span class="linecomment">;; 2010/12/26 dadams</span>
<span class="linecomment">;;     Removed autoload cookies except simple ones & ones with sexp on same line.  Thx to Richard Kim.</span>
<span class="linecomment">;; 2009/05/22 dadams</span>
<span class="linecomment">;;     Require icicles-cmd[12].</span>
<span class="linecomment">;; 2009/04/13 dadams</span>
<span class="linecomment">;;     Removed the part of Thierry's text that mentioned emacsclient (no relation to Icicles).</span>
<span class="linecomment">;; 2008/12/02 dadams</span>
<span class="linecomment">;;     Don't warn, if daemonp.  Thx to Thierry Volpiatto.</span>
<span class="linecomment">;; 2007/07/22 dadams</span>
<span class="linecomment">;;     Require icicles-cmd.el before icicles-mode.el.</span>
<span class="linecomment">;; 2007/06/07 dadams</span>
<span class="linecomment">;;     Moved all doc to new files icicles-doc1.el and icicles-doc2.el.</span>
<span class="linecomment">;; 2007/05/12 dadams</span>
<span class="linecomment">;;     Moved Search Enhancements subsections to top level: Isearch Completion,</span>
<span class="linecomment">;;       Icicles Search Commands, Overview, Search and Replace.</span>
<span class="linecomment">;; 2007/05/06 dadams</span>
<span class="linecomment">;;     Changed S-C- to C-S- and M-C- to C-M- in doc.</span>
<span class="linecomment">;; 2007/04/20 dadams</span>
<span class="linecomment">;;     Require icicles-face.el after icicles-opt.el.</span>
<span class="linecomment">;; 2007/03/09 dadams</span>
<span class="linecomment">;;     Renamed sections .*Removal of Duplicates to .*Removing Duplicates and</span>
<span class="linecomment">;;                      More on Multi-Commands to More About Multi-Commands.</span>
<span class="linecomment">;; 2007/02/24 dadams</span>
<span class="linecomment">;;     Added section More on Multi-Commands.</span>
<span class="linecomment">;;     Added subsection Chipping Away the Non-Elephant to Nutshell View.</span>
<span class="linecomment">;; 2007/02/03 dadams</span>
<span class="linecomment">;;     Updated section Sorting Candidates and Removal of Duplicates.</span>
<span class="linecomment">;; 2007/01/28 dadams</span>
<span class="linecomment">;;     Added: subsection Using Progressive ... Process of Elimination.</span>
<span class="linecomment">;; 2007/01/21 dadams</span>
<span class="linecomment">;;     Added: section Text Properties in *Completions*.</span>
<span class="linecomment">;; 2007/01/19 dadams</span>
<span class="linecomment">;;     Added: section Programming Multi-Completions.</span>
<span class="linecomment">;; 2007/01/16 dadams</span>
<span class="linecomment">;;     Added linkd links.  Cleanup.</span>
<span class="linecomment">;; 2007/01/15 dadams</span>
<span class="linecomment">;;     Added: section Sorting Candidates and Removal of Duplicates.</span>
<span class="linecomment">;;     Renamed:</span>
<span class="linecomment">;;      icicle-sort-and-strip-ignored to icicle-strip-ignored-files-and-sort,</span>
<span class="linecomment">;;      icicle-dirs-last-p to icicle-dirs-last-p,</span>
<span class="linecomment">;;      icicle-sort-case-insensitively to *-case-insensitive-string-lessp.</span>
<span class="linecomment">;; 2007/01/12 dadams</span>
<span class="linecomment">;;     Updated section Multi-Completions for icicle-list-use-nth-parts.</span>
<span class="linecomment">;; 2007/01/06 dadams</span>
<span class="linecomment">;;     File-Name and Directory-Name Completion Tips: Mention icicle-use-~-for-home-dir-flag.</span>
<span class="linecomment">;; 2006/11/23 dadams</span>
<span class="linecomment">;;     Added icicle-TAB-shows-candidates-flag.</span>
<span class="linecomment">;; 2006/11/10 dadams</span>
<span class="linecomment">;;     Multi-Commands: Mention prompt prefix +.</span>
<span class="linecomment">;; 2006/11/05 dadams</span>
<span class="linecomment">;;     icicle-occur is bound to C-c '.  Search commands use multiple buffers.</span>
<span class="linecomment">;;     Added Nutshell subsection Perform Multiple Operations In One Command.</span>
<span class="linecomment">;; 2006/10/19 dadams</span>
<span class="linecomment">;;     Added Goggle Matching section.</span>
<span class="linecomment">;; 2006/10/16 dadams</span>
<span class="linecomment">;;     Added key completion to Nutshell View.</span>
<span class="linecomment">;; 2006/10/14 dadams</span>
<span class="linecomment">;;     Renamed: icicle-cancel-*Help*-* to icicle-cancel-Help-*.</span>
<span class="linecomment">;;     Moved conditional eval-when-compile to top level.</span>
<span class="linecomment">;; 2006/10/01 dadams</span>
<span class="linecomment">;;     Updated for new alternative-sort toggle:</span>
<span class="linecomment">;;       History Enhancements, Key Completion, Customization *, Key Bindings.</span>
<span class="linecomment">;; 2006/09/30 dadams</span>
<span class="linecomment">;;     Changed bindings of icicle-candidate-set-(save|retrieve) from C-&lt;, C-&gt; to C-M-&lt;, C-M-&gt;.</span>
<span class="linecomment">;;     Added icicle-key-descriptions-use-&lt;&gt;-flag in Customization section.</span>
<span class="linecomment">;; 2006/09/17 dadams</span>
<span class="linecomment">;;     Added section Key Completion.</span>
<span class="linecomment">;; 2006/09/12 dadams</span>
<span class="linecomment">;;     Added section Moving Between the Minibuffer and Other Buffers.</span>
<span class="linecomment">;; 2006/08/23 dadams</span>
<span class="linecomment">;;     Added sections Icicles Mult M-x and Defining Icicles Multi M-x.</span>
<span class="linecomment">;; 2006/08/18 dadams</span>
<span class="linecomment">;;     Added section Icicles Info Enhancements.</span>
<span class="linecomment">;; 2006/08/13 dadams</span>
<span class="linecomment">;;     Documented icicle-completing(-mustmatch)-prompt-prefix.</span>
<span class="linecomment">;; 2006/06/17 dadams</span>
<span class="linecomment">;;     Rewrote Multi-Commands, Defining Icicles Commands (Including Multi-Commands), and</span>
<span class="linecomment">;;             Defining Multi-Commands the Hard Way.</span>
<span class="linecomment">;;     Renamed: Defining Icicles Commands: + (Including Multi-Commands).</span>
<span class="linecomment">;;              Defining Multi-Commands: + the Hard Way.</span>
<span class="linecomment">;;     Added: Defining Multiple-Choice Menus.</span>
<span class="linecomment">;; 2006/06/08 dadams</span>
<span class="linecomment">;;     Removed require of icicle-keys.el (obsolete).</span>
<span class="linecomment">;; 2006/05/26 dadams</span>
<span class="linecomment">;;     Mention M-k as icicle-erase-minibuffer-or-history-element.</span>
<span class="linecomment">;;     Don't mention M-S-backspace and M-S-delete any more.</span>
<span class="linecomment">;; 2006/05/19 dadams</span>
<span class="linecomment">;;     Renamed icicle-inhibit-reminder* to icicle-reminder*.</span>
<span class="linecomment">;;       Updated its doc to reflect new functionality.</span>
<span class="linecomment">;; 2006/05/18 dadams</span>
<span class="linecomment">;;     Change install instructions to include turning on Icicle mode.</span>
<span class="linecomment">;; 2006/05/16 dadams</span>
<span class="linecomment">;;     Require icicles-keys.el when icicle-bind-top-level-commands-flag.</span>
<span class="linecomment">;;     Updated doc to reflect new library icicles-keys.el.</span>
<span class="linecomment">;; 2006/05/15 dadams</span>
<span class="linecomment">;;     Renamed: ici*-nospace-flag to icicle-ignore-space-prefix-flag.</span>
<span class="linecomment">;;     Updated doc of icicle-ignore-space-prefix-flag.</span>
<span class="linecomment">;;     Added doc of icicle-buffer-ignore-space-prefix-flag.</span>
<span class="linecomment">;; 2006/04/14 dadams</span>
<span class="linecomment">;;     Added section Inserting a Regexp from a Variable.</span>
<span class="linecomment">;; 2006/04/09 dadams</span>
<span class="linecomment">;;     Added descriptions of icicle-arrows-respect-completion-type-flag.</span>
<span class="linecomment">;; 2006/03/19 dadams</span>
<span class="linecomment">;;     Added description of icicle-expand-input-to-common-match-flag.</span>
<span class="linecomment">;; 2006/03/07 dadams</span>
<span class="linecomment">;;     Correct the description of icicle-doc - match against only the doc, not the symbol name.</span>
<span class="linecomment">;; 2006/03/06 dadams</span>
<span class="linecomment">;;     Reordered Commentary sections, putting Emacs-Lisp stuff later.</span>
<span class="linecomment">;; 2006/03/05 dadams</span>
<span class="linecomment">;;     Mention icicle-touche-pas-aux-menus-flag.</span>
<span class="linecomment">;; 2006/03/03 dadams</span>
<span class="linecomment">;;     Clarified Multi-Completions description.</span>
<span class="linecomment">;; 2006/03/01 dadams</span>
<span class="linecomment">;;     Added: icicle-(complete|insert)-thesaurus-entry.</span>
<span class="linecomment">;; 2006/02/27 dadams</span>
<span class="linecomment">;;     Split into multiple libraries: *-cmd, *-face, *-fn, *-mac, *-mode, *-opt, *-var.</span>
<span class="linecomment">;; 2006/02/25 dadams</span>
<span class="linecomment">;;     Added: icicle-narrow-candidates (bound to M-*), icicle-icicle-completing-p,</span>
<span class="linecomment">;;            icicle-set-calling-cmd, icicle-reset-icicle-completing-p,</span>
<span class="linecomment">;;            icicle-run-icicle-(pre|post)-command-hook.</span>
<span class="linecomment">;;     Add all hooks in icicle-mode only, except for minibuffer-local hooks (pre- and</span>
<span class="linecomment">;;       post-command).</span>
<span class="linecomment">;;     Remove all hooks when exit Icicle mode.</span>
<span class="linecomment">;;     icicle-completing-read, icicle-read-file-name:</span>
<span class="linecomment">;;       Add catch icicle-read-top.  Set icicle-icicle-completing-p.</span>
<span class="linecomment">;;       Separate case of not Icicle mode from other no-prompt cases.</span>
<span class="linecomment">;;     Reordered some groups of functions.</span>
<span class="linecomment">;; 2006/02/24 dadams</span>
<span class="linecomment">;;     icicle-candidate-set-1: Treat empty set.</span>
<span class="linecomment">;; 2006/02/21 dadams</span>
<span class="linecomment">;;     icicle-prefix-complete: Implemented icompletion here, like icicle-apropos-complete-1.</span>
<span class="linecomment">;;     icicle-call-then-update-Completions:</span>
<span class="linecomment">;;       Use icicle-last-completion-command, not icicle-apropos-complete.</span>
<span class="linecomment">;;     Renamed icicle-apropos-icompleting-p to icicle-icompleting-p.</span>
<span class="linecomment">;;     Added: icicle-(kill|delete)(-backward)-*, icicle-yank etc.  Bound them.</span>
<span class="linecomment">;;     Added: icicle-call-then-update-Completions.</span>
<span class="linecomment">;;     Added: icicle-incremental-completion-p.</span>
<span class="linecomment">;;       Use instead of icicle-incremental-completion-flag everywhere.</span>
<span class="linecomment">;;       Upgrade from t in icicle-display-candidates-in-Completions.</span>
<span class="linecomment">;;       Reset in icicle-minibuffer-setup.</span>
<span class="linecomment">;;     icicle-isearch-complete: Use search-ring symbol as history arg to completing-read.</span>
<span class="linecomment">;;     icicle-display-candidates-in-Completions, icicle-keep-only-past-inputs, icicle-history:</span>
<span class="linecomment">;;       Ensure that minibuffer-history-variable is a list.</span>
<span class="linecomment">;;     Fixed typos: icicle-keep-past-inputs -&gt; icicle-keep-only-past-inputs.</span>
<span class="linecomment">;; 2006/02/20 dadams</span>
<span class="linecomment">;;     icicle-insert-string-at-point: Treat negative prefix arg.</span>
<span class="linecomment">;;     Added: icicle-signum.</span>
<span class="linecomment">;;     icicle-insert-thing: Remove text properties of string to insert.</span>
<span class="linecomment">;; 2006/02/19 dadams</span>
<span class="linecomment">;;     icicle-thing-at-point-functions: Added function to grab successive text.</span>
<span class="linecomment">;;     icicle-insert-string-at-point: Treat successive-grab fn and prefix arg.</span>
<span class="linecomment">;;     Added: icicle-default-thing-insertion, icicle-default-thing-insertion-flipped-p,</span>
<span class="linecomment">;;            icicle-insert-string-at-pt-(start|end), icicle-successive-grab-count,</span>
<span class="linecomment">;;            icicle-insert-thing.</span>
<span class="linecomment">;;     Renamed: icicle-insert-string-near-point to icicle-insert-string-at-point.</span>
<span class="linecomment">;; 2006/02/18 dadams</span>
<span class="linecomment">;;     icicle-retrieve-last-input: Don't reset icicle-last-completion-command if not interactive</span>
<span class="linecomment">;;     icicle-candidate-set-complement, icicle-keep-only-past-inputs:</span>
<span class="linecomment">;;       Use icicle-retrieve-last-input.</span>
<span class="linecomment">;;     icicle-keep-only-past-inputs:</span>
<span class="linecomment">;;       Rewrote modeled on icicle-apropos-complete:</span>
<span class="linecomment">;;        Take into account singleton and empty candidate set.</span>
<span class="linecomment">;;        Provide input to icicle-display-ca*.</span>
<span class="linecomment">;;        Set icicle-last-completion-command.</span>
<span class="linecomment">;;     icicle-history: Force redisplay of *Completions*.  Don't set this-command.</span>
<span class="linecomment">;;     icicle-completing-read: Ensure icicle-initial-value is not nil.</span>
<span class="linecomment">;;     icicle-save-or-restore-input: Don't restore empty input.</span>
<span class="linecomment">;;     icicle-recompute-candidates:</span>
<span class="linecomment">;;       Don't recompute if last completion cmd was icicle-keep-only-past-inputs.</span>
<span class="linecomment">;;     Added: icicle-historical-candidate, icicle-keep-only-past-inputs.</span>
<span class="linecomment">;;     icicle-display-candidates-in-Completions: Use icicle-historical-candidate.</span>
<span class="linecomment">;;     Bind icicle-keep-only-past-inputs to M-pause in minibuffer completion maps.</span>
<span class="linecomment">;; 2006/02/17 dadams</span>
<span class="linecomment">;;     Added: icicle-complete-input-overlay, icicle-highlight-complete-input,</span>
<span class="linecomment">;;            icicle-complete-input.</span>
<span class="linecomment">;;     icicle-(prefix|apropos)-complete(-1): Use icicle-highlight-complete-input.</span>
<span class="linecomment">;;     Added icicle-inhibit-reminder-prompt-flag.  Thx to Jonathan Simms for the suggestion.</span>
<span class="linecomment">;;     icicle-completing-read, icicle-read-file-name: Use icicle-inhibit-reminder-prompt-flag.</span>
<span class="linecomment">;; 2006/02/12 dadams</span>
<span class="linecomment">;;     icicle-read-string: Finished bug fix of 2/11.  Thx to Andrey Zhdanov.</span>
<span class="linecomment">;; 2006/02/11 dadams</span>
<span class="linecomment">;;     icicle-insert-string-near-point: Always start with first function.</span>
<span class="linecomment">;;     read-from-minibuffer: Bug fix: don't use def if init is consp.  Thx to Andrey Zhdanov.</span>
<span class="linecomment">;; 2006/02/09 dadams</span>
<span class="linecomment">;;     Added: icicle-insert-string-near-point, icicle-thing-at-point-functions,</span>
<span class="linecomment">;;            icicle-thing-at-pt-fns-pointer.</span>
<span class="linecomment">;;     Bound icicle-insert-string-near-point.</span>
<span class="linecomment">;;     Added Commentary section "Inserting Text Found Near the Cursor"</span>
<span class="linecomment">;;     Require: thingatpt+.el, thingatpt.el.</span>
<span class="linecomment">;;     Bug fix: icicle-execute-extended-command(-1): Take care of last-command and this-command.</span>
<span class="linecomment">;; 2006/02/08 dadams</span>
<span class="linecomment">;;     icicle-completing-read: Treat consp case of initial-input.</span>
<span class="linecomment">;;     icicle-read-file-name: Fixed bug introduced 02/02:</span>
<span class="linecomment">;;       Don't ensure initial-input is not null.</span>
<span class="linecomment">;; 2006/02/07 dadams</span>
<span class="linecomment">;;     Bug fix: Files menu find-file stuff was bound to *recent-file*.</span>
<span class="linecomment">;; 2006/02/03 dadams</span>
<span class="linecomment">;;     icicle-init-value-flag: Use nil as the default value.</span>
<span class="linecomment">;;     Added: icicle-read-from-minibuffer, icicle-read-string.</span>
<span class="linecomment">;;              Use in icicle-(redefine|restore)-standard-commands.</span>
<span class="linecomment">;; 2006/02/02 dadams</span>
<span class="linecomment">;;     icicle-completing-read, read-file-name:</span>
<span class="linecomment">;;       Respect icicle-init-value-flag only if default value not nil.</span>
<span class="linecomment">;;     read-file-name: Ensure initial-value is not null.  Initialize icicle-initial-value.</span>
<span class="linecomment">;;                     Respect icicle-init-value-flag.</span>
<span class="linecomment">;; 2006/01/29 dadams</span>
<span class="linecomment">;;     icicle-completing-read, icicle-read-file-name: Remove binding of ESC-TAB.</span>
<span class="linecomment">;;     icicle-lisp-complete-symbol: Enable recursive minibuffers if in minibuffer.</span>
<span class="linecomment">;;     Commentary: Combine lisp-complete-symbol with dabbrev.</span>
<span class="linecomment">;;     Updated bindings listed in icicle-completion-help-string.</span>
<span class="linecomment">;; 2006/01/28 dadams</span>
<span class="linecomment">;;     New feature: icicle-lisp-complete-symbol (added).  Added to Commentary and moved section.</span>
<span class="linecomment">;;     Corrected fix of 2005/12/14:</span>
<span class="linecomment">;;       icicle-minibuffer-setup: Save region background at recursion level 1.</span>
<span class="linecomment">;;       icicle-saved-region-background: defvar to nil.</span>
<span class="linecomment">;;     Added: icicle-increment-color-hue.  Use in icicle-region-background.</span>
<span class="linecomment">;;     Added: icicle-(re)set-option-to-(nil|t), icicle-clear-option, icicle-toggle-option,</span>
<span class="linecomment">;;            icicle-binary-option-p.</span>
<span class="linecomment">;; 2006/01/26 dadams</span>
<span class="linecomment">;;     Added: icicle(-saved)(-regexp)-search-ring-max,</span>
<span class="linecomment">;;            icicle-(redefine|restore)-standard-options.</span>
<span class="linecomment">;;     icicle-mode: Use icicle-(redefine|restore)-standard-options.</span>
<span class="linecomment">;;                  Use icicle-(redefine|restore)-standard-commands for Emacs 21+ also (forgot?)</span>
<span class="linecomment">;;     icicle-(redefine|restore)-*: Use defalias, not fset.</span>
<span class="linecomment">;; 2006/01/24 dadams</span>
<span class="linecomment">;;     New feature: icicle-isearch-complete.</span>
<span class="linecomment">;;       Added: icicle-isearch-complete, icicle-isearch-resume, icicle-bind-isearch-keys.</span>
<span class="linecomment">;;       icicle-mode: add/remove isearch-mode-hook.</span>
<span class="linecomment">;;     Minor bug fix: initial value was treated as icicle-last-completion-candidate.</span>
<span class="linecomment">;;       Added: icicle-initial-value.</span>
<span class="linecomment">;;       icicle-completing-read, icicle-read-file-name:</span>
<span class="linecomment">;;         Set icicle-initial-value, not icicle-last-completion-candidate.</span>
<span class="linecomment">;;       icicle-next-candidate:</span>
<span class="linecomment">;;         Initialize icicle-last-completion-candidate to icicle-initial-value.</span>
<span class="linecomment">;;       icicle-save-or-restore-input:</span>
<span class="linecomment">;;         Don't change icicle-current-input if = icicle-initial-value</span>
<span class="linecomment">;;       Renamed: icicle-init-value to icicle-init-value-flag.</span>
<span class="linecomment">;; 2006/01/23 dadams</span>
<span class="linecomment">;;     Use command remapping for self-insert-command in Emacs 22.</span>
<span class="linecomment">;;     Changed icicle-(re|un)map to defsubst.</span>
<span class="linecomment">;;     Removed Commentary section on icicle-execute-extended-command.</span>
<span class="linecomment">;;     icicle-apropos-complete-and-exit, icicle-apropos-complete-1:</span>
<span class="linecomment">;;       Use flag icicle-apropos-complete-and-exit-p to suppress minibuffer-message.</span>
<span class="linecomment">;; 2006/01/22 dadams</span>
<span class="linecomment">;;     Added: icicle-execute-extended-command*.</span>
<span class="linecomment">;;     completing-read, icicle-read-file-name:</span>
<span class="linecomment">;;       Corrected nil case for icicle-require-match-flag (bug fix).</span>
<span class="linecomment">;;       Hard-code bindings, instead of using \\[...], so the simpler bindings are shown.</span>
<span class="linecomment">;;     Changed C-o to C-RET for consistency (C-o still works too).</span>
<span class="linecomment">;;       icicle-(bind|restore)-completion-keys: Added C-RET binding.</span>
<span class="linecomment">;; 2006/01/21 dadams</span>
<span class="linecomment">;;     icicle-mouse-choose-completion:</span>
<span class="linecomment">;;       Don't save selected window if it's *Completions*.</span>
<span class="linecomment">;;     Added more Commentary about icicle-retrieve-last-input.</span>
<span class="linecomment">;; 2006/01/20 dadams</span>
<span class="linecomment">;;     icicle-sort-and-strip-ignored: Don't ignore names if only ignored extensions match.</span>
<span class="linecomment">;;     Added: icicle-apropos-complete-and-exit.  Bound it in icicle-rebind-completion-maps.</span>
<span class="linecomment">;;     icicle-minibuffer-setup: Don't reset icicle-require-match-flag.</span>
<span class="linecomment">;;     icicle-apropos-complete: Return the list of candidates.</span>
<span class="linecomment">;; 2006/01/19 dadams</span>
<span class="linecomment">;;     Added: icicle(-buffer)-require-match-flag.  Thanks to Mathias Dahl for feedback.</span>
<span class="linecomment">;;            Use in completing-read, read-file-name, and icicle-minibuffer-setup.</span>
<span class="linecomment">;;     Re-alphabetized defcustoms.</span>
<span class="linecomment">;; 2006/01/07 dadams</span>
<span class="linecomment">;;     Added :link.</span>
<span class="linecomment">;; 2005/12/31 dadams</span>
<span class="linecomment">;;     Added: icicle-fix-default-directory.</span>
<span class="linecomment">;;     icicle-read-file-name: Use icicle-fix-default-directory hack to fix bug.</span>
<span class="linecomment">;; 2005/12/26 dadams</span>
<span class="linecomment">;;     Added icicle-sort-case-insensitively.</span>
<span class="linecomment">;;     Added more parent groups for icicles group.</span>
<span class="linecomment">;; 2005/12/14 dadams</span>
<span class="linecomment">;;     icicle-minibuffer-setup: Only save region background when at top level.</span>
<span class="linecomment">;;     Added: icicle-Completions-frame-at-right-flag.  Use in icicle-candidate-action.</span>
<span class="linecomment">;;     Added: defvars for font-lock-keyword-face, font-lock-function-name-face.</span>
<span class="linecomment">;; 2005/12/09 dadams</span>
<span class="linecomment">;;     Fontify icicle-define* in emacs-lisp-mode.</span>
<span class="linecomment">;; 2005/12/02 dadams</span>
<span class="linecomment">;;     Added: icicle-customize-apropos*.  Use in icicle-(redefine|restore)-standard-commands.</span>
<span class="linecomment">;; 2005/12/01 dadams</span>
<span class="linecomment">;;     Added: icicle-repeat-complex-command, icicle-redefine-standard-commands-flag,</span>
<span class="linecomment">;;            icicle-(redefine|restore)-standard-commands.</span>
<span class="linecomment">;; 2005/11/30 dadams</span>
<span class="linecomment">;;     Added: icicle-apropos-zippy.</span>
<span class="linecomment">;;     icicle-apropos-command, icicle-apropos-variable:</span>
<span class="linecomment">;;       Corrected completing-read for do-all arg.</span>
<span class="linecomment">;;     icicle-apropos-command, *-apropos-option: My version must not respect apropos-do-all.</span>
<span class="linecomment">;; 2005/11/29 dadams</span>
<span class="linecomment">;;     Added: icicle-apropos*.</span>
<span class="linecomment">;;     icicle-help-on-candidate: Treat plists.  Message "No help" is the default.</span>
<span class="linecomment">;; 2005/11/25 dadams</span>
<span class="linecomment">;;     Added: icicle-dabbrev-completion.</span>
<span class="linecomment">;;     Renamed names with "*Completions*" to use "Completions", for coherence with XEmacs port.</span>
<span class="linecomment">;; 2005/11/24 dadams</span>
<span class="linecomment">;;     icicle-mouse-choose-completion: Delete *Completions* window systematically.</span>
<span class="linecomment">;; 2005/11/21 dadams</span>
<span class="linecomment">;;     icicle-delete-windows-on: Avoid error Attempt to delete minibuffer or sole ... window.</span>
<span class="linecomment">;;     icicle-prefix-complete, icicle-apropos-complete-1, icicle-next-candidate:</span>
<span class="linecomment">;;       Use icicle-delete-windows-on, not delete-window.</span>
<span class="linecomment">;;     icicle-candidate-set-save: Use map in doc string.</span>
<span class="linecomment">;;     icicle-compilation-search: Tidied up doc string.</span>
<span class="linecomment">;;     Use #' for clarity.</span>
<span class="linecomment">;; 2005/11/20 dadams</span>
<span class="linecomment">;;     icicle-completing-read: Added treatment of completions that are lists of strings.</span>
<span class="linecomment">;;     Updated Commentary: new section on completions that are lists.</span>
<span class="linecomment">;;     Added: icicle-list-join-string, icicle-doc, icicle-fundoc, icicle-vardoc.</span>
<span class="linecomment">;; 2005/11/15 dadams</span>
<span class="linecomment">;;     Temporarily removed defadvice of next-history-element for Emacs 22.  Bug reported.</span>
<span class="linecomment">;;     icicle-minibuffer-prompt-end: Changed from defsubst to defun.</span>
<span class="linecomment">;; 2005/11/13 dadams</span>
<span class="linecomment">;;     icicle-mouse-candidate-action: buffer-substring -&gt; buffer-substring-no-properties.</span>
<span class="linecomment">;;     icicle-completing-read: Bind, don't set, minibuffer-completion-table.</span>
<span class="linecomment">;;     icicle-buffer*: Use other buffer for DEF, not INIT-VALUE.</span>
<span class="linecomment">;;     Added: icicle-preselect-init-value-flag, icicle-(add|remove)-buffer-*,</span>
<span class="linecomment">;;            icicle-read-from-minibuf-nil-default, icicle-buffer-list,</span>
<span class="linecomment">;;            icicle-select-minibuffer-contents, icicle-completing-p.</span>
<span class="linecomment">;;     icicle-minibuffer-setup:</span>
<span class="linecomment">;;       Select minibuf contents if icicle-preselect-init-value-flag.</span>
<span class="linecomment">;;       Only display *Completions* if icicle-completing-p.</span>
<span class="linecomment">;;     Advised next-history-element.</span>
<span class="linecomment">;; 2005/11/11 dadams</span>
<span class="linecomment">;;     Added: icicle-show-*Completions*-initially-flag, icicle-display-*Completions*.</span>
<span class="linecomment">;;     icicle-minibuffer-setup: If icicle-show-*Completions*-initially-flag, display it.</span>
<span class="linecomment">;; 2005/11/09 dadams</span>
<span class="linecomment">;;     Added: icicle-mouse-candidate-action.  Bind in icicle-rebind-completion-maps.</span>
<span class="linecomment">;;     icicle-buffer(-other-window): Use buffer-name-history as HIST arg to completing-read.</span>
<span class="linecomment">;; 2005/11/08 dadams</span>
<span class="linecomment">;;     Add/remove hook icicle-cancel-*Help*-redirection in icicle-mode, not at top level.</span>
<span class="linecomment">;;     Removed icicle-reset-icicle-menu-items-alist.</span>
<span class="linecomment">;;     Reset icicle-menu-items-alist in icicle-execute-menu-command of icicles-menu.el.</span>
<span class="linecomment">;; 2005/11/06 dadams</span>
<span class="linecomment">;;     Include minibuffer-local-filename-completion-map.</span>
<span class="linecomment">;; 2005/11/05 dadams</span>
<span class="linecomment">;;     icicle-display-candidates-in-*Completions*: Don't try to highlight root if it is "".</span>
<span class="linecomment">;;     icicle-help-on-candidate:</span>
<span class="linecomment">;;       Test null, not boundp icicle-menu-items-alist.</span>
<span class="linecomment">;;       If menu item's command is a lambda, set cand-symb to nil.</span>
<span class="linecomment">;;     icicle-mode: Use icicle-reset-icicle-menu-items-alist on minibuffer-exit-hook.</span>
<span class="linecomment">;;     Added: icicle-reset-icicle-menu-items-alist.</span>
<span class="linecomment">;;     Added defvar for icicle-menu-items-alist.</span>
<span class="linecomment">;;     Added byte-compiler comments and defvars to quiet byte-compile.</span>
<span class="linecomment">;; 2005/11/04 dadams</span>
<span class="linecomment">;;     icicle-display-candidates-in-*Completions:</span>
<span class="linecomment">;;       Bug fix - use (functionp minibuffer-completion-table), not (icicle-file-name-input-p).</span>
<span class="linecomment">;; 2005/11/03 dadams</span>
<span class="linecomment">;;     Added: icicle-filter-wo-input and vars icicle-must-*, icicle-extra*, icicle-buffer-*,</span>
<span class="linecomment">;;            icicle-buffer-config*, icicle-buffer-sort*.</span>
<span class="linecomment">;;     icicle-unsorted-*: Use icicle-filter-wo-input and icicle-extra-candidates.</span>
<span class="linecomment">;;     Added Commentary section Global Filters.</span>
<span class="linecomment">;;     icicle-buffer* commands: Added filter bindings.</span>
<span class="linecomment">;;     icicle-define(-file)-command: Minor bug fix: Ensure buffer is live before switching back.</span>
<span class="linecomment">;; 2005/11/01 dadams</span>
<span class="linecomment">;;     Added: icicle-must(-not)-match-regexp.  Use in icicle-unsorted-*-candidates.</span>
<span class="linecomment">;; 2005/10/31 dadams</span>
<span class="linecomment">;;     Added: icicle-use-default-as-init-value-flag.  Use in completing-read.</span>
<span class="linecomment">;;     icicle-find-file*: Minor bug fix - REQUIRE-MATCH should be nil.</span>
<span class="linecomment">;; 2005/10/29 dadams</span>
<span class="linecomment">;;     icicle-display-candidates-in-*Completions: Minor bug fix - wrap in save-window-excursion.</span>
<span class="linecomment">;;     icicle-minibuffer-contents-from-minibuffer:</span>
<span class="linecomment">;;       Minor bug fix - do nothing if file & user erased minibuffer.</span>
<span class="linecomment">;;     Menu-bar menus:</span>
<span class="linecomment">;;       Enable Icicles menu items only in Icicle mode.  Put search</span>
<span class="linecomment">;;       stuff on Search menu, if available.   Use "[Icy]" prefix for</span>
<span class="linecomment">;;       Icicles items in menus other than "Icicles".</span>
<span class="linecomment">;; 2005/10/28 dadams</span>
<span class="linecomment">;;     Added: icicle-define-file-command.</span>
<span class="linecomment">;;            Use it to define icicle-delete-file, icicle-find-file*.</span>
<span class="linecomment">;;     icicle-(next|previous)-(apropos|prefix)-candidate-action:</span>
<span class="linecomment">;;       Do action before moving to next|prev.</span>
<span class="linecomment">;;     icicle-candidate-action: Raise *Completions* frame, to keep it on top.</span>
<span class="linecomment">;; 2005/10/27 dadams</span>
<span class="linecomment">;;     Added: icicle-define-command, icicle-find-file*, select-frame-set-input-focus.</span>
<span class="linecomment">;;     Redefined using icicle-define-command:</span>
<span class="linecomment">;;       icicle-bookmark, icicle-buffer*, icicle-color-theme, icicle-delete-file,</span>
<span class="linecomment">;;       icicle-find-file*, icicle-font, icicle-frame-*, icicle-recent-file*.</span>
<span class="linecomment">;;     icicle-all-candidates-action: Report failures, not successes.  Use error msg.</span>
<span class="linecomment">;;     Added Commentary sections: Special-Character Conflicts, Defining Icicles Commands.</span>
<span class="linecomment">;;     Commentary section Act on All Candidates: Added delete-one-or-more-files example.</span>
<span class="linecomment">;;     Added icicle-find-file* to menu-bar menus.</span>
<span class="linecomment">;;     Inactivated top-level menu items when minibuffer is active.</span>
<span class="linecomment">;;     Renamed: icicle-delete-file-1 to icicle-delete-file-or-directory.</span>
<span class="linecomment">;; 2005/10/25 dadams</span>
<span class="linecomment">;;     Thx to Lennart Borgman for suggestion about select-frame-set-input-focus.</span>
<span class="linecomment">;; 2005/10/24 dadams</span>
<span class="linecomment">;;     icicle-search:</span>
<span class="linecomment">;;       1) Bug fix - need to have mouse-choose-completion set icicle-candidate-nb.</span>
<span class="linecomment">;;       2) Show error message.</span>
<span class="linecomment">;;     Default value of icicle-candidate-nb is now nil, not -1.</span>
<span class="linecomment">;;     Added: icicle-mouse-choose-completion, icicle-nb-of-candidate-in-*Completions*.</span>
<span class="linecomment">;;     icicle-move-to-(next|previous)-completion, icicle-increment-cand-nb+signal-end:</span>
<span class="linecomment">;;       Reset candidate number to 0 if nil.</span>
<span class="linecomment">;;     icicle-(redefine|restore)-std-completion-fns: Use icicle-mouse-choose-completion.</span>
<span class="linecomment">;; 2005/10/23 dadams</span>
<span class="linecomment">;;     Added: icicle-mode-map.</span>
<span class="linecomment">;;     icicle-(bind|restore)-completion-keys: Updated menu-bar menu.</span>
<span class="linecomment">;;     icicle-compilation-search: Error if not in a compilation buffer.</span>
<span class="linecomment">;; 2005/10/21 dadams</span>
<span class="linecomment">;;     icicle-remove-duplicates: redefined.</span>
<span class="linecomment">;; 2005/10/18 dadams</span>
<span class="linecomment">;;     icicle-file-name-input-p doc string:</span>
<span class="linecomment">;;       Mention why don't use minibuffer-completing-file-name.</span>
<span class="linecomment">;; 2005/10/16 dadams</span>
<span class="linecomment">;;     Added: icicle-compilation-search, icicle-search-hook.</span>
<span class="linecomment">;;     icicle-search: Run icicle-search-hook.  Added optional sit-for-period arg.</span>
<span class="linecomment">;;     icicle-mode: Added list of top-level commands to doc string.</span>
<span class="linecomment">;;     icicle-scroll-or-update-*Completions*: Added msg arg - only display msg if don't scroll.</span>
<span class="linecomment">;; 2005/10/14 dadams</span>
<span class="linecomment">;;     Allow for multisets of candidates.</span>
<span class="linecomment">;;     Added: icicle-search, icicle-completion-nospace-flag, icicle-candidate-nb,</span>
<span class="linecomment">;;            icicle-filter-alist, icicle-increment-cand-nb+signal-end.</span>
<span class="linecomment">;;     Commentary: Updated for icicle-search.</span>
<span class="linecomment">;;     icicle-next-candidate: Major rewrite.</span>
<span class="linecomment">;;       Uses icicle-candidate-nb, icicle-increment-cand-nb+signal-end,</span>
<span class="linecomment">;;            icicle-move-to-next-completion.</span>
<span class="linecomment">;;     Use icicle-completion-nospace-flag in calls to all-completions.</span>
<span class="linecomment">;;     icicle-previous-(apropos|prefix)-candidate,</span>
<span class="linecomment">;;     icicle-(next|previous)-(apropos|prefix)-candidate-action: Added optional arg.</span>
<span class="linecomment">;;     icicle-apropos-complete-1, icicle-next-candidate, icicle-recompute-candidates:</span>
<span class="linecomment">;;       Added *-action commands to memq test.</span>
<span class="linecomment">;;     icicle-move-to-next-completion: Added optional no-minibuffer-follow-p arg.</span>
<span class="linecomment">;;     icicle-scroll-or-update-*Completions*: Update display even if handle-switch-frame.</span>
<span class="linecomment">;; 2005/10/12 dadams</span>
<span class="linecomment">;;     Added: icicle-redefine-std-completion-fns,</span>
<span class="linecomment">;;            icicle-restore-std-completion-fns,</span>
<span class="linecomment">;;            icicle-delete-windows-on, icicle-frames-on.</span>
<span class="linecomment">;;     icicle-mode: Use icicle-redefine-std-completion-fns,</span>
<span class="linecomment">;;                  icicle-restore-std-completion-fns.</span>
<span class="linecomment">;;     Renamed to use icicle- prefix: choose-completion-string,</span>
<span class="linecomment">;;       completing-read, completion-setup-function, exit-minibuffer,</span>
<span class="linecomment">;;       minibuffer-complete-and-exit, read-file-name,</span>
<span class="linecomment">;;       switch-to-completions.  Added these and also old- versions.</span>
<span class="linecomment">;;     icicle-history: Treat file names also.</span>
<span class="linecomment">;;     remove-windows-on -&gt; icicle-delete-windows-on.</span>
<span class="linecomment">;; 2005/10/11 dadams</span>
<span class="linecomment">;;     Added: icicle-history, icicle-scroll-or-update-*Completions*,</span>
<span class="linecomment">;;            icicle-undo-std-completion-faces.</span>
<span class="linecomment">;;     Minor bug fixes:</span>
<span class="linecomment">;;       icicle-remove-dots: Also match against "." and ".." (lack of slash in Emacs 21+).</span>
<span class="linecomment">;;       icicle-save-or-*: Don't reset to last input if icicle-last-completion-candidate is "".</span>
<span class="linecomment">;;                         Update icicle-last-completion-candidate also to use current input.</span>
<span class="linecomment">;;       Reset icicle-last-input in icicle-minibuffer-setup, not in</span>
<span class="linecomment">;;         completing-read and read-file-name.</span>
<span class="linecomment">;;       icicle-display-candidates-in-*Completions*, icicle-next-candidate:</span>
<span class="linecomment">;;         Put candidate in consp before applying predicate.</span>
<span class="linecomment">;;       icicle-recompute-candidates: Don't recompute unless icicle-last-completion-command.</span>
<span class="linecomment">;;       icicle-retrieve-last-input: Use icicle-current-input, not icicle-last-input.</span>
<span class="linecomment">;;       icicle-self-insert: Update icicle-current-input and set this-command to</span>
<span class="linecomment">;;                           icicle-apropos-complete.</span>
<span class="linecomment">;;       icicle-apropos-complete: Use error-message-string.</span>
<span class="linecomment">;;       icicle-apropos-complete-1:</span>
<span class="linecomment">;;         Protect icicle-file-directory-p with</span>
<span class="linecomment">;;         icicle-file-name-input-p.  Unconditionally update</span>
<span class="linecomment">;;         icicle-last-completion-command.</span>
<span class="linecomment">;;     Moved undoing of std completion faces to icicle-mode.</span>
<span class="linecomment">;;     Use icicle-scroll-or-update-*Completions* in icicle-candidate-set-1.</span>
<span class="linecomment">;; 2005/10/06 dadams</span>
<span class="linecomment">;;     icicle-prefix-complete, icicle-apropos-complete-1:</span>
<span class="linecomment">;;       Removed vestigial slash cruft - should have been removed in 2005/09/01 fix.</span>
<span class="linecomment">;;     Added: icicle-remove-dots.  Use in icicle-save-or-restore-input.</span>
<span class="linecomment">;; 2005/10/05 dadams</span>
<span class="linecomment">;;     icicle-msg-maybe-in-minibuffer: use format-string arg.</span>
<span class="linecomment">;; 2005/10/04 dadams</span>
<span class="linecomment">;;     Replace use of minibuffer-completion-help by</span>
<span class="linecomment">;;       icicle-apropos-complete.</span>
<span class="linecomment">;;     Added: icicle-recent-file*, icicle-toggle-ignored-extensions,</span>
<span class="linecomment">;;            icicle-update-completions, icicle-msg-maybe-in-minibuffer,</span>
<span class="linecomment">;;            icicle-saved-ignored-extensions.</span>
<span class="linecomment">;;     Bound icicle-toggle-*.</span>
<span class="linecomment">;;     icicle-toggle-sorting: Use icicle-update-completions, icicle-msg-maybe-in-minibuffer.</span>
<span class="linecomment">;;     icicle-sort-and-strip-ignored:</span>
<span class="linecomment">;;       icicle-ignored-extensions-regexp nil =&gt; nothing is ignored.</span>
<span class="linecomment">;;     Reorder key bindings, so prompt shows S-tab, not S-iso-lefttab.</span>
<span class="linecomment">;;     icicle-next-candidate: Fixed code to highlight candidate in *Completions*: restriction.</span>
<span class="linecomment">;; 2005/10/03 dadams</span>
<span class="linecomment">;;     Regexps can now use backslash (it is no longer a directory separator on MS Windows).</span>
<span class="linecomment">;;       icicle-minibuffer-contents-from-minibuffer, icicle-file-name-directory-w-default:</span>
<span class="linecomment">;;         Escape backslash, so not used as directory separator on MS Windows.</span>
<span class="linecomment">;;       Added: icicle-apropos-complete-1, icicle-file-name-nondirectory.</span>
<span class="linecomment">;;       icicle-apropos-complete: Use icicle-apropos-complete-1.</span>
<span class="linecomment">;;                                Treat regexp error via message.</span>
<span class="linecomment">;;       Use icicle-file-name-nondirectory everywhere, instead of file-name-nondirectory.</span>
<span class="linecomment">;;     Can now use "?" for regexps; it no longer shows completion list.</span>
<span class="linecomment">;;     Do icicle-update-ignored-extensions-regexp inside icicle-minibuffer-setup.</span>
<span class="linecomment">;;     Added and bound: icicle-retrieve-last-input.</span>
<span class="linecomment">;;     Updated icicle-completion-help-string with recent bindings.</span>
<span class="linecomment">;;     Renamed: icicle-last-command to icicle-last-completion-command.</span>
<span class="linecomment">;;              icicle-candidate-set-restore to icicle-candidate-set-retrieve.</span>
<span class="linecomment">;; 2005/10/01 dadams</span>
<span class="linecomment">;;     Added: icicle-candidate-set-(define|restore|swap).</span>
<span class="linecomment">;;     Changed binding of icicle-candidate-set-save to C-&gt;.</span>
<span class="linecomment">;;     Bound new commands.</span>
<span class="linecomment">;; 2005/10/01 dadams</span>
<span class="linecomment">;;     Major rewrite to add set operations: complement, difference, union, intersection.</span>
<span class="linecomment">;;       Added: icicle-completion-candidates, icicle-current-input, icicle-candidate-set-*,</span>
<span class="linecomment">;;              icicle-set-*, icicle-save-or-restore-input, icicle-recompute-candidates.</span>
<span class="linecomment">;;       Bound icicle-candidate-set*.</span>
<span class="linecomment">;;       Added Commentary for Sets of Completion Candidates.</span>
<span class="linecomment">;;       icicle-(apropos|prefix)-complete: Update icicle-completion-candidates, only as needed.</span>
<span class="linecomment">;;       icicle-next-candidate:</span>
<span class="linecomment">;;         Reverse candidates only if switched to opposite-direction command of same type.</span>
<span class="linecomment">;;         Likewise, for refresh of *Completions*.</span>
<span class="linecomment">;;         Protect put-text-property for root (e.g. no match for complement).</span>
<span class="linecomment">;;       icicle-(apropos|prefix)-complete,</span>
<span class="linecomment">;;       icicle-prefix-word-complete, icicle-next-candidate: Use icicle-completion-candidates.</span>
<span class="linecomment">;;       icicle-all-candidates-action: Use icicle-completion-candidates, not *-apropos-complete.</span>
<span class="linecomment">;;       icicle-display-candidates-in-*Completions*:</span>
<span class="linecomment">;;         Removed first arg (candidates).  Update icicle-completion-candidates.</span>
<span class="linecomment">;;    icicle-all-candidates-action:</span>
<span class="linecomment">;;      Use icicle-completion-candidates, so act on completions of either kind.</span>
<span class="linecomment">;; 2005/09/30 dadams</span>
<span class="linecomment">;;     Commented out resetting of minibuffer-completion-table to nil for icompletion.</span>
<span class="linecomment">;;     Thx to Andrey for bug report on M-x M-r problem.</span>
<span class="linecomment">;; 2005/09/27 dadams</span>
<span class="linecomment">;;     icicle-(bind|restore)-completion-keys: Bound [S-iso-lefttab] like [S-tab].</span>
<span class="linecomment">;; 2005/09/26 dadams</span>
<span class="linecomment">;;     Bug fix: Changed "\C-!"  to [(control ?!)] (others similarly).</span>
<span class="linecomment">;;     Bound [S-iso-lefttab] like [S-tab].</span>
<span class="linecomment">;; 2005/09/16 dadams</span>
<span class="linecomment">;;     Added: icicle-all-candidates-action, icicle-delete-file*,</span>
<span class="linecomment">;;     icicle-rebind-completion-maps: Bound icicle-all-candidates-action to C-!.</span>
<span class="linecomment">;;     icicle-(apropos|prefix)-complete: Return candidates list.</span>
<span class="linecomment">;;     icicle-bookmark, icicle-buffer*, icicle-color-theme,</span>
<span class="linecomment">;;     icicle-font, icicle-frame*: Return t for success, nil for failure.</span>
<span class="linecomment">;;     Commentary: Added section Choose All Completion Candidates.</span>
<span class="linecomment">;; 2005/09/14 dadams</span>
<span class="linecomment">;;     icicle-rebind-completion-maps: Bound TAB and S-TAB for navigation.</span>
<span class="linecomment">;;     icicle-move-to-(next|previous)-completion, icicle-(next|previous)-line: Wrap around.</span>
<span class="linecomment">;; 2005/09/13 dadams</span>
<span class="linecomment">;;     Major rewrite of file treatment, to treat directory candidates similarly to files.</span>
<span class="linecomment">;;     Added: icicle-default-directory, icicle-file-directory-p, icicle-sort-function,</span>
<span class="linecomment">;;            icicle-toggle-sorting, toggle-icicle-sorting.</span>
<span class="linecomment">;;     Use icicle-file-directory-p everywhere, except choose-completion-string.</span>
<span class="linecomment">;;     Removed: icicle-nondirectory-*.</span>
<span class="linecomment">;;     icicle-next-candidate: If not icicle-cycle-into-subdirs-flag, then use relative</span>
<span class="linecomment">;;                            file/dir name, not nondirectory part.</span>
<span class="linecomment">;;     icicle-(apropos|prefix)-complete:</span>
<span class="linecomment">;;       Set icicle-default-directory if sole completion is a subdirectory.</span>
<span class="linecomment">;;     icicle-sort-and-strip-ignored: Removed optional arg and treatment of subdirs.</span>
<span class="linecomment">;;     icicle-next-(apropos|prefix)-candidate, icicle-(apropos|prefix)-complete:</span>
<span class="linecomment">;;       Don't treat icicle-cycle-into-subdirs-flag here.</span>
<span class="linecomment">;;     icicle-(apropos|prefix)-complete, icicle-next-candidate:</span>
<span class="linecomment">;;       Set icicle-default-directory, if directory candidate.</span>
<span class="linecomment">;;     icicle-minibuffer-setup: Set icicle-default-directory.</span>
<span class="linecomment">;;     icicle-apropos-complete: Different message if icicle-apropos-icompleting-p.</span>
<span class="linecomment">;;     icicle-sort-dirs-last: Treat other kinds of candidates, besides files and dirs.</span>
<span class="linecomment">;;     Commentary and doc strings: Updated for icicle-sort-function, icicle-cycle-into-subdirs.</span>
<span class="linecomment">;;     Let delete-selection mode work with icicle-self-insert.</span>
<span class="linecomment">;;     icicle-display-candidates-in-*Completions*: Make *Completions* read-only.</span>
<span class="linecomment">;; 2005/09/09 dadams</span>
<span class="linecomment">;;     choose-completion-string: bug fix for Emacs 21.3.1 - use Emacs 20 version for 21.3.1.</span>
<span class="linecomment">;; 2005/09/08 dadams</span>
<span class="linecomment">;;     completion-setup-function: bug fix for Emacs 21.3.1 - use Emacs 20 version for 21.3.1.</span>
<span class="linecomment">;;     Added: icicle-remap, icicle-unmap, icicle-(bind|restore)-completion-keys.</span>
<span class="linecomment">;;     completing-read: Do not append suffix if not in Icicle mode.</span>
<span class="linecomment">;;     icicle-rebind-completion-maps:</span>
<span class="linecomment">;;       Clean-up.  Use icicle-(bind|restore)-completion-keys.</span>
<span class="linecomment">;;       Don't (suppress-keymap completion-list-mode-map).</span>
<span class="linecomment">;; 2005/09/06 dadams</span>
<span class="linecomment">;;     Provided apropos icompletion.</span>
<span class="linecomment">;;     Added: icicle-self-insert, icicle-incremental-completion-flag,</span>
<span class="linecomment">;;            icicle-apropos-icompleting-p.</span>
<span class="linecomment">;;     icicle-apropos-complete: Respect icicle-apropos-icompleting-p.</span>
<span class="linecomment">;;     Commentary: Updated Icompletion and Customization sections.</span>
<span class="linecomment">;;                 Added Apropos Icompletion.</span>
<span class="linecomment">;;     Changed default value of icicle-word-completion-key to M-SPC.</span>
<span class="linecomment">;;     icicle-rebind-completion-maps:</span>
<span class="linecomment">;;       Bind icicle-self-insert. Use self-insert for SPC.</span>
<span class="linecomment">;;       Updated icicle-completion-help-string.  Treat menu-bar menu for the minibuffer.</span>
<span class="linecomment">;;     completion-setup-function: Add instruction2 only when icicle-mode.</span>
<span class="linecomment">;;     icicle-display-candidates-in-*Completions*: Use save-restriction.</span>
<span class="linecomment">;;     icicle-minibuffer-contents-from-minibuffer:</span>
<span class="linecomment">;;       Allow for mixing $ of environment vars with $ of regexps.</span>
<span class="linecomment">;; 2005/09/02 dadams</span>
<span class="linecomment">;;     Added: icicle-bookmark, icicle-buffer(-other-window), icicle-candidate-action,</span>
<span class="linecomment">;;            icicle-candidate-action-fn, icicle-color-theme(s), icicle-font,</span>
<span class="linecomment">;;            icicle-frame-(b|f)g.</span>
<span class="linecomment">;;     Renamed: icicle-(next|previous)-(apropos|prefix)-*-help to</span>
<span class="linecomment">;;              icicle-(next|previous)-(apropos|prefix)-*-action.</span>
<span class="linecomment">;;     icicle-(apropos|prefix)-complete: Set icicle-last-completion-candidate.</span>
<span class="linecomment">;;     In renamed functions:  Use icicle-candidate-action, not icicle-help-on-candidate.</span>
<span class="linecomment">;;     icicle-rebind-completion-maps: Bound C-o to icicle-candidate-action.</span>
<span class="linecomment">;;     Added Commentary section on actions on candidates.</span>
<span class="linecomment">;;     icicle-move-to-next-completion: Test line num, not char position (fix).</span>
<span class="linecomment">;;     icicle-previous-line: 3 or 4, not 4 or 5 (fix).</span>
<span class="linecomment">;; 2005/09/01 dadams</span>
<span class="linecomment">;;     Fixed major bug: file-name completion did not work at all in non-MS Windows!</span>
<span class="linecomment">;;       icicle-file-name-(apropos|prefix)-candidates:</span>
<span class="linecomment">;;         Removed code for case where input starts with "/".</span>
<span class="linecomment">;;       icicle-nondirectory-file-name-(apropos|prefix)-candidates:</span>
<span class="linecomment">;;         Removed code for case where input starts with "/".  Bind default-directory.</span>
<span class="linecomment">;;       icicle-(apropos|prefix)-complete: Treat case when icicle-cycle-into-subdirs-flag = nil.</span>
<span class="linecomment">;;     icicle-next-candidate: Took out code that moved point when line is too long.</span>
<span class="linecomment">;;     icicle-minibuffer-setup: Reset icicle-prompt.</span>
<span class="linecomment">;; 2005/08/23 dadams</span>
<span class="linecomment">;;     Added: icicle-help-on-candidate, icicle-cancel-*Help*-redirection,</span>
<span class="linecomment">;;            icicle-(previous|next)-(prefix|apropos)-candidate-help.  Bound them all.</span>
<span class="linecomment">;;     icicle-rebind-completion-maps:</span>
<span class="linecomment">;;       Bound icicle-help-on-candidate, icicle-(previous|next)-(prefix|apropos)-candidate-help.</span>
<span class="linecomment">;; 2005/08/22 dadams</span>
<span class="linecomment">;;     Unconditionally require cl.el when compile (because of case).</span>
<span class="linecomment">;; 2005/08/19 dadams</span>
<span class="linecomment">;;     Renamed icicle-cursor-position-in-candidate to icicle-point-position-in-candidate.</span>
<span class="linecomment">;;     Added: icicle-mark-position-in-candidate, icicle-minibuffer-prompt-end.</span>
<span class="linecomment">;;     icicle-place-cursor: Position both point and mark.</span>
<span class="linecomment">;;     icicle-point-position-in-candidate: Change values from bob, eob to input-start/end.</span>
<span class="linecomment">;;     Removed: icicle-select-rest-of-completion-flag.</span>
<span class="linecomment">;;     Use inequality test on point and mark.</span>
<span class="linecomment">;; 2005/08/16 dadams</span>
<span class="linecomment">;;     Minbuffer messages: Differentiate prefix from apropos completion.</span>
<span class="linecomment">;;     completing-read, read-file-name: Append icicle-prompt-suffix for Emacs 20 (oversight).</span>
<span class="linecomment">;; 2005/08/15 dadams</span>
<span class="linecomment">;;     Bug fix: Only use face-spec-reset-face if target faces defined.</span>
<span class="linecomment">;;     read-file-name: bug fix:</span>
<span class="linecomment">;;       Use condition-case to get the correct number of args for</span>
<span class="linecomment">;;       old-read-file-name. Thx to Mathias Dahl for both bug reports.</span>
<span class="linecomment">;; 2005/08/14 dadams</span>
<span class="linecomment">;;     icicle-place-cursor: Narrow region to exclude minibuffer-prompt</span>
<span class="linecomment">;; 2005/08/13 dadams</span>
<span class="linecomment">;;     Add regexp support (removed it when introduced highlighting).</span>
<span class="linecomment">;;       icicle-next-candidate: Added regexp-p arg.  Use in icicle-next-apropos-candidate.</span>
<span class="linecomment">;;       icicle-place-cursor: Use regexp search.  For root-start, go to match-beginning.</span>
<span class="linecomment">;;       icicle-unsorted-file-name-apropos-candidates: Don't use regexp-quote.</span>
<span class="linecomment">;;     icicle-switch-to-*Completions*:</span>
<span class="linecomment">;;       Search in restriction of mouse-face zone; repeat.</span>
<span class="linecomment">;;       Treat file case (use nondirectory part).  Bind case-fold-search.</span>
<span class="linecomment">;;     Protect (aref &lt;input&gt; 0) against empty string.</span>
<span class="linecomment">;;     member -&gt; memq, for symbols.</span>
<span class="linecomment">;; 2005/08/12 dadams</span>
<span class="linecomment">;;     Added: icicle-word-completion-key, icy-mode, icicle-insert-a-space.</span>
<span class="linecomment">;;     icicle-rebind-completion-maps: Use icicle-word-completion-key and icicle-insert-a-space.</span>
<span class="linecomment">;;     completing-read, icicle-rebind-completion-maps: Corrected bindings in doc string.</span>
<span class="linecomment">;; 2005/07/29 dadams</span>
<span class="linecomment">;;     Added: icicle-change-region-background-flag, icicle-increment-color-value,</span>
<span class="linecomment">;;            icicle-region-background, icicle-saved-region-background,</span>
<span class="linecomment">;;            icicle-restore-region-face.</span>
<span class="linecomment">;;     Added icicle-restore-region-face to minibuffer-exit-hook.</span>
<span class="linecomment">;;     Require hexrgb.el.</span>
<span class="linecomment">;;     Removed: icicle-select-rest-of-completion.</span>
<span class="linecomment">;;     icicle-minibuffer-setup:</span>
<span class="linecomment">;;       Save icicle-saved-region-background and use icicle-region-background.</span>
<span class="linecomment">;; 2005/07/28 dadams</span>
<span class="linecomment">;;     Added: icicle-*Completions*-instruction-*.</span>
<span class="linecomment">;;     completion-setup-function:</span>
<span class="linecomment">;;       Use icicle-*Completions*-instruction-*.</span>
<span class="linecomment">;;       Remove ? from instruction2.  Put both instr on same line.</span>
<span class="linecomment">;;       Use put-text-property, not *-w-face*.</span>
<span class="linecomment">;;     ------</span>
<span class="linecomment">;;     Move all completion stuff here, from simple+.el:</span>
<span class="linecomment">;;       choose-completion-string, completion-setup-function, switch-to-completions.</span>
<span class="linecomment">;;     Wrap *Completions* window deletion in save-selected-window.</span>
<span class="linecomment">;;     Added icicle-prefix-word-complete, and bound it to SPC.</span>
<span class="linecomment">;;     completion-setup-function:</span>
<span class="linecomment">;;       Renamed icicle-completing-read-prompt-suffix to icicle-prompt-suffix.</span>
<span class="linecomment">;; 2005/07/27 dadams</span>
<span class="linecomment">;;     Renamed: icicle-completing-read-prompt* to icicle-prompt*.</span>
<span class="linecomment">;;     Added: read-file-name, face</span>
<span class="linecomment">;;            icicle-completing-read-prompt-suffix, icicle-remove-property,</span>
<span class="linecomment">;;            icicle-select-rest-of-completion (simple, for now).</span>
<span class="linecomment">;;     completing-read: Apply faces to prompt.</span>
<span class="linecomment">;;     icicle-place-cursor: Use icicle-select-rest-of-completion.</span>
<span class="linecomment">;;     Added (if icicle-mode (icicle-mode 1)) at end.</span>
<span class="linecomment">;;     Reworded Commentary in terms of "input completion", not just completing-read.</span>
<span class="linecomment">;; 2005/07/26 dadams</span>
<span class="linecomment">;;     rebind-minibuffer-completion-maps: Minor bug fix.</span>
<span class="linecomment">;;     icicle-mode: Added " Icy" to mode line.</span>
<span class="linecomment">;;     Wrapped Emacs 21 version of icicle-mode (with define-minor-mode) in (eval (quote...)),</span>
<span class="linecomment">;;       so byte-compiling in Emacs 20 will produce a *.elc that works in Emacs 21.</span>
<span class="linecomment">;; 2005/07/25 dadams</span>
<span class="linecomment">;;     Added: icicle-mode, icicle-*-hook, icicle-minibuffer-setup, icicle-activate-mark.</span>
<span class="linecomment">;;     rebind-minibuffer-completion-maps:</span>
<span class="linecomment">;;       Restore bindings when exit Icicle mode.</span>
<span class="linecomment">;;       Added argument.  Pick up everything bound to help-command.</span>
<span class="linecomment">;;       Message only when mode is turned on.</span>
<span class="linecomment">;; 2005/07/24 dadams</span>
<span class="linecomment">;;     Now leave region from end of root to end of completion, so you can easily replace it,</span>
<span class="linecomment">;;       especially if you use delete-selection mode.  (Suggestion by Lennart Borgman.)</span>
<span class="linecomment">;;     Added: icicle-select-rest-of-completion-flag.</span>
<span class="linecomment">;;     icicle-place-cursor: Create active region if icicle-select-rest-of-completion-flag</span>
<span class="linecomment">;;     icicle-completion-help: Removed icicle-abort-minibuffer-input.</span>
<span class="linecomment">;;     icicle-abort-minibuffer-input: Removed obsolete code & comment on icomplete-inhibit.</span>
<span class="linecomment">;; 2005/07/22 dadams</span>
<span class="linecomment">;;     Major fixup: Treat file and directory names well, respect standard user options, more.</span>
<span class="linecomment">;;     Renamed:</span>
<span class="linecomment">;;       icicle-(next|previous)?-completion-candidate to icicle-*-prefix-candidate(s),</span>
<span class="linecomment">;;       icicle*filename* to icicle*file-name*,</span>
<span class="linecomment">;;       icicle-descend-into-subdirs to icicle-cycle-into-subdirs-flag.</span>
<span class="linecomment">;;     Added: icicle-file-name-apropos-candidates, icicle-file-name-directory-w-default,</span>
<span class="linecomment">;;            icicle-file-name-input-p, icicle-file-name-prefix-candidates,</span>
<span class="linecomment">;;            icicle-nondirectory-file-name-apropos-candidates,</span>
<span class="linecomment">;;            icicle-nondirectory-file-name-prefix-candidates,</span>
<span class="linecomment">;;            icicle-sort-dirs-last, icicle-unsorted-apropos-candidates,</span>
<span class="linecomment">;;            icicle-unsorted-file-name-apropos-candidates,</span>
<span class="linecomment">;;            icicle-unsorted-file-name-prefix-candidates, icicle-unsorted-prefix-candidates,</span>
<span class="linecomment">;;            icicle-last-command.</span>
<span class="linecomment">;;     Respect insert-default-directory and completion-auto-help.</span>
<span class="linecomment">;;     Use minibuffer-message instead of message.</span>
<span class="linecomment">;;     Commentary: Added Customization & Tips section.</span>
<span class="linecomment">;;     completing-read: Save icicle-last-input.  Reset icicle-nb-of-other-cycle-candidates.</span>
<span class="linecomment">;;     icicle-next-*-candidate: Branch to file-specific functions.</span>
<span class="linecomment">;;     icicle-*-candidates: Use icicle-unsorted-*-candidates.</span>
<span class="linecomment">;;     icicle-next-candidate:</span>
<span class="linecomment">;;       Delete *Completions* window if no candidates.</span>
<span class="linecomment">;;       Use icicle-file-name-directory, not file-name-directory.</span>
<span class="linecomment">;;     icicle-minibuffer-contents-from-minibuffer: Use substitute-in-file-name.</span>
<span class="linecomment">;;     icicle-*-complete:</span>
<span class="linecomment">;;       Treat slashed file names (e.g. "/foo").</span>
<span class="linecomment">;;       Use icicle-file-name-*-candidates, icicle-file-name-directory-w-default for files.</span>
<span class="linecomment">;;       Added messages [No completion], [Sole completion], [Complete, but not unique].</span>
<span class="linecomment">;;       Use icicle-last-command for repetition test. And set it.</span>
<span class="linecomment">;;     icicle-rebind-completion-maps: Updated icicle-completion-help-string and message.</span>
<span class="linecomment">;; 2005/07/21 dadams</span>
<span class="linecomment">;;     icicle-apropos-candidates: Use, not apropos, but delete-if-not on string-match.</span>
<span class="linecomment">;;                                Treat files too.</span>
<span class="linecomment">;;     Removed icicle-intersection.</span>
<span class="linecomment">;;     Added: icicle-descend-into-subdirs.</span>
<span class="linecomment">;;     icicle-sort-and-strip-ignored: Use icicle-descend-into-subdirs.  Don't use "." and "..".</span>
<span class="linecomment">;;     icicle-next-candidate:</span>
<span class="linecomment">;;       File names w/o dir.</span>
<span class="linecomment">;;       Use regexp-quote on root for underlining file-name root.</span>
<span class="linecomment">;;       Insert directory name for file.</span>
<span class="linecomment">;;     icicle-place-cursor: Search past dir, then search for file-name w/o dir.</span>
<span class="linecomment">;;     icicle-prefix-complete, icicle-apropos-complete,</span>
<span class="linecomment">;;     icicle-switch-to-*Completions*: Use icicle-minibuffer-contents-from-minibuffer.</span>
<span class="linecomment">;;     icicle-prefix-complete, icicle-apropos-complete: Insert dir when single candidate.</span>
<span class="linecomment">;;     icicle-display-candidates-in-*Completions*: Underline file-name w/o dir.</span>
<span class="linecomment">;; 2005/07/20 dadams</span>
<span class="linecomment">;;     icicle-next-candidate, *-display-candidates-in-*Completions*: Use set-buffer-modified-p.</span>
<span class="linecomment">;;     icicle-next-candidate: Use ding when hit end of cycle.</span>
<span class="linecomment">;;     Added: icicle-cursor-position-in-candidate, icicle-place-cursor.</span>
<span class="linecomment">;;            Use in icicle-next-candidate to position cursor.</span>
<span class="linecomment">;;     Added: defgroup icicles.</span>
<span class="linecomment">;; 2005/07/19 dadams</span>
<span class="linecomment">;;     Initialize icicle-ignored-*.</span>
<span class="linecomment">;;     Added: icicle-nb-of-other-cycle-candidates, icicle-minibuffer-contents-from-minibuffer.</span>
<span class="linecomment">;;     completing-read: Reset icicle-last-completion-candidate to nil.</span>
<span class="linecomment">;;     icicle-next-candidate:</span>
<span class="linecomment">;;       Use icicle-minibuffer-contents-from-minibuffer.</span>
<span class="linecomment">;;       Save icicle-nb-of-other-cycle-candidates for icomplete-completions (icomplete+).</span>
<span class="linecomment">;;       Use copy of "next" string since change its text properties.</span>
<span class="linecomment">;;       Use regexp-quote for underlined root.</span>
<span class="linecomment">;;       Use put-text-property, so works in Emacs 20.</span>
<span class="linecomment">;;       Update *Completions*, even if last command is repeated.</span>
<span class="linecomment">;;     icicle-*-complete: Complete rewrite.</span>
<span class="linecomment">;;     icicle-display-candidates-in-*Completions*: Do even if last command is repeated.</span>
<span class="linecomment">;; 2005/07/18 dadams</span>
<span class="linecomment">;;     icicle-display-*: Highlight only first occurrence in each candidate.</span>
<span class="linecomment">;;     icicle-next-candidate: Use completion-ignore-case.</span>
<span class="linecomment">;; 2005/07/17 dadams</span>
<span class="linecomment">;;     Treat file names also.</span>
<span class="linecomment">;;     Added: icicle-delete-if*, and use instead of delete-if-*.  Removed require cl.el.</span>
<span class="linecomment">;;     Added: icicle-ignored-extensions*, icicle-sort-and-strip-ignored,</span>
<span class="linecomment">;;            icicle-filename-input-p, icicle-update-ignored-extensions-regexp,</span>
<span class="linecomment">;;            icicle-prefix-complete.  Bound icicle-prefix-complete.</span>
<span class="linecomment">;;     Use icicle-update-ignored-extensions-regexp as minibuffer-setup-hook.</span>
<span class="linecomment">;;     icicle-*-candidates: Use icicle-sort-and-strip-ignored.</span>
<span class="linecomment">;;     icicle-next-candidate, icicle-display-candidates-in-*Completions*:</span>
<span class="linecomment">;;       Don't use predicate on file-name candidates (icicle-filename-input-p).</span>
<span class="linecomment">;;     icicle-next-candidate:</span>
<span class="linecomment">;;       Use read-file-name-completion-ignore-case (Emacs 22) and file-name-nondirectory.</span>
<span class="linecomment">;;     icicle-apropos-complete: Return t/nil. Treat single candidate as no-op.</span>
<span class="linecomment">;;     Reset std completions-* faces, so they don't interfere with apropos highlighting.</span>
<span class="linecomment">;; 2005/07/16 dadams</span>
<span class="linecomment">;;     Added: icicle-display-*, icicle-apropos-complete.</span>
<span class="linecomment">;;     Use icicle-display-* in icicle-next-candidate and icicle-apropos-complete.</span>
<span class="linecomment">;;     Bound icicle-apropos-complete to S-tab in completion maps.</span>
<span class="linecomment">;;     icicle-switch-to-*Completions*:</span>
<span class="linecomment">;;       Move to start of candidate.  Highlight candidate, not regexp.</span>
<span class="linecomment">;;     icicle-next-candidate: Underline the root that was completed.</span>
<span class="linecomment">;;     Added: faces icicle-root-highlight-*.</span>
<span class="linecomment">;;     Removed: faces: icicle-completion-help*.</span>
<span class="linecomment">;;     Removed (not used): require of strings.el.</span>
<span class="linecomment">;;     Commentary: Added Nutshell View.</span>
<span class="linecomment">;; 2005/07/15 dadams</span>
<span class="linecomment">;;     Renamed: icicle-completion-help+ to icicle-completion-help.</span>
<span class="linecomment">;;     Replaced: icicle-delete-lines by icicle-erase-minibuffer.</span>
<span class="linecomment">;;     icicle-next-candidate:</span>
<span class="linecomment">;;       Wrapped display-* and re-search-forward in condition-case.  Use icicle-place-overlay.</span>
<span class="linecomment">;;     Changed icicle-completion-help bindings to [f1].</span>
<span class="linecomment">;;     Added: icicle-*-line, icicle-switch-to-*, icicle-move-to-*-completion,</span>
<span class="linecomment">;;            icicle-current-completion-in-*Completions*, icicle-place-overlay.</span>
<span class="linecomment">;;     Added bindings for icicle-*-line, icicle-switch-to-*, icicle-move-to-*.</span>
<span class="linecomment">;;     Bound q to icicle-abort-minibuffer-input in completion-list-mode-map.</span>
<span class="linecomment">;;     icicle-completing-read-prompt-suffix: Mention both [f1] and ?.</span>
<span class="linecomment">;;     Removed: icicle-fit-frame.</span>
<span class="linecomment">;;     Commentary: Added How...Improves...(5).  Updated Key Bindings.</span>
<span class="linecomment">;; 2005/07/14 dadams</span>
<span class="linecomment">;;     icicle-next-candidate:</span>
<span class="linecomment">;;       Update *Completions*, if displayed, to reflect current</span>
<span class="linecomment">;;       candidates, but don't do it if this-command = last-command.</span>
<span class="linecomment">;;       Reverse list as needed, to keep same order.   Ensure current</span>
<span class="linecomment">;;       *Completions* choice shows in window (recenter as needed).</span>
<span class="linecomment">;;       For highlighting: Search with re-search-forward to be sure to get the right one.</span>
<span class="linecomment">;;       Took test for presence of predicate out of loop.</span>
<span class="linecomment">;;     Commentary: Added Note on pop-up-frames = t.</span>
<span class="linecomment">;; 2005/07/13 dadams</span>
<span class="linecomment">;;     Rewrote icicle-apropos-candidates.</span>
<span class="linecomment">;;     Added: icicle-intersection.</span>
<span class="linecomment">;; 2005/07/12 dadams</span>
<span class="linecomment">;;     Added: icicle-(next|previous)-apropos-candidate, icicle-next-candidate,</span>
<span class="linecomment">;;            icicle-apropos-candidates, icicle-completion-candidates.</span>
<span class="linecomment">;;     Bound: icicle-(next|previous)-apropos-candidate.</span>
<span class="linecomment">;;     Renamed: icicle-completion-help-(title-)face: Removed "-face".</span>
<span class="linecomment">;;     icicle-next-completion-candidate: Redefined to use icicle-next-candidate.</span>
<span class="linecomment">;;     icicle-rebind-completion-maps: Updated text to mention apropos completion.</span>
<span class="linecomment">;;     icicle-completion-help+: Use icicle-abort-minibuffer-input, not abort-recursive-edit.</span>
<span class="linecomment">;; 2005/07/10 dadams</span>
<span class="linecomment">;;     First version of icicles.el (previously called elect-mbuf.el).</span>
<span class="linecomment">;;     Renamed: minibuffer-completion-help-string to icicle-completion-help-string,</span>
<span class="linecomment">;;              completing-read-prompt to icicle-completing-read-prompt,</span>
<span class="linecomment">;;              completing-read-prompt-suffix to icicle-completing-read-prompt-suffix,</span>
<span class="linecomment">;;              mbuf-completion-help-face to icicle-completion-help-face,</span>
<span class="linecomment">;;              mbuf-completion-help-title-face to icicle-completion-help-title-face,</span>
<span class="linecomment">;;              minibuffer-last-default to icicle-last-completion-candidate,</span>
<span class="linecomment">;;              command-calling-for-completion to icicle-cmd-calling-for-completion,</span>
<span class="linecomment">;;              minibuffer-completion-help+ to icicle-completion-help+,</span>
<span class="linecomment">;;              abort-minibuffer-input to icicle-abort-minibuffer-input,</span>
<span class="linecomment">;;              next-default-input to icicle-next-completion-candidate,</span>
<span class="linecomment">;;              previous-default-input to icicle-previous-completion-candidate,</span>
<span class="linecomment">;;              rebind-minibuffer-completion-maps to icicle-rebind-completion-maps,</span>
<span class="linecomment">;;     Added: minibuffer-complete-and-exit, icicle-fit-frame, icicle-last-input.</span>
<span class="linecomment">;;     Moved delete-lines here from and renamed to icicle-delete-lines.</span>
<span class="linecomment">;;     Removed: mod+ (unused).</span>
<span class="linecomment">;;     icicle-completion-help+: Use *Help*, not *Completions*.  Don't show completions.</span>
<span class="linecomment">;;     icicle-next-completion-candidate: Use insert, not insert-string.</span>
<span class="linecomment">;;     icicle-rebind-completion-maps: Made it interactive.</span>
<span class="linecomment">;; 2005/07/09 dadams</span>
<span class="linecomment">;;     Removed: buffer-alist (not used).</span>
<span class="linecomment">;; 2005/05/15 dadams</span>
<span class="linecomment">;;     Renamed: flash-ding-minibuffer-frame to 1on1-flash-ding-minibuffer-frame.</span>
<span class="linecomment">;; 2005/05/10 dadams</span>
<span class="linecomment">;;     Hacked completing-read to remove *Completions* window at end if require-match is non-nil.</span>
<span class="linecomment">;;       (Don't know why/when this became a problem.)</span>
<span class="linecomment">;; 2004/09/21 dadams</span>
<span class="linecomment">;;     Updated to work in Emacs 21 (and 20):</span>
<span class="linecomment">;;       next-default-input uses delete-minibuffer-contents for 21, but erase-buffer for 20.</span>
<span class="linecomment">;;       minibuffer-completion-help+: bind inhibit-read-only to t around erase-buffer.</span>
<span class="linecomment">;; 2001/01/10 dadams</span>
<span class="linecomment">;;     Protected remove-windows-on via fboundp.</span>
<span class="linecomment">;; 1999/09/03 dadams</span>
<span class="linecomment">;;     Added: mbuf-completion-help-face, mbuf-completion-help-title-face.</span>
<span class="linecomment">;;     minibuffer-completion-help+: Use mbuf-*-face's instead of hard-coding.</span>
<span class="linecomment">;;     minibuffer-completion-help-string, completing-read-prompt-suffix: defconst -&gt; defvar.</span>
<span class="linecomment">;; 1999/08/26 dadams</span>
<span class="linecomment">;;     Protected faces via boundp.</span>
<span class="linecomment">;; 1999/04/13 dadams</span>
<span class="linecomment">;;     Bound delete-lines to M-S-DEL and M-S-backspace.</span>
<span class="linecomment">;; 1999/03/17 dadams</span>
<span class="linecomment">;;     protect calls with test fboundp.</span>
<span class="linecomment">;; 1996/04/26 dadams</span>
<span class="linecomment">;;     Put escaped newlines on long-line strings.</span>
<span class="linecomment">;; 1996/03/26 dadams</span>
<span class="linecomment">;;     minibuffer-completion-help+: concat -&gt; concat-w-faces (color).</span>
<span class="linecomment">;; 1995/12/20 dadams</span>
<span class="linecomment">;;     exit-minibuffer: Iconify *Completion* frame.</span>
<span class="linecomment">;; 1995/12/15 dadams</span>
<span class="linecomment">;;     abort-minibuffer-input: Reset minibuffer-completion-table to avoid icompletion.</span>
<span class="linecomment">;;     Defined replacement exit-minibuffer to do the same as #1.</span>
<span class="linecomment">;; 1995/12/01 dadams</span>
<span class="linecomment">;;     abort-minibuffer-input: Incorporated delete-selection-mode code</span>
<span class="linecomment">;;     rebind-minibuffer-completion-maps:</span>
<span class="linecomment">;;       Added C-g bindings for minibuffer-local-map, minibuffer-local-ns-map,</span>
<span class="linecomment">;;         minibuffer-local-isearch-map.</span>
<span class="linecomment">;; 1995/10/25 dadams</span>
<span class="linecomment">;;     Put defvar of minibuffer-completion-help-string after do</span>
<span class="linecomment">;;       rebind-minibuffer-completion-maps, so its doc string gives bindings.</span>
<span class="linecomment">;; 1995/10/24 dadams</span>
<span class="linecomment">;;     Mention ESC-TAB completion in completing-read.</span>
<span class="linecomment">;; 1995/10/17 dadams</span>
<span class="linecomment">;;     Let minibuffer use ESC-TAB for completion (Lisp symbols etc.)</span>
<span class="linecomment">;;     completing-read: Minibuffer adopts current buffer's ESC-TAB binding.</span>
<span class="linecomment">;;     Added command-calling-for-completion to memorize current command (done in</span>
<span class="linecomment">;;       completion-setup-hook).</span>
<span class="linecomment">;; 1995/09/12 dadams</span>
<span class="linecomment">;;     Added abort-minibuffer-input.</span>
<span class="linecomment">;;     Define C-g as abort-minibuffer-input in completion-list-mode-map and</span>
<span class="linecomment">;;       minibuffer-local-* maps.</span>
<span class="linecomment">;;     No self-insertion for completion-list-mode-map.</span>
<span class="linecomment">;; 1995/08/16 dadams</span>
<span class="linecomment">;;     next-default-input: Fixed bug - skip repeated alist entries.</span>
<span class="linecomment">;; 1995/08/10 dadams</span>
<span class="linecomment">;;     Rewrote minibuffer-completion-help+: Provide help even if no completions.</span>
<span class="linecomment">;;     So, added minibuffer-completion-help-string.</span>
<span class="linecomment">;;     `?' defined correctly for minibuffer-local-must-match-map.</span>
<span class="linecomment">;; 1995/08/08 dadams</span>
<span class="linecomment">;;     next-default-input: error msg: no hard coding of key seq.</span>
<span class="linecomment">;; 1995/08/02 dadams</span>
<span class="linecomment">;;     Major rewrite.</span>
<span class="linecomment">;;       No reminders in prompts.  Added minibuffer-completion-help+ to provide help info for</span>
<span class="linecomment">;;         *Completions*.</span>
<span class="linecomment">;;     Log for functions that were previously in simple+.el:</span>
<span class="linecomment">;;       choose-completion-string, completion-setup-function, switch-to-completions.</span>
<span class="linecomment">;; 2005/07/28 dadams</span>
<span class="linecomment">;;     completion-setup-function:</span>
<span class="linecomment">;;       Renamed icicle-completing-read-prompt-suffix to icicle-prompt-suffix.</span>
<span class="linecomment">;; 2005/07/15 dadams</span>
<span class="linecomment">;;     choose-completion-string, completion-setup-function: Updated for Emacs 21+.</span>
<span class="linecomment">;; 2005/07/10 dadams</span>
<span class="linecomment">;;     Renamed: command-calling-for-completion to icicle-cmd-calling-for-completion.</span>
<span class="linecomment">;; 2004/09/21 dadams</span>
<span class="linecomment">;;     Only redefine choose-completion-string if prior to Emacs 21.</span>
<span class="linecomment">;; 1999/03/17 dadams</span>
<span class="linecomment">;;     choose-completion-string:</span>
<span class="linecomment">;;       Added doc string.  Updated to correspond to Emacs 34.1.</span>
<span class="linecomment">;;     completion-setup-function: diff prompt setups.  face1 & face2 tests.</span>
<span class="linecomment">;;     Added: switch-to-completions.</span>
<span class="linecomment">;; 1996/04/26 dadams</span>
<span class="linecomment">;;     Put escaped newlines on long-line strings.</span>
 
<span class="linecomment">;;;(@* "CHANGE LOG FOR `icicles-cmd.el'" - Deprecated file)</span>
<span class="linecomment">;;</span>
<span class="linecomment">;; 2009/05/22 dadams</span>
<span class="linecomment">;;     Split in two: icicles-cmd1.el, icicles-cmd2.el.  File too large to upload to Emacs Wiki.</span>
<span class="linecomment">;; 2009/05/20 dadams</span>
<span class="linecomment">;;     Renamed: *-Info-build-node-completions-fix-* to *-Info-build-node-completions-1.</span>
<span class="linecomment">;;     icicle-Info-goto-node: Plain C-u now prepends Info file name to candidates.</span>
<span class="linecomment">;;     icicle-Info-goto-node-1: swapped arg order in call to Info-goto-node nodename (bug fix).</span>
<span class="linecomment">;;     icicle-Info-read-node-name, icicle-Info-build-node-completions(-1):</span>
<span class="linecomment">;;       Added optional arg INCLUDE-FILE-P.</span>
<span class="linecomment">;; 2009/05/11 dadams</span>
<span class="linecomment">;;     icicle-complete-keys: Use icicle-local-keys-first-p as icicle-sort-function.</span>
<span class="linecomment">;;                           Bind icicle-hist-cands-no-highlight to ("..").</span>
<span class="linecomment">;;     icicle-keys+cmds-w-prefix: Propertize candidate "..".</span>
<span class="linecomment">;;     icicle-dabbrev-completion: Use icicle-upcase.</span>
<span class="linecomment">;; 2009/05/10 dadams</span>
<span class="linecomment">;;     Added: icicle-search-(defs|lines|paragraphs|sentences|pages).</span>
<span class="linecomment">;;     icicle-plist: Pretty-print, unless negative prefix arg (or Emacs 20).</span>
<span class="linecomment">;;     icicle-search-regexp-scan: Fix to pick up candidate at eob: removed (not (eobp)) test.</span>
<span class="linecomment">;; 2009/05/05 dadams</span>
<span class="linecomment">;;     icicle-find-file-(absolute|in-tags-table)(-other-window),</span>
<span class="linecomment">;;       icicle-(recent|locate)-file(-other-window), icicle-describe-option-of-type,</span>
<span class="linecomment">;;       icicle-(vardoc|fundoc|doc|plist), icicle-goto-global-marker:</span>
<span class="linecomment">;;         Remove quote before face name, for icicle-candidate-properties-alist value.</span>
<span class="linecomment">;;     icicle-buffer(-other-window|-list), icicle-kill-buffer, icicle-choose-candidate-of-type:</span>
<span class="linecomment">;;       Bind completion-ignore-case, based on read-buffer-completion-ignore-case.</span>
<span class="linecomment">;; 2009/05/01 dadams</span>
<span class="linecomment">;;     Added: icicle-shell-command-on-file.</span>
<span class="linecomment">;;     Bind both icicle-all-candidates-list-alt-action-fn and icicle-candidate-alt-action-fn</span>
<span class="linecomment">;;       to icicle-alt-act-fn-for-type for appropriate type - same commands as for 2009/04/26,</span>
<span class="linecomment">;;       except removed these for *recent* (mistaken).</span>
<span class="linecomment">;;     Use renaming from icicles-fn.el: *-choose-action-for-type -&gt; *-alt-act-fn-for-type.</span>
<span class="linecomment">;; 2009/04/28 dadams</span>
<span class="linecomment">;;     icicle-object-action:</span>
<span class="linecomment">;;       At end, just apply the fn returned by icicle-choose-action-for-type to chosen object.</span>
<span class="linecomment">;;       Use icicle-type-actions-alist, not icicle-object-named-types.</span>
<span class="linecomment">;;       Update to use with icicle-predicate-types-alist (not flat list of preds).</span>
<span class="linecomment">;;     icicle-choose-candidate-of-type: Handle color type too.</span>
<span class="linecomment">;;     icicle-get-anything-actions-for-type:</span>
<span class="linecomment">;;       Highlight Anything actions using face icicle-special-candidate.</span>
<span class="linecomment">;; 2009/04/26 dadams</span>
<span class="linecomment">;;     icicle-marker+text, icicle-compilation-search-in-context-fn:</span>
<span class="linecomment">;;       Bind inhibit-field-text-motion to t, to ensure real end-of-line.</span>
<span class="linecomment">;;     Load icicles-mac (at compile time) using load-library, to ensure latest .elc.</span>
<span class="linecomment">;;     Bind icicle-candidate-alt-action-fn, where appropriate, to icicle-choose-action-for-type:</span>
<span class="linecomment">;;       *-lisp-complete-symbol, *-customize-face(-other-window), *-execute-extended-command,</span>
<span class="linecomment">;;       *-command-abbrev, *-command-abbrev-command, *-execute-named-keyboard-macro,</span>
<span class="linecomment">;;       *-set-option-to-t, *-reset-option-to-nil, *-toggle-option, *-select-frame,</span>
<span class="linecomment">;;       *-delete-windows, *-kill-buffer, icicle-buffer(-other-window),</span>
<span class="linecomment">;;       *-(add|remove)-buffer-candidate, *-(buffer|face|file|directory)-list,</span>
<span class="linecomment">;;       *-find-file(-absolute|-in-tags-table)(-other-window),</span>
<span class="linecomment">;;       *-(recent|locate)-file(-other-window), *-frame-(bg|fg), *-where-is,</span>
<span class="linecomment">;;       *-apropos(-variable|option|function|command), *-apply, *-save-string-to-variable,</span>
<span class="linecomment">;;       *--choose-candidate-of-type, *-read-var-value-satisfying, *-read-color.</span>
<span class="linecomment">;;     icicle-execute-extended-command-1, icicle-command-abbrev-action:</span>
<span class="linecomment">;;       Rebind icicle-candidate-alt-action-fn to nil so we don't override it for invoked cmd.</span>
<span class="linecomment">;;     icicle-object-action: Respect icicle-use-anything-candidates-flag.</span>
<span class="linecomment">;; 2009/04/25 dadams</span>
<span class="linecomment">;;     icicle-find-file-in-tags-table(-other-window): Fixed copy+paste typo.</span>
<span class="linecomment">;; 2009/04/24 dadams</span>
<span class="linecomment">;;     Added: icicle-find-file-in-tags-table(-other-window).</span>
<span class="linecomment">;; 2009/04/19 dadams</span>
<span class="linecomment">;;     icicle-customize-apropos-options-of-type, icicle-dabbrev-completion:</span>
<span class="linecomment">;;       Don't fset unless standard function is defined.</span>
<span class="linecomment">;;     Use when/unless instead of or for fset's. (cosmetic)</span>
<span class="linecomment">;; 2009/04/18 dadams</span>
<span class="linecomment">;;     Soft-require hexrgb.el unconditionally, not just when there is a window-system.</span>
<span class="linecomment">;;     icicle-read-color: Error if hexrgb is not loaded.</span>
<span class="linecomment">;; 2009/04/11 dadams</span>
<span class="linecomment">;;     Added: icicle-region-add-short-help.</span>
<span class="linecomment">;;     icicle-font-w-orig-size: Construct short help only if user will see it.</span>
<span class="linecomment">;;     icicle-describe-opt-of-type-complete, icicle-marker+text,</span>
<span class="linecomment">;;       icicle-(select|search|remove)-region, icicle-search-(regexp|char-property)-scan:</span>
<span class="linecomment">;;         Add short help for mode-line and tooltip.</span>
<span class="linecomment">;;     icicle-region-help: Corrected start/end order.</span>
<span class="linecomment">;;     icicle-region-help, icicle-search-help: Removed unused help: No help.</span>
<span class="linecomment">;; 2009/04/10 dadams</span>
<span class="linecomment">;;     icicle-font-w-orig-size: Provide help string.  Set font to use orig-pointsize also.</span>
<span class="linecomment">;;     icicle-font: Modify frame - don't use menu-bar-mode.  Get orig menu-bar info from frame.</span>
<span class="linecomment">;;                  Save orig-pointsize also.</span>
<span class="linecomment">;;     icicle-frame-(bg|fg):</span>
<span class="linecomment">;;       Incorporate behavior of icicle-read-color: multi-completion etc.  Added short help.</span>
<span class="linecomment">;;       (Use icicle-make-color-candidate, icicle-color-completion-setup.)</span>
<span class="linecomment">;;     icicle-read-color:</span>
<span class="linecomment">;;       Factored out stuff as new function icicle-color-completion-setup.</span>
<span class="linecomment">;;       Corrected handling of ARG &gt; 2.</span>
<span class="linecomment">;;     Moved to icicles-fn.el:</span>
<span class="linecomment">;;       icicle-color-help, icicle-make-color-candidate, icicle-remove-color-duplicates.</span>
<span class="linecomment">;; 2009/04/09 dadams</span>
<span class="linecomment">;;     Added: icicle-font-w-orig-size.</span>
<span class="linecomment">;;     icicle-font: Use icicle-font-w-orig-size.  No menu bar, to avoid Emacs frame-sizing bug.</span>
<span class="linecomment">;; 2009/04/04 dadams</span>
<span class="linecomment">;;     icicle-kill-buffer, icicle-buffer(-other-window|-list), icicle-choose-candidate-of-type:</span>
<span class="linecomment">;;       Bind icicle-sort-functions-alist for buffer names.</span>
<span class="linecomment">;; 2009/03/29 dadams</span>
<span class="linecomment">;;     icicle-make-color-candidate: Use white or black foreground, depending on color value.</span>
<span class="linecomment">;; 2009/03/27 dadams</span>
<span class="linecomment">;;     Renamed: icicle-default-buffer-name to icicle-default-buffer-names.</span>
<span class="linecomment">;;     icicle-buffer(-other-window):</span>
<span class="linecomment">;;       Bind bufflist, to make it available also to icicle-default-buffer-names.</span>
<span class="linecomment">;;     icicle-default-buffer-names: Emacs 23: Provide first 4 buffers from bufflist.</span>
<span class="linecomment">;; 2009/03/26 dadams</span>
<span class="linecomment">;;     Added: icicle-default-buffer-name.</span>
<span class="linecomment">;;     icicle-buffer(-other-window), icicle-add-buffer-candidate:</span>
<span class="linecomment">;;       Use icicle-default-buffer-name.</span>
<span class="linecomment">;; 2009/03/16 dadams</span>
<span class="linecomment">;;     icicle-buffer(-other-window), icicle-buffer-list, icicle-kill-buffer,</span>
<span class="linecomment">;;       icicle-add-buffer-candidate: Treat prefix arg buffers visiting files or frame-local.</span>
<span class="linecomment">;;     icicle-recent-file(-other-window): Bind icicle-use-candidates-only-once-alt-p to t.</span>
<span class="linecomment">;; 2009/03/15 dadams</span>
<span class="linecomment">;;     Added: icicle-remove-file-from-recentf-list, icicle-remove-from-recentf-candidate-action.</span>
<span class="linecomment">;;     icicle-recent-file(-other-window):</span>
<span class="linecomment">;;       Bind icicle-candidate-alt-action-fn  to icicle-remove-from-recentf-candidate-action.</span>
<span class="linecomment">;; 2009/03/10 dadams</span>
<span class="linecomment">;;     Added: icicle-recompute-shell-command-candidates.</span>
<span class="linecomment">;; 2009/02/28 dadams</span>
<span class="linecomment">;;     icicle-find-file-absolute(-other-window):</span>
<span class="linecomment">;;       Treat directory candidates as special candidates.</span>
<span class="linecomment">;;     icicle-apropos: Treat functions as special candidates.</span>
<span class="linecomment">;;     icicle-apropos-variable: Treat user options as special candidates.</span>
<span class="linecomment">;;     icicle-apropos-function: Treat commands as special candidates.</span>
<span class="linecomment">;;     icicle-apropos-command (non-apropos-fn+var version): Treat cmds as special candidates.</span>
<span class="linecomment">;; 2009/02/23 dadams</span>
<span class="linecomment">;;     icicle-Info-goto-node-action:</span>
<span class="linecomment">;;       Protect dir insertion with icicle-extra-candidates-dir-insert-p.</span>
<span class="linecomment">;; 2009/02/17 dadams</span>
<span class="linecomment">;;     icicle-lisp-complete-symbol:</span>
<span class="linecomment">;;       Added predicate arg.  Updated wrt Emacs 23 (better var completion).</span>
<span class="linecomment">;; 2009/02/01 dadams</span>
<span class="linecomment">;;     icicle-(find-file-absolute|(recent|locate)-file)(-other-window):</span>
<span class="linecomment">;;       Bind C-backspace to icicle-up-directory.</span>
<span class="linecomment">;; 2009/01/18 dadams</span>
<span class="linecomment">;;     icicle-dired-saved-file-candidates(-other-window):</span>
<span class="linecomment">;;       If there is no saved set, then use icicle-file-list to let user choose a set.</span>
<span class="linecomment">;;     Added: icicle-dired-chosen-files(-other-window), as aliases.</span>
<span class="linecomment">;; 2009/01/14 dadams</span>
<span class="linecomment">;;     Same commands as yesterday: icicle-remove-duplicates -&gt; icicle-remove-dups-if-extras.</span>
<span class="linecomment">;; 2009/01/13 dadams</span>
<span class="linecomment">;;     icicle-kill-buffer, icicle-buffer(-other-window), icicle-(buffer|file|directory)-list,</span>
<span class="linecomment">;;       icicle-find-file(-absolute)(-other-window), icicle-(recent|locate)-file(-other-window),</span>
<span class="linecomment">;;       icicle-choose-candidate-of-type:</span>
<span class="linecomment">;;         Bind icicle-transform-function to icicle-remove-duplicates.</span>
<span class="linecomment">;; 2009/01/05 dadams</span>
<span class="linecomment">;;     Added: icicle-gud-gdb-complete-command.</span>
<span class="linecomment">;;     icicle-shell-dynamic-complete(-as)-environment-variable: (require 'shell)</span>
<span class="linecomment">;;     icicle-shell-dynamic-complete-as-command: Added candidate help for shell commands.</span>
<span class="linecomment">;; 2009/01/04 dadams</span>
<span class="linecomment">;;     Added ESS support:</span>
<span class="linecomment">;;       Added: icicle-comint-replace-by-expanded-filename, icicle-ess-complete-filename,</span>
<span class="linecomment">;;              icicle-ess(-internal)-complete-object-name, icicle-ess-R-complete-object-name.</span>
<span class="linecomment">;;       Thx to Sebastian Luque.</span>
<span class="linecomment">;;     Improved some doc strings.</span>
<span class="linecomment">;; 2009/01/02 dadams</span>
<span class="linecomment">;;     icicle-comint-dynamic-complete-as-filename, icicle-comint-dynamic-simple-complete:</span>
<span class="linecomment">;;       Fixed for comint-completion-autolist, absolute directories.  Thx to Sebastian Luque.</span>
<span class="linecomment">;; 2009/01/01 dadams</span>
<span class="linecomment">;;     icicle-comint-replace-orig-completion-fns:</span>
<span class="linecomment">;;       Use icicle-comint-dynamic-complete-replacements instead of hard-coded list.</span>
<span class="linecomment">;;     icicle-comint-dynamic-simple-complete: Fix for Emacs 20: map #'list over completions.</span>
<span class="linecomment">;; 2008/12/30 dadams</span>
<span class="linecomment">;;     Removed: shell-hook-fn.</span>
<span class="linecomment">;;     Removed fset here for: old-comint-dynamic-*, old-shell-dynamic-*, old-bbdb-complete-name.</span>
<span class="linecomment">;;     icicle-comint-dynamic-simple-complete: Map #'list over candidates (for Emacs 20).</span>
<span class="linecomment">;;     icicle-comint-hook-fn:</span>
<span class="linecomment">;;       Don't bind icicle-comint-command here - do it in icicle-bind-other-keymap-keys.</span>
<span class="linecomment">;; 2008/12/27 dadams</span>
<span class="linecomment">;;     Removed: icicle-find-file(-other-window)-w-wildcards.</span>
<span class="linecomment">;;     Removed soft require of dired+.el.</span>
<span class="linecomment">;;     icicle-find-file(-other-window):</span>
<span class="linecomment">;;       Use just find-file* with wildcards arg, not *-w-wildcards, as action fn.</span>
<span class="linecomment">;;       Bind icicle-default-value so that it won't insert the default value.</span>
<span class="linecomment">;;     icicle-find-file(-other-window), icicle-choose-candidate-of-type:</span>
<span class="linecomment">;;       Use nil as 3rd read-file-name arg, if not in Dired on a file name.</span>
<span class="linecomment">;; 2008/12/23 dadams</span>
<span class="linecomment">;;     icicle-comint-dynamic-complete-as-filename: Bind use-dialog-box to nil.</span>
<span class="linecomment">;; 2008/12/22 dadams</span>
<span class="linecomment">;;     icicle-comint-dynamic-complete-as-filename: Use INIT and PRED in read-file-name call.</span>
<span class="linecomment">;; 2008/12/21 dadams</span>
<span class="linecomment">;;     Added: icicle-shell-hook-fn, (icicle|old)-comint-dynamic-complete(-filename),</span>
<span class="linecomment">;;            (icicle|old)-shell-dynamic-complete-(command|filename|environment-variable),</span>
<span class="linecomment">;;            icicle-comint-replace-orig-completion-fns, icicle-comint-dynamic-simple-complete,</span>
<span class="linecomment">;;            icicle-comint-dynamic-complete-as-filename,</span>
<span class="linecomment">;;            icicle-shell-dynamic-complete-as-(command|environment-variable).</span>
<span class="linecomment">;;     Renamed: icicle-comint-send-input to icicle-comint-search-send-input,</span>
<span class="linecomment">;;              icicle-comint-get-final-choice to icicle-comint-search-get-final-choice,</span>
<span class="linecomment">;;              icicle-comint-get-minibuffer-input to icicle-comint-search-get-minibuffer-input.</span>
<span class="linecomment">;;     Require shell.el at compile time.</span>
<span class="linecomment">;;     Use fn, not var, confirm-nonexistent-file-or-buffer.  Thx to Daniel Clemente.</span>
<span class="linecomment">;; 2008/12/02 dadams</span>
<span class="linecomment">;;     Removed all use of icicle-file-ignore-space-prefix-flag (removed).</span>
<span class="linecomment">;; 2008/11/23 dadams</span>
<span class="linecomment">;;     Updated wrt Emacs 23:</span>
<span class="linecomment">;;       find-file-confirm-nonexistent-file -&gt; confirm-nonexistent-file-or-buffer.</span>
<span class="linecomment">;;       icicle-buffer*, icicle-add-buffer-candidate, icicle-choose-candidate-of-type:</span>
<span class="linecomment">;;         Added confirm-nonexistent-file-or-buffer.</span>
<span class="linecomment">;; 2008/11/22 dadams</span>
<span class="linecomment">;;     icicle-command-abbrev, icicle-remove-buffer-config-action, icicle-find-file-absolute*,</span>
<span class="linecomment">;;       icicle-(recent|locate)-file*, icicle-describe-option-of-type,</span>
<span class="linecomment">;;       icicle-(vardoc|fundoc|plist|doc), icicle-complete-keys-1, icicle-read-color:</span>
<span class="linecomment">;;         Put icicle-fancy-candidates property on prompt when appropriate.</span>
<span class="linecomment">;;     icicle-(find|recent|locate)-file(-absolute)(-other-window):</span>
<span class="linecomment">;;       Support find-file-confirm-nonexistent-file (Emacs 23).</span>
<span class="linecomment">;; 2008/11/17 dadams</span>
<span class="linecomment">;;     Added: icicle-find-first-tag-action, icicle-find-first-tag-other-window-action.</span>
<span class="linecomment">;;     icicle-find(-first)-tag(-other-window), icicle-find-tag-action: Crosshairs highlighting.</span>
<span class="linecomment">;;     icicle-find-first-tag(-other-window): Use icicle-find-first-tag(-other-window)-action.</span>
<span class="linecomment">;;     Mention crosshairs.el in doc strings of commands that use it.</span>
<span class="linecomment">;; 2008/11/14 dadams</span>
<span class="linecomment">;;     icicle-locate-file*: Use face icicle-candidate-part only for negative prefix arg.</span>
<span class="linecomment">;; 2008/11/09 dadams</span>
<span class="linecomment">;;     icicle-explore: When only 1 candidate, no completion.  Thx to Hannes Janetzek.</span>
<span class="linecomment">;; 2008/11/04 dadams</span>
<span class="linecomment">;;     Removed compile-time require of palette.el or eyedropper.el.  Thx to Andrey Zhdanov.</span>
<span class="linecomment">;;     icicle-read-color: Moved soft require of palette.el or eyedropper.el to beginning.</span>
<span class="linecomment">;;     Removed: icicle-generic-S-tab.</span>
<span class="linecomment">;;     icicle-add-key+cmd: Removed test for icicle-generic-S-tab.</span>
<span class="linecomment">;; 2008/11/03 dadams</span>
<span class="linecomment">;;     icicle-insert-for-yank: push-mark first.  Thx to Fabrice Knevez.</span>
<span class="linecomment">;;     Renamed: icicle-insert-kill to icicle-completing-yank,</span>
<span class="linecomment">;;              icicle-yank-insert to icicle-yank-maybe-completing.</span>
<span class="linecomment">;;     icicle-search: Restored binding of icicle-searching-p (somehow, accidentally removed it).</span>
<span class="linecomment">;; 2008/11/02 dadams</span>
<span class="linecomment">;;     icicle-(doc|vardoc|fundoc|plist):</span>
<span class="linecomment">;;       Prefix arg uses candidates cache.  Tighten scope of condition-case.</span>
<span class="linecomment">;;     icicle-doc:</span>
<span class="linecomment">;;       Show all of fn, var, and face doc that are available.  Thx to Fabrice Knevez.</span>
<span class="linecomment">;;       Use multi-completion: added symbol name and type.</span>
<span class="linecomment">;;     icicle-doc-action: (intern (icicle-transform-multi-completion...)), not assoc.</span>
<span class="linecomment">;; 2008/10/27 dadams</span>
<span class="linecomment">;;     icicle-find(-first)-tag*: Bind case-fold-search too.</span>
<span class="linecomment">;; 2008/10/26 dadams</span>
<span class="linecomment">;;     icicle-(file|directory)-list, icicle-find-file(-absolute)(-other-window),</span>
<span class="linecomment">;;       icicle-(locate|recent)-file(-other-window): Bind to icicle-file-* options.</span>
<span class="linecomment">;;     icicle-locate-file*, icicle-recent-file*:</span>
<span class="linecomment">;;       Bind icicle-abs-file-candidates, icicle-delete-candidate-object.</span>
<span class="linecomment">;;       Move init code into bindings.</span>
<span class="linecomment">;;     icicle-find-first-tag*: Move init code into bindings.</span>
<span class="linecomment">;; 2008/10/24 dadams</span>
<span class="linecomment">;;     Find-tag fixes.  Thx to Per Nordlow.</span>
<span class="linecomment">;;       icicle-find-tag: Bind completion-ignore-case also for call to icicle-explore.</span>
<span class="linecomment">;;       icicle-find-tag-define-candidates-1:</span>
<span class="linecomment">;;         Look for regexp followed by DEL, through eol.  Move to bol, then next line.</span>
<span class="linecomment">;;     icicle-explore: Call icicle-get-alist-candidate with NO-ERROR-P arg.</span>
<span class="linecomment">;; 2008/10/23 dadams</span>
<span class="linecomment">;;     icicle-find-tag: Use nil for REQUIRE-MATCH in call to icicle-explore.</span>
<span class="linecomment">;; 2008/10/21 dadams</span>
<span class="linecomment">;;     icicle-search-read-context-regexp: Bound icicle-candidate-(action|help)-fn to nil.</span>
<span class="linecomment">;;     icicle-search-define-candidates-1: Added error message - better than generic explore msg.</span>
<span class="linecomment">;;     Moved enable-recursive-minibuffers from *-search-region to *-search-region-action.</span>
<span class="linecomment">;;     icicle-search-region-action: Added message if no such file.</span>
<span class="linecomment">;; 2008/10/18 dadams</span>
<span class="linecomment">;;     Replaced customize-save-variable by funcall icicle-customize-save-variable-function.</span>
<span class="linecomment">;;     icicle-bookmark(-other-window): Use icicle-bookmark-cleanup.  Removed completion default.</span>
<span class="linecomment">;;     Added: icicle-bookmark-cleanup: Select orig-window at end.  Thx to Andrey Zhdanov.</span>
<span class="linecomment">;; 2008/10/17 dadams</span>
<span class="linecomment">;;     Added: icicle-bookmark-cmd.</span>
<span class="linecomment">;; 2008/10/16 dadams</span>
<span class="linecomment">;;     icicle-bookmark-jump-1: Fixed for Emacs 23.  Thx to Andrey Zhdanov.</span>
<span class="linecomment">;; 2008/10/12 dadams</span>
<span class="linecomment">;;     Added: icicle-search-ibuffer-marked, icicle-search-buff-menu-marked.</span>
<span class="linecomment">;;     icicle-search-dired-marked: Removed unused let binding.</span>
<span class="linecomment">;; 2008/10/11 dadams</span>
<span class="linecomment">;;     icicle-Info-index-20: Use symbol at point as default index topic.</span>
<span class="linecomment">;; 2008/10/05 dadams</span>
<span class="linecomment">;;     icicle-Info-read-node-name: Use lax completion.  Thx to Richard Kim.</span>
<span class="linecomment">;; 2008/09/22 dadams</span>
<span class="linecomment">;;     icicle-dired-project(-other-window):</span>
<span class="linecomment">;;       Map expand-file-name over absolute file names, to expand ~ in fileset entries.</span>
<span class="linecomment">;; 2008/09/20 dadams</span>
<span class="linecomment">;;     icicle-find-file-absolute(-other-window): abs-file-list -&gt; icicle-abs-file-list.</span>
<span class="linecomment">;; 2008/09/19 dadams</span>
<span class="linecomment">;;     icicle-add-entry-to-saved-completion-set:</span>
<span class="linecomment">;;       Use only the fileset name, not the whole fileset, in the (:fileset...) entry.</span>
<span class="linecomment">;;     icicle-remove-entry-from-saved-completion-set: Rewrote.</span>
<span class="linecomment">;;       Either the entry to remove or the set to remove it from can now be a fileset.</span>
<span class="linecomment">;;     icicle-dired-save-marked-persistently: Added FILESETP arg, so you can save in a fileset.</span>
<span class="linecomment">;;     icicle-dired-project(-other-window): Include filesets as project candidates.</span>
<span class="linecomment">;;     Renamed: icicle-dired-save-marked-to-cache-file to icicle-dired-save-marked-persistently.</span>
<span class="linecomment">;;     Moved icicle-kill-a-buffer to icicles-fn.el.</span>
<span class="linecomment">;; 2008/09/15 dadams</span>
<span class="linecomment">;;     icicle-(add|remove)-candidate-(to|from)-saved-completion-set: Use :fileset keyword.</span>
<span class="linecomment">;;     icicle-search-where-arg, icicle-search-where-arg:</span>
<span class="linecomment">;;       Wrap icicle-(file|buffer)-list with save-selected-window.</span>
<span class="linecomment">;; 2008/09/14 dadams</span>
<span class="linecomment">;;     Renamed: icicle-(add|remove)-candidate-(to|from)-saved-completion-set to</span>
<span class="linecomment">;;              icicle-(add|remove)-entry-(to|from)-saved-completion-set.</span>
<span class="linecomment">;;     icicle-add-entry-to-saved-completion-set: Treat fileset entries, not just strings.</span>
<span class="linecomment">;;     icicle-(add|remove)-entry-(to|from)-saved-completion-set,</span>
<span class="linecomment">;;       icicle-remove-saved-completion-set, icicle-dired-project(-other-window):</span>
<span class="linecomment">;;         No default value for completing-read.</span>
<span class="linecomment">;; 2008/09/13 dadams</span>
<span class="linecomment">;;     Use renamings from icicles-mcmd.el:</span>
<span class="linecomment">;;       icicle-candidate-set-save-to-cache-file to icicle-candidate-set-save-persistently,</span>
<span class="linecomment">;;       icicle-candidate-set-retrieve-from-cache-file to *-candidate-set-retrieve-persistent.</span>
<span class="linecomment">;; 2008/09/11 dadams</span>
<span class="linecomment">;;     Added: icicle-grep-saved-file-candidates.</span>
<span class="linecomment">;; 2008/09/09 dadams</span>
<span class="linecomment">;;     Added: icicle-remove-saved-set-action: No longer set minibuffer-completion-table or call</span>
<span class="linecomment">;;                                            icicle-complete-again-update.</span>
<span class="linecomment">;;            icicle-dired-save-marked-(to-(variable|cache-file)|as-project),</span>
<span class="linecomment">;;            icicle-dired-project(-other-window).</span>
<span class="linecomment">;;     Renamed: icicle-candidate-set-dired-marked-save(-more) to icicle-dired-save-marked(-more)</span>
<span class="linecomment">;;     icicle-remove-saved-completion-set:</span>
<span class="linecomment">;;       Prompt and delete cache file.  Use icicle-remove-saved-set-action as action function.</span>
<span class="linecomment">;;       Bind: icicle-whole-candidate-as-text-prop-p, icicle-use-candidates-only-once-flag.</span>
<span class="linecomment">;;       Remove *Completions* window at end.</span>
<span class="linecomment">;; 2008/09/08 dadams</span>
<span class="linecomment">;;     icicle-dired-saved-file-candidates(-other-window):</span>
<span class="linecomment">;;       Don't change to relative file names - use whichever form (abs, rel) is saved.</span>
<span class="linecomment">;;     icicle-find-tag-define-candidates-1: Make sure tag is not empty before (aref tag 0).</span>
<span class="linecomment">;;     icicle-find-file-absolute(-other-window):</span>
<span class="linecomment">;;       Use default-directory as init value and default value.</span>
<span class="linecomment">;; 2008/09/03 dadams</span>
<span class="linecomment">;;     icicle-bookmark(-other-window), icicle-goto-marker-1:</span>
<span class="linecomment">;;       Use crosshairs-unhighlight, not icicle-unhighlight-crosshairs+cleanup.</span>
<span class="linecomment">;;     icicle-goto-marker-1: Bind orig-buff.</span>
<span class="linecomment">;;     *-bookmark-jump-1, *-goto-marker-1-action, *-compilation-search-in-context-fn:</span>
<span class="linecomment">;;       Use crosshairs-highlight, not icicle-highlight-crosshairs.</span>
<span class="linecomment">;; 2008/09/02 dadams</span>
<span class="linecomment">;;     Added: icicle-dabbrev--abbrev-at-point.</span>
<span class="linecomment">;;     icicle-dabbrev-completion: Use icicle-dabbrev--abbrev-at-point.  Thx to Tomer Levin.</span>
<span class="linecomment">;; 2008/09/01 dadams</span>
<span class="linecomment">;;     Added: icicle-bookmark-jump(-other-window), icicle-bookmark-jump-1.</span>
<span class="linecomment">;;     Removed: icicle-bookmark-other-window-action.</span>
<span class="linecomment">;;     icicle-bookmark(-other-window): Use icicle-bookmark-jump(-other-window) as action fn.</span>
<span class="linecomment">;;                                     Clean up crosshairs highlighting at end.</span>
<span class="linecomment">;;     icicle-goto-marker-1:</span>
<span class="linecomment">;;       Don't bind minibuffer-exit-hook.  Don't require crosshairs.el or hl-line+.el.</span>
<span class="linecomment">;;       Use icicle-unhighlight-crosshairs+cleanup for the cleanup.</span>
<span class="linecomment">;;     icicle-compilation-search: Don't require hl-line+.el.</span>
<span class="linecomment">;;     icicle-compilation-search-in-context-fn: Use icicle-highlight-crosshairs.</span>
<span class="linecomment">;; 2008/08/31 dadams</span>
<span class="linecomment">;;     icicle-goto-marker-1-action:</span>
<span class="linecomment">;;       Use col-highlight-(un)highlight, not crosshairs-flash.  Force redisplay.</span>
<span class="linecomment">;;       Add col-highlight-unhighlight to pre-command-hook.</span>
<span class="linecomment">;;       Use hl-line-highlight-now, not hl-line-flash.</span>
<span class="linecomment">;;     icicle-goto-marker-1: Remove col-highlight-unhighlight from pre-command-hook at end.</span>
<span class="linecomment">;;     icicle-customize-face(-other-window, icicle-execute-extended-command-1,</span>
<span class="linecomment">;;       icicle-find-tag-action, icicle-insert-thesaurus-entry, icicle-apply(-list)-action,</span>
<span class="linecomment">;;       icicle-search-action, icicle-tags-search, icicle-choose-anything-candidate:</span>
<span class="linecomment">;;         Select window before call select-frame-set-input-focus.</span>
<span class="linecomment">;; 2008/08/25 dadams</span>
<span class="linecomment">;;     icicle-find-file-absolute(-other-window), icicle-(recent|locate)-file(-other-window):</span>
<span class="linecomment">;;       Use lax completion and provide WILDCARDS arg to find-file.</span>
<span class="linecomment">;; 2008/08/24 dadams</span>
<span class="linecomment">;;     Use renaming from icicles-fn.el: icicle-minibuffer-contents to icicle-minibuf-input.</span>
<span class="linecomment">;; 2008/08/23 dadams</span>
<span class="linecomment">;;     icicle-clear-history: Wrap default value, minibuffer-history-variable, with symbol-name.</span>
<span class="linecomment">;; 2008/08/21 dadams</span>
<span class="linecomment">;;     Added: icicle-file(-other-*), icicle-find-file-absolute(-other-*).  Thx to Glauber M4.</span>
<span class="linecomment">;;     Soft-require bbdb-com.el at compile time.  Don't require bbdb.el at load time - define</span>
<span class="linecomment">;;       old-bbdb-* only if original is already defined.</span>
<span class="linecomment">;;     icicle-bbdb-complete-name: Raise error if BBDB not loaded.</span>
<span class="linecomment">;; 2008/08/20 dadams</span>
<span class="linecomment">;;     icicle-bbdb-complete-name, icicle-clear-current-history: Replaced ding by icicle-ding.</span>
<span class="linecomment">;; 2008/08/18 dadams</span>
<span class="linecomment">;;     icicle-clear-history:</span>
<span class="linecomment">;;       Moved icicle-use-candidates-only-once-flag binding to icicle-clear-history-1.</span>
<span class="linecomment">;;     icicle-delete-windows: Bind icicle-inhibit-try-switch-buffer.</span>
<span class="linecomment">;;     icicle-insert-kill: Bind icicle-sort-function to nil.</span>
<span class="linecomment">;;     icicle-recent-file(-other-window):</span>
<span class="linecomment">;;       Bind *-candidate-properties-alist and *-list-use-nth-parts to nil if no prefix arg.</span>
<span class="linecomment">;;     icicle-goto(-global)-marker:</span>
<span class="linecomment">;;       Bind icicle-sort-function(s-alist) differently in each - don't bind in *-goto-marker-1.</span>
<span class="linecomment">;;     icicle-remove-region: Use just icicle-delete-region-from-alist as action function.</span>
<span class="linecomment">;;     icicle-delete-region-from-alist:</span>
<span class="linecomment">;;       Use the propertized region name, not just reg-name in the cons to delete.</span>
<span class="linecomment">;;     Moved icicle-cdr-less-p to icicles-fn.el and renamed to icicle-cdr-lessp.</span>
<span class="linecomment">;;     Moved icicle-remove-candidate-display-others to icicles-mcmd.el.</span>
<span class="linecomment">;;     Use renamings from icicles-fn.el: icicle-complete-again-update, icicle-remove-if-not.</span>
<span class="linecomment">;;     icicle-explore, icicle-find-tag, icicle-complete-keys:</span>
<span class="linecomment">;;       Renamed local orig-* vars.  Use explore's in *-search-(quit-or-error|cleanup|action).</span>
<span class="linecomment">;; 2008/08/14 dadams</span>
<span class="linecomment">;;     icicle-apply: Handle multi-completion alist entries.</span>
<span class="linecomment">;;     icicle-goto-global-marker: Treat icicle-add-buffer-name-flag: Use multi-completions.</span>
<span class="linecomment">;;     icicle-marker+text: Added optional arg.  Annotate text with buffer name if appropriate.</span>
<span class="linecomment">;;     icicle-goto-marker-1: Pass global-ring-p to icicle-marker+text, so it can annotate.</span>
<span class="linecomment">;; 2008/08/13 dadams</span>
<span class="linecomment">;;     icicle-goto-marker-1: Don't add marker to ring markers if global ring.</span>
<span class="linecomment">;;     icicle-goto-marker-1-action: select-frame-set-input-focus.</span>
<span class="linecomment">;;     icicle-bbdb-complete-name: let -&gt; let* (duh!) for completing-read.</span>
<span class="linecomment">;; 2008/08/12 dadams</span>
<span class="linecomment">;;     Added: icicle-goto(-global)-marker-or-(set-mark-command|pop-global-mark),</span>
<span class="linecomment">;;            icicle-goto-marker-1-action (factored out from icicle-goto-marker-1).</span>
<span class="linecomment">;;     icicle-goto-marker-1:</span>
<span class="linecomment">;;       Add mark-marker to list of markers in ring.</span>
<span class="linecomment">;;       Use icicle-goto-marker-1-action.</span>
<span class="linecomment">;;       Go directly to marker if only one.  Message if same as point.</span>
<span class="linecomment">;;       Better test for type of ring, for error msg.</span>
<span class="linecomment">;;     icicle-apply: Use icicle-explore-final-choice-full in final result (not void var).</span>
<span class="linecomment">;;                   Added optional arg NOMSG; bind icicle-apply-nomsg.</span>
<span class="linecomment">;;     icicle-apply-action: Respect icicle-apply-nomsg.  Removed vestigial cruft.</span>
<span class="linecomment">;;     icicle-bbdb-complete-name: Bind icicle-bbdb-complete-name to t and use strict completion.</span>
<span class="linecomment">;; 2008/08/11 dadams</span>
<span class="linecomment">;;     icicle-search-highlight-context-levels: Increase overlay priority for each context level.</span>
<span class="linecomment">;;     icicle-search-highlight-all-input-matches, icicle-search-highlight-input-matches-here:</span>
<span class="linecomment">;;       Made of current-input overlay higher than any context-level overlay: 204 -&gt; 220.</span>
<span class="linecomment">;; 2008/08/10 dadams</span>
<span class="linecomment">;;     Added: icicle-explore, icicle-find-tag-define-candidates (renamed old to *-1),</span>
<span class="linecomment">;;            icicle-search-define-candidates (renamed old to *-1), icicle-search-cleanup,</span>
<span class="linecomment">;;            icicle-(find-tag|search)-(final-act|quit-or-error).</span>
<span class="linecomment">;;     Renamed: icicle-find-tag-define-candidates to icicle-find-tag-define-candidates-1,</span>
<span class="linecomment">;;              icicle-search-define-candidates to icicle-search-define-candidates-1.</span>
<span class="linecomment">;;     Redefined to use icicle-explore: icicle-find-tag, icicle-apply, icicle-search.</span>
<span class="linecomment">;;     icicle-comint-get-final-choice: Use icicle-explore-final-choice (not icicle-search-*).</span>
<span class="linecomment">;; 2008/08/08 dadams</span>
<span class="linecomment">;;     Added: icicle-goto-marker-1 (from icicle-goto-marker):</span>
<span class="linecomment">;;       Use unwind-protect and minibuffer-exit-hook to unhighlight crosshairs.</span>
<span class="linecomment">;;       Provide S-delete: bind icicle-delete-candidate-object.</span>
<span class="linecomment">;;       Require crosshairs.el, hl-line+.el.  Use crosshairs-flash.</span>
<span class="linecomment">;;     icicle-goto(-global)-marker: Use icicle-goto-marker-1.</span>
<span class="linecomment">;; 2008/08/06 dadams</span>
<span class="linecomment">;;     icicle-kmacro(-action):</span>
<span class="linecomment">;;       Better prefix arg treatment.</span>
<span class="linecomment">;;       kmacro-end-or-call-macro if still defining.</span>
<span class="linecomment">;;       No-exit require-match.</span>
<span class="linecomment">;;       Default value if only one.</span>
<span class="linecomment">;;       Minor bug fix (extra candidate).</span>
<span class="linecomment">;;       Name macros just 1, 2..., not macro #1, macro #2...</span>
<span class="linecomment">;; 2008/08/03 dadams</span>
<span class="linecomment">;;     Added: icicle-clear(-current)-history(-1|-entry), icicle-apply-list-action.</span>
<span class="linecomment">;;     icicle-apply: Bind icicle-all-candidates-list-action-fn to icicle-apply-list-action.</span>
<span class="linecomment">;;     Renamed: icicle-all-candidates-action-fn to icicle-all-candidates-list-action-fn,</span>
<span class="linecomment">;;              icicle-candidate-alternative-action-fn to icicle-candidate-alt-action-fn.</span>
<span class="linecomment">;; 2008/07/27 dadams</span>
<span class="linecomment">;;     icicle-recent-file*, icicle-locate-file*: Added date multi-completion, with prefix arg.</span>
<span class="linecomment">;;     Added: icicle-make-file+date-candidate.</span>
<span class="linecomment">;; 2008/07/23 dadams</span>
<span class="linecomment">;;     Renamed: icicle-map(-action) to icicle-apply(-action).  Added defalias for icicle-map.</span>
<span class="linecomment">;; 2008/07/21 dadams</span>
<span class="linecomment">;;     Added: icicle-bbdb-complete-name.  Thx to Ian Swainson.  require of bbdb.el for compile.</span>
<span class="linecomment">;; 2008/07/19 dadams</span>
<span class="linecomment">;;     icicle-Info-menu: Corrected regexp to pick up menu-item default, for Emacs 20.</span>
<span class="linecomment">;; 2008/07/15 dadams</span>
<span class="linecomment">;;     eval-when-compile require of: anything, cookie1, etags, eyedropper/palette, yow.</span>
<span class="linecomment">;;     icicle-customize-apropos-options-of-type: Typo: help-remove-duplicates -&gt; icicle-*.</span>
<span class="linecomment">;;     icicle-send-bug-report: Include emacs-version.</span>
<span class="linecomment">;; 2008/05/16 dadams</span>
<span class="linecomment">;;     icicle-find-first-tag*, icicle-find-tag: Use tags-lazy-completion-table for Emacs 23.</span>
<span class="linecomment">;; 2008/04/25 dadams</span>
<span class="linecomment">;;     icicle-execute-extended-command-1:</span>
<span class="linecomment">;;       Add msg about binding if suggest-key-bindings.  Thx to Jonathan Arkell.</span>
<span class="linecomment">;; 2008/04/14 dadams</span>
<span class="linecomment">;;     icicle-pp-eval-expression: Treat negative prefix arg.</span>
<span class="linecomment">;; 2008/04/13 dadams</span>
<span class="linecomment">;;     icicle-pp-eval-expression:</span>
<span class="linecomment">;;       Treat prefix arg (added optional arg).</span>
<span class="linecomment">;;       Respect eval-expression-debug-on-error and icicle-pp-eval-*.</span>
<span class="linecomment">;; 2008/04/09 dadams</span>
<span class="linecomment">;;     icicle-apropos-(function|command), icicle-imenu-non-interactive-function-p,</span>
<span class="linecomment">;;       icicle-complete-keys-help: Use fboundp, not functionp, to also pick up macros.</span>
<span class="linecomment">;; 2008/04/04 dadams</span>
<span class="linecomment">;;     icicle-bookmark: Bind completion-ignore-case to bookmark-completion-ignore-case.</span>
<span class="linecomment">;;     Added: icicle-bookmark-other-window(-action).</span>
<span class="linecomment">;; 2008/04/01 dadams</span>
<span class="linecomment">;;     icicle-describe-option-of-type: Bind icicle-apropos-complete-match-fn to nil.</span>
<span class="linecomment">;;     icicle-describe-opt-of-type-complete:</span>
<span class="linecomment">;;       Moved icicle-current-completion-mode test out of icicle-delete-if-not (iterates).</span>
<span class="linecomment">;; 2008/03/31 dadams</span>
<span class="linecomment">;;     icicle-locate-file(-other-window), icicle-plist, icicle-describe-option-of-type,</span>
<span class="linecomment">;;       icicle-(var|fun)doc: icicle-highlight-lighter, before gather candidates.</span>
<span class="linecomment">;;     icicle-plist, icicle-describe-option-of-type, icicle-vardoc, icicle-fundoc:</span>
<span class="linecomment">;;       Simplified doc string and prompt wrt C-M-j.</span>
<span class="linecomment">;; 2008/03/30 dadams</span>
<span class="linecomment">;;     icicle-Info-menu: Treat also pseudo-menu at Top.  Thx to William Xu.</span>
<span class="linecomment">;; 2008/03/26 dadams</span>
<span class="linecomment">;;     Added: icicle-Info-menu(-cmd).</span>
<span class="linecomment">;; 2008/03/22 dadams</span>
<span class="linecomment">;;     icicle-other-window-or-frame: Rewrote to use icicle-select-window for all frames or one.</span>
<span class="linecomment">;;     icicle-select-window:</span>
<span class="linecomment">;;       Rewrote: Similar to icicle-select-frame (unique window names).  All frames or one.</span>
<span class="linecomment">;;     Added: icicle-select-window-by-name, icicle-make-window-alist.</span>
<span class="linecomment">;; 2008/03/19 dadams</span>
<span class="linecomment">;;     Added: icicle-pp-eval-expression (old version in icicles-mcmd.el was renamed).</span>
<span class="linecomment">;; 2008/03/11 dadams</span>
<span class="linecomment">;;     icicle-repeat-complex-command: Rewrote doc string.</span>
<span class="linecomment">;; 2008/03/10 dadams</span>
<span class="linecomment">;;     icicle-select-frame: Rewrote to use icicle-select-frame-by-name (unique frame names).</span>
<span class="linecomment">;;     icicle-choose-candidate-of-type: Use icicle-make-frame-alist, not make-frame-alist.</span>
<span class="linecomment">;;     Added: icicle-select-frame-by-name, icicle-make-frame-alist.</span>
<span class="linecomment">;; 2008/03/09 dadams</span>
<span class="linecomment">;;     icicle-dabbrev-completion, icicle-find-tag-define-candidates,</span>
<span class="linecomment">;;       icicle-Info-build-node-completions, icicle-search, icicle-read-color:</span>
<span class="linecomment">;;         Call icicle-highlight-lighter.</span>
<span class="linecomment">;; 2008/03/05 dadams</span>
<span class="linecomment">;;     icicle-map: Don't inhibit sorting.</span>
<span class="linecomment">;;     icicle-goto(-global)-marker: Provide sorting choices.  Highlight target line.</span>
<span class="linecomment">;;     Added: icicle-cdr-less-p.</span>
<span class="linecomment">;; 2008/02/26 dadams</span>
<span class="linecomment">;;     Added: icicle-where-is.</span>
<span class="linecomment">;; 2008/02/23 dadams</span>
<span class="linecomment">;;     icicle-lisp-complete-symbol:</span>
<span class="linecomment">;;       Wrap completing-read in save-excursion, because of icicle-top-level-*-completion-flag.</span>
<span class="linecomment">;;     icicle-search: Use NOWARN arg with find-file-noselect.</span>
<span class="linecomment">;;     Added: icicle-tags-search.</span>
<span class="linecomment">;;     Renamed: icicle-search-tag* to icicle-find-tag*,</span>
<span class="linecomment">;;              icicle-find-tag(-other-window) to icicle-find-first-tag(-other-window).</span>
<span class="linecomment">;; 2008/02/21 dadams</span>
<span class="linecomment">;;     icicle-Info-goto-node: Added .. node for book order.</span>
<span class="linecomment">;;       Use global var icicle-Info-only-rest-of-book-p.  Call icicle-Info-goto-node-1.</span>
<span class="linecomment">;;     icicle-Info-read-node-name: Remove REST-P arg.</span>
<span class="linecomment">;;     icicle-Info-goto-node-action: When rest-of-book-p:</span>
<span class="linecomment">;;       Update node completion table and then completions, and set current candidate number.</span>
<span class="linecomment">;;     Added: icicle-Info-goto-node-1, icicle-Info-build-node-completions(-fix-*).</span>
<span class="linecomment">;; 2008/02/17 dadams</span>
<span class="linecomment">;;     icicle-Info-goto-node:</span>
<span class="linecomment">;;       Moved let to interactive spec, and added two args.  Use icicle-Info-read-node-name.</span>
<span class="linecomment">;;       Negative prefix arg means completions are limited to rest of book.</span>
<span class="linecomment">;;       Add icicle-Info-book-order-p to icicle-sort-functions-alist.</span>
<span class="linecomment">;;       New doc string, to explain everything.</span>
<span class="linecomment">;;     Added: icicle-Info-book-order-p, icicle-Info-read-node-name.</span>
<span class="linecomment">;; 2008/02/16 dadams</span>
<span class="linecomment">;;     icicle-(select|remove|search)-region:</span>
<span class="linecomment">;;       Removed extraneous (setq icicle-candidates-alist) in let binding.</span>
<span class="linecomment">;; 2008/02/13 dadams</span>
<span class="linecomment">;;     Added: icicle-search-tag, icicle-search-tag-define-candidates, icicle-search-tag-action,</span>
<span class="linecomment">;;       icicle-search-tag-help, icicle-pop-tag-mark.</span>
<span class="linecomment">;;     Updated doc string of icicle-find-tag(-other-window).</span>
<span class="linecomment">;; 2008/02/08 dadams</span>
<span class="linecomment">;;     icicle-compilation-search-in-context-fn:</span>
<span class="linecomment">;;       Simplified and corrected.  Dropped let, with-current-buffer.  Narrow to whole line.</span>
<span class="linecomment">;;       Different code for Emacs 22+: Set current error; call compilation-next-error-function.</span>
<span class="linecomment">;;     Removed: icicle-compilation-search-hl-line.</span>
<span class="linecomment">;;     icicle-compilation-search: Soft require hl-line+.</span>
<span class="linecomment">;;                                Don't bind next-error-hook to icicle-*-search-hl-line.</span>
<span class="linecomment">;;     Renamed: icicle-directories-list to icicle-directory-list.</span>
<span class="linecomment">;; 2008/02/07 dadams</span>
<span class="linecomment">;;     icicle-search-action:</span>
<span class="linecomment">;;       Moved icicle-highlight-candidate-* to after icicle-search-in-context-fn call.</span>
<span class="linecomment">;;     icicle-compilation-search-in-context-fn:</span>
<span class="linecomment">;;       Use buffer of marker.  Removed code using overlay buffer.</span>
<span class="linecomment">;;     icicle-compilation-search: Bound icicle-compilation-search-hl-line as next-error-hook.</span>
<span class="linecomment">;;     Added: icicle-compilation-search-hl-line.</span>
<span class="linecomment">;; 2008/02/03 dadams</span>
<span class="linecomment">;;     icicle-file-list: Rewrote using icicle-define-file-command.</span>
<span class="linecomment">;;     icicle-(re)set-option-*: Added boundp before user-variable-p and icicle-binary-option-p.</span>
<span class="linecomment">;;     Added: icicle-directories-list.</span>
<span class="linecomment">;; 2008/01/18 dadams</span>
<span class="linecomment">;;     Moved icicle-complete-keys-alist to icicles-var.el</span>
<span class="linecomment">;; 2008/01/13 dadams</span>
<span class="linecomment">;;     icicle-customize-face(-other-window), icicle-face-list, icicle-read-color:</span>
<span class="linecomment">;;       Use icicle-transform-multi-completion.</span>
<span class="linecomment">;;     icicle-(vardoc|fundoc): Use icicle-funvardoc-action as action fn and as help fn.</span>
<span class="linecomment">;;     icicle-doc: Use icicle-doc-action as action fn and as help fn.</span>
<span class="linecomment">;;     Added: icicle-funvardoc-action, icicle-doc-action.</span>
<span class="linecomment">;;     icicle-search-replace-search-hit: Simplified bind/restore of Icicles completion vars.</span>
<span class="linecomment">;; 2008/01/11 dadams</span>
<span class="linecomment">;;     icicle-search-highlight-and-maybe-replace:</span>
<span class="linecomment">;;       Don't call icicle-update-completions or icicle-display-candidates-in-Completions here.</span>
<span class="linecomment">;;     icicle-search-in-context-default-fn, icicle-compilation-search-in-context-fn:</span>
<span class="linecomment">;;       Call icicle-update-completions (at the end), since not done in i*-and-maybe-replace.</span>
<span class="linecomment">;; 2008/01/08 dadams</span>
<span class="linecomment">;;     icicle-describe-opt-of-type-complete: Treat 3rd arg.  Treat prefix completion.</span>
<span class="linecomment">;; 2008/01/06 dadams</span>
<span class="linecomment">;;     icicle-read-color: Provide color help for C-M-.  Added: icicle-color-help.</span>
<span class="linecomment">;; 2008/01/04 dadams</span>
<span class="linecomment">;;     icicle-doc, icicle-fundoc, icicle-vardoc: Use history variable icicle-doc-history.</span>
<span class="linecomment">;; 2008/01/02 dadams</span>
<span class="linecomment">;;     Added: icicle-search-dired-marked.</span>
<span class="linecomment">;; 2008/01/01 dadams</span>
<span class="linecomment">;;     icicle-(buffer|face|file)-list: Reverse list, so C-! keeps order.</span>
<span class="linecomment">;;     icicle-dired-saved-file-candidates(-other-window):</span>
<span class="linecomment">;;       Convert candidates to relative file names before opening Dired using them.</span>
<span class="linecomment">;;       Error if any candidate is not a file in directory.</span>
<span class="linecomment">;;     Added: icicle-candidate-set-dired-marked-save(-more).</span>
<span class="linecomment">;; 2007/12/31 dadams</span>
<span class="linecomment">;;     Added: icicle-fn-doc-minus-sig.</span>
<span class="linecomment">;;     icicle-fundoc, icicle-doc: Use icicle-fn-doc-minus-sig.</span>
<span class="linecomment">;;     icicle-doc: Bind icicle-transform-function, not icicle-whole-candidate-as-text-prop-p.</span>
<span class="linecomment">;; 2007/12/27 dadams</span>
<span class="linecomment">;;     icicle-describe-option-of-type:</span>
<span class="linecomment">;;       Bind icicle-apropos-complete-match-fn to nil to prevent automatic input match.</span>
<span class="linecomment">;; 2007/12/26 dadams</span>
<span class="linecomment">;;     icicle-describe-opt-of-type-complete: Pretty-print types.  Bind icicle-candidate-help-fn.</span>
<span class="linecomment">;;     Added: icicle-describe-opt-action.</span>
<span class="linecomment">;; 2007/12/24 dadams</span>
<span class="linecomment">;;     icicle-describe-option-of-type:</span>
<span class="linecomment">;;       Rewrote for different kinds of type matching.  TYPE can be a regexp or type sexp.</span>
<span class="linecomment">;;         Diff prefix args for diff behaviors. Handle type inheritance and value-checking.</span>
<span class="linecomment">;;     Added: icicle-describe-opt-of-type-complete.</span>
<span class="linecomment">;; 2007/12/21 dadams</span>
<span class="linecomment">;;     icicle-customize-apropos-options-of-type: help-var-is-* -&gt; icicle-var-is-*.</span>
<span class="linecomment">;; 2007/12/20 dadams</span>
<span class="linecomment">;;     icicle-dired-saved-file-candidates(-*):</span>
<span class="linecomment">;;       Use substitute-command-keys in error msg.  Use generate-new-buffer name, not y-or-n-p.</span>
<span class="linecomment">;; 2007/12/15 dadams</span>
<span class="linecomment">;;     Added: icicle-customize-apropos-options-of-type.</span>
<span class="linecomment">;; 2007/12/11 dadams</span>
<span class="linecomment">;;     icicle-read-color: Don't leave out variable proxies if don't have eyedropper.</span>
<span class="linecomment">;; 2007/12/07 dadams</span>
<span class="linecomment">;;     Added: icicle-describe-option-of-type.</span>
<span class="linecomment">;;     icicle-doc:</span>
<span class="linecomment">;;       Choose kind of doc, instead of showing all (overwriting).</span>
<span class="linecomment">;;       Removed binding of icicle-candidate-properties-alist.</span>
<span class="linecomment">;;     icicle-read-color: Single-quote proxies, don't wrap with `_'.</span>
<span class="linecomment">;; 2007/12/06 dadams</span>
<span class="linecomment">;;     icicle-doc: Forgot to include face doc.</span>
<span class="linecomment">;; 2007/12/03 dadams</span>
<span class="linecomment">;;     Renamed icicle-longest-common-match to icicle-expanded-common-match.</span>
<span class="linecomment">;; 2007/12/02 dadams</span>
<span class="linecomment">;;     icicle-read-color: Include color-valued variables as proxy candidates.</span>
<span class="linecomment">;; 2007/11/30 dadams</span>
<span class="linecomment">;;     icicle-command-abbrev:</span>
<span class="linecomment">;;       Use only membership in icicle-proxy-candidates, not icicle-proxy-candidate property.</span>
<span class="linecomment">;;       So predicate is just commandp, since proxies are not part of regular candidates.</span>
<span class="linecomment">;;     icicle-command-abbrev-action:</span>
<span class="linecomment">;;       Bind to save/restore: icicle-add-proxy-candidates-flag, icicle-proxy-candidates.</span>
<span class="linecomment">;;     icicle-command-abbrev-command: Bind icicle-add-proxy-candidates-flag to nil, to reset.</span>
<span class="linecomment">;; 2007/11/29 dadams</span>
<span class="linecomment">;;     icicle-command-abbrev: Treat icicle-add-proxy-candidates-flag, icicle-proxy-candidates.</span>
<span class="linecomment">;;     icicle-read-color: Don't test icicle-add-proxy-candidates-flag.</span>
<span class="linecomment">;; 2007/11/27 dadams</span>
<span class="linecomment">;;     icicle-command-abbrev: Remove icicle-proxy-candidate property in unwind-protect.</span>
<span class="linecomment">;; 2007/11/26 dadams</span>
<span class="linecomment">;;     icicle-get-anything-candidates: Fixed for try-completion and test-completion cases.</span>
<span class="linecomment">;;     icicle-choose-anything-candidate: Bind icicle-candidates-alist to actions (two places).</span>
<span class="linecomment">;; 2007/11/25 dadams</span>
<span class="linecomment">;;     Added: icicle-command-abbrev(-action|-command|-matching-commands|-record|regexp).</span>
<span class="linecomment">;; 2007/11/24 dadams</span>
<span class="linecomment">;;     icicle-execute-extended-command: Bind use-file-dialog to nil.</span>
<span class="linecomment">;; 2007/11/17 dadams</span>
<span class="linecomment">;;     icicle-read-color:</span>
<span class="linecomment">;;       Respect icicle-add-proxy-candidates-flag.  Convert proxy multi-completions to strings.</span>
<span class="linecomment">;; 2007/11/03 dadams</span>
<span class="linecomment">;;     icicle-generic-S-tab: Doc string - mention icicle-generic-S-tab-keys.</span>
<span class="linecomment">;; 2007/10/28 dadams</span>
<span class="linecomment">;;     icicle-search: Don't bind icicle-expand-input-to-common-match-flag.  Updated doc string.</span>
<span class="linecomment">;;     icicle-search-highlight-all-input-matches:</span>
<span class="linecomment">;;       Don't set icicle-search-lcm unless icicle-expand-input-to-common-match-flag.</span>
<span class="linecomment">;;     icicle-search-highlight-and-maybe-replace:</span>
<span class="linecomment">;;       Match the lcm if icicle-search-replace-common-match-flag is non-nil.</span>
<span class="linecomment">;;       Save icicle-candidate-nb around icicle-update-completions.</span>
<span class="linecomment">;;       Set icicle-candidate-nb to 0 if nil.</span>
<span class="linecomment">;;     icicle-search-highlight-input-matches-here:</span>
<span class="linecomment">;;       Don't delete icicle-search-refined-overlays if icicle-*-all-current-flag.</span>
<span class="linecomment">;; 2007/10/26 dadams</span>
<span class="linecomment">;;     icicle-search-highlight-all-input-matches: Loop through overlays twice, to get the lcm.</span>
<span class="linecomment">;;     icicle-search-highlight-input-matches-here: Highlight the lcm, if available.</span>
<span class="linecomment">;;     icicle-search: Bind icicle-search-lcm.</span>
<span class="linecomment">;; 2007/10/22 dadams</span>
<span class="linecomment">;;    icicle-read-color: Use special-candidate face for pseudo color candidates.</span>
<span class="linecomment">;;    icicle-add-key+cmd: Don't include keys bound to undefined.</span>
<span class="linecomment">;; 2007/10/20 dadams</span>
<span class="linecomment">;;    icicle-read-color, icicle-remove-color-duplicates:</span>
<span class="linecomment">;;      Treat pseudo colors too (e.g. *point foreground*).</span>
<span class="linecomment">;;    icicle-make-color-candidate: Added optional HEX-RGB arg.</span>
<span class="linecomment">;; 2007/10/16 dadams</span>
<span class="linecomment">;;     icicle-vardoc: Prefix arg means use only user options.</span>
<span class="linecomment">;; 2007/10/14 dadams</span>
<span class="linecomment">;;     Updated doc strings to reflect new icicle-act-before-cycle-flag change.</span>
<span class="linecomment">;; 2007/10/13 dadams</span>
<span class="linecomment">;;     icicle-get-anything-candidates:</span>
<span class="linecomment">;;       If candidates is a fn, return fn that's useful for all-completions.  Filter by input.</span>
<span class="linecomment">;;     icicle-choose-anything-candidate:</span>
<span class="linecomment">;;       Don't sort or transform cands.  Respect Anything's require-pattern and delayed</span>
<span class="linecomment">;;       settings.  Bind icicle-candidates-alist to candidates, if that's a function.</span>
<span class="linecomment">;;     icicle-get-anything-candidates-of-type: Don't use mapcar if candidates is a function.</span>
<span class="linecomment">;;     Added: icicle-get-anything-req-pat-chars, icicle-get-anything-input-delay.</span>
<span class="linecomment">;; 2007/10/06 dadams</span>
<span class="linecomment">;;     icicle-choose-candidate-of-type: Added entry for file type.</span>
<span class="linecomment">;; 2007/09/25 dadams</span>
<span class="linecomment">;;     icicle-doc: Bind icicle-whole-candidate-as-text-prop-p to treat full candidates.</span>
<span class="linecomment">;; 2007/09/04 dadams</span>
<span class="linecomment">;;     icicle-read-color: Added optional PROMPT arg.</span>
<span class="linecomment">;; 2007/08/31 dadams</span>
<span class="linecomment">;;     icicle-buffer-list: Prefix arg means only buffers visiting files are candidates.</span>
<span class="linecomment">;;     icicle-search-where-arg, icicle-occur:</span>
<span class="linecomment">;;       Prefix arg 99 means only buffers visiting files are candidates.</span>
<span class="linecomment">;;     Added: icicle-search-choose-buffers.</span>
<span class="linecomment">;; 2007/08/27 dadams</span>
<span class="linecomment">;;     icicle-search-action: Fixed for return value.  Display the error message.</span>
<span class="linecomment">;; 2007/08/25 dadams</span>
<span class="linecomment">;;     icicle-choose-candidate-of-type: Removed (&gt; emacs-major-version 21) restriction.</span>
<span class="linecomment">;; 2007/08/25 dadams</span>
<span class="linecomment">;;     Added: a, any, buffer, file, icicle-get-anything-(types|(default-)actions-for-type|</span>
<span class="linecomment">;;            candidates-of-type|(cached-)candidates), icicle-anything(-candidate-value),</span>
<span class="linecomment">;;            what-which-how, icicle-choose-anything-candidate.</span>
<span class="linecomment">;;     Renamed icicle-clear-option to clear-option.</span>
<span class="linecomment">;;     icicle-object-action: Treat Anything stuff.</span>
<span class="linecomment">;;       Added optional type arg.  Use vars icicle-object-(named|predicate)-types.</span>
<span class="linecomment">;;       Move icicle-read-var-value-satisfying call here from icicle-choose-candidate-of-type.</span>
<span class="linecomment">;;     icicle-choose-candidate-of-type: Create buffer if needed.</span>
<span class="linecomment">;;     Protected alias definitions with icicle-define-alias-commands-flag.</span>
<span class="linecomment">;;     icicle-map(-action):</span>
<span class="linecomment">;;       Use icicle-whole-candidate-as-text-prop-p and new icicle-get-alist-candidate.</span>
<span class="linecomment">;;     icicle-(select|remove|search)-region, icicle-search:</span>
<span class="linecomment">;;       Bind/use icicle-whole-candidate-as-text-prop-p.</span>
<span class="linecomment">;;     icicle-occur: Require buffer names to match existing buffers.  Thx to Hadron Quark.</span>
<span class="linecomment">;; 2007/08/15 dadams</span>
<span class="linecomment">;;     Added command toggle as alias for icicle-toggle-option.</span>
<span class="linecomment">;; 2007/08/09 dadams</span>
<span class="linecomment">;;     Soft require kmacro.  Define icicle-kmacro* if kmacro gets loaded.</span>
<span class="linecomment">;; 2007/07/27 dadams</span>
<span class="linecomment">;;     icicle-search: Renamed icicle-act-first-then-navigate-p to icicle-act-before-cycle-flag.</span>
<span class="linecomment">;; 2007/07/22 dadams</span>
<span class="linecomment">;;     icicle-customize-face: Added prefix arg to give vanilla completion.</span>
<span class="linecomment">;;     Added: icicle-customize-face-other-window.</span>
<span class="linecomment">;;     Replace standard customize-face(-other-window) by icicle-customize-face(-other-window).</span>
<span class="linecomment">;;     No longer require icicles-mode.el.</span>
<span class="linecomment">;;     Require cus-edit.el (not just at compile time).</span>
<span class="linecomment">;; 2007/07/08 dadams</span>
<span class="linecomment">;;     Added: icicle-customize-faces.</span>
<span class="linecomment">;;     icicle-customize-face: Bind icicle-all-candidates-action-fn to icicle-customize-faces.</span>
<span class="linecomment">;; 2007/06/23 dadams</span>
<span class="linecomment">;;     icicle-search-read-context-regexp, icicle-search-read-word, icicle-search-property-args,</span>
<span class="linecomment">;;      icicle-add-region, icicle-save-string-to-variable:</span>
<span class="linecomment">;;        Use icicle-completing-read-history, not read-from-minibuffer or read-string.</span>
<span class="linecomment">;;     icicle-face-list: Bound icicle-list-nth-parts-join-string etc.</span>
<span class="linecomment">;;     Moved to icicles-fn.el: icicle-read-from-minibuf-nil-default.</span>
<span class="linecomment">;; 2007/06/22 dadams</span>
<span class="linecomment">;;     Added: icicle-group-regexp, icicle-keyword-list, icicle-search-keywords.</span>
<span class="linecomment">;; 2007/06/21 dadams</span>
<span class="linecomment">;;     icicle-plist, icicle-(var|fun)doc, icicle-region-add-buffers, icicle-search-regexp-scan,</span>
<span class="linecomment">;;      icicle-search-char-property-scan:</span>
<span class="linecomment">;;        Use face icicle-candidate-part, not icicle-special-candidate.</span>
<span class="linecomment">;;     icicle-add-key+cmd: Highlight key side of the pair (key  =  binding).</span>
<span class="linecomment">;; 2007/06/18 dadams</span>
<span class="linecomment">;;     Added: icicle-customize-face.</span>
<span class="linecomment">;; 2007/06/17 dadams</span>
<span class="linecomment">;;     icicle-make-color-candidate: Respect icicle-WYSIWYG-Completions-flag.</span>
<span class="linecomment">;;     icicle-search-action: Added priority in call to icicle-place-overlay.</span>
<span class="linecomment">;; 2007/06/12 dadams</span>
<span class="linecomment">;;     icicle-execute-extended-command(-1):</span>
<span class="linecomment">;;       i-e-e-c-1 prepares the new last command, but i-e-e-c sets it, at end, to this-command.</span>
<span class="linecomment">;; 2007/06/10 dadams</span>
<span class="linecomment">;;     Added: icicle-comint-hook-fn, icicle-compilation-hook-fn.</span>
<span class="linecomment">;;     Removed unconditional add-hooks for comint-mode-hook and compilation(minor)-mode-hook.</span>
<span class="linecomment">;; 2007/06/09 dadams</span>
<span class="linecomment">;;     icicle-set-option-to-t, icicle-reset-option-to-nil, icicle-delete-windows,</span>
<span class="linecomment">;;      icicle-add-buffer-candidate, icicle-remove-buffer-candidate, icicle-buffer-list,</span>
<span class="linecomment">;;      icicle-remove-buffer-config, icicle-face-list, icicle-file-list,</span>
<span class="linecomment">;;      icicle-remove-all-regions-in-buffer, icicle-delete-file:</span>
<span class="linecomment">;;        Bind icicle-use-candidates-only-once-flag to t.</span>
<span class="linecomment">;;     icicle-set-option-to-t, icicle-clear-option: Candidate vars must have value nil/non-nil.</span>
<span class="linecomment">;;     icicle-search-regexp-scan: Added eobp test and empty hit-string test.</span>
<span class="linecomment">;;     icicle-select-(frame|window), icicle-delete-windows:</span>
<span class="linecomment">;;       Removed extra t arg to icicle-define-command.</span>
<span class="linecomment">;; 2007/06/08 dadams</span>
<span class="linecomment">;;     Added icicle-find-tag(-other-window).</span>
<span class="linecomment">;; 2007/06/07 dadams</span>
<span class="linecomment">;;     Renamed: icicle-font-history to icicle-font-name-history,</span>
<span class="linecomment">;;              icicle-function-history to icicle-function-name-history,</span>
<span class="linecomment">;;              icicle-variable-history to  icicle-variable-name-history.</span>
<span class="linecomment">;;     Use standard history variable if bound, else use Icicles history variable:</span>
<span class="linecomment">;;       bookmark-history, color-history, color-theme-history, face-name-history,</span>
<span class="linecomment">;;       font-name-history, frame-name-history, function-name-history, variable-name-history</span>
<span class="linecomment">;; 2007/06/05 dadams</span>
<span class="linecomment">;;     Don't require hexrgb.el if no window system.</span>
<span class="linecomment">;;     icicle-read-color: Use featurep, not require, for hexrgb.</span>
<span class="linecomment">;;     icicle-make-color-candidate: Error if hexrgb is not loaded.</span>
<span class="linecomment">;; 2007/05/31 dadams</span>
<span class="linecomment">;;     icicle-execute-extended-command-1: Set, don't bind this-command.</span>
<span class="linecomment">;;     icicle-execute-extended-command, icicle-execute-named-keyboard-macro:</span>
<span class="linecomment">;;       Simpler save and restore of last-command.</span>
<span class="linecomment">;; 2007/05/28 dadams</span>
<span class="linecomment">;;     icicle-imenu: Use same prefix-arg behavior as icicle-search (search multiple...).</span>
<span class="linecomment">;;     Added: icicle-imenu-(command|non-interactive-function(-p)).</span>
<span class="linecomment">;;     icicle-search-highlight-context-levels:</span>
<span class="linecomment">;;       Wrapped loop in condition-case.  Took max-levels determination out of loop.</span>
<span class="linecomment">;; 2007/05/25 dadams</span>
<span class="linecomment">;;     Added: icicle-face-list, icicle-next-single-char-property-change,</span>
<span class="linecomment">;;            icicle-search-(where-arg|property-args|char-property(-scan)|overlay-property),</span>
<span class="linecomment">;;            icicle-char-properties-in-buffer(s).</span>
<span class="linecomment">;;     Removed: icicle-text-properties-in-buffer(s), icicle-search-text-property-scan.</span>
<span class="linecomment">;;     icicle-search(-word): Use icicle-search-where-arg.</span>
<span class="linecomment">;; 2007/05/21 dadams</span>
<span class="linecomment">;;     Added: icicle-search-(buffer|file|all-regions).</span>
<span class="linecomment">;;     icicle-imenu: Fixed treatment of prefix arg.</span>
<span class="linecomment">;;     icicle-imenu-command-p: Fix to work also with Emacs 22 and  21.</span>
<span class="linecomment">;; 2007/05/14 dadams</span>
<span class="linecomment">;;     icicle-execute-extended-command-1: Error if empty command name.</span>
<span class="linecomment">;; 2007/05/12 dadams</span>
<span class="linecomment">;;     icicle-imenu: Added prefix arg for search for commands and non-cmds in Emacs-Lisp mode.</span>
<span class="linecomment">;;     Added: icicle-imenu-command-p.</span>
<span class="linecomment">;; 2007/05/11 dadams</span>
<span class="linecomment">;;     icicle-search-define-candidates:</span>
<span class="linecomment">;;       Move scan-fn-or-regexp to 4th arg from 2nd.  Removed &optional.</span>
<span class="linecomment">;;       Apply icicle-search-regexp-scan to args also.</span>
<span class="linecomment">;;     icicle-search-regexp-scan: Treat predicate.</span>
<span class="linecomment">;;       Move regexp to 3rd arg from 2nd, and add predicate arg.  Removed &optional.</span>
<span class="linecomment">;;     icicle-search-regexp-scan, icicle-search-text-property-scan:</span>
<span class="linecomment">;;       Add lengths of temp-list and icicle-candidates-alist.</span>
<span class="linecomment">;;     icicle-search-text-property(-scan): Added predicate argument.</span>
<span class="linecomment">;;     icicle-search-region-action: Bind icicle-candidate-action-fn to icicle-search-action.</span>
<span class="linecomment">;;     icicle-(select|search|remove)-region: Removed temp var bound to (icicle-region-sorted).</span>
<span class="linecomment">;;     icicle-search: Mention predicate in no-match message.</span>
<span class="linecomment">;; 2007/05/07 dadams</span>
<span class="linecomment">;;     icicle-add-buffer-config: Added history args for icicle-read-from-minibuf-nil-default.</span>
<span class="linecomment">;; 2007/05/06 dadams</span>
<span class="linecomment">;;     icicle-search: Bind icicle-must-pass-predicate to icicle-search-context-match-predicate.</span>
<span class="linecomment">;;     icicle-search-read-context-regexp: Don't accept an empty regexp.</span>
<span class="linecomment">;;     Changed S-C- to C-S- and M-C- to C-M- in doc.</span>
<span class="linecomment">;; 2007/05/04 dadams</span>
<span class="linecomment">;;     icicle-(re)set-option-to-(nil|t), icicle-toggle-option: Enable recursive minibuffers.</span>
<span class="linecomment">;; 2007/05/02 dadams</span>
<span class="linecomment">;;     icicle-search-read-word: Updated doc string.</span>
<span class="linecomment">;;     icicle-search: Respect icicle-search-whole-word-flag and icicle-regexp-quote-flag.</span>
<span class="linecomment">;;                    Single message for non-existent buffers.</span>
<span class="linecomment">;;     icicle-select-region-action: Message for non-existent file.</span>
<span class="linecomment">;;     Added empty defvars for Emacs 22 standard vars, to quiet byte compiler.</span>
<span class="linecomment">;; 2007/05/01 dadams</span>
<span class="linecomment">;;     icicle-execute-extended-command-1:</span>
<span class="linecomment">;;       Don't bind icicle-candidate-action-fn if we have already read command name.</span>
<span class="linecomment">;;     icicle-search-*-scan: Fill, reverse temp list, then append to icicle-candidates-alist.</span>
<span class="linecomment">;;     Added: icicle-search-word, icicle-search-read-word.</span>
<span class="linecomment">;; 2007/04/29 dadams</span>
<span class="linecomment">;;     icicle-search, icicle-search-text-property, icicle-text-properties-in-buffers:</span>
<span class="linecomment">;;       Allow search of multiple files.  Change prefix arg accordingly.</span>
<span class="linecomment">;; 2007/04/28 dadams</span>
<span class="linecomment">;;     Added: icicle-compilation-search-in-context-fn, icicle-search-in-context-default-fn,</span>
<span class="linecomment">;;            icicle-search-highlight-and-maybe-replace.</span>
<span class="linecomment">;;     icicle-search-action: Move code to the new functions.  Use icicle-search-in-context-fn.</span>
<span class="linecomment">;;     icicle-compilation-search: Rewrote.</span>
<span class="linecomment">;;       No longer use compile-goto-error as icicle-search-hook.</span>
<span class="linecomment">;;       Use icicle-compilation-search-in-context-fn.</span>
<span class="linecomment">;;       Cannot-replace error msg if not Emacs 22, since no compilation-highlight-overlay.</span>
<span class="linecomment">;;       Provide .* regexp and do not highlight - as in icicle-occur.</span>
<span class="linecomment">;; 2007/04/22 dadams</span>
<span class="linecomment">;;     icicle-search: Allow for pre-bound icicle-candidate(-alternative)-action-fn.</span>
<span class="linecomment">;;     icicle-search-replace-search-hit:</span>
<span class="linecomment">;;       Call icicle-candidate-action-fn, not necessarily icicle-search-action.</span>
<span class="linecomment">;; 2007/04/20 dadams</span>
<span class="linecomment">;;     Added: icicle-search-highlight-context-levels.  Use in icicle-search-action.</span>
<span class="linecomment">;;     icicle-search-highlight-cleanup: Delete icicle-search-level-overlays.</span>
<span class="linecomment">;;     icicle-search: Set icicle-search-context-regexp nil if scan-fn-or-regexp is not string.</span>
<span class="linecomment">;;     icicle-search-replace-fixed-case-p: Return nil if arg is nil.</span>
<span class="linecomment">;;     icicle-search-read-context-regexp: Use default with read-number; protect with fboundp.</span>
<span class="linecomment">;;     Added soft require of strings.el.</span>
<span class="linecomment">;; 2007/04/18 dadams</span>
<span class="linecomment">;;     Added: icicle-search-replace-fixed-case-p.  Use in icicle-search-action.</span>
<span class="linecomment">;;     icicle-search-action:</span>
<span class="linecomment">;;       Set match data to region when icicle-search-replace-whole-candidate-flag is t.</span>
<span class="linecomment">;;       Don't search for icicle-search-context-regexp.</span>
<span class="linecomment">;;     icicle-search-replace-match: Added fixedcase arg.</span>
<span class="linecomment">;;                                  Use icicle-search-replace-literally-flag.</span>
<span class="linecomment">;;     Use replace-match-maybe-edit (Emacs 22), not replace-match, and save and restore stuff.</span>
<span class="linecomment">;;     icicle-search-replace-search-hit:</span>
<span class="linecomment">;;       Use regexp-history in read-string.  Use icicle-search-define-replacement.</span>
<span class="linecomment">;; 2007/04/17 dadams</span>
<span class="linecomment">;;     Added: icicle-search-replace-match.  Treat Emacs&lt;22 also.  Use in icicle-search-action.</span>
<span class="linecomment">;;     icicle-search-replace-search-hit: Use regexp-history in read-string.</span>
<span class="linecomment">;; 2007/04/16 dadams</span>
<span class="linecomment">;;     icicle-search-action: Use replace-count.</span>
<span class="linecomment">;;     icicle-search: Initialize replace-count to 0.</span>
<span class="linecomment">;; 2007/04/15 dadams</span>
<span class="linecomment">;;     icicle-search-action: Allow \,... etc. replacement.</span>
<span class="linecomment">;;       Use query-replace-compile-replacement and replace-match, with error treatment.</span>
<span class="linecomment">;;       Removed unwind-protect.  Removed %s from error-msg return.</span>
<span class="linecomment">;;     icicle-search: Save search string as icicle-search-context-regexp.</span>
<span class="linecomment">;;                    Use "%s" for error message in failure error call.</span>
<span class="linecomment">;;                    Updated doc string for lisp-eval replacement etc.</span>
<span class="linecomment">;;     *(-all)-input-matches(-here): save-match-data around input matching.</span>
<span class="linecomment">;;     icicle-search-highlight-input-matches-here: Added not eobp to loop test.</span>
<span class="linecomment">;; 2007/04/13 dadams</span>
<span class="linecomment">;;     icicle-search-highlight-input-matches-here: Bound free var ov.</span>
<span class="linecomment">;; 2007/04/10 dadams</span>
<span class="linecomment">;;     icicle-search-regexp-scan:</span>
<span class="linecomment">;;       Use match indicated by icicle-search-context-level as context.</span>
<span class="linecomment">;;     Added: icicle-search-read-context-regexp.</span>
<span class="linecomment">;;     icicle-search(-region|-regexp-scan): Use icicle-search-read-context-regexp.</span>
<span class="linecomment">;; 2007/04/08 dadams</span>
<span class="linecomment">;;     icicle-map-action, icicle-search-action:</span>
<span class="linecomment">;;       Return nil for success, error msg for failure (it was reversed).</span>
<span class="linecomment">;;       Use icicle-highlight-candidate-in-Completions.</span>
<span class="linecomment">;;     icicle-map-action: Moved minibuffer frame selection to unwind-protect final clause.</span>
<span class="linecomment">;;     icicle-search: Give focus to original frame, in unwinding clause (C-g).</span>
<span class="linecomment">;;     Added: icicle-search-highlight-input-matches-here.</span>
<span class="linecomment">;;     icicle-search-highlight-all-input-matches: Highlight all input matches in candidate.</span>
<span class="linecomment">;;     icicle-search-replace-search-hit:</span>
<span class="linecomment">;;       Use 0 if icicle-candidate-nb is nil.  Display completions.</span>
<span class="linecomment">;;       Save and restore: icicle-last-completion-command, icicle-last-input.</span>
<span class="linecomment">;;       Prevent using same string as candidate for replacement.</span>
<span class="linecomment">;;     icicle-search-action: Rewrote.  Enable repeated replacment of input matches.</span>
<span class="linecomment">;;       Save and restore icicle-candidate-nb.  Wrap it around if at end.</span>
<span class="linecomment">;;       Warn about empty input for whole-candidate replacement.</span>
<span class="linecomment">;;       Update icicle-last-completion-candidate.  Display completions.</span>
<span class="linecomment">;; 2007/04/07 dadams</span>
<span class="linecomment">;;     icicle-search: Added query-replace functionality.</span>
<span class="linecomment">;;       Navigate first, then act (C-next).</span>
<span class="linecomment">;;       Give focus to last frame searched.</span>
<span class="linecomment">;;       Bind: icicle-candidate-alternative-action-fn, icicle-inhibit-sort-p,</span>
<span class="linecomment">;;             icicle-searching-p, icicle-expand-input-to-common-match-flag.</span>
<span class="linecomment">;;       Bind icicle-buffer-require-match-flag to partial-match-ok in interactive spec.</span>
<span class="linecomment">;;     icicle-search-action:</span>
<span class="linecomment">;;       Added optional replace arg: if non-nil, then fn becomes a replace action.</span>
<span class="linecomment">;;     Added: icicle-search-replace-search-hit, icicle-search-replace-candidate,</span>
<span class="linecomment">;;     icicle-buffer-list: Bind all the stuff that is bound in icicle-buffer.</span>
<span class="linecomment">;; 2007/04/06 dadams</span>
<span class="linecomment">;;     icicle-execute-extended-command-1:</span>
<span class="linecomment">;;       Bind this-command, but only around call to cmd - don't set it.</span>
<span class="linecomment">;; 2007/04/02 dadams</span>
<span class="linecomment">;;     Added: icicle-search-text-property, icicle-search-text-property-scan,</span>
<span class="linecomment">;;            icicle-text-properties-in-buffer(s).</span>
<span class="linecomment">;;     icicle-search:</span>
<span class="linecomment">;;       Added &rest args.  Updated doc string.  Don't read regexp or reverse alist here.</span>
<span class="linecomment">;;       Use icicle-search-define-candidates, not icicle-search-regexp-scan.</span>
<span class="linecomment">;;     icicle-search-regexp-scan: Read regexp here.  Reverse alist here.</span>
<span class="linecomment">;;     Moved to icicles-fn.el: icicle-filter-alist, icicle-first-matching-candidate.</span>
<span class="linecomment">;;     Renamed: icicle-search-region-beg-end to icicle-region-or-buffer-limits.</span>
<span class="linecomment">;; 2007/04/01 dadams</span>
<span class="linecomment">;;     icicle-repeat-complex-command:</span>
<span class="linecomment">;;       Remove duplicates and sort entries, but only for reading command to eval.</span>
<span class="linecomment">;; 2007/03/31 dadams</span>
<span class="linecomment">;;     icicle-lisp-complete-symbol: Bind icicle-top-level-when-sole-completion-flag to t.</span>
<span class="linecomment">;; 2007/03/27 dadams</span>
<span class="linecomment">;;     icicle-search: Hard-code C-next key in message.</span>
<span class="linecomment">;;     icicle-search-regexp-scan: Initialize last-beg for first time.</span>
<span class="linecomment">;; 2007/03/23 dadams</span>
<span class="linecomment">;;     icicle-execute-extended-command-1:</span>
<span class="linecomment">;;       Don't restore last-command.  Run (pre|post)-command-hook.  Set, don't bind,</span>
<span class="linecomment">;;       this-command.  enable-recursive-minibuffers for interactive call of cmd.</span>
<span class="linecomment">;;     icicle-execute-extended-command, icicle-execute-named-keyboard-macro:</span>
<span class="linecomment">;;       Restore last-command at end.</span>
<span class="linecomment">;; 2007/03/20 dadams</span>
<span class="linecomment">;;     icicle-execute-extended-command-1: When wrong-number-of-args, icicle-help-on-candidate.</span>
<span class="linecomment">;; 2007/03/14 dadams</span>
<span class="linecomment">;;     icicle-dired-saved-file-candidates, icicle-buffer, icicle-(find|locate|recent)-file:</span>
<span class="linecomment">;;       Put 200 as value of property icicle-Completions-window-max-height.</span>
<span class="linecomment">;;     Added ;;;###autoload for icicle-define*.</span>
<span class="linecomment">;; 2007/03/09 dadams</span>
<span class="linecomment">;;     icicle-search, icicle-map, icicle-(remove|search|select)-region, icicle-imenu,</span>
<span class="linecomment">;;     icicle-occur, icicle-compilation-search:</span>
<span class="linecomment">;;       Bound icicle-transform-function to nil if interactive-p.</span>
<span class="linecomment">;;     icicle-comint-search: Updated doc string to mention false positives in command matching.</span>
<span class="linecomment">;;     Removed eval-when-compile from requires of Icicles libraries (except icicle-mac.el).</span>
<span class="linecomment">;; 2007/03/08 dadams</span>
<span class="linecomment">;;     icicle-insert-kill: Bound icicle-delete-candidate-object.</span>
<span class="linecomment">;; 2007/03/07 dadams</span>
<span class="linecomment">;;     icicle-delete-windows, icicle-map-action, icicle-search-action,</span>
<span class="linecomment">;;     icicle-choose-candidate-of-type, icicle-complete-keys-help:</span>
<span class="linecomment">;;       Use 0, not t, as frame arg to get-buffer-window.</span>
<span class="linecomment">;; 2007/03/06 dadams</span>
<span class="linecomment">;;     icicle-search, icicle-map, icicle-(remove|search|select)-region:</span>
<span class="linecomment">;;       Bind icicle-inhibit-sort-p to non-nil to prevent user sorting.</span>
<span class="linecomment">;;       Update doc string to mention that you cannot sort candidates.</span>
<span class="linecomment">;;     icicle-(remove|search|select)-region: Sort candidates by buffer and then by tag.</span>
<span class="linecomment">;;     icicle-search-region: Bound icicle-delete-candidate-object.</span>
<span class="linecomment">;;     icicle-search, icicle-map: Don't add or subtract one from candidate # if use action fn.</span>
<span class="linecomment">;;     icicle-search:</span>
<span class="linecomment">;;       If require-match, set icicle-completion-candidates and marker to reflect final choice.</span>
<span class="linecomment">;;     Renamed: icicle-get-current-candidate to icicle-get-alist-candidate.</span>
<span class="linecomment">;;     Added: icicle-region-sorted, icicle-region-add-buffers.</span>
<span class="linecomment">;; 2007/03/04 dadams</span>
<span class="linecomment">;;     icicle-get-current-candidate: Return nil if icicle-candidates-alist is nil.</span>
<span class="linecomment">;; 2007/03/02 dadams</span>
<span class="linecomment">;;     icicle-remove-buffer-config, icicle-remove-buffer-candidate: Removed extraneous quote.</span>
<span class="linecomment">;;     icicle-(find|recent)-file(-other-window): Bound icicle-delete-candidate-object.</span>
<span class="linecomment">;; 2007/02/28 dadams</span>
<span class="linecomment">;;     icicle-buffer-list, icicle-color-theme: Bound icicle-delete-candidate-object.</span>
<span class="linecomment">;; 2007/02/27 dadams</span>
<span class="linecomment">;;     icicle-recent-file(-other-window): Changed INITIAL-INPUT completing-read arg to nil.</span>
<span class="linecomment">;; 2007/02/25 dadams</span>
<span class="linecomment">;;     Added: icicle-remove-buffer-candidate-action, icicle-remove-buffer-config-action.</span>
<span class="linecomment">;;     icicle-add-buffer-candidate, icicle-bookmark, icicle-buffer-config:</span>
<span class="linecomment">;;       Bound icicle-delete-candidate-object.</span>
<span class="linecomment">;; 2007/02/24 dadams</span>
<span class="linecomment">;;     Added: icicle-kill-a-buffer-and-update-completions (was kill-a-buffer),</span>
<span class="linecomment">;;            icicle-delete-region-from-alist.</span>
<span class="linecomment">;;     icicle-delete-window: Use icicle-kill-a-buffer...-completions, not icicle-kill-a-buffer.</span>
<span class="linecomment">;;     icicle-buffer(-other-window), icicle-choose-candidate-of-type:</span>
<span class="linecomment">;;       Bind icicle-delete-candidate-object to icicle-kill-a-buffer.</span>
<span class="linecomment">;;       Bind icicle-sort-function to self if icicle-buffer-sort-function is nil.</span>
<span class="linecomment">;;     icicle-select-region:</span>
<span class="linecomment">;;       Bind icicle-delete-candidate-object to icicle-delete-region-from-alist.</span>
<span class="linecomment">;;     icicle-remove-region: Rewrote.</span>
<span class="linecomment">;;       Use icicle-delete-region-from-alist.</span>
<span class="linecomment">;;       Use icicle-remove-candidate-display-others, but don't redisplay unless completing.</span>
<span class="linecomment">;;       Respect icicle-add-buffer-name-flag (append buffer names).</span>
<span class="linecomment">;; 2007/02/20 dadams</span>
<span class="linecomment">;;     Added: icicle-search-region-action.  Open file associated with candidate.</span>
<span class="linecomment">;;     icicle-search-region:</span>
<span class="linecomment">;;       Use icicle-search-region-action.  Updated doc string.  Bind icicle-list-*.</span>
<span class="linecomment">;;       Fix default completing-read value.  Respect icicle-add-buffer-name-flag.</span>
<span class="linecomment">;;     icicle-select-region-action: Open file associated with candidate.</span>
<span class="linecomment">;;     icicle-region-open-all-files: Ignore files that are not readable.</span>
<span class="linecomment">;;     icicle-regions: Remove only non-existent buffers that are not associated with files.</span>
<span class="linecomment">;; 2007/02/19 dadams</span>
<span class="linecomment">;;     Added: icicle-region-open-all-files.</span>
<span class="linecomment">;;     icicle-(search|select)-region, icicle-search: Use icicle-region-open-all-files.</span>
<span class="linecomment">;;     icicle-add-region: Add file name to region entry in alist.</span>
<span class="linecomment">;;     icicle-select-region-action, icicle-region-help, icicle-search:</span>
<span class="linecomment">;;       Updated selectors for point and mark, because of addition of file name.</span>
<span class="linecomment">;;     icicle-region-help: Add file name to help message.</span>
<span class="linecomment">;; 2007/02/18 dadams</span>
<span class="linecomment">;;     Added: icicle-first-matching-candidate.</span>
<span class="linecomment">;;     icicle-get-current-candidate: Use icicle-first-matching-candidate, not assoc.</span>
<span class="linecomment">;; 2007/02/07 dadams</span>
<span class="linecomment">;;     icicle-search-action: Make *Completions* window dedicated.  Thx to Peter Povinec.</span>
<span class="linecomment">;; 2007/02/07 dadams</span>
<span class="linecomment">;;     icicle-search: pop-to-buffer and raise frame. Don't select orig-window.</span>
<span class="linecomment">;; 2007/02/06 dadams</span>
<span class="linecomment">;;     icicle-search, icicle-select-region, icicle-search-regexp-scan:</span>
<span class="linecomment">;;       Respect icicle-add-buffer-name-flag.</span>
<span class="linecomment">;;     icicle-search: Bound icicle-show-Completions-initially-flag to t.</span>
<span class="linecomment">;;                    Bound icicle-candidate-help-fn to icicle-search-help.</span>
<span class="linecomment">;;     icicle-search-regexp-scan: nil BUFFER arg means current buffer now.</span>
<span class="linecomment">;;     icicle-search-action, icicle-filter-alist: Treat multi-completion case also.</span>
<span class="linecomment">;;     Added: icicle-search-help.</span>
<span class="linecomment">;;     icicle-map-action, icicle-search-action: Removed unused local var, curr-cand-string.</span>
<span class="linecomment">;;     icicle-select-region, icicle-remove-region, icicle-search-region:</span>
<span class="linecomment">;;       Use icicle-candidates-alist, not regions-w-buffers (but bind it locally too).</span>
<span class="linecomment">;;     Renamed: icicle-get-current-region-candidate to icicle-get-current-candidate.</span>
<span class="linecomment">;;     icicle-region-help: Provide region limits also.</span>
<span class="linecomment">;;     Added note to some doc strings that the command is for Icicle mode only.</span>
<span class="linecomment">;; 2007/02/02 dadams</span>
<span class="linecomment">;;     icicle-search: Test for buffers, not buffer names, in WHERE.  Thx to Peter Povinec.</span>
<span class="linecomment">;;     icicle-buffer-list: Return the list of buffers.</span>
<span class="linecomment">;; 2007/01/28 dadams</span>
<span class="linecomment">;;     icicle-complete-keys:</span>
<span class="linecomment">;;       Bind icicle-sort-functions-alist, using icicle-command-names-alphabetic-p.</span>
<span class="linecomment">;; 2007/01/22 dadams</span>
<span class="linecomment">;;     icicle-read-color:</span>
<span class="linecomment">;;       Removed free var NTH-PARTS.</span>
<span class="linecomment">;;       Bound icicle-list-nth-parts-join-string the same as icicle-list-join-string.</span>
<span class="linecomment">;;       Remove duplicates: AliceBlue and alice blue etc.: downcase and remove whitespace.</span>
<span class="linecomment">;;     Added: icicle-remove-color-duplicates.</span>
<span class="linecomment">;;     Added soft require of hexrgb.el.</span>
<span class="linecomment">;;     icicle-*doc, icicle-plist: Bound icicle-candidate-properties-alist.</span>
<span class="linecomment">;; 2007/01/21 dadams</span>
<span class="linecomment">;;     Added: icicle-read-color, icicle-make-color-candidate.</span>
<span class="linecomment">;; 2007/01/18 dadams</span>
<span class="linecomment">;;     Added: icicle-get-current-region-candidate.</span>
<span class="linecomment">;;       Use current cand if cycled or `mouse-2'.  Else if single match, use that.  Else error.</span>
<span class="linecomment">;;     icicle-remove-region, icicle-search-region, icicle-region-help:</span>
<span class="linecomment">;;       Use icicle-get-current-region-candidate.</span>
<span class="linecomment">;;     icicle-add-region: Added optional TAG arg and prefix arg treatment.</span>
<span class="linecomment">;;     icicle-remove-region: Update completions list.  Bind regions-w-buffers.</span>
<span class="linecomment">;;     icicle-remove-all-regions-in-buffer: Use current buffer name as default.</span>
<span class="linecomment">;;     Added: icicle-select-region-action.</span>
<span class="linecomment">;;     icicle-select-region: Use icicle-select-region-action.</span>
<span class="linecomment">;;     Renamed: option icicle-regions to icicle-region-alist.</span>
<span class="linecomment">;;     icicle-regions: Sort entries.</span>
<span class="linecomment">;; 2007/01/17 dadams</span>
<span class="linecomment">;;    icicle-filter-alist: Reversed arg order.  Return alist arg if filter-keys arg is empty.</span>
<span class="linecomment">;; 2007/01/12 dadams</span>
<span class="linecomment">;;    icicle-delete-window: Do icicle-remove-Completions-window if in minibuffer.</span>
<span class="linecomment">;;    icicle-yank-insert: Do icicle-yank if in minibuffer.</span>
<span class="linecomment">;;    icicle-(fundoc|vardoc|doc|plist): Added condition-case: protect symbols that error.</span>
<span class="linecomment">;; 2007/01/01 dadams</span>
<span class="linecomment">;;    Added: icicle-(add|remove)-candidate-(to|from)-saved-completion-set.</span>
<span class="linecomment">;;    icicle-add-buffer-config: Use nil, not "nil" as default, if icicle-buffer-sort is nil.</span>
<span class="linecomment">;;                              Use icicle-define-add-to-alist-command to define it.</span>
<span class="linecomment">;;    icicle-remove-buffer-config, icicle-remove-saved-completion-set:</span>
<span class="linecomment">;;      Use icicle-assoc-delete-all, not delete of assoc.</span>
<span class="linecomment">;;    icicle-remove-saved-completion-set: Update display after removal.</span>
<span class="linecomment">;;    Reformatted icicle-define(-file)-command, based on setup.el's lisp-indentation-hack.</span>
<span class="linecomment">;; 2006/12/25 dadams</span>
<span class="linecomment">;;    Bug fix: icicle-search-action: Use icicle-filter-alist on icicle-candidates-alist.</span>
<span class="linecomment">;;    icicle-(select|search)-region: Use pop-to-buffer and raise-frame, not set-buffer.</span>
<span class="linecomment">;;    icicle-select-region: Activate the region.</span>
<span class="linecomment">;; 2006/12/23 dadams</span>
<span class="linecomment">;;    Added: icicle-region-help.  Use in icicle-*-region.</span>
<span class="linecomment">;;    Added: icicle-remove-all-regions-in-buffer, icicle-remove-all-regions-action.</span>
<span class="linecomment">;;    icicle-(select|search)-region: Ignore regions in non-existent buffers.</span>
<span class="linecomment">;;    icicle-remove-region: Update the persistent value of icicle-regions.</span>
<span class="linecomment">;; 2006/12/22 dadams</span>
<span class="linecomment">;;    Added: icicle-exchange-point-and-mark.</span>
<span class="linecomment">;;    icicle-customize-icicles-group: icicles -&gt; Icicles (group name).</span>
<span class="linecomment">;; 2006/12/18 dadams</span>
<span class="linecomment">;;    icicle-object-action: Remove print arg.  icicle-apply-to-* uses current-prefix-arg now.</span>
<span class="linecomment">;; 2006/12/17 dadams</span>
<span class="linecomment">;;    Added: icicle-object-action, icicle-choose-candidate-of-type,</span>
<span class="linecomment">;;           icicle-read-var-value-satisfying.</span>
<span class="linecomment">;; 2006/12/16 dadams</span>
<span class="linecomment">;;    icicle-map-action: Bug fix: Use icicle-candidate-nb, not assoc.</span>
<span class="linecomment">;;    Added: icicle-goto(-global)-marker, icicle-marker+text, icicle-markers.</span>
<span class="linecomment">;; 2006/12/10 dadams</span>
<span class="linecomment">;;    Moved minibuffer and *Completions* commands to new file, icicles-mcmd.el.</span>
<span class="linecomment">;;    Require icicles-opt.el.</span>
<span class="linecomment">;;    icicle-buffer-list: Added final message.</span>
<span class="linecomment">;; 2006/11/26 dadams</span>
<span class="linecomment">;;    icicle-search-action: Bug fix: Use icicle-candidate-nb, not assoc, to get cand+mrker.</span>
<span class="linecomment">;;    icicle-*-complete-1: Bug fix: Don't set icicle-current-input to icicle-last-input if nil.</span>
<span class="linecomment">;;    Renamed: icicle-search-region to icicle-search-region-beg-end.</span>
<span class="linecomment">;;    Added: icicle-(add|remove|select|search)-region.</span>
<span class="linecomment">;;    icicle-search: Use icicle-regions for numeric prefix arg.  Updated doc string.</span>
<span class="linecomment">;;    Added: icicle-Info-index-20 - thx to Tamas Patrovics.  Use it in icicle-Info-index.</span>
<span class="linecomment">;; 2006/11/25 dadams</span>
<span class="linecomment">;;    icicle-search: After final selection, select orig-window and give its frame input focus.</span>
<span class="linecomment">;; 2006/11/24 dadams</span>
<span class="linecomment">;;    Added: icicle-ensure-overriding-map-is-bound, icicle-universal-argument,</span>
<span class="linecomment">;;           icicle-universal-argument-more, icicle-negative-argument, icicle-digit-argument,</span>
<span class="linecomment">;;           icicle-universal-argument-other-key, icicle-universal-argument-minus,</span>
<span class="linecomment">;;           icicle-kmacro(-action).</span>
<span class="linecomment">;;    icicle-dabbrev-completion: Don't stop at common root, and use lax completion.</span>
<span class="linecomment">;;    Replaced icicle-select-window-or-frame by icicle-other-window-or-frame (respects C-u 0).</span>
<span class="linecomment">;; 2006/11/23 dadams</span>
<span class="linecomment">;;    icicle-prefix-complete-1: Respect icicle-TAB-shows-candidates-flag.</span>
<span class="linecomment">;;    icicle-execute-extended-command-1: Treat named keyboard macros too.</span>
<span class="linecomment">;;    Added: icicle-execute-named-keyboard-macro.</span>
<span class="linecomment">;; 2006/11/18 dadams</span>
<span class="linecomment">;;    icicle-add/update-saved-completion-set, icicle-apropos*, icicle-bookmark,</span>
<span class="linecomment">;;    icicle-buffer-config, icicle-candidate-set-retrieve, icicle-candidate-set-save,</span>
<span class="linecomment">;;    icicle-color-theme, icicle-comint-command, icicle-complete-thesaurus-entry,</span>
<span class="linecomment">;;    icicle-customize-apropos*, icicle-delete-windows, icicle-font, icicle-frame-bg,</span>
<span class="linecomment">;;    icicle-frame-fg, icicle-insert-kill, icicle-insert-string-from-variable,</span>
<span class="linecomment">;;    icicle-insert-thesaurus-entry, icicle-locate-file*, icicle-map, icicle-narrow-candidates,</span>
<span class="linecomment">;;    icicle-remove-buffer-config, icicle-remove-saved-completion-set,</span>
<span class="linecomment">;;    icicle-reset-option-to-nil, icicle-save-string-to-variable, icicle-search,</span>
<span class="linecomment">;;    icicle-select-window, icicle-set-option-to-t, icicle-toggle-option:</span>
<span class="linecomment">;;      Use a specific history variable.</span>
<span class="linecomment">;; 2006/11/17 dadams</span>
<span class="linecomment">;;    Added: icicle-select-(frame|window), icicle-select-window-or-frame.</span>
<span class="linecomment">;; 2006/11/10 dadams</span>
<span class="linecomment">;;    icicle-mouse-candidate-action: read-event to swallow mouse up event.</span>
<span class="linecomment">;;    icicle-map-action:</span>
<span class="linecomment">;;      Don't use icicle-filter-alist - find string in icicle-candidates-alist.</span>
<span class="linecomment">;;      Unwind-protect to reselect minibuffer frame.  Don't bind case-fold-search.</span>
<span class="linecomment">;;    icicle-map: enable-recursive-minibuffers.</span>
<span class="linecomment">;; 2006/11/09 dadams</span>
<span class="linecomment">;;    icicle-nb-of-candidate-in-Completions: Redefined using binary search, for performance.</span>
<span class="linecomment">;;    icicle-toggle-ignored-space-prefix: Update doc string to use icicle-dispatch-C-^.</span>
<span class="linecomment">;;    icicle-search:</span>
<span class="linecomment">;;      Bind icicle-update-input-hook unconditionally, after icicle-search-regexp-scan.</span>
<span class="linecomment">;;    icicle-search-regexp-scan: Highlight up to icicle-search-highlight-threshold.</span>
<span class="linecomment">;;    icicle-search-highlight-all-input-matches:</span>
<span class="linecomment">;;      Only update input and highlight if icicle-search-highlight-all-current-flag.</span>
<span class="linecomment">;;    icicle-search-action:</span>
<span class="linecomment">;;      Don't use icicle-filter-alist - find string in icicle-candidates-alist.</span>
<span class="linecomment">;;    icicle-search-highlight-cleanup: Bind inhibit-quit to t.</span>
<span class="linecomment">;; 2006/11/07 dadams</span>
<span class="linecomment">;;    Added: icicle-toggle-highlight-all-current.</span>
<span class="linecomment">;; 2006/11/06 dadams</span>
<span class="linecomment">;;    icicle-search-action:</span>
<span class="linecomment">;;      Highlight icicle-current-input, not icicle-current-raw-input (not updated).</span>
<span class="linecomment">;;    Renamed icicle-search-highlight-all-flag to icicle-search-highlight-threshold.</span>
<span class="linecomment">;; 2006/11/05 dadams</span>
<span class="linecomment">;;    Added: icicle-search-regexp-scan.</span>
<span class="linecomment">;;    icicle-search:</span>
<span class="linecomment">;;      Added buffers arg.  Updated doc string.</span>
<span class="linecomment">;;      Use icicle-search-regexp-scan:  Scan each buffer in buffers.</span>
<span class="linecomment">;;                                      Add marker, not position, to icicle-candidates-alist.</span>
<span class="linecomment">;;      Go to candidate in its buffer.</span>
<span class="linecomment">;;      Added progress message.</span>
<span class="linecomment">;;    icicle-search-action: Pop to buffer of candidate (marker) and raise frame.</span>
<span class="linecomment">;;    icicle-occur:</span>
<span class="linecomment">;;      Added buffers arg.  Updated doc string.  Call icicle-search-highlight-cleanup.</span>
<span class="linecomment">;;    icicle-search-highlight-all-input-matches: set-buffer for each ov in dolist (minor opt.).</span>
<span class="linecomment">;;    icicle-search-highlight-cleanup: Added progress messages.  Minor optimization.</span>
<span class="linecomment">;; 2006/10/22 dadams</span>
<span class="linecomment">;;    icicle-complete-keys-action:</span>
<span class="linecomment">;;      Set last-nonmenu-event to non-mouse info, to ignore *Completions* click.</span>
<span class="linecomment">;;    icicle-complete-keys-1: Don't use a default value for completing-read.</span>
<span class="linecomment">;; 2006/10/21 dadams</span>
<span class="linecomment">;;    Added: icicle-insert-char.</span>
<span class="linecomment">;;    icicle-add-key+cmd: Respect icicle-complete-keys-self-insert-flag.</span>
<span class="linecomment">;; 2006/10/20 dadams</span>
<span class="linecomment">;;    icicle-map, icicle-delete-window: Corrected doc string.</span>
<span class="linecomment">;; 2006/10/16 dadams</span>
<span class="linecomment">;;    icicle-add-key+cmd: Protect :enable's eval with condition-case.</span>
<span class="linecomment">;;    icicle-complete-keys-1:</span>
<span class="linecomment">;;      No longer use icicle-extra-candidates.</span>
<span class="linecomment">;;      Use default value of .. for completing-read (except at top level).</span>
<span class="linecomment">;;    icicle-complete-keys-action: Correct no-match case: must match whole and part.</span>
<span class="linecomment">;;    icicle-keys+cmds-w-prefix: Add .. to icicle-complete-keys-alist unless at top level.</span>
<span class="linecomment">;; 2006/10/15 dadams</span>
<span class="linecomment">;;    icicle-complete-keys:</span>
<span class="linecomment">;;      Bind icicle-complete-keys-action, not icicle-complete-keys-help, to icicle-*-action-fn.</span>
<span class="linecomment">;;      Bind orig-buff, orig-window, and icicle-completing-keys-p, for use elsewhere.</span>
<span class="linecomment">;;    Added: icicle-complete-keys-action using code from icicle-complete-keys.</span>
<span class="linecomment">;;    icicle-complete-keys-action:</span>
<span class="linecomment">;;      Use orig-buff and orig-window; restore to originally selected window.</span>
<span class="linecomment">;;      Error if candidate doesn't match template xxx  =  yyy.</span>
<span class="linecomment">;;    icicle-complete-keys-1:</span>
<span class="linecomment">;;      Call icicle-complete-keys-action on chosen candidate.</span>
<span class="linecomment">;;    icicle-help-on-candidate: Treat key completion also.</span>
<span class="linecomment">;;    Added from cus-edit+.el: custom-variable-p.</span>
<span class="linecomment">;;    Moved to icicles-mode.el: icicle-select-minibuffer-contents, next-history-element.</span>
<span class="linecomment">;;    Moved here from icicles-mode.el: icicle-generic-S-tab.</span>
<span class="linecomment">;;    icicle-generic-S-tab (bug fix): Do not set last-command to icicle-apropos-complete.</span>
<span class="linecomment">;;    Added: eval-when-compile's.</span>
<span class="linecomment">;; 2006/10/13 dadams</span>
<span class="linecomment">;;    icicle-add-key+cmd:</span>
<span class="linecomment">;;      Add actual key to icicle-complete-keys-alist.  Thx to Stefan Monnier.</span>
<span class="linecomment">;;      Don't filter out index (Imenu) keymap.</span>
<span class="linecomment">;;      Treat :enable condition.</span>
<span class="linecomment">;;    icicle-complete-keys-1:</span>
<span class="linecomment">;;      Use actual key recorded in icicle-*-keys-alist. Don't convert to key description.</span>
<span class="linecomment">;;      Treat digit-argument and negative-argument.</span>
<span class="linecomment">;;    icicle-complete-keys-alist: Updated doc string for new structure.</span>
<span class="linecomment">;; 2006/10/08 dadams</span>
<span class="linecomment">;;    Added: icicle-add-key+cmd, icicle-read-single-key-description.</span>
<span class="linecomment">;;    Added: icicle-complete-keys-alist.</span>
<span class="linecomment">;;           Use in icicle-complete-keys-1, icicle-keys+cmds-w-prefix, icicle-add-key+cmd.</span>
<span class="linecomment">;;    icicle-add-key+cmd: Update binding, depending on its type (menu item etc.).</span>
<span class="linecomment">;;      Push (cons candidate binding), not just candidate, onto icicle-complete-keys-alist.</span>
<span class="linecomment">;;    icicle-complete-keys-1:</span>
<span class="linecomment">;;      Use binding, not just command name.  Call it and put it in (this|last)-command.</span>
<span class="linecomment">;;      Flipped (corrected) use of icicle-key-descriptions-use-&lt;&gt;-flag.</span>
<span class="linecomment">;;      Use icicle-read-single-key-description.</span>
<span class="linecomment">;;    icicle-prefix-keys-first-p, icicle-complete-keys-1, icicle-complete-keys-help,</span>
<span class="linecomment">;;      icicle-keys+cmds-w-prefix: Don't use icicle-list-*-string.</span>
<span class="linecomment">;; 2006/10/05 dadams</span>
<span class="linecomment">;;    icicle-complete-keys-1: Remove icicle-special-candidate property from all candidates.</span>
<span class="linecomment">;;    icicle-keys+cmds-w-prefix:</span>
<span class="linecomment">;;      Intern candidate and, if local binding, put icicle-special-candidate property on it.</span>
<span class="linecomment">;;      Use single string for candidate (don't use multi-completion).</span>
<span class="linecomment">;; 2006/10/03 dadams</span>
<span class="linecomment">;;     icicle-complete-keys-1: Treat "..".</span>
<span class="linecomment">;;     icicle-complete-keys: Updated doc string accordingly.</span>
<span class="linecomment">;;     icicle-prefix-keys-first-p: ".." is less than all other strings.  Don't hard-code "= ".</span>
<span class="linecomment">;;     icicle-keys+cmds-w-prefix:</span>
<span class="linecomment">;;       Filtered out shadowed bindings, icicle-generic-S-tab, and icicle-complete-keys.</span>
<span class="linecomment">;;       Use only map-keymap & lookup-key, not accessible-keymaps, current-active-maps,</span>
<span class="linecomment">;;         map-keymap.</span>
<span class="linecomment">;; 2006/10/01 dadams</span>
<span class="linecomment">;;     icicle-complete-keys: Bind sort functions, to put prefix keys first, by default.</span>
<span class="linecomment">;;                           Set last-command, before recursing.</span>
<span class="linecomment">;;     Replaced icicle-alternative-sort with icicle-toggle-alternative-sorting (new).</span>
<span class="linecomment">;;     icicle-(apropos|prefix)-complete-1:</span>
<span class="linecomment">;;       Ensure icicle-(current|last)-input are strings, before compare.</span>
<span class="linecomment">;;     icicle-keys+cmds-w-prefix: Tolerate empty local and global maps.</span>
<span class="linecomment">;; 2006/09/30 dadams</span>
<span class="linecomment">;;     Added: icicle-read-kbd-macro, icicle-edmacro-parse-keys, icicle-toggle-angle-brackets.</span>
<span class="linecomment">;;     icicle-complete-keys-1, icicle-dabbrev-completion:</span>
<span class="linecomment">;;       key-description -&gt; icicle-key-description, with icicle-key-descriptions-use-&lt;&gt;-flag.</span>
<span class="linecomment">;;     icicle-complete-keys-1:</span>
<span class="linecomment">;;       read-kbd-macro -&gt; icicle-read-kbd-macro, with icicle-key-descriptions-use-&lt;&gt;-flag.</span>
<span class="linecomment">;;       Got rid of extra space in prompt before colon, when no prefix.</span>
<span class="linecomment">;;     icicle-keys+cmds-w-prefix: Use single-key-description with icicle-*-use-&lt;&gt;-flag.</span>
<span class="linecomment">;;     icicle-insert-key-description:</span>
<span class="linecomment">;;       Change arg to a toggle, and use icicle-key-descriptions-use-&lt;&gt;-flag.</span>
<span class="linecomment">;;     Bind icicle-candidate-set-(retrieve|save) to C-M-&lt;, C-M-&gt;, not C-&lt;, C-&gt;.</span>
<span class="linecomment">;;     icicle-dired-saved-file-candidates*:</span>
<span class="linecomment">;;       Changed doc strings and messages to use dynamic binding of icicle-candidate-set-save.</span>
<span class="linecomment">;; 2006/09/24 dadams</span>
<span class="linecomment">;;     Added: icicle-complete-keys-help.</span>
<span class="linecomment">;;     icicle-complete-keys:</span>
<span class="linecomment">;;       Bind icicle-*-action-fn to icicle-complete-keys-help.  Mention help keys in docstring.</span>
<span class="linecomment">;;     icicle-complete-keys-1:</span>
<span class="linecomment">;;       Set last-command to command, so completion doesn't think candidate was last-command.</span>
<span class="linecomment">;;     icicle-keys+cmds-w-prefix: Provide placeholder for future use of generic characters.</span>
<span class="linecomment">;; 2006/09/23 dadams</span>
<span class="linecomment">;;     icicle-complete-keys-1:</span>
<span class="linecomment">;;       Error if there are no keys for the prefix.</span>
<span class="linecomment">;;       Error, not self-insert-command, for key read-kbd-macro can't convert. condition-case.</span>
<span class="linecomment">;;       Report error if calling cmd fails.</span>
<span class="linecomment">;;       Use vconcat for recursive call.</span>
<span class="linecomment">;;       Read cmd, don't intern it - it might be a lambda or byte-compiled function.</span>
<span class="linecomment">;;       Remove duplicates.</span>
<span class="linecomment">;;       Provide KEYS arg to call-interactively, for error reporting.</span>
<span class="linecomment">;;       Don't bind icicle-must-not-match-regexp to "^Character set .*=  self-insert-command".</span>
<span class="linecomment">;;     icicle-keys+cmds-w-prefix:</span>
<span class="linecomment">;;       Treat also local keymap and current minor maps.</span>
<span class="linecomment">;;       Do nothing if keys+maps is nil.</span>
<span class="linecomment">;;       Only map-keymap if the target is a keymap.</span>
<span class="linecomment">;;       Use keymapp, not functionp, as the binding test.</span>
<span class="linecomment">;;       Only add binding if it is a command or keymap.</span>
<span class="linecomment">;;       Only add self-insert-command binding if the key is char-valid-p.</span>
<span class="linecomment">;;       Use format %S, not %s for a command binding.</span>
<span class="linecomment">;;     icicle-insert-key-description: Added no-angle-brackets-p arg.</span>
<span class="linecomment">;; 2006/09/22 dadams</span>
<span class="linecomment">;;     icicle-complete-keys-1:</span>
<span class="linecomment">;;       Filter out keys described "Character set ...= self-insert-command".</span>
<span class="linecomment">;; 2006/09/20 dadams</span>
<span class="linecomment">;;     icicle-complete-keys-1: Treat self-insert-command specially.</span>
<span class="linecomment">;; 2006/09/17 dadams</span>
<span class="linecomment">;;     Added: icicle-complete-keys(-1), icicle-*-keys-prefix, icicle-keys+cmds-w-prefix,</span>
<span class="linecomment">;;     icicle-doc: Removed one \n from each candidate.</span>
<span class="linecomment">;; 2006/09/12 dadams</span>
<span class="linecomment">;;     Renamed icicle-switch-to-minibuffer to icicle-insert-completion.</span>
<span class="linecomment">;;     Added: icicle-switch-to/from-minibuffer.</span>
<span class="linecomment">;;     icicle-completion-help: Keep focus in the minibuffer after displaying help.</span>
<span class="linecomment">;; 2006/09/02 dadams</span>
<span class="linecomment">;;     icicle-help-on-(next|previous)-(apropos|prefix)-candidate,</span>
<span class="linecomment">;;       icicle-(next|previous)-(apropos|prefix)-candidate-action:</span>
<span class="linecomment">;;       Use save-selected-window, not save-window-excursion.</span>
<span class="linecomment">;;     icicle-find-file*: In Dired, ignore errors picking up current-line's file name.</span>
<span class="linecomment">;;     icicle-mouse-choose-completion: Error if minibuffer is not active.</span>
<span class="linecomment">;; 2006/08/27 dadams</span>
<span class="linecomment">;;     icicle-abort-minibuffer-input: If minibuffer not active, just kill buffer *Completions*.</span>
<span class="linecomment">;;     icicle-execute-extended-command-1, icicle-insert-thesaurus-entry, icicle-search-action:</span>
<span class="linecomment">;;       Ensure orig-window is live before using it.</span>
<span class="linecomment">;; 2006/08/23 dadams</span>
<span class="linecomment">;;     Added: icicle-delete-window(s).</span>
<span class="linecomment">;;     Added soft require of frame-cmds.el.</span>
<span class="linecomment">;; 2006/08/22 dadams</span>
<span class="linecomment">;;     icicle-execute-extended-command-1: Bind this-command, don't set it (fixes C-next).</span>
<span class="linecomment">;;     icicle-help-on-candidate: If no last candidate, then reset to first matching candidate.</span>
<span class="linecomment">;;     icicle-*-candidate-action, icicle-help-on-*-candidate: save-window-excursion.</span>
<span class="linecomment">;; 2006/08/20 dadams</span>
<span class="linecomment">;;     icicle-find-file*: Use diredp-find-a-file* in Dired mode (Emacs 22 or later).</span>
<span class="linecomment">;;     Bug fix: icicle-candidate-action: Use icicle-*-candidates, not icicle-next-*-candidate.</span>
<span class="linecomment">;;              icicle-next-*-candidate(-action): Set icicle-current-completion-mode.</span>
<span class="linecomment">;; 2006/08/18 dadams</span>
<span class="linecomment">;;     Added: icicle-Info-goto-node(-(action|cmd)).</span>
<span class="linecomment">;;     icicle-candidate-action: If no icicle-last-completion-candidate, use first candidate.</span>
<span class="linecomment">;; 2006/08/15 dadams</span>
<span class="linecomment">;;     Added: icicle-help-on-*-*-candidate,icicle-mouse-help-on-candidate.</span>
<span class="linecomment">;;     No longer put icicle-candidate-action-command property on symbols (not used).</span>
<span class="linecomment">;;     Added: icicle-raise-Completions-frame.</span>
<span class="linecomment">;;     icicle*-candidate-action, icicle-help-on-candidate: Use icicle-raise-Completions-frame.</span>
<span class="linecomment">;;     icicle-help-on-candidate: Can use it from *Completions* too now.</span>
<span class="linecomment">;;                               Use icicle-barf-if-outside-Completions-and-minibuffer.</span>
<span class="linecomment">;; 2006/08/13 dadams</span>
<span class="linecomment">;;     Added: icicle-Info-index(-(action|cmd)).</span>
<span class="linecomment">;; 2006/08/04 dadams</span>
<span class="linecomment">;;     icicle-*-complete-1, icicle-prefix-word-complete, icicle-keep-only-past-inputs:</span>
<span class="linecomment">;;       Set icicle-last-completion-command to the explicit command, not this-command.</span>
<span class="linecomment">;;     icicle-history: Call icicle-last-completion-command, not icicle-apropos-complete.</span>
<span class="linecomment">;;     icicle-apropos-complete-1, icicle-narrow-candidates:</span>
<span class="linecomment">;;       Removed binding of icicle-apropos-completing-p (not used).</span>
<span class="linecomment">;;     Added: icicle-plist, icicle-remove-Completions-window, icicle-pp-eval-expression.</span>
<span class="linecomment">;;     Added soft require of pp+.el.</span>
<span class="linecomment">;;     icicle-exit-minibuffer, icicle-minibuffer-complete-and-exit,</span>
<span class="linecomment">;;       icicle-mouse-choose-completion, icicle-abort-minibuffer-input,</span>
<span class="linecomment">;;       icicle-(apropos|prefix)-complete-1, icicle-keep-only-past-inputs,</span>
<span class="linecomment">;;       icicle-insert-thesaurus-entry-cand-fn: Use icicle-remove-Completions-window.</span>
<span class="linecomment">;;     icicle-doc: Treat doc of faces also.</span>
<span class="linecomment">;;     icicle-non-whitespace-string-p: Added doc string.</span>
<span class="linecomment">;; 2006/08/03 dadams</span>
<span class="linecomment">;;     Added:</span>
<span class="linecomment">;;       icicle-comint-command, icicle-insert-kill, icicle-insert-for-yank,icicle-yank-insert.</span>
<span class="linecomment">;;     Bound icicle-comint-command to C-c TAB in comint-mode.</span>
<span class="linecomment">;;     icicle-search, icicle-comint-search: Cleaned up doc string.</span>
<span class="linecomment">;; 2006/08/02 dadams</span>
<span class="linecomment">;;     icicle-comint-search: Mention *-prompt-pattern.  Thx to Kevin Rodgers.</span>
<span class="linecomment">;;     icicle-insert-string-from-variable: Added more variables to the completing-read alist.</span>
<span class="linecomment">;; 2006/07/29 dadams</span>
<span class="linecomment">;;     Added: icicle-dispatch-C-., toggle-icicle-search-cleanup, icicle-toggle-search-cleanup.</span>
<span class="linecomment">;; 2006/07/23 dadams</span>
<span class="linecomment">;;     Added: icicle-toggle-transforming.</span>
<span class="linecomment">;;     icicle-comint-search: Bind icicle-transform-function to icicle-remove-duplicates.</span>
<span class="linecomment">;; 2006/07/22 dadams</span>
<span class="linecomment">;;     Added: icicle-comint-search, icicle-comint-send-input, icicle-comint-get-*-input,</span>
<span class="linecomment">;;            icicle-comint-get-final-choice, icicle-search-generic.</span>
<span class="linecomment">;;     icicle-search: Added require-match arg for non-interactive calls.</span>
<span class="linecomment">;;                    Run the hooks if no match and no match required, and if we didn't cycle.</span>
<span class="linecomment">;;                    Return final choice as value (not used yet).</span>
<span class="linecomment">;;     icicle-insert-string-from-variable: Use buffer-local value of variable, if there is one.</span>
<span class="linecomment">;;     icicle-insert-string-from-variable:</span>
<span class="linecomment">;;       Make sure we use the buffer-local value of the variable, if there is one</span>
<span class="linecomment">;;       Added comint-prompt-regexp to regexp list.</span>
<span class="linecomment">;;     Added mode hooks for icicle-compilation-search and icicle-comint-send-input.</span>
<span class="linecomment">;; 2006/07/20 dadams</span>
<span class="linecomment">;;     Renamed icicle-arrows-respect-* to icicle-cycling-respects-completion-mode-flag.</span>
<span class="linecomment">;; 2006/07/19 dadams</span>
<span class="linecomment">;;     Applied patch from Damien Elmes &lt;emacs@repose.cx&gt;:</span>
<span class="linecomment">;;       Added: icicle-(next|previous)-context-candidate, icicle-scroll-completions.</span>
<span class="linecomment">;;       icicle-switch-to-completions, icicle-switch-to-Completions-buf,</span>
<span class="linecomment">;;         icicle-move-to-next-completion, icicle-map-action, icicle-search-action:</span>
<span class="linecomment">;;           Use icicle-start-of-completions.</span>
<span class="linecomment">;;       icicle-(apropos|prefix)-complete-1:</span>
<span class="linecomment">;;         Set icicle-current-completion-type vs use icicle-arrows-respect-*-flag.</span>
<span class="linecomment">;;         Use icicle-scroll-completions.</span>
<span class="linecomment">;;       icicle-current-completion-in-Completions: Use point-min if no previous prop change.</span>
<span class="linecomment">;;       icicle-keep-only-past-inputs: Use icicle-scroll-completions.</span>
<span class="linecomment">;;     Renamed icicle-start-of-completions to icicle-start-of-candidates-in-Completions,</span>
<span class="linecomment">;;             icicle-current-completion-type to icicle-current-completion-mode,</span>
<span class="linecomment">;;             icicle-*-context-candidate to icicle-(next|previous)-candidate-per-mode,</span>
<span class="linecomment">;;             icicle-scroll-completions to icicle-scroll-Completions.</span>
<span class="linecomment">;;     icicle-(next|previous)-context-candidate: Use icicle-barf-if-outside-minibuffer.</span>
<span class="linecomment">;;     icicle-scroll-Completions: Changed with-selected-window to Emacs 20 equivalent.</span>
<span class="linecomment">;; 2006/07/18 dadams</span>
<span class="linecomment">;;     icicle-search: Bind completion-ignore-case to case-fold-search.</span>
<span class="linecomment">;;     icicle-search-highlight-all-input-matches, icicle-search-action:</span>
<span class="linecomment">;;       Put search inside condition-case, for bad regexp.</span>
<span class="linecomment">;;     Added: icicle-toggle-case-sensitivity, toggle-icicle-case-sensitivity.</span>
<span class="linecomment">;; 2006/07/10 dadams</span>
<span class="linecomment">;;     Added: icicle-search-region.  Use in search functions.  Thx to Le Wang.</span>
<span class="linecomment">;; 2006/07/08 dadams</span>
<span class="linecomment">;;     icicle-search-highlight-all-input-matches: Use *-current-*, not *-current-raw-*.</span>
<span class="linecomment">;;     icicle-execute-extended-command-1:</span>
<span class="linecomment">;;       First try a string candidate as arg, then read it to convert it to symbol or number.</span>
<span class="linecomment">;;       Reset focus back to the minibuffer, in action function.</span>
<span class="linecomment">;; 2006/07/07 dadams</span>
<span class="linecomment">;;     Added: icicle-alternative-sort.</span>
<span class="linecomment">;;     icicle-imenu: Show *Completions* initially for submenu choice (only).</span>
<span class="linecomment">;;     icicle-execute-extended-command:</span>
<span class="linecomment">;;       Echo prefix arg in prompt.  Thx: *.dhcp.mdsn.wi.charter.com</span>
<span class="linecomment">;; 2006/07/06 dadams</span>
<span class="linecomment">;;     Added (eval-when-compile (require 'icicles-mac)).</span>
<span class="linecomment">;; 2006/07/05 dadams</span>
<span class="linecomment">;;     Renamed: icicle-current-regexp-input to icicle-current-raw-input.</span>
<span class="linecomment">;;     icicle-prefix-complete-1: Don't set icicle-current-raw-input.</span>
<span class="linecomment">;; 2006/07/04 dadams</span>
<span class="linecomment">;;     icicle-prefix-complete-1: No longer calculate common prefix and set current input to it.</span>
<span class="linecomment">;;     Added plist entries to categorize commands:</span>
<span class="linecomment">;;       icicle-(cycling|completing|candidate-action)-command.</span>
<span class="linecomment">;;     icicle-(apropos|prefix)-complete-1, icicle-prefix-word-complete,</span>
<span class="linecomment">;;     icicle-switch-to-Completions-buf, icicle-keep-only-past-inputs, icicle-history:</span>
<span class="linecomment">;;       Use icicle-cycling-command property.</span>
<span class="linecomment">;;     icicle-apropos-complete-1: Removed regexp-p arg in call to icicle-save-or-restore-input.</span>
<span class="linecomment">;; 2006/07/03 dadams</span>
<span class="linecomment">;;     icicle-(apropos|prefix)-complete-1: deactivate mark after inserting current input.</span>
<span class="linecomment">;; 2006/06/18 dadams</span>
<span class="linecomment">;;     icicle-apropos-complete-1, icicle-narrow-candidates: Bind icicle-apropos-completing-p.</span>
<span class="linecomment">;; 2006/06/09 dadams</span>
<span class="linecomment">;;     Bug fixes: Picked up matching subdir as default dir, even if there other files match.</span>
<span class="linecomment">;;                  Thx to Andrey Zhdanov.</span>
<span class="linecomment">;;                Empty directory not treated as a match.</span>
<span class="linecomment">;;     icicle-(apropos|prefix)-complete-1:</span>
<span class="linecomment">;;       If input matches an empty directory, then use that directory as the sole completion.</span>
<span class="linecomment">;;       Do not expand file-name input before call icicle-file-name-*-candidates.</span>
<span class="linecomment">;;     icicle-retrieve-last-input: Use insert, not icicle-insert-input (no longer used).</span>
<span class="linecomment">;;                                 (Input backslashes reverted to slashes.)</span>
<span class="linecomment">;; 2006/06/08 dadams</span>
<span class="linecomment">;;     Bug fix: Could not complete after cycling file names.  Thx to Andrey Zhdanov.</span>
<span class="linecomment">;;     icicle-insert-input: Use icicle-expand-file-name.</span>
<span class="linecomment">;;     icicle-prefix-complete-1:</span>
<span class="linecomment">;;       Expand file-name input before call icicle-file-name-prefix-candidates.</span>
<span class="linecomment">;;       Expand icicle-last-completion-candidate if it is a directory name.</span>
<span class="linecomment">;; 2006/05/30 dadams</span>
<span class="linecomment">;;     icicle-erase-minibuffer-or-history-element: Fix for consecutive deletions.</span>
<span class="linecomment">;; 2006/05/26 dadams</span>
<span class="linecomment">;;     Added: icicle-erase-minibuffer-or-history-element.</span>
<span class="linecomment">;; 2006/05/19 dadams</span>
<span class="linecomment">;;     Renamed icicle-inhibit-reminder* to icicle-reminder*.</span>
<span class="linecomment">;;     icicle-narrow-candidates: Bind icicle-reminder-prompt-flag to nil, not t.</span>
<span class="linecomment">;; 2006/05/16 dadams</span>
<span class="linecomment">;;     Added: icicle-kill(-a)-buffer.</span>
<span class="linecomment">;; 2006/05/15 dadams</span>
<span class="linecomment">;;     Renamed: icicle-completion-nospace-flag to icicle-ignore-space-prefix-flag.</span>
<span class="linecomment">;;     icicle-candidate-set-complement: Put back icicle-ignore-space-prefix-flag.</span>
<span class="linecomment">;;     icicle-buffer(-other-window): Bind icicle-buffer-ignore-space-prefix-flag.</span>
<span class="linecomment">;;     Added: icicle-toggle-ignored-space-prefix, toggle-icicle-ignored-space-prefix.</span>
<span class="linecomment">;; 2006/05/13 dadams</span>
<span class="linecomment">;;     icicle-occur: Make icicle-search-main-regexp-others unnoticeable instead of</span>
<span class="linecomment">;;                   setting icicle-search-highlight-all-flag to nil.</span>
<span class="linecomment">;;     icicle-candidate-set-complement: Use nil, not icicle-completion-nospace-flag.</span>
<span class="linecomment">;;     Renamed: icicle-search-imenu to icicle-imenu,</span>
<span class="linecomment">;;              icicle-search-imenu-in-buffer-p to icicle-imenu-in-buffer-p.</span>
<span class="linecomment">;; 2006/05/12 dadams</span>
<span class="linecomment">;;     icicle-search-imenu: Remove unmatched submenus.  Error if no imenu for the buffer.</span>
<span class="linecomment">;;     Added: icicle-search-imenu-in-buffer-p.</span>
<span class="linecomment">;;     icicle-insert-string-at-point: Use icicle-barf-if-outside-minibuffer.</span>
<span class="linecomment">;;     Moved to icicles-fn.el: icicle-barf-if-outside-*.</span>
<span class="linecomment">;;     Moved some commands to minibuffer-cmds section from top-level cmds section.</span>
<span class="linecomment">;; 2006/05/09 dadams</span>
<span class="linecomment">;;     Added: icicle-customize-icicles-group, icicle-send-bug-report, icicle-customize-button.</span>
<span class="linecomment">;; 2006/04/30 dadams</span>
<span class="linecomment">;;     Added: icicle-map, icicle-map-action.</span>
<span class="linecomment">;;     icicle-filter-alist: Corrected and simplified.</span>
<span class="linecomment">;;     icicle-search: Corrected cand-nb adjustment when cycle with action fns.</span>
<span class="linecomment">;;     Renamed: icicle-search-action-fn to icicle-search-action,</span>
<span class="linecomment">;;              icicle-search-candidates to icicle-candidates-alist.</span>
<span class="linecomment">;; 2006/04/28 dadams</span>
<span class="linecomment">;;     icicle-retrieve-last-input, icicle-(apropos|prefix)-complete-1:</span>
<span class="linecomment">;;       Use icicle-highlight-initial-whitespace.</span>
<span class="linecomment">;; 2006/04/25 dadams</span>
<span class="linecomment">;;     icicle-completion-help: Emacs 21.3's help-insert-xref-button signature is different.</span>
<span class="linecomment">;; 2006/04/16 dadams</span>
<span class="linecomment">;;     Added: icicle-search-imenu.</span>
<span class="linecomment">;;     icicle-search: Bug fixes:</span>
<span class="linecomment">;;       Treat completion without cycling: error or singleton go-to.</span>
<span class="linecomment">;;       Only subtract one from candidate number for C- cycling, not regular cycling.</span>
<span class="linecomment">;; 2006/04/14 dadams</span>
<span class="linecomment">;;     icicle-search:</span>
<span class="linecomment">;;       Bug fix: Position was off by one.</span>
<span class="linecomment">;;       Highlight input match inside each main regexp match (or not).</span>
<span class="linecomment">;;         Bind icicle-update-input-hook and icicle-incremental-completion-flag.</span>
<span class="linecomment">;;       Extract code to define icicle-search-action-fn.</span>
<span class="linecomment">;;       Use icicle-search-candidates instead of local variable search-candidates.</span>
<span class="linecomment">;;       Respect icicle-search-cleanup-flag.</span>
<span class="linecomment">;;     Added: icicle-search-highlight-*, icicle-search-action-fn,</span>
<span class="linecomment">;;            icicle-(insert|save)-text-(from|to)-variable.</span>
<span class="linecomment">;;     Renamed icicle-search-refined-regexp to icicle-search-current-input.</span>
<span class="linecomment">;; 2006/04/09 dadams</span>
<span class="linecomment">;;     icicle-(apropos|prefix)-complete-1: Deal with icicle-arrows-respect-*-flag.</span>
<span class="linecomment">;;     Moved here from icicles-fn.el: icicle-customize-apropos*, icicle-repeat-complex-command.</span>
<span class="linecomment">;; 2006/04/07 dadams</span>
<span class="linecomment">;;     icicle-search: Highlight all occurrences at once (like isearch highlight, but not lazy).</span>
<span class="linecomment">;;                    Error if no match for initial regexp.</span>
<span class="linecomment">;;     icicle-occur: Bind icicle-search-highlight-all-flag to nil: don't highlight each line.</span>
<span class="linecomment">;; 2006/04/02 dadms</span>
<span class="linecomment">;;     Added: icicle-toggle-regexp-quote, icicle-find-file*-w-wildcards.</span>
<span class="linecomment">;;     icicle-find-file*: Use icicle-find-file*-w-wildcards.</span>
<span class="linecomment">;; 2006/03/31 dadams</span>
<span class="linecomment">;;     icicle-search: Wrap action function with unwind-protect to select minibuffer frame.</span>
<span class="linecomment">;;                    Use completion-ignore-case when highlighting search hits.</span>
<span class="linecomment">;;                    Protect delete-overlay with overlayp.</span>
<span class="linecomment">;;                    Turn off region highlighting (so can see highlighting done here).</span>
<span class="linecomment">;;                    Removed sit-for-period argument.</span>
<span class="linecomment">;;     icicle-candidate-set-save: Use prin1 instead of pp.</span>
<span class="linecomment">;; 2006/03/27 dadams</span>
<span class="linecomment">;;     Added: icicle-occur.</span>
<span class="linecomment">;;     icicle-search: Highlight also match of current regexp, inside that of regexp arg.</span>
<span class="linecomment">;;                    Use new faces icicle-search-*-regexp.</span>
<span class="linecomment">;;     icicle-search, icicle-switch-to-Completions-buf, icicle-move-to-next-completion:</span>
<span class="linecomment">;;       Use new, generic icicle-place-overlay.</span>
<span class="linecomment">;;     Removed icicle-place-search-overlay.</span>
<span class="linecomment">;; 2006/03/26 dadams</span>
<span class="linecomment">;;     icicle-search: Use icicle-search-overlay.  Ensure don't match twice at same position.</span>
<span class="linecomment">;;                    Added regexp arg.  Use 0 as sit-for default.</span>
<span class="linecomment">;;     Added: icicle-place-search-overlay.</span>
<span class="linecomment">;; 2006/03/25 dadams</span>
<span class="linecomment">;;     icicle-prefix-complete: Minor bug fix: Don't save try-completion if not a string.</span>
<span class="linecomment">;;     icicle-candidate-set-(save|retrieve): Allow use of a variable to save/retrieve.</span>
<span class="linecomment">;;     Added: icicle-candidate-set-(retrieve-from|save-to)-variable, icicle-*-no-display,</span>
<span class="linecomment">;;            icicle-prefix-complete-1.</span>
<span class="linecomment">;;     icicle-apropos-complete-1: Added no-display-p optional arg.</span>
<span class="linecomment">;;     Use no-display-p arg in calls to icicle-display-candidates-in-Completions.</span>
<span class="linecomment">;;     icicle-candidate-set-(retrieve-from|save-to)-cache-file: Pass a consp, not t.</span>
<span class="linecomment">;;     icicle-candidate-set-retrieve: Don't display *Completions*.</span>
<span class="linecomment">;; 2006/03/24 dadams</span>
<span class="linecomment">;;     Added icicle-delete-char.</span>
<span class="linecomment">;; 2006/03/23 dadams</span>
<span class="linecomment">;;     icicle-candidate-set-define: Rewrote.  Can also use at top level.</span>
<span class="linecomment">;;       Error if wrong result type.  Sort result.  Use display-completion-list and</span>
<span class="linecomment">;;       icicle-narrow-candidates (unless at top level).</span>
<span class="linecomment">;;     icicle-narrow-candidates: Can call from top-level (but not interactively).</span>
<span class="linecomment">;;     icicle-candidate-set-complement: Use icicle-maybe-sort-and-strip-candidates.</span>
<span class="linecomment">;;     Mention in doc strings of minibuffer and *Completions* functions: where, key.</span>
<span class="linecomment">;; 2006/03/22 dadams</span>
<span class="linecomment">;;     icicle-find-file*: Use default-directory as default, so opens directory on empty input.</span>
<span class="linecomment">;;     icicle-prefix-complete:</span>
<span class="linecomment">;;       Save icicle-current-regexp-input.</span>
<span class="linecomment">;;       Set icicle-current-input to common prefix.  Use it everywhere here.</span>
<span class="linecomment">;;     Calls to icicle-display-candidates-in-Completions: no root arg now.</span>
<span class="linecomment">;; 2006/03/21 dadams</span>
<span class="linecomment">;;     icicle-insert-input: Bug fix: Use directory of input, not default-directory.</span>
<span class="linecomment">;;                                   Append a slash if input itself is a directory.</span>
<span class="linecomment">;; 2006/03/20 dadams</span>
<span class="linecomment">;;     icicle-retrieve-last-input: Insert icicle-current-regexp-input if repeat C-l.</span>
<span class="linecomment">;;     Added: icicle-insert-input.</span>
<span class="linecomment">;; 2006/03/19 dadams</span>
<span class="linecomment">;;     icicle-apropos-complete-1: Call icicle-save-or-restore-input with non-nil regexp-p arg.</span>
<span class="linecomment">;; 2006/03/17 dadams</span>
<span class="linecomment">;;     Added: icicle-add/update-saved-completion-set, icicle-remove-saved-completion-set,</span>
<span class="linecomment">;;            icicle-retrieve-candidates-from-set.</span>
<span class="linecomment">;;     Removed: icicle-cache-file.</span>
<span class="linecomment">;;     icicle-candidate-set-retrieve: Read candidates set and use its cache file.</span>
<span class="linecomment">;;                                    Enable recursive minibuffers.</span>
<span class="linecomment">;;     icicle-candidate-set-save: Read candidates set and cache-file names.</span>
<span class="linecomment">;;                                Use icicle-add/update-saved-completion-set.</span>
<span class="linecomment">;;     icicle-barf-if-outside-minibuffer: Move interactive test to calling functions.</span>
<span class="linecomment">;;     icicle-files-within: Moved to icicle-fn.el.</span>
<span class="linecomment">;; 2006/03/16 dadams</span>
<span class="linecomment">;;     Added: icicle*-saved-completion-set.</span>
<span class="linecomment">;; 2006/03/14 dadams</span>
<span class="linecomment">;;     icicle-narrow-candidates: Handle no-catch error.  Don't use icicle-completing-p.</span>
<span class="linecomment">;;     icicle-candidate-set-complement:</span>
<span class="linecomment">;;       Do what we do in icicle-candidate-set-retrieve: call icicle-narrow-candidates.</span>
<span class="linecomment">;;     icicle-candidate-set-(retrieve|complement): Msg when display.</span>
<span class="linecomment">;;     icicle-(apropos|prefix)-complete-1:</span>
<span class="linecomment">;;       Removed test for last-command = icicle-candidate-set-complement.</span>
<span class="linecomment">;; 2006/03/13 dadams</span>
<span class="linecomment">;;     Added: icicle-candidate-set-(retrieve-from|save-to)-cache-file.</span>
<span class="linecomment">;;     icicle-candidate-set-(retrieve|save): C-u uses cache file.</span>
<span class="linecomment">;; 2006/03/12 dadams</span>
<span class="linecomment">;;     Added: icicle-dired-saved-file-candidates(-other-window), icicle-locate-file*,</span>
<span class="linecomment">;;            icicle-files-within.</span>
<span class="linecomment">;; 2006/03/11 dadams</span>
<span class="linecomment">;;     icicle-find-file*, icicle-delete-file*:</span>
<span class="linecomment">;;       Reverted to simple form (moved directory control to icicles-mac.el).</span>
<span class="linecomment">;;     icicle-keep-only-past-inputs: Expand file name relative to directory of last input.</span>
<span class="linecomment">;; 2006/03/10 dadams</span>
<span class="linecomment">;;     icicle-find-file*, icicle-delete-file*: Expand file name relative to dir of last input.</span>
<span class="linecomment">;;     Renamed icicle-minibuffer-contents to icicle-minibuffer-contents-from-minibuffer.</span>
<span class="linecomment">;; 2006/03/09 dadams</span>
<span class="linecomment">;;     icicle-barf-if-outside-*: Removed argument - use this-command instead.</span>
<span class="linecomment">;; 2006/03/08 dadams</span>
<span class="linecomment">;;     icicle-bookmark: Use default value, not init value, for completing-read.</span>
<span class="linecomment">;; 2006/03/07 dadams</span>
<span class="linecomment">;;     icicle-doc: Save table in minibuffer-completion-table, so can access via C-RET too.</span>
<span class="linecomment">;;     icicle-insert-thesaurus-entry, icicle-*doc:</span>
<span class="linecomment">;;       Removed binding of icicle-incremental-completion-flag to nil.</span>
<span class="linecomment">;;     Added: icicle-barf-if-outside-(minibuffer|Completions).  Use in appropriate commands.</span>
<span class="linecomment">;;     Added: icicle-non-whitespace-string-p.  Use in icicle-*doc.</span>
<span class="linecomment">;; 2006/03/06 dadams</span>
<span class="linecomment">;;     Update doc strings of *-thesaurus*.</span>
<span class="linecomment">;; 2006/03/05 dadams</span>
<span class="linecomment">;;     Added: icicle-toggle-incremental-completion, toggle-icicle-incremental-completion.</span>
<span class="linecomment">;; 2006/03/03 dadams</span>
<span class="linecomment">;;     icicle-*doc: Clarified doc strings.  Updated prompts.</span>
<span class="linecomment">;;     Added: icicle-help-button.  Use in icicle-completion-help.</span>
<span class="linecomment">;; 2006/03/02 dadams</span>
<span class="linecomment">;;     icicle-insert-thesaurus-entry, icicle-complete-thesaurus-entry:</span>
<span class="linecomment">;;       Use synonyms-ensure-synonyms-read-from-cache.  Clarified doc strings.</span>
<span class="linecomment">;;     icicle-complete-thesaurus-entry: Error if no word at point.  Correct looking-at regexp.</span>
<span class="linecomment">;; 2006/03/01 dadams</span>
<span class="linecomment">;;     Added: icicle-insert-thesaurus-entry, icicle-insert-thesaurus-entry-cand-fn,</span>
<span class="linecomment">;;            icicle-complete-thesaurus-entry.</span>
<span class="linecomment">;;     icicle-(previous|next)-(apropos|prefix)-candidate-action: Wrap in save-excursion.</span>
<span class="linecomment">;;     Use icicle-clear-minibuffer instead of icicle-erase-minibuffer non-interactively.</span>
<span class="linecomment">;;     icicle-erase-minibuffer: Use icicle-call-then-update-Completions.</span>
<span class="linecomment">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
<span class="linecomment">;;</span>
<span class="linecomment">;;; Code:</span>

<span class="linecomment">;; You need not load this file.  It contains only documentation.</span>

(provide 'icicles-chg)

<span class="linecomment">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
<span class="linecomment">;;; icicles-chg.el ends here</span></span></pre></div><div class="wrapper close"></div></div><div class="wrapper close"></div></div><div class="footer"><hr /><span class="gotobar bar"><a class="local" href="http://www.emacswiki.org/emacs/SiteMap">SiteMap</a> <a class="local" href="http://www.emacswiki.org/emacs/Search">Search</a> <a class="local" href="http://www.emacswiki.org/emacs/ElispArea">ElispArea</a> <a class="local" href="http://www.emacswiki.org/emacs/HowTo">HowTo</a> <a class="local" href="http://www.emacswiki.org/emacs/Glossary">Glossary</a> <a class="local" href="http://www.emacswiki.org/emacs/RecentChanges">RecentChanges</a> <a class="local" href="http://www.emacswiki.org/emacs/News">News</a> <a class="local" href="http://www.emacswiki.org/emacs/Problems">Problems</a> <a class="local" href="http://www.emacswiki.org/emacs/Suggestions">Suggestions</a> </span><span class="translation bar"><br />  <a class="translation new" rel="nofollow" href="http://www.emacswiki.org/emacs?action=translate;id=icicles-chg.el;missing=de_es_fr_it_ja_ko_pt_ru_se_zh">Add Translation</a></span><span class="edit bar"><br /> <a class="comment local" href="http://www.emacswiki.org/emacs/Comments_on_icicles-chg.el">Talk</a> <a class="edit" accesskey="e" title="Click to edit this page" rel="nofollow" href="http://www.emacswiki.org/emacs?action=edit;id=icicles-chg.el">Edit this page</a> <a class="history" rel="nofollow" href="http://www.emacswiki.org/emacs?action=history;id=icicles-chg.el">View other revisions</a> <a class="admin" rel="nofollow" href="http://www.emacswiki.org/emacs?action=admin;id=icicles-chg.el">Administration</a></span><!-- test --><span class="time"><br /> Last edited 2013-01-18 17:33 UTC by <a class="author" title="from inet-rmmc08-o.oracle.com" href="http://www.emacswiki.org/emacs/DrewAdams">DrewAdams</a> <a class="diff" rel="nofollow" href="http://www.emacswiki.org/emacs?action=browse;diff=2;id=icicles-chg.el">(diff)</a></span><div style="float:right; margin-left:1ex;">
<!-- Creative Commons License -->
<a href="http://creativecommons.org/licenses/GPL/2.0/"><img alt="CC-GNU GPL" style="border:none" src="/pics/cc-GPL-a.png" /></a>
<!-- /Creative Commons License -->
</div>

<!--
<rdf:RDF xmlns="http://web.resource.org/cc/"
 xmlns:dc="http://purl.org/dc/elements/1.1/"
 xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
<Work rdf:about="">
   <license rdf:resource="http://creativecommons.org/licenses/GPL/2.0/" />
  <dc:type rdf:resource="http://purl.org/dc/dcmitype/Software" />
</Work>

<License rdf:about="http://creativecommons.org/licenses/GPL/2.0/">
   <permits rdf:resource="http://web.resource.org/cc/Reproduction" />
   <permits rdf:resource="http://web.resource.org/cc/Distribution" />
   <requires rdf:resource="http://web.resource.org/cc/Notice" />
   <permits rdf:resource="http://web.resource.org/cc/DerivativeWorks" />
   <requires rdf:resource="http://web.resource.org/cc/ShareAlike" />
   <requires rdf:resource="http://web.resource.org/cc/SourceCode" />
</License>
</rdf:RDF>
-->

<p class="legal">
This work is licensed to you under version 2 of the
<a href="http://www.gnu.org/">GNU</a> <a href="/GPL">General Public License</a>.
Alternatively, you may choose to receive this work under any other
license that grants the right to use, copy, modify, and/or distribute
the work, as long as that license imposes the restriction that
derivative works have to grant the same rights and impose the same
restriction. For example, you may choose to receive this work under
the
<a href="http://www.gnu.org/">GNU</a>
<a href="/FDL">Free Documentation License</a>, the
<a href="http://creativecommons.org/">CreativeCommons</a>
<a href="http://creativecommons.org/licenses/sa/1.0/">ShareAlike</a>
License, the XEmacs manual license, or
<a href="/OLD">similar licenses</a>.
</p>
</div>
</body>
</html>
