#!/bin/sh
#
# Pushes the branch to the same name on the server and sets upstream.
#

function show_help() {
    echo "Pushes to same branch on the remote. Sets upstream"
    echo
    echo "usage: git pushit [<remote>]"
}
while getopts "h?" opt; do
    case "$opt" in
	h|\?)
	    show_help
	    exit 0
	    ;;
    esac
done

remote=$1

if [ -z "$remote" ]; then
    remote=origin
fi

if [ -n "$*" ]; then
    echo Invalid options: $*
    show_help
    exit
fi

branch=$(git rev-parse --abbrev-ref HEAD)
if [ $branch = "HEAD" ]; then
    echo "Can't push. You're not on any branch."
    exit 1
else
    git push --set-upstream $remote $branch
fi  
